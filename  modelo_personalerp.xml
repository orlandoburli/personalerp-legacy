<?xml version="1.0" encoding="UTF-8"?>
<Db flnm=" modelo_personalerp" nm="dbpersonalerp" ver="1.3.4">
  <VerLbl/>
  <VerNotes/>
  <DefTblOpts/>
  <DocFolder>/Users/orlandoburli/Documents/Projetos/PersonalErp</DocFolder>
  <Sch Cm="standard public schema" nm="personalerp">
    <Tbl UsSo="1" nm="aberturacaixaloja">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocaixa, codigoaberturacaixa" nm="pk_aberturacaixaloja"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocaixa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('aberturacaixaloja_codigoaberturacaixa_seq'::regclass)" nm="codigoaberturacaixa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusaberturacaixaloja" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraaberturacaixa" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedorabertura" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedorabertura" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedorabertura" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorafechamentocaixa" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedorfechamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedorfechamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedorfechamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoraberturacaixaloja" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorfechamentocaixaloja" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="caixaloja_aberturacaixaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="caixaloja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="aberturacaixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigocaixa" prCl="codigocaixa"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_abertura_aberturacaixaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="aberturacaixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresavendedorabertura" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedorabertura" prCl="codigoloja"/>
        <ClPr cdCl="codigovendedorabertura" prCl="codigovendedor"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_fechamento_aberturacaixaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="aberturacaixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresavendedorfechamento" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedorfechamento" prCl="codigoloja"/>
        <ClPr cdCl="codigovendedorfechamento" prCl="codigovendedor"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_aberturacaixaloja" upd="1">
        <Sql>personalerp.fn_replica_aberturacaixaloja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="acaoobjeto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoobjeto, codigoacaoobjeto" nm="acaoobjeto_pk"/>
      <Cl au="0" df="" nm="codigoobjeto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('acaoobjeto_codigoacaoobjeto_seq'::regclass)" nm="codigoacaoobjeto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeacaoobjeto" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="objeto_acaoobjeto_fk" prLkCl="codigoobjeto" upAc="0">
        <PrTb mn="0" nm="objeto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="acaoobjeto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoobjeto" prCl="codigoobjeto"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_acaoobjeto" upd="1">
        <Sql>personalerp.fn_replica_acaoobjeto()</Sql>
      </Trg>
      <UniqueConstraints>
        <UnCon nm="acaoobjeto_unique_nomeobjeto">
          <ClNs>nomeacaoobjeto, codigoacaoobjeto, codigoobjeto</ClNs>
        </UnCon>
      </UniqueConstraints>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="baixacontapagar">
      <Cm>Baixas de contas a pagar</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigopagamento, codigoempresa, codigoloja, codigocontapagar, codigoempresacontapagar, codigolojacontapagar" nm="baixacontapagar_pkey"/>
      <Cl au="0" df="" nm="codigocontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorbaixacontapagar" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contapagar_baixacontapagar_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contapagar" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="baixacontapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacontapagar" prCl="codigoempresa"/>
        <ClPr cdCl="codigocontapagar" prCl="codigocontapagar"/>
        <ClPr cdCl="codigolojacontapagar" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="pagamento_baixacontapagar_fk" prLkCl="codigopagamento" upAc="3">
        <PrTb mn="0" nm="pagamento" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="baixacontapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopagamento" prCl="codigopagamento"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_baixacontapagar" upd="1">
        <Sql>personalerp.fn_replica_baixacontapagar()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="baixacontareceber">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresacontareceber, codigolojacontareceber, codigocontareceber, codigoempresa, codigoloja, codigorecebimento" nm="pk_baixacontareceber"/>
      <Cl au="0" df="" nm="codigoempresacontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigorecebimento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorrecebimento" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contareceber_baixacontareceber" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contareceber" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="baixacontareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacontareceber" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontareceber" prCl="codigoloja"/>
        <ClPr cdCl="codigocontareceber" prCl="codigocontareceber"/>
      </Fk>
      <Fk deAc="3" nm="recebimento_baixacontareceber" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="recebimento" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="baixacontareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigorecebimento" prCl="codigorecebimento"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_baixacontareceber" upd="1">
        <Sql>personalerp.fn_replica_baixacontareceber()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="banco">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigobanco" nm="pk_banco"/>
      <Cl au="0" df="" nm="codigobanco" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomebanco" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_banco" upd="1">
        <Sql>personalerp.fn_replica_banco()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="bandeiracartao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigobandeira" nm="pk_bandeiracartao"/>
      <Cl au="0" df="nextval('bandeiracartao_codigobandeira_seq'::regclass)" nm="codigobandeira" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomebandeira" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_bandeiracartao" upd="1">
        <Sql>personalerp.fn_replica_bandeiracartao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="caixaloja">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocaixa" nm="pk_caixaloja"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('caixaloja_codigocaixa_seq'::regclass)" nm="codigocaixa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocaixa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_caixaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="caixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_caixaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="caixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_caixaloja" upd="1">
        <Sql>personalerp.fn_replica_caixaloja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="cargo">
      <Cm>Tabela de cargos e funcoes</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocargo, codigoempresa, codigoloja" nm="cargo_pk"/>
      <Cl au="0" df="nextval('cargo_codigocargo_seq'::regclass)" nm="codigocargo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomecargo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocbo" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Código do CBO (oficial)</Cm>
      </Cl>
      <Cl au="0" df="" nm="statuscargo" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>A - Ativo I - Inativo</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="cbo_cargo_fk" prLkCl="codigocbo" upAc="3">
        <PrTb mn="0" nm="cbo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="cargo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocbo" prCl="codigocbo"/>
      </Fk>
      <Fk deAc="3" nm="empresa_cargo_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="cargo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_cargo_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="cargo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_cargo" upd="1">
        <Sql>personalerp.fn_replica_cargo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="cbo">
      <Cm>Tabela de CBO - Codigo brasileiro de ocupações</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocbo" nm="cbo_pk"/>
      <Cl au="0" df="" nm="codigocbo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Código do CBO (oficial)</Cm>
      </Cl>
      <Cl au="0" df="" nm="descricaocbo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="300" sc="null" sg="1" un="0"/>
        <Cm>Descricao do cargo CBO</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_cbo" upd="1">
        <Sql>personalerp.fn_replica_cbo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="centrocusto">
      <Cm>Tabela de Centro de Custos.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocentrocusto" nm="centrocusto_pk"/>
      <Cl au="0" df="nextval('centrocusto_codigocentrocusto_seq'::regclass)" nm="codigocentrocusto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomecentrocusto" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_centrocusto" upd="1">
        <Sql>personalerp.fn_replica_centrocusto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="cfop">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocfop, complementocfop" nm="pk_cfop"/>
      <Cl au="0" df="" nm="codigocfop" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="complementocfop" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocfop" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipocfop" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="classificacaocfop" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoescfop" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="500" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_cfop" upd="1">
        <Sql>personalerp.fn_replica_cfop()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="chequeemitido">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigochequeemitido" nm="chequeemitido_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('chequeemitido_tmp_codigochequeemitido_seq'::regclass)" nm="codigochequeemitido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerochequeemitido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="sequencialmovimentacaocontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorchequeemitido" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataemissaochequeemitido" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="bomparachequeemitido" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresadestinatario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojadestinatario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoadestinatario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statuschequeemitido" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datacompensacaochequeemitido" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="baixacontapagar_chequeemitido_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="pagamento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="chequeemitido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojapagamento" prCl="codigoloja"/>
        <ClPr cdCl="codigopagamento" prCl="codigopagamento"/>
        <ClPr cdCl="codigoempresapagamento" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="contabancaria_chequeemitido_fk" prLkCl="codigocontabancaria" upAc="3">
        <PrTb mn="0" nm="contabancaria" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="chequeemitido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontabancaria" prCl="codigocontabancaria"/>
        <ClPr cdCl="codigolojacontabancaria" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresacontabancaria" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="empresa_chequeemitido_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="chequeemitido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_chequeemitido_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="chequeemitido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="movimentacaocontabancaria_chequeemitido" prLkCl="codigocontabancaria" upAc="3">
        <PrTb mn="0" nm="movimentacaocontabancaria" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="chequeemitido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontabancaria" prCl="codigocontabancaria"/>
        <ClPr cdCl="sequencialmovimentacaocontabancaria" prCl="sequencialmovimentacaocontabancaria"/>
        <ClPr cdCl="codigoempresacontabancaria" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontabancaria" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="pessoa_chequeemitido_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="chequeemitido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresadestinatario" prCl="codigoempresa"/>
        <ClPr cdCl="codigopessoadestinatario" prCl="codigopessoa"/>
        <ClPr cdCl="codigolojadestinatario" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_chequeemitido" upd="1">
        <Sql>personalerp.fn_replica_chequeemitido()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="chequerecebido">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigochequerecebido" nm="pk_chequerecebido"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('chequerecebido_codigochequerecebido_seq'::regclass)" nm="codigochequerecebido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerochequerecebido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorchequerecebido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataemissaochequerecebido" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="bomparachequerecebido" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigobancochequerecebido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigorecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="agenciachequerecebido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="digitoagenciachequerecebido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="40" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="contachequerecebido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="digitocontachequerecebido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statuschequerecebido" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="sequencialmovimentacaocontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_chequerecebido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="chequerecebido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_chequerecebido" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="chequerecebido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoaemitente" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoaemitente" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigoempresaemitente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaemitente" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_chequerecebido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="chequerecebido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="movimentacaocontabancaria_chequerecebido" prLkCl="codigocontabancaria" upAc="3">
        <PrTb mn="0" nm="movimentacaocontabancaria" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="chequerecebido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontabancaria" prCl="codigocontabancaria"/>
        <ClPr cdCl="codigoempresacontabancaria" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontabancaria" prCl="codigoloja"/>
        <ClPr cdCl="sequencialmovimentacaocontabancaria" prCl="sequencialmovimentacaocontabancaria"/>
      </Fk>
      <Fk deAc="3" nm="recebimento_chequerecebido" prLkCl="codigorecebimento" upAc="3">
        <PrTb mn="0" nm="recebimento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="chequerecebido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigorecebimento" prCl="codigorecebimento"/>
        <ClPr cdCl="codigoempresarecebimento" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojarecebimento" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_chequerecebido" upd="1">
        <Sql>personalerp.fn_replica_chequerecebido()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="cidade">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocidade" nm="cidade_pk"/>
      <Cl au="0" df="nextval('cidade_codigocidade_seq'::regclass)" nm="codigocidade" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomecidade" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoibgecidade" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoestado" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="estado_cidade_fk" prLkCl="codigoestado" upAc="0">
        <PrTb mn="0" nm="estado" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="cidade" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoestado" prCl="codigoestado"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_cidade" upd="1">
        <Sql>personalerp.fn_replica_cidade()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="comissaovenda">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigometavenda, codigoitemmetavenda, codigoempresavendedor, codigolojavendedor, codigovendedor" nm="pk_comissaovenda"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigometavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoitemmetavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedor" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedor" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedor" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorcomissaovenda" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoratingidometavenda" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="itemmetavenda_comissaovenda" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="itemmetavenda" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="comissaovenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigometavenda" prCl="codigometavenda"/>
        <ClPr cdCl="codigoitemmetavenda" prCl="codigoitemmetavenda"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_comissaovenda" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="comissaovenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresavendedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedor" prCl="codigoloja"/>
        <ClPr cdCl="codigovendedor" prCl="codigovendedor"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_comissaovenda" upd="1">
        <Sql>personalerp.fn_replica_comissaovenda()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contabancaria">
      <Cm>Tabela com as contas bancarias usadas pelas empresas</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocontabancaria, codigoempresa, codigoloja" nm="contabancaria_pk"/>
      <Cl au="0" df="nextval('contabancaria_codigocontabancaria_seq'::regclass)" nm="codigocontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocontabancaria" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="40" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigobancocontabancaria" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerocontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="digitoagenciacontabancaria" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroagenciacontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="digitocontabancaria" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagcontacorrentecontabancaria" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>S - Sim N - Não</Cm>
      </Cl>
      <Cl au="0" df="" nm="flagcontapoupancacontabancaria" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>S - Sim N - Não</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_contabancaria_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contabancaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_contabancaria_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contabancaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contabancaria" upd="1">
        <Sql>personalerp.fn_replica_contabancaria()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contapagar">
      <Cm>Tabela de Contas a Pagar</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocontapagar, codigoempresa, codigoloja" nm="contapagar_pk"/>
      <Cl au="0" df="nextval('contapagar_codigocontapagar_seq'::regclass)" nm="codigocontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datalancamentocontapagar" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocontapagar" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoplanoconta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocentrocusto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoacontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapessoacontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapessoacontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerotitulocontapagar" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipodocumento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="situacaocontapagar" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>A - Aberto Q - Quitado C - Cancelado P - Previsto</Cm>
      </Cl>
      <Cl au="0" df="" nm="datavencimentocontapagar" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valormultacontapagar" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualmultacontapagar" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorjurosdiariocontapagar" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualjurosdiariocontapagar" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorcontapagar" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descontocontapagar" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descontoatecontapagar" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoportador" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaocontapagar" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="parcelacontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaocancelamentocontapagar" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroparcelascontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataemissaocontapagar" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagdrecontapagar" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="S" nm="flagresumocontapagar" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="centrocusto_contapagar_fk" prLkCl="codigocentrocusto" upAc="3">
        <PrTb mn="0" nm="centrocusto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocentrocusto" prCl="codigocentrocusto"/>
      </Fk>
      <Fk deAc="3" nm="empresa_contapagar_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_contapagar_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="pessoa_contapagar_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresapessoacontapagar" prCl="codigoempresa"/>
        <ClPr cdCl="codigopessoacontapagar" prCl="codigopessoa"/>
        <ClPr cdCl="codigolojapessoacontapagar" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="planoconta_contapagar_fk" prLkCl="codigoplanoconta" upAc="3">
        <PrTb mn="0" nm="planoconta" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanoconta" prCl="codigoplanoconta"/>
      </Fk>
      <Fk deAc="3" nm="portador_contapagar_fk" prLkCl="codigoportador" upAc="3">
        <PrTb mn="0" nm="portador" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoportador" prCl="codigoportador"/>
      </Fk>
      <Fk deAc="3" nm="tipodocumento_contapagar_fk" prLkCl="codigotipodocumento" upAc="3">
        <PrTb mn="0" nm="tipodocumento" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipodocumento" prCl="codigotipodocumento"/>
      </Fk>
      <Idx clu="0" nm="idx_cp_planoconta" unq="0">
        <ClNs>codigoplanoconta</ClNs>
      </Idx>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contapagar" upd="1">
        <Sql>personalerp.fn_replica_contapagar()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contareceber">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocontareceber" nm="pk_contareceber"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('contareceber_codigocontareceber_seq'::regclass)" nm="codigocontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="parcelacontareceber" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datalancamentocontareceber" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroparcelascontareceber" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataemissaocontareceber" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerotitulocontareceber" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="situacaocontareceber" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datavencimentocontareceber" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valormultacontareceber" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualmultacontareceber" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorjurosdiariocontareceber" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualjurosdiariocontareceber" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorcontareceber" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descontocontareceber" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descontoatecontareceber" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaocontareceber" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaocancelamentocontareceber" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoplanoconta" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocentrocusto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipodocumento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoportador" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocontareceber" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagdrecontareceber" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="centrocusto_contareceber" prLkCl="codigocentrocusto" upAc="3">
        <PrTb mn="0" nm="centrocusto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocentrocusto" prCl="codigocentrocusto"/>
      </Fk>
      <Fk deAc="3" nm="empresa_contareceber" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_contareceber" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacliente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacliente" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoacliente" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoacliente" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="loja_contareceber" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="planoconta_contareceber" prLkCl="codigoplanoconta" upAc="3">
        <PrTb mn="0" nm="planoconta" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanoconta" prCl="codigoplanoconta"/>
      </Fk>
      <Fk deAc="3" nm="portador_contareceber" prLkCl="codigoportador" upAc="3">
        <PrTb mn="0" nm="portador" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoportador" prCl="codigoportador"/>
      </Fk>
      <Fk deAc="3" nm="tipodocumento_contareceber" prLkCl="codigotipodocumento" upAc="3">
        <PrTb mn="0" nm="tipodocumento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipodocumento" prCl="codigotipodocumento"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contareceber" upd="1">
        <Sql>personalerp.fn_replica_contareceber()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contaresumo">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocontaresumo" nm="pk_contaresumo"/>
      <Cl au="0" df="nextval('contaresumo_codigocontaresumo_seq'::regclass)" nm="codigocontaresumo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipocontaresumo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontaresumopai" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontaresumototal" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocontaresumo" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="negritocontaresumo" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ordemcontaresumo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contaresumo_contaresumo_2" prLkCl="codigocontaresumo" upAc="3">
        <PrTb mn="0" nm="contaresumo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contaresumo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontaresumopai" prCl="codigocontaresumo"/>
      </Fk>
      <Fk deAc="3" nm="contaresumo_contaresumo_3" prLkCl="codigocontaresumo" upAc="3">
        <PrTb mn="0" nm="contaresumo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contaresumo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontaresumototal" prCl="codigocontaresumo"/>
      </Fk>
      <Fk deAc="3" nm="tipocontaresumo_contaresumo" prLkCl="codigotipocontaresumo" upAc="3">
        <PrTb mn="0" nm="tipocontaresumo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contaresumo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipocontaresumo" prCl="codigotipocontaresumo"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contaresumo" upd="1">
        <Sql>personalerp.fn_replica_contaresumo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contaresumoplanoconta">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocontaresumo, codigoplanoconta" nm="pk_contaresumoplanoconta"/>
      <Cl au="0" df="" nm="codigocontaresumo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoplanoconta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contaresumo_contaresumoplanoconta" prLkCl="codigocontaresumo" upAc="3">
        <PrTb mn="0" nm="contaresumo" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contaresumoplanoconta" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontaresumo" prCl="codigocontaresumo"/>
      </Fk>
      <Fk deAc="3" nm="planoconta_contaresumoplanoconta" prLkCl="codigoplanoconta" upAc="3">
        <PrTb mn="0" nm="planoconta" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contaresumoplanoconta" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanoconta" prCl="codigoplanoconta"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contaresumoplanoconta" upd="1">
        <Sql>personalerp.fn_replica_contaresumoplanoconta()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contratotrabalho">
      <Cm>Contratos de trabalho feitos com o funcionario</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocontratotrabalho" nm="contratotrabalho_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('contratotrabalho_codigocontratotrabalho_seq'::regclass)" nm="codigocontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainiciocontratotrabalho" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data de inicio do contrato de trabalho</Cm>
      </Cl>
      <Cl au="0" df="" nm="diasexperiencia1contratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Numero de dias do 1º periodo de experiencia</Cm>
      </Cl>
      <Cl au="0" df="" nm="diasexperiencia2contratotrabalho" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Numero de dias do 2º periodo de experiencia</Cm>
      </Cl>
      <Cl au="0" df="" nm="statuscontratotrabalho" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>A - Ativo I - Inativo</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacargo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacargo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocargo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamotivodesligamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamotivodesligamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomotivodesligamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigofuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresahorariotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojahorariotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigohorariotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoescontratotrabalho" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datafimcontratotrabalho" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="S" nm="flagcarteiraassinadacontratotrabalho" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresalotacao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojalotacao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="cargo_contratotrabalho_fk" prLkCl="codigocargo" upAc="3">
        <PrTb mn="0" nm="cargo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocargo" prCl="codigocargo"/>
        <ClPr cdCl="codigoempresacargo" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacargo" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="empresa_contratotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="funcionario_contratotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="funcionario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresafuncionario" prCl="codigoempresa"/>
        <ClPr cdCl="codigofuncionario" prCl="codigofuncionario"/>
        <ClPr cdCl="codigolojafuncionario" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="horariotrabalho_contratotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="horariotrabalho" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresahorariotrabalho" prCl="codigoempresa"/>
        <ClPr cdCl="codigohorariotrabalho" prCl="codigohorariotrabalho"/>
        <ClPr cdCl="codigolojahorariotrabalho" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_contratotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_contratotrabalho_lotacao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresalotacao" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojalotacao" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="motivodesligamento_contratotrabalho_fk" prLkCl="codigomotivodesligamento" upAc="3">
        <PrTb mn="0" nm="motivodesligamento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="contratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigomotivodesligamento" prCl="codigomotivodesligamento"/>
        <ClPr cdCl="codigoempresamotivodesligamento" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojamotivodesligamento" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contratotrabalho" upd="1">
        <Sql>personalerp.fn_replica_contratotrabalho()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="contratotrabalhofolhapagamento">
      <Cm>Funcionarios que entraram nesta folha de pagamento (vinculo com contrato de trabalho)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigofolhapagamento, codigoempresa, codigoloja, codigoempresacontratotrabalho, codigolojacontratotrabalho, codigocontratotrabalho" nm="contratotrabalhofolhapagamento_pk"/>
      <Cl au="0" df="" nm="codigofolhapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="salariobase" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Salario Base</Cm>
      </Cl>
      <Cl au="0" df="" nm="baseinss" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor base do Inss</Cm>
      </Cl>
      <Cl au="0" df="" nm="basefgts" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Base de calculo do FGTS</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfgts" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do FGTS</Cm>
      </Cl>
      <Cl au="0" df="" nm="baseirrf" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Base de calculo IRRF</Cm>
      </Cl>
      <Cl au="0" df="" nm="faixairrf" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Percentual do IRRF usado</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorinsspatronal" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contratotrabalho_contratotrabalhofolhapagamento_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contratotrabalho" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contratotrabalhofolhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacontratotrabalho" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontratotrabalho" prCl="codigoloja"/>
        <ClPr cdCl="codigocontratotrabalho" prCl="codigocontratotrabalho"/>
      </Fk>
      <Fk deAc="3" nm="folhapagamento_contratotrabalhofolhapagamento_fk" prLkCl="codigofolhapagamento" upAc="3">
        <PrTb mn="0" nm="folhapagamento" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="contratotrabalhofolhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofolhapagamento" prCl="codigofolhapagamento"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_contratotrabalhofolhapagamento" upd="1">
        <Sql>personalerp.fn_replica_contratotrabalhofolhapagamento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="curral">
      <Cm>Tabela de Currais</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocurral" nm="curral_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('curral_codigocurral_seq'::regclass)" nm="codigocurral" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocurral" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_curral_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="curral" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_curral" upd="1">
        <Sql>personalerp.fn_replica_curral()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="dependente">
      <Cm>Tabela de dependentes do funcionario.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigodependente, codigofuncionario, codigoempresa, codigoloja, codigoverba" nm="dependente_pk"/>
      <Cl au="0" df="nextval('dependente_codigodependente_seq'::regclass)" nm="codigodependente" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigofuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomedependente" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipodependente" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Tipo de dependente. F - Filho / Filha / Enteado (normal) I - Filho / Filha / Enteado (inválido) C - Cônjugue</Cm>
      </Cl>
      <Cl au="0" df="" nm="datainicialdependente" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data inicial da dependencia</Cm>
      </Cl>
      <Cl au="0" df="" nm="datafinaldependente" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data final da dependencia. Pros conjugues e invalidos, deixar em branco.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="funcionario_dependente_fk" prLkCl="codigofuncionario" upAc="3">
        <PrTb mn="0" nm="funcionario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="dependente" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofuncionario" prCl="codigofuncionario"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="verba_dependente_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="verba" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="dependente" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoverba" prCl="codigoverba"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_dependente" upd="1">
        <Sql>personalerp.fn_replica_dependente()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="dimensaotempo">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="data" nm="pk_dimensaotempo"/>
      <Cl au="0" df="" nm="data" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ano" nu="1">
        <DT arr="0" ds="Double" en="" id="8" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="mes" nu="1">
        <DT arr="0" ds="Double" en="" id="8" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemes" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dia" nu="1">
        <DT arr="0" ds="Double" en="" id="8" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="diadoano" nu="1">
        <DT arr="0" ds="Double" en="" id="8" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="diadasemana" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="semanacalendario" nu="1">
        <DT arr="0" ds="Double" en="" id="8" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataformatada" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quadrimestredescricao" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quadrimestreano" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="anomes" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="anosemana" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="messemana" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="messemanadesc" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="iniciosemana" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fimsemana" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="primeiromes" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ultimodiames" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Idx clu="0" nm="idx_dimensaotempo_ano" unq="0">
        <ClNs>ano</ClNs>
      </Idx>
      <Idx clu="0" nm="idx_dimensaotempo_quadrimestre" unq="0">
        <ClNs>quadrimestreano</ClNs>
      </Idx>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_dimensaotempo" upd="1">
        <Sql>personalerp.fn_replica_dimensaotempo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="distribuicaocusto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigodistribuicaocusto" nm="pk_distribuicaocusto"/>
      <Cl au="0" df="nextval('distribuicaocusto_codigodistribuicaocusto_seq'::regclass)" nm="codigodistribuicaocusto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualcusto" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoplanoconta" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresareferencia" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojareferencia" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialdistribuicaocusto" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datafinaldistribuicaocusto" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_distribuicaocusto" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="distribuicaocusto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_referencia_distribuicaocusto" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="distribuicaocusto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresareferencia" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojareferencia" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="planoconta_distribuicaocusto" prLkCl="codigoplanoconta" upAc="3">
        <PrTb mn="0" nm="planoconta" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="distribuicaocusto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanoconta" prCl="codigoplanoconta"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_distribuicaocusto" upd="1">
        <Sql>personalerp.fn_replica_distribuicaocusto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="empresa">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa" nm="pk_empresa"/>
      <Cl au="0" df="nextval('empresa_codigoempresa_seq'::regclass)" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="razaosocialempresa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fantasiaempresa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_empresa" upd="1">
        <Sql>personalerp.fn_replica_empresa()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="enderecopessoa">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigopessoa, codigoempresa, codigoloja, codigoenderecopessoa" nm="enderecopessoa_pk"/>
      <Cl au="0" df="" nm="codigopessoa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('enderecopessoa_codigoenderecopessoa_seq'::regclass)" nm="codigoenderecopessoa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="emailenderecopessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="logradouroenderecopessoa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="bairroenderecopessoa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocidadeenderecopessoa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cependerecopessoa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="8" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone1enderecopessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone2enderecopessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipoenderecopessoa" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cpfcnpjenderecopessoa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="18" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fantasiaapelidoenderecopessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="inscricaoestadualenderecopessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="inscricaomunicipalenderecopessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="cidade_enderecopessoa_fk" prLkCl="codigocidade" upAc="0">
        <PrTb mn="0" nm="cidade" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="enderecopessoa" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocidadeenderecopessoa" prCl="codigocidade"/>
      </Fk>
      <Fk deAc="3" nm="pessoa_enderecopessoa_fk" prLkCl="codigopessoa" upAc="0">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="enderecopessoa" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoa" prCl="codigopessoa"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_enderecopessoa" upd="1">
        <Sql>personalerp.fn_replica_enderecopessoa()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="entradaestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoentradaestoque" nm="pk_entradaestoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('entradaestoque_codigoentradaestoque_seq'::regclass)" nm="codigoentradaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraentradaestoque" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusentradaestoque" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraprocessamentoentradaestoque" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerodocumentoentradaestoque" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoesentradaestoque" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="enderecopessoa_entradaestoque" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="entradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoa" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoa" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigoempresapessoa" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojapessoa" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_entradaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="entradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_entradaestoque" upd="1">
        <Sql>personalerp.fn_replica_entradaestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="esplanada">
      <Cm>Tabela de Cadastro de Esplanadas (Locais abertos onde se guardam toras para posterior manejo)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoesplanada" nm="esplanada_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('esplanada_codigoesplanada_seq'::regclass)" nm="codigoesplanada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeesplanada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_esplanada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="esplanada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_esplanada" upd="1">
        <Sql>personalerp.fn_replica_esplanada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="essencia">
      <Cm>Utilizado pelo módulo de madeireiras. Essencias (espécies) de arvores.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoessencia" nm="essencia_pk"/>
      <Cl au="0" df="nextval('essencia_codigoessencia_seq'::regclass)" nm="codigoessencia" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeessencia" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_essencia" upd="1">
        <Sql>personalerp.fn_replica_essencia()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="estado">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoestado" nm="estado_pk"/>
      <Cl au="0" df="nextval('estado_codigoestado_seq'::regclass)" nm="codigoestado" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeestado" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="siglaestado" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoibgeestado" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopais" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="regiaoestado" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="pais_estado_fk" prLkCl="codigopais" upAc="0">
        <PrTb mn="0" nm="pais" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="estado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopais" prCl="codigopais"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_estado" upd="1">
        <Sql>personalerp.fn_replica_estado()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="estoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoproduto, codigoempresaestoque, codigolojaestoque" nm="pk_estoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="estoquefisico" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="estoquefiscal" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="precomedioestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataprecomedioestoque" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataultimaentradaestoque" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="locacaoestoque" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="demandaestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="frequenciaestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadedisplayestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadegavetaestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_estoque_loja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="estoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="fk_estoque_produto" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="estoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_estoque" upd="1">
        <Sql>personalerp.fn_replica_estoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="fabricante">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigofabricante" nm="pk_fabricante"/>
      <Cl au="0" df="nextval('fabricante_codigofabricante_seq'::regclass)" nm="codigofabricante" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomefabricante" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_fabricante" upd="1">
        <Sql>personalerp.fn_replica_fabricante()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="faltafuncionario">
      <Cm>Tabela de apontamento de faltas do funcionario.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocontratotrabalho, sequencialfaltafuncionario" nm="faltafuncionario_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('faltafuncionario_sequencialfaltafuncionario_seq'::regclass)" nm="sequencialfaltafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datafaltafuncionario" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data da falta do funcionário</Cm>
      </Cl>
      <Cl au="0" df="" nm="horasfaltafuncionario" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Número de horas que serão lançadas como falta neste dia. Horas e minutos.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamotivofaltafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamotivofaltafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomotivofaltafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoesfaltafuncionario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>Observacoes sobre a falta.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contratotrabalho_faltafuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contratotrabalho" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="faltafuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigocontratotrabalho" prCl="codigocontratotrabalho"/>
      </Fk>
      <Fk deAc="3" nm="motivofaltafuncionario_faltafuncionario_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="motivofaltafuncionario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="faltafuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojamotivofaltafuncionario" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresamotivofaltafuncionario" prCl="codigoempresa"/>
        <ClPr cdCl="codigomotivofaltafuncionario" prCl="codigomotivofaltafuncionario"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_faltafuncionario" upd="1">
        <Sql>personalerp.fn_replica_faltafuncionario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="feriado">
      <Cm>Tabela de Cadastro de Feriados</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoferiado, codigoempresa, codigoloja" nm="feriado_pk"/>
      <Cl au="0" df="nextval('feriado_codigoferiado_seq'::regclass)" nm="codigoferiado" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaoferiado" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Descricao do feriado</Cm>
      </Cl>
      <Cl au="0" df="" nm="diaferiado" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Dia do feriado</Cm>
      </Cl>
      <Cl au="0" df="" nm="mesferiado" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Mes do feriado</Cm>
      </Cl>
      <Cl au="0" df="" nm="anoferiado" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Ano do feriado. Válido para os feriados cuja data muda todo ano (Ex: Sexta-feira da paixao)</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_feriado_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="feriado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_feriado_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="feriado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_feriado" upd="1">
        <Sql>personalerp.fn_replica_feriado()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="flagtrocamanutencao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipoflagtrocamanutencao, codigoempresa, codigoloja, codigotrocamanutencao" nm="pk_flagtrocamanutencao"/>
      <Cl au="0" df="" nm="codigotipoflagtrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorflagtrocamanutencao" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="tipoflagtrocamanutencao_flagtrocamanutencao" prLkCl="codigotipoflagtrocamanutencao" upAc="3">
        <PrTb mn="0" nm="tipoflagtrocamanutencao" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="flagtrocamanutencao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipoflagtrocamanutencao" prCl="codigotipoflagtrocamanutencao"/>
      </Fk>
      <Fk deAc="3" nm="trocamanutencao_flagtrocamanutencao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="trocamanutencao" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="flagtrocamanutencao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigotrocamanutencao" prCl="codigotrocamanutencao"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_flagtrocamanutencao" upd="1">
        <Sql>personalerp.fn_replica_flagtrocamanutencao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="folhapagamento">
      <Cm>Tabela de Folhas de pagamento</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigofolhapagamento, codigoempresa, codigoloja" nm="folhapagamento_pk"/>
      <Cl au="0" df="nextval('folhapagamento_codigofolhapagamento_seq'::regclass)" nm="codigofolhapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="mescompetenciafolhapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Mês de competencia da folha de pagamento</Cm>
      </Cl>
      <Cl au="0" df="" nm="anocompetenciafolhapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Ano de competencia da folha</Cm>
      </Cl>
      <Cl au="0" df="" nm="statusfolhapagamento" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>A - Aberta  P - Processada  E - Estornada  F - Fechada  N - Processando</Cm>
      </Cl>
      <Cl au="0" df="" nm="tipofolhapagamento" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>N - Normal D - 13 Salario F - Ferias</Cm>
      </Cl>
      <Cl au="0" df="" nm="percentualprocessadofolhapagamento" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Percentual ja processado da folha de pagamento.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresalotacao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojalotacao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_folhapagamento_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="folhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_folhapagamento_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="folhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_folhapagamento_lotacao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="folhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresalotacao" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojalotacao" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_folhapagamento" upd="1">
        <Sql>personalerp.fn_replica_folhapagamento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="formapagamento">
      <Cm>Formas de pagamento para contas a pagar e a receber</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoformapagamento" nm="formapagamento_pk"/>
      <Cl au="0" df="nextval('formapagamento_codigoformapagamento_seq'::regclass)" nm="codigoformapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeformapagamento" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_formapagamento" upd="1">
        <Sql>personalerp.fn_replica_formapagamento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="formarecebimento">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoformarecebimento" nm="pk_formarecebimento"/>
      <Cl au="0" df="nextval('formarecebimento_codigoformarecebimento_seq'::regclass)" nm="codigoformarecebimento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeformarecebimento" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_formarecebimento" upd="1">
        <Sql>personalerp.fn_replica_formarecebimento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="funcionario">
      <Cm>Tabela de Funcionarios</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigofuncionario, codigoempresa, codigoloja" nm="funcionario_pk"/>
      <Cl au="0" df="nextval('funcionario_codigofuncionario_seq'::regclass)" nm="codigofuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomefuncionario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="sexofuncionario" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>M - Masculino F - Feminino</Cm>
      </Cl>
      <Cl au="0" df="" nm="enderecofuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone1funcionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone2funcionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone3funcionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="bairrofuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cepfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="8" sc="null" sg="1" un="0"/>
        <Cm>CEP do Funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigocidade" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da cidade do endereco</Cm>
      </Cl>
      <Cl au="0" df="" nm="cpffuncionario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="11" sc="null" sg="1" un="0"/>
        <Cm>Numero de CPF do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="rgfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
        <Cm>Numero do RG do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="dataemissaorgfuncionario" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data de Emissao do RG do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="orgaoemissaorgfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Orgao de emissao do RG do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="ufemissaorgfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="2" sc="null" sg="1" un="0"/>
        <Cm>UF de emissao do RG do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="ctpsfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
        <Cm>Numero da Carteira de Trabalho do Funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="pisfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
        <Cm>Numero do PIS do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="tituloeleitorfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
        <Cm>Numero do Titulo de Eleitor do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="secaotituloeleitorfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>Secao do titulo de eleitor do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="zonatituloeleitorfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>Zona do Titulo de Eleitor do funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="naturalidadefuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da cidade de onde o funcionario e natural</Cm>
      </Cl>
      <Cl au="0" df="" nm="datanascimentofuncionario" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data de nascimento do funcionario</Cm>
      </Cl>
      <Cl au="0" df="99" nm="estadocivilfuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>1 - Solteiro 2 - Casado 3 - Divorciado 99 - Outros</Cm>
      </Cl>
      <Cl au="0" df="" nm="nomepaifuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemaefuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeconjuguefuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>Nome do Conjugue do Funcionario</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacoesfuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="cidade_funcionario_fk" prLkCl="codigocidade" upAc="3">
        <PrTb mn="0" nm="cidade" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="funcionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocidade" prCl="codigocidade"/>
      </Fk>
      <Fk deAc="3" nm="cidade_funcionario_naturalidade_fk" prLkCl="codigocidade" upAc="3">
        <PrTb mn="0" nm="cidade" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="funcionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="naturalidadefuncionario" prCl="codigocidade"/>
      </Fk>
      <Fk deAc="3" nm="empresa_funcionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="funcionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_funcionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="funcionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_funcionario" upd="1">
        <Sql>personalerp.fn_replica_funcionario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="gerentemadeireira">
      <Cm>Cadastro dos gerentes da madeireira, para controle de producao</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigogerente" nm="gerentemadeireira_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('gerentemadeireira_codigogerente_seq'::regclass)" nm="codigogerente" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomegerente" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontratotrabalho" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontratotrabalho" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontratotrabalho" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contratotrabalho_gerentemadeireira_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contratotrabalho" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="gerentemadeireira" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacontratotrabalho" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontratotrabalho" prCl="codigoloja"/>
        <ClPr cdCl="codigocontratotrabalho" prCl="codigocontratotrabalho"/>
      </Fk>
      <Fk deAc="3" nm="empresa_gerentemadeireira_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="gerentemadeireira" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_gerentemadeireira_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="gerentemadeireira" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_gerentemadeireira" upd="1">
        <Sql>personalerp.fn_replica_gerentemadeireira()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="grupo">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigogrupo" nm="pk_grupo"/>
      <Cl au="0" df="nextval('grupo_codigogrupo_seq'::regclass)" nm="codigogrupo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomegrupo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipogrupo" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidademinimaunitariagrupo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidademinimametrogrupo" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="8" sc="3" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualcomissaogrupo" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="5" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_grupo" upd="1">
        <Sql>personalerp.fn_replica_grupo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="grupoempresa">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigogrupoempresa" nm="pk_grupoempresa"/>
      <Cl au="0" df="" nm="codigogrupoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomegrupoempresa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_grupoempresa" upd="1">
        <Sql>personalerp.fn_replica_grupoempresa()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="grupoempresaloja">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigogrupoempresa, codigoempresa, codigoloja" nm="pk_grupoempresaloja"/>
      <Cl au="0" df="" nm="codigogrupoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="grupoempresa_grupoempresaloja" prLkCl="codigogrupoempresa" upAc="3">
        <PrTb mn="0" nm="grupoempresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="grupoempresaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigogrupoempresa" prCl="codigogrupoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_grupoempresaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="grupoempresaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_grupoempresaloja" upd="1">
        <Sql>personalerp.fn_replica_grupoempresaloja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="historicotrocamanutencao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotrocamanutencao, codigohistoricotrocamanutencao" nm="pk_historicotrocamanutencao"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('historicotrocamanutencao_codigohistoricotrocamanutencao_seq'::regclass)" nm="codigohistoricotrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorahistoricotrocamanutencao" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaohistoricotrocamanutencao" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigosituacaotrocamanutencao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="N" nm="flagemailenviadotrocamanutencao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_historicotrocamanutencao" upd="1">
        <Sql>personalerp.fn_replica_historicotrocamanutencao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="horariotrabalho">
      <Cm>Tabela de horarios de trabalho</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigohorariotrabalho" nm="horariotrabalho_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('horariotrabalho_codigohorariotrabalho_seq'::regclass)" nm="codigohorariotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaohorariotrabalho" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="horainicio1horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora de inicio do 1º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horafim1horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora final do 1º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horainicio2horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora de inicio do 2º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horafim2horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora final do 2º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horainicio3horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Horario de inicio do 3º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horafim3horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora final do 3º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horainicio4horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora de inicio do 4º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="horafim4horariotrabalho" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Hora fim do 4º turno</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_horariotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="horariotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_horariotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="horariotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_horariotrabalho" upd="1">
        <Sql>personalerp.fn_replica_horariotrabalho()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemcurral">
      <Cm>Tabela de Itens do Curral.  Armazena dados dos animais que estão no curral. Quantidade, Proprietário, etc.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocurral, codigoitemcurral" nm="pk_itemcurral"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocurral" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemcurral_codigoitemcurral_seq'::regclass)" nm="codigoitemcurral" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemcurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="curral_itemcurral" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="curral" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemcurral" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigocurral" prCl="codigocurral"/>
      </Fk>
      <Fk deAc="3" nm="pessoa_itemcurral" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemcurral" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoa" prCl="codigopessoa"/>
        <ClPr cdCl="codigolojapessoa" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresapessoa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemcurral" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemcurral" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemcurral" upd="1">
        <Sql>personalerp.fn_replica_itemcurral()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itementradaestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoentradaestoque, codigoitementradaestoque" nm="pk_itementradaestoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoentradaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itementradaestoque_codigoitementradaestoque_seq'::regclass)" nm="codigoitementradaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitementradaestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="entradaestoque_itementradaestoque" prLkCl="codigoentradaestoque" upAc="3">
        <PrTb mn="0" nm="entradaestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itementradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoentradaestoque" prCl="codigoentradaestoque"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="movimentacaoestoque_itementradaestoque" prLkCl="codigoempresaestoque" upAc="3">
        <PrTb mn="0" nm="movimentacaoestoque" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itementradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
        <ClPr cdCl="codigomovimentacaoestoque" prCl="codigomovimentacaoestoque"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="produto_itementradaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itementradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itementradaestoque" upd="1">
        <Sql>personalerp.fn_replica_itementradaestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemmetavenda">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigometavenda, codigoitemmetavenda" nm="pk_itemmetavenda"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigometavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemmetavenda_codigoitemmetavenda_seq'::regclass)" nm="codigoitemmetavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="referenciametavenda" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipoitemmetavenda" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonivelmetavenda" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valormetavenda" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="premiometavenda" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="metavenda_itemmetavenda" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="metavenda" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemmetavenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigometavenda" prCl="codigometavenda"/>
      </Fk>
      <Fk deAc="3" nm="nivelmetavenda_itemmetavenda" prLkCl="codigonivelmetavenda" upAc="3">
        <PrTb mn="0" nm="nivelmetavenda" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemmetavenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigonivelmetavenda" prCl="codigonivelmetavenda"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemmetavenda" upd="1">
        <Sql>personalerp.fn_replica_itemmetavenda()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemnfentrada">
      <Cm>Itens da Nota Fiscal de entrada</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfentrada, serienfentrada, sequencialitemnfentrada, codigoempresaemitentenfentrada, codigolojaemitentenfentrada, codigopessoaemitentenfentrada, codigoenderecopessoaemitentenfentrada" nm="itemnfentrada_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>CÃ³digo da NF de entrada (Sequencial)</Cm>
      </Cl>
      <Cl au="0" df="" nm="serienfentrada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>SÃ©rie da Nota Fiscal de SaÃ­da</Cm>
      </Cl>
      <Cl au="0" df="" nm="sequencialitemnfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Sequencia dos itens da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cfopitemnfentrada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>CFOP do Item da Nota de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="descricaoitemnfentrada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>DescriÃ§Ã£o do Produto (Deve ser copiada da tabela de produtos, uma redundancia intencional e necessÃ¡ria, pois a nota fiscal Ã© um documento histÃ³rico, e nÃ£o pode sofrer alteraÃ§Ãµes).</Cm>
      </Cl>
      <Cl au="0" df="" nm="ncmitemnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
        <Cm>NCM do item da nf de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="unidadeitemnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>Unidade do Item da NF de entrada</Cm>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemnfentrada" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Quantidade do item da NF de entrada</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorunitarioitemnfentrada" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Unitario do Item da NF de entrada</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorseguroitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Seguro para o Item da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valordescontoitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de desconto para o item na NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfreteitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Frete para o Item da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoroutrasdespesasitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de Outras Despesas do Item da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalbrutoitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Total Bruto do Item da NF de entrada. (Quantidade X Valor Unitario).</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalliquidoitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="csticmsitemnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaicmsitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="basecalculoicmsitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualreducaobcitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoricmsitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaicmsstitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualmvaitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="baseicmsstitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoricmsstitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstpisitemnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotapisitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorpisitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstcofinsitemnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotacofinsitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorcofinsitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstipiitemnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaipiitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoripiitemnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="nfentrada_itemnfsentrada" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="nfentrada" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemnfentrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigonfentrada" prCl="codigonfentrada"/>
        <ClPr cdCl="serienfentrada" prCl="serienfentrada"/>
        <ClPr cdCl="codigoempresaemitentenfentrada" prCl="codigoempresaemitentenfentrada"/>
        <ClPr cdCl="codigolojaemitentenfentrada" prCl="codigolojaemitentenfentrada"/>
        <ClPr cdCl="codigopessoaemitentenfentrada" prCl="codigopessoaemitentenfentrada"/>
        <ClPr cdCl="codigoenderecopessoaemitentenfentrada" prCl="codigoenderecopessoaemitentenfentrada"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemnfsentrada" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemnfentrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemnfentrada" upd="1">
        <Sql>personalerp.fn_replica_itemnfentrada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemnfsaida">
      <Cm>Itens da Nota Fiscal de Saida</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfsaida, serienfsaida, sequencialitemnfsaida" nm="itemnfsaida_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfsaida" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>CÃ³digo da NF de saida (Sequencial)</Cm>
      </Cl>
      <Cl au="0" df="" nm="serienfsaida" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>SÃ©rie da Nota Fiscal de SaÃ­da</Cm>
      </Cl>
      <Cl au="0" df="" nm="sequencialitemnfsaida" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Sequencia dos itens da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cfopitemnfsaida" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>CFOP do Item da Nota de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="descricaoitemnfsaida" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>DescriÃ§Ã£o do Produto (Deve ser copiada da tabela de produtos, uma redundancia intencional e necessÃ¡ria, pois a nota fiscal Ã© um documento histÃ³rico, e nÃ£o pode sofrer alteraÃ§Ãµes).</Cm>
      </Cl>
      <Cl au="0" df="" nm="ncmitemnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
        <Cm>NCM do item da nf de saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="unidadeitemnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>Unidade do Item da NF de Saida</Cm>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemnfsaida" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Quantidade do item da NF de Saida</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorunitarioitemnfsaida" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Unitario do Item da NF de Saida</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorseguroitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Seguro para o Item da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valordescontoitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de desconto para o item na NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfreteitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Frete para o Item da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoroutrasdespesasitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de Outras Despesas do Item da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalbrutoitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Total Bruto do Item da NF de Saida. (Quantidade X Valor Unitario).</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalliquidoitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="csticmsitemnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaicmsitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="basecalculoicmsitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualreducaobcitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoricmsitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaicmsstitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualmvaitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="baseicmsstitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoricmsstitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstpisitemnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotapisitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorpisitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstcofinsitemnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotacofinsitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorcofinsitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstipiitemnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaipiitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valoripiitemnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="nfsaida_itemnfsaida_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="nfsaida" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemnfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigonfsaida" prCl="codigonfsaida"/>
        <ClPr cdCl="serienfsaida" prCl="serienfsaida"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemnfsaida_fk" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemnfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemnfsaida" upd="1">
        <Sql>personalerp.fn_replica_itemnfsaida()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itempedido">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigopdv, codigopedido, codigoitempedido" nm="pk_itempedido"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopdv" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopedido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itempedido_codigoitempedido_seq'::regclass)" nm="codigoitempedido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitempedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorunitarioitempedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valordescontoitempedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valortotalitempedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeestoqueitempedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="S" nm="flagcomissaovendedorpedido" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresalinhaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojalinhaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolinhaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="linhaproduto_itempedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="linhaproduto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itempedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresalinhaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojalinhaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigolinhaproduto" prCl="codigolinhaproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresaproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigolojaproduto"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="pedido_itempedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="pedido" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itempedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigopedido" prCl="codigopedido"/>
        <ClPr cdCl="codigopdv" prCl="codigopdv"/>
      </Fk>
      <Fk deAc="3" nm="produto_itempedido" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itempedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itempedido" upd="1">
        <Sql>personalerp.fn_replica_itempedido()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneioabate">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio, codigoitemromaneio" nm="itemromaneioabate_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemromaneioabate_codigoitemromaneio_seq'::regclass)" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="pesobanda1itemromaneio" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
        <Cm>Peso da banda 1 da vaca/boi</Cm>
      </Cl>
      <Cl au="0" df="" nm="pesobanda2itemromaneio" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
        <Cm>Peso da banda 2 da vaca/boi</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorkgitemromaneio" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
        <Cm>Valor por KG (Buscado em parametro)</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="curral_itemromaneioabate_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="curral" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojacurral" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresacurral" prCl="codigoempresa"/>
        <ClPr cdCl="codigocurral" prCl="codigocurral"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemromaneiofrigorifico_fk" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="romaneioabate_itemromaneioabate_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="romaneioabate" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneioabate" upd="1">
        <Sql>personalerp.fn_replica_itemromaneioabate()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiobeneficiada">
      <Cm>Itens do Romaneio de Madeira Beneficiada. Representa as madeiras já beneficiadas que entrarão ou sairão do estoque.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoromaneio, codigoempresa, codigoloja, codigoitemromaneio" nm="itemromaneiobeneficiada_pk"/>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemromaneiobeneficiada_codigoitemromaneio_seq'::regclass)" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoitemromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusitemromaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>P - Processado E - Estornado O item de romaneio não pode ser processado, mas pode ser estornado, para recalcular o estoque. Quando lancado, o status é P - Processado.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="movimentacaoestoque_itemromaneiobeneficiada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="movimentacaoestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiobeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigomovimentacaoestoque" prCl="codigomovimentacaoestoque"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemromaneiobeneficiada_fk" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiobeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="romaneiomadeirabeneficiada_itemromaneiobeneficiada_fk" prLkCl="codigoromaneio" upAc="3">
        <PrTb mn="0" nm="romaneiomadeirabeneficiada" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiobeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Idx clu="0" nm="itemromaneiobeneficiada_produto_idx" unq="1">
        <ClNs>codigoromaneio, codigoloja, codigoempresa, codigoproduto, codigolojaproduto, codigoempresaproduto</ClNs>
      </Idx>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiobeneficiada" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiobeneficiada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiobeneficiadaserrada">
      <Cm>Esta tabela guarda as madeiras serradas usadas para beneficiamento</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoitemromaneio, codigoromaneio, codigoempresa, codigoloja" nm="itemromaneiobeneficiadaserrada_pk"/>
      <Cl au="0" df="nextval('itemromaneiobeneficiadaserrada_codigoitemromaneio_seq'::regclass)" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoitemromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusitemromaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>P - Processado E - Estornado O item de romaneio não pode ser processado, mas pode ser estornado, para recalcular o estoque. Quando lancado, o status é P - Processado.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="movimentacaoestoque_itemromaneiobeneficiadaserrada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="movimentacaoestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiobeneficiadaserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigomovimentacaoestoque" prCl="codigomovimentacaoestoque"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemromaneiobeneficiadaserrada_fk" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiobeneficiadaserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="romaneiomadeirabeneficiada_itemromaneiobeneficiadaserrada_fk" prLkCl="codigoromaneio" upAc="3">
        <PrTb mn="0" nm="romaneiomadeirabeneficiada" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiobeneficiadaserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiobeneficiadaserrada" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiobeneficiadaserrada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiogado">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio, codigoitemromaneio" nm="pk_itemromaneiogado"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemromaneiogado_codigoitemromaneio_seq'::regclass)" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocurral" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemromaneio" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="curral_itemromaneiogado" prLkCl="codigocurral" upAc="3">
        <PrTb mn="0" nm="curral" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneiogado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocurral" prCl="codigocurral"/>
        <ClPr cdCl="codigoempresacurral" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacurral" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemromaneiogado" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneiogado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="romaneiogado_itemromaneiogado" prLkCl="codigoromaneio" upAc="3">
        <PrTb mn="0" nm="romaneiogado" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiogado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiogado" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiogado()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiomadeiraserrada">
      <Cm>Itens do Romaneio de Madeira Serrada</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio, codigoitemromaneio" nm="itemromaneiomadeiraserrada_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemromaneiomadeiraserrada_codigoitemromaneio_seq'::regclass)" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Quantidade do item</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoitemromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusitemromaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>P - Processado
E - Estornado
O item de romaneio não pode ser processado, mas pode ser estornado, para recalcular o estoque. Quando lancado, o status é P - Processado.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="movimentacaoestoque_itemromaneiomadeiraserrada_fk" prLkCl="codigoempresaestoque" upAc="3">
        <PrTb mn="0" nm="movimentacaoestoque" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
        <ClPr cdCl="codigomovimentacaoestoque" prCl="codigomovimentacaoestoque"/>
      </Fk>
      <Fk deAc="3" nm="produto_itemromaneiomadeiraserrada_fk" prLkCl="codigoloja" upAc="0">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="romaneiomadeiraserrada_itemromaneiomadeiraserrada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="romaneiomadeiraserrada" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
      </Fk>
      <Idx clu="0" nm="itemromaneiomadeiraserrada_produto_idx" unq="1">
        <ClNs>codigoromaneio, codigoloja, codigoempresa, codigoproduto, codigolojaproduto, codigoempresaproduto</ClNs>
      </Idx>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiomadeiraserrada" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiomadeiraserrada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiomanejotora">
      <Cm>Itens do Romaneio de Manejos de Tora</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio, codigoitemromaneio" nm="itemromaneiomanejotora_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemromaneiomanejotora_codigoitemromaneio_seq'::regclass)" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoessencia" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="diametrotora" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="comprimentotora" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="volumetora" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="essencia_itemromaneiomanejotora_fk" prLkCl="codigoessencia" upAc="3">
        <PrTb mn="0" nm="essencia" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoessencia" prCl="codigoessencia"/>
      </Fk>
      <Fk deAc="3" nm="romaneiomanejotora_itemromaneiomanejotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="romaneiomanejotora" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiomanejotora" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiomanejotora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiosaidatora">
      <Cm>Itens do Romaneio de saída de toras por vendas</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoromaneio, codigoempresa, codigoloja, numeroplaquetaromaneio, codigoempresaitemromaneio, codigolojaitemromaneio, codigoitemromaneio" nm="itemromaneiosaidatora_pk"/>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroplaquetaromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="itemromaneiotora_itemromaneiosaidatora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="itemromaneiotora" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiosaidatora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaitemromaneio" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaitemromaneio" prCl="codigoloja"/>
        <ClPr cdCl="numeroplaquetaromaneio" prCl="numeroplaquetaromaneio"/>
        <ClPr cdCl="codigoitemromaneio" prCl="codigoromaneio"/>
      </Fk>
      <Fk deAc="3" nm="romaneiosaidatora_itemromaneiosaidatora_fk" prLkCl="codigoromaneio" upAc="3">
        <PrTb mn="0" nm="romaneiosaidatora" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiosaidatora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiosaidatora" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiosaidatora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemromaneiotora">
      <Cm>Itens do romaneio de toras</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoromaneio, codigoempresa, codigoloja, numeroplaquetaromaneio" nm="itemromaneiotora_pk"/>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroplaquetaromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoessencia" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="diametrotora" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="comprimentotora" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="volumetora" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorabaixaromaneio" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariobaixaromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariobaixaromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagbaixatora" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariobaixaromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresagerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigogerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojagerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="databaixaitemromaneio" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="essencia_itemromaneiotora_fk" prLkCl="codigoessencia" upAc="3">
        <PrTb mn="0" nm="essencia" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoessencia" prCl="codigoessencia"/>
      </Fk>
      <Fk deAc="3" nm="gerentemadeireira_itemromaneiotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="gerentemadeireira" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresagerente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojagerente" prCl="codigoloja"/>
        <ClPr cdCl="codigogerente" prCl="codigogerente"/>
      </Fk>
      <Fk deAc="3" nm="romaneiotora_itemromaneiotora_fk" prLkCl="codigoromaneio" upAc="3">
        <PrTb mn="0" nm="romaneiotora" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemromaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="usuario_itemromaneiotora_fk" prLkCl="codigousuario" upAc="3">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="itemromaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigousuariobaixaromaneio" prCl="codigousuario"/>
        <ClPr cdCl="codigolojausuariobaixaromaneio" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresausuariobaixaromaneio" prCl="codigoempresa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemromaneiotora" upd="1">
        <Sql>personalerp.fn_replica_itemromaneiotora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="itemtransferenciaestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotransferenciaestoque, codigoitemtransferenciaestoque" nm="pk_itemtransferenciaestoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotransferenciaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('itemtransferenciaestoque_codigoitemtransferenciaestoque_seq'::regclass)" nm="codigoitemtransferenciaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeitemtransferenciaestoque" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="produto_itemtransferenciaestoque" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemtransferenciaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="transferenciaestoque_itemtransferenciaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="transferenciaestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="itemtransferenciaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigotransferenciaestoque" prCl="codigotransferenciaestoque"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_itemtransferenciaestoque" upd="1">
        <Sql>personalerp.fn_replica_itemtransferenciaestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="levantamentoestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigolevantamentoestoque" nm="pk_levantamentoestoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('levantamentoestoque_codigolevantamentoestoque_seq'::regclass)" nm="codigolevantamentoestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorainiciolevantamentoestoque" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorafimlevantamentoestoque" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolevantamentoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolevantamentoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolevantamentoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statuslevantamentoestoque" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraprocessamentolevantamentoestoque" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaolevantamentoestoque" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_levantamentoestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="levantamentoestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_levantamentoestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="levantamentoestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_levantamentoestoque" upd="1">
        <Sql>personalerp.fn_replica_levantamentoestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="levantamentoestoqueitem">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigolevantamentoestoque, codigoitemlevantamentoestoque" nm="pk_levantamentoestoqueitem"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolevantamentoestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('levantamentoestoqueitem_codigoitemlevantamentoestoque_seq'::regclass)" nm="codigoitemlevantamentoestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadedigitadaitemlevantamentoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeencontradaitemlevantamentoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="acaoitemlevantamentoestoque" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadedisplayitemlevantamentoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadegavetaitemlevantamentoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="levantamentoestoque_levantamentoestoqueitem" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="levantamentoestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="levantamentoestoqueitem" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigolevantamentoestoque" prCl="codigolevantamentoestoque"/>
      </Fk>
      <Fk deAc="3" nm="movimentacaoestoque_levantamentoestoqueitem" prLkCl="codigoempresaestoque" upAc="3">
        <PrTb mn="0" nm="movimentacaoestoque" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="levantamentoestoqueitem" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
        <ClPr cdCl="codigomovimentacaoestoque" prCl="codigomovimentacaoestoque"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="produto_levantamentoestoqueitem" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="levantamentoestoqueitem" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Idx clu="0" nm="unq_levantamentoestoqueitem_produto" unq="1">
        <ClNs>codigoempresa, codigoloja, codigolevantamentoestoque, codigoempresaproduto, codigolojaproduto, codigoproduto</ClNs>
      </Idx>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_levantamentoestoqueitem" upd="1">
        <Sql>personalerp.fn_replica_levantamentoestoqueitem()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="linhaproduto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigolinhaproduto, codigoempresaproduto, codigolojaproduto, codigoproduto" nm="pk_linhaproduto"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('linhaproduto_codigolinhaproduto_seq'::regclass)" nm="codigolinhaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomelinhaproduto" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_linhaproduto" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="linhaproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="produto_linhaproduto" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="linhaproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_linhaproduto" upd="1">
        <Sql>personalerp.fn_replica_linhaproduto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="log">
      <TblOpts>WITH OIDS</TblOpts>
      <Pk ClNs="codigolog" nm="log_pkey"/>
      <Cl au="0" df="nextval('log_codigolog_seq'::regclass)" nm="codigolog" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tabela" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="chave" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="operacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="camposoriginal" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="camposnovos" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="now()" nm="datahoralog" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="lognfeletronica">
      <Cm>Tabela de Log da Nota Fiscal Eletronica.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfe, sequenciallognfe" nm="lognfeletronica_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfe" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Sequencial da NF-e. Este campo não é auto incremento para evitar que se perca algum sequencial.</Cm>
      </Cl>
      <Cl au="0" df="nextval('lognfeletronica_sequenciallognfe_seq'::regclass)" nm="sequenciallognfe" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotiporegistronfe" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Chave do tipo de registro</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahoralognfe" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora do registro</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dadoslognfe" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="nfeletronica_lognfeletronica_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="nfeletronica" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="lognfeletronica" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigonfe" prCl="codigonfe"/>
      </Fk>
      <Fk deAc="3" nm="tiporegistronfeletronica_lognfeletronica_fk" prLkCl="codigotiporegistronfe" upAc="3">
        <PrTb mn="0" nm="tiporegistronfeletronica" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="lognfeletronica" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotiporegistronfe" prCl="codigotiporegistronfe"/>
      </Fk>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="loja">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja" nm="pk_loja"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('loja_codigoloja_seq'::regclass)" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeloja" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagmatrizloja" nu="0">
        <DT arr="0" ds="Boolean" en="" id="16" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cnpjloja" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="18" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="inscricaoestadualloja" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="inscricaomunicipalloja" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="enderecoloja" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="bairroloja" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocidadeloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ceploja" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="8" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="foneloja" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="faxloja" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="issloja" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="4" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaloja" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafuncionariosupervisor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafuncionariosupervisor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigofuncionariosupervisor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafuncionariogerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafuncionariogerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigofuncionariogerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_lojas_empresas" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="loja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="funcionario_loja_gerente" prLkCl="codigofuncionario" upAc="3">
        <PrTb mn="0" nm="funcionario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="loja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofuncionariogerente" prCl="codigofuncionario"/>
        <ClPr cdCl="codigoempresafuncionariogerente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojafuncionariogerente" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="funcionario_loja_supervisor" prLkCl="codigofuncionario" upAc="3">
        <PrTb mn="0" nm="funcionario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="loja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofuncionariosupervisor" prCl="codigofuncionario"/>
        <ClPr cdCl="codigoempresafuncionariosupervisor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojafuncionariosupervisor" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_loja" upd="1">
        <Sql>personalerp.fn_replica_loja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="manejotora">
      <Cm>Manejos de Tora (Areas de exploracao)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigomanejo" nm="manejotora_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('manejotora_codigomanejo_seq'::regclass)" nm="codigomanejo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaomanejo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_manejotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="manejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_manejotora" upd="1">
        <Sql>personalerp.fn_replica_manejotora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="mensageminterna">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigomensageminterna" nm="pk_mensageminterna"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('mensageminterna_codigomensageminterna_seq'::regclass)" nm="codigomensageminterna" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="titulomensageminterna" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="frommensageminterna" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="textomensageminterna" nu="0">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="prioridademensageminterna" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_mensageminterna_loja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="mensageminterna" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="fk_mensageminterna_usuario" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="mensageminterna" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresausuario" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojausuario" prCl="codigoloja"/>
        <ClPr cdCl="codigousuario" prCl="codigousuario"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_mensageminterna" upd="1">
        <Sql>personalerp.fn_replica_mensageminterna()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="mensageminternadestinatario">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigomensageminterna, codigoempresausuariodestinatario, codigolojausuariodestinatario, codigousuariodestinatario" nm="pk_mensageminternadestinatario"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomensageminterna" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariodestinatario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariodestinatario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariodestinatario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="N" nm="flaglida" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_mensageminternadestinatario_usuariodestinatario" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="mensageminternadestinatario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresausuariodestinatario" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojausuariodestinatario" prCl="codigoloja"/>
        <ClPr cdCl="codigousuariodestinatario" prCl="codigousuario"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_mensageminternadestinatario" upd="1">
        <Sql>personalerp.fn_replica_mensageminternadestinatario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="menu">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomenu" nm="menu_pk"/>
      <Cl au="0" df="nextval('menu_codigomenu_seq'::regclass)" nm="codigomenu" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemenu" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoobjeto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomenupai" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="0" nm="ordemmenu" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipomenu" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="menu_menupai_fk" prLkCl="codigomenu" upAc="0">
        <PrTb mn="0" nm="menu" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="menu" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigomenupai" prCl="codigomenu"/>
      </Fk>
      <Fk deAc="3" nm="objeto_menu_fk" prLkCl="codigoobjeto" upAc="0">
        <PrTb mn="0" nm="objeto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="menu" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoobjeto" prCl="codigoobjeto"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_menu" upd="1">
        <Sql>personalerp.fn_replica_menu()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="metavenda">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigometavenda" nm="pk_metavenda"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('metavenda_codigometavenda_seq'::regclass)" nm="codigometavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialmetavenda" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datafinalmetavenda" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipometavenda" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_metavenda" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="metavenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_metavenda" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="metavenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresavendedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedor" prCl="codigoloja"/>
        <ClPr cdCl="codigovendedor" prCl="codigovendedor"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_metavenda" upd="1">
        <Sql>personalerp.fn_replica_metavenda()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="modeloetiqueta">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomodeloetiqueta" nm="pk_modeloetiqueta"/>
      <Cl au="0" df="nextval('modeloetiqueta_codigomodeloetiqueta_seq'::regclass)" nm="codigomodeloetiqueta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemodeloetiqueta" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="arquivomodeloetiqueta" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomodeloimpressoraetiqueta" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="modeloimpressoraetiqueta_modeloetiqueta" prLkCl="codigomodeloimpressoraetiqueta" upAc="3">
        <PrTb mn="0" nm="modeloimpressoraetiqueta" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="modeloetiqueta" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigomodeloimpressoraetiqueta" prCl="codigomodeloimpressoraetiqueta"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_modeloetiqueta" upd="1">
        <Sql>personalerp.fn_replica_modeloetiqueta()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="modeloimpressoraetiqueta">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomodeloimpressoraetiqueta" nm="pk_modeloimpressoraetiqueta"/>
      <Cl au="0" df="nextval('modeloimpressoraetiqueta_codigomodeloimpressoraetiqueta_seq'::regclass)" nm="codigomodeloimpressoraetiqueta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemodeloimpressoraetiqueta" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="classemodeloimpressoraetiqueta" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_modeloimpressoraetiqueta" upd="1">
        <Sql>personalerp.fn_replica_modeloimpressoraetiqueta()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="motivodesligamento">
      <Cm>Tabela de motivos de desligamento</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomotivodesligamento, codigoempresa, codigoloja" nm="motivodesligamento_pk"/>
      <Cl au="0" df="nextval('motivodesligamento_codigomotivodesligamento_seq'::regclass)" nm="codigomotivodesligamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaomotivodesligamento" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_motivodesligamento_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="motivodesligamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_motivodesligamento_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="motivodesligamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_motivodesligamento" upd="1">
        <Sql>personalerp.fn_replica_motivodesligamento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="motivofaltafuncionario">
      <Cm>Tabela de Motivos de falta do funcionário</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomotivofaltafuncionario, codigoempresa, codigoloja" nm="motivofaltafuncionario_pk"/>
      <Cl au="0" df="nextval('motivofaltafuncionario_codigomotivofaltafuncionario_seq'::regclass)" nm="codigomotivofaltafuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaomotivofaltafuncionario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Descricao do motivo da falta</Cm>
      </Cl>
      <Cl au="0" df="" nm="flagparcialmotivofaltafuncionario" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Flag que indica se a falta é considerada como parcial ou não. S - Sim N - Não</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_motivofaltafuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="motivofaltafuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_motivofaltafuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="motivofaltafuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_motivofaltafuncionario" upd="1">
        <Sql>personalerp.fn_replica_motivofaltafuncionario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="motorista">
      <Cm>Cadastro de motoristas. Usado no modulo de madeireiras</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomotorista, codigoempresa, codigoloja" nm="motorista_pkey"/>
      <Cl au="0" df="nextval(('&quot;personalerp&quot;.&quot;motorista_codigomotorista_seq&quot;'::text)::regclass)" nm="codigomotorista" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemotorista" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="veiculomotorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>Descricao do veiculo do motorista</Cm>
      </Cl>
      <Cl au="0" df="" nm="placaveiculomotorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Placa do veiculo do motorista</Cm>
      </Cl>
      <Cl au="0" df="" nm="enderecomotorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="bairromotorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone1motorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone2motorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocidade" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoesmotorista" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="300" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="cidade_motorista_fk" prLkCl="codigocidade" upAc="3">
        <PrTb mn="0" nm="cidade" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="motorista" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocidade" prCl="codigocidade"/>
      </Fk>
      <Fk deAc="3" nm="empresa_motorista_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="motorista" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_motorista_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="motorista" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_motorista" upd="1">
        <Sql>personalerp.fn_replica_motorista()</Sql>
      </Trg>
      <UniqueConstraints>
        <UnCon nm="motorista_codigomotorista_key">
          <ClNs>codigomotorista</ClNs>
        </UnCon>
      </UniqueConstraints>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="movimentacaocaixaloja">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocaixa, codigoaberturacaixa, sequencialmovimentacaocaixaloja" nm="pk_movimentacaocaixaloja"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocaixa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoaberturacaixa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('movimentacaocaixaloja_sequencialmovimentacaocaixaloja_seq'::regclass)" nm="sequencialmovimentacaocaixaloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="operacaomovimentacaocaixaloja" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valormovimentacaocaixaloja" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datamovimentacaocaixaloja" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="historicomovimentacaocaixaloja" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapedido" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapedido" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopedido" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopdv" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="aberturacaixaloja_movimentacaocaixaloja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="aberturacaixaloja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="movimentacaocaixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigocaixa" prCl="codigocaixa"/>
        <ClPr cdCl="codigoaberturacaixa" prCl="codigoaberturacaixa"/>
      </Fk>
      <Fk deAc="3" nm="pedido_movimentacaocaixaloja" prLkCl="codigopedido" upAc="3">
        <PrTb mn="0" nm="pedido" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="movimentacaocaixaloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopedido" prCl="codigopedido"/>
        <ClPr cdCl="codigolojapedido" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresapedido" prCl="codigoempresa"/>
        <ClPr cdCl="codigopdv" prCl="codigopdv"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_movimentacaocaixaloja" upd="1">
        <Sql>personalerp.fn_replica_movimentacaocaixaloja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="movimentacaocontabancaria">
      <Cm>Tabela com a movimentação da conta bancária</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigocontabancaria, codigoempresa, codigoloja, sequencialmovimentacaocontabancaria" nm="movimentacaocontabancaria_pk"/>
      <Cl au="0" df="" nm="codigocontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('movimentacaocontabancaria_sequencialmovimentacaocontabancari163'::regclass)" nm="sequencialmovimentacaocontabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="operacaomovimentacaocontabancaria" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valormovimentacaocontabancaria" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigorecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaomovimentacaocontabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datamovimentacaocontabancaria" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contabancaria_movimentacaocontabancaria_fk" prLkCl="codigocontabancaria" upAc="3">
        <PrTb mn="0" nm="contabancaria" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="movimentacaocontabancaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontabancaria" prCl="codigocontabancaria"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="pagamento_movimentacaocontabancaria_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="pagamento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="movimentacaocontabancaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojapagamento" prCl="codigoloja"/>
        <ClPr cdCl="codigopagamento" prCl="codigopagamento"/>
        <ClPr cdCl="codigoempresapagamento" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="recebimento_movimentacaocontabancaria" prLkCl="codigorecebimento" upAc="3">
        <PrTb mn="0" nm="recebimento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="movimentacaocontabancaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigorecebimento" prCl="codigorecebimento"/>
        <ClPr cdCl="codigoempresarecebimento" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojarecebimento" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_movimentacaocontabancaria" upd="1">
        <Sql>personalerp.fn_replica_movimentacaocontabancaria()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="movimentacaoestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigomovimentacaoestoque, codigoempresaestoque, codigolojaestoque, codigoempresa, codigoloja, codigoproduto" nm="pk_movimentacaoestoque"/>
      <Cl au="0" df="nextval('movimentacaoestoque_codigomovimentacaoestoque_seq'::regclass)" nm="codigomovimentacaoestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="now()" nm="datahoramovimentacaoestoque" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="operacaomovimentacaoestoque" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadefisicomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadefiscalmovimentacaoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadefisicoanteriormovimentacaoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadefiscalanteriormovimentacaoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="precomediomovimentacaoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="precomedioanteriormovimentacaoestoque" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaomovimentacaoestoque" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="300" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="documentomovimentacaoestoque" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_movimentacaoestoque_estoque" prLkCl="codigoempresaestoque" upAc="3">
        <PrTb mn="0" nm="estoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="movimentacaoestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_movimentacaoestoque" upd="1">
        <Sql>personalerp.fn_replica_movimentacaoestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="movimentacaoitemromaneioabate">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio, codigoitemromaneio, codigoempresaestoque, codigolojaestoque, codigomovimentacaoestoque, codigoempresasubproduto, codigolojasubproduto, codigosubproduto" nm="pk_movimentacaoitemromaneioabate"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoitemromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomovimentacaoestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresasubproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojasubproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigosubproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="itemromaneioabate_movimentacaoitemromaneioabate" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="itemromaneioabate" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="movimentacaoitemromaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoromaneio" prCl="codigoromaneio"/>
        <ClPr cdCl="codigoitemromaneio" prCl="codigoitemromaneio"/>
      </Fk>
      <Fk deAc="3" nm="movimentacaoestoque_movimentacaoitemromaneioabate" prLkCl="codigomovimentacaoestoque" upAc="3">
        <PrTb mn="0" nm="movimentacaoestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="movimentacaoitemromaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigomovimentacaoestoque" prCl="codigomovimentacaoestoque"/>
        <ClPr cdCl="codigoempresaestoque" prCl="codigoempresaestoque"/>
        <ClPr cdCl="codigolojaestoque" prCl="codigolojaestoque"/>
        <ClPr cdCl="codigoempresasubproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojasubproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigosubproduto" prCl="codigoproduto"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_movimentacaoitemromaneioabate" upd="1">
        <Sql>personalerp.fn_replica_movimentacaoitemromaneioabate()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="nfeletronica">
      <Cm>Tabela com os dados da nota fiscal eletrônica</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfe" nm="nfeletronica_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfe" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Sequencial da NF-e. Este campo não é auto incremento para evitar que se perca algum sequencial.</Cm>
      </Cl>
      <Cl au="0" df="" nm="statusnfe" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>1 - Em digitação 2 - Validada 3 - Assinada 4 - Transmitida 5 - Autorizada 6 - Cancelada</Cm>
      </Cl>
      <Cl au="0" df="" nm="chavenfe" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="60" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="protocolonfe" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Numero do protocolo retornado pelo processamento da NF-e</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_nfeletronica_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfeletronica" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_nfeletronica_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfeletronica" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_nfeletronica" upd="1">
        <Sql>personalerp.fn_replica_nfeletronica()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="nfentrada">
      <Cm>Notas fiscais de entrada</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfentrada, serienfentrada, codigoempresaemitentenfentrada, codigolojaemitentenfentrada, codigopessoaemitentenfentrada, codigoenderecopessoaemitentenfentrada" nm="pk_nfentrada"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>CÃ³digo da NF de entrada (Sequencial)</Cm>
      </Cl>
      <Cl au="0" df="" nm="serienfentrada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>SÃ©rie da Nota Fiscal de SaÃ­da</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Empresa do Endereco do Cliente (Destinatario) da Nota Fiscal de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigolojaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Loja do Endereco do Cliente (Destinatario) da Nota Fiscal de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Pessoa do Endereco do Cliente (Destinatario) da Nota Fiscal de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="formapagamentonfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>0 - Pagamento a vista; 1 - Pagamento a prazo; 2 - Outros.</Cm>
      </Cl>
      <Cl au="0" df="" nm="operacaotributacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="chavenfeentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="modelonfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Modelo do documento fiscal. Para NF-e, usar 55.</Cm>
      </Cl>
      <Cl au="0" df="" nm="dataemissaonfentrada" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data de Emissao da Nota Fiscal de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahoraentradanfentrada" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora da SaÃ­da da Mercadoria</Cm>
      </Cl>
      <Cl au="0" df="" nm="modalidadefretenfentrada" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>0- Por conta do emitente; 1- Por conta do destinatÃ¡rio/remetente; 2- Por conta de terceiros; 9- Sem frete. (V2.0)</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresatransportadoranfentrada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Empresa do Endereco da Transportadora.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigolojatransportadoranfentrada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Loja do Endereco da Transportadora.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigopessoatransportadoranfentrada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoatransportadoranfentrada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo do Endereco da Transportadora.</Cm>
      </Cl>
      <Cl au="0" df="" nm="quantidadevolumestransportenfentrada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Quantidade de volumes no transporte</Cm>
      </Cl>
      <Cl au="0" df="" nm="especievolumetransportenfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>EspÃ©cie do volume (caixa, sacola, etc)</Cm>
      </Cl>
      <Cl au="0" df="" nm="pesobrutotransportenfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="3" sg="1" un="0"/>
        <Cm>Valor do Peso Bruto dos Volumes Transportados.</Cm>
      </Cl>
      <Cl au="0" df="" nm="pesoliquitotransportenfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="3" sg="1" un="0"/>
        <Cm>Peso liquido dos volumes na nf de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="placaveiculotransportenfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="8" sc="null" sg="1" un="0"/>
        <Cm>Placa do veiculo da transportadora na NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="ufplacaveiculotransportenfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="2" sc="null" sg="1" un="0"/>
        <Cm>UF da Placa do Veiculo da Transportadora da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="inscricaoestadualstnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
        <Cm>InscriÃ§Ã£o Estadual do Substituto TributÃ¡rio (quando aplicavel)</Cm>
      </Cl>
      <Cl au="0" df="" nm="marcavolumetransportenfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Marca dos volumes transportados da nf de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="numeracaovolumestransportenfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>NumeraÃ§Ã£o dos volumes transportados da NF de entrada</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorbasecalculoicmsnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor da base de calculo para o ICMS.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoricmsnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do ICMS da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorbasecalculoicmsstnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor da Base de Calculo para ICMS Substituicao Tributaria.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoricmsstnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do ICMS Substituicao Tributaria.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalprodutosnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total dos produtos.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfretenfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do Frete.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorseguronfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Seguro da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotaldescontonfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Total do Desconto da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalipinfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do IPI da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalpisnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do PIS da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalcofinsnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do Cofins da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoroutrasdespesasnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de Outras Despesas Acessorias da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalnfentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Total da NF de entrada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="statusnfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaonfentrada" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="300" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="enderecopessoa_emitente_nfentrada" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfentrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaemitentenfentrada" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaemitentenfentrada" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoaemitentenfentrada" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoaemitentenfentrada" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_transportadora_nfentrada" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="nfentrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresatransportadoranfentrada" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojatransportadoranfentrada" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoatransportadoranfentrada" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoatransportadoranfentrada" prCl="codigoenderecopessoa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_nfentrada" upd="1">
        <Sql>personalerp.fn_replica_nfentrada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="nfentradacontapagar">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfentrada, serienfentrada, codigoempresaemitentenfentrada, codigolojaemitentenfentrada, codigopessoaemitentenfentrada, codigoenderecopessoaemitentenfentrada, codigoempresacontapagar, codigolojacontapagar, codigocontapagar" nm="pk_nfentradacontapagar"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="serienfentrada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contapagar_nfentradacontapagar" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contapagar" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfentradacontapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacontapagar" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontapagar" prCl="codigoloja"/>
        <ClPr cdCl="codigocontapagar" prCl="codigocontapagar"/>
      </Fk>
      <Fk deAc="3" nm="nfentrada_nfentradacontapagar" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="nfentrada" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfentradacontapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigonfentrada" prCl="codigonfentrada"/>
        <ClPr cdCl="serienfentrada" prCl="serienfentrada"/>
        <ClPr cdCl="codigoempresaemitentenfentrada" prCl="codigoempresaemitentenfentrada"/>
        <ClPr cdCl="codigolojaemitentenfentrada" prCl="codigolojaemitentenfentrada"/>
        <ClPr cdCl="codigopessoaemitentenfentrada" prCl="codigopessoaemitentenfentrada"/>
        <ClPr cdCl="codigoenderecopessoaemitentenfentrada" prCl="codigoenderecopessoaemitentenfentrada"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_nfentradacontapagar" upd="1">
        <Sql>personalerp.fn_replica_nfentradacontapagar()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="nfentradaentradaestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfentrada, serienfentrada, codigoempresaemitentenfentrada, codigolojaemitentenfentrada, codigopessoaemitentenfentrada, codigoenderecopessoaemitentenfentrada, codigoempresaentradaestoque, codigolojaentradaestoque, codigoentradaestoque" nm="pk_nfentradaentradaestoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="serienfentrada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaemitentenfentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaentradaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaentradaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoentradaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="entradaestoque_nfentradaentradaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="entradaestoque" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfentradaentradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaentradaestoque" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaentradaestoque" prCl="codigoloja"/>
        <ClPr cdCl="codigoentradaestoque" prCl="codigoentradaestoque"/>
      </Fk>
      <Fk deAc="3" nm="nfentrada_nfentradaentradaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="nfentrada" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfentradaentradaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigonfentrada" prCl="codigonfentrada"/>
        <ClPr cdCl="serienfentrada" prCl="serienfentrada"/>
        <ClPr cdCl="codigoempresaemitentenfentrada" prCl="codigoempresaemitentenfentrada"/>
        <ClPr cdCl="codigolojaemitentenfentrada" prCl="codigolojaemitentenfentrada"/>
        <ClPr cdCl="codigopessoaemitentenfentrada" prCl="codigopessoaemitentenfentrada"/>
        <ClPr cdCl="codigoenderecopessoaemitentenfentrada" prCl="codigoenderecopessoaemitentenfentrada"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_nfentradaentradaestoque" upd="1">
        <Sql>personalerp.fn_replica_nfentradaentradaestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="nfsaida">
      <Cm>Notas fiscais de saida</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigonfsaida, serienfsaida" nm="nfsaida_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfsaida" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>CÃ³digo da NF de saida (Sequencial)</Cm>
      </Cl>
      <Cl au="0" df="" nm="serienfsaida" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>SÃ©rie da Nota Fiscal de SaÃ­da</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigonfe" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Sequencial da NF-e. Este campo nÃ£o Ã© auto incremento para evitar que se perca algum sequencial.</Cm>
      </Cl>
      <Cl au="0" df="" nm="formapagamentonfsaida" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>0 - Pagamento a vista; 1 - Pagamento a prazo; 2 - Outros.</Cm>
      </Cl>
      <Cl au="0" df="" nm="operacaotributacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="modelonfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Modelo do documento fiscal. Para NF-e, usar 55.</Cm>
      </Cl>
      <Cl au="0" df="" nm="dataemissaonfsaida" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data de Emissao da Nota Fiscal de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahorasaidanfsaida" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora da SaÃ­da da Mercadoria</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresadestinatarionfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Empresa do Endereco do Cliente (Destinatario) da Nota Fiscal de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigolojadestinatarionfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Loja do Endereco do Cliente (Destinatario) da Nota Fiscal de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigopessoadestinatarionfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoadestinatarionfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Pessoa do Endereco do Cliente (Destinatario) da Nota Fiscal de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="modalidadefretenfsaida" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>0- Por conta do emitente; 1- Por conta do destinatÃ¡rio/remetente; 2- Por conta de terceiros; 9- Sem frete. (V2.0)</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresatransportadoranfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Empresa do Endereco da Transportadora.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigolojatransportadoranfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo da Loja do Endereco da Transportadora.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigopessoatransportadoranfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoatransportadoranfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Codigo do Endereco da Transportadora.</Cm>
      </Cl>
      <Cl au="0" df="" nm="quantidadevolumestransportenfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Quantidade de volumes no transporte</Cm>
      </Cl>
      <Cl au="0" df="" nm="especievolumetransportenfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>EspÃ©cie do volume (caixa, sacola, etc)</Cm>
      </Cl>
      <Cl au="0" df="" nm="pesobrutotransportenfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="3" sg="1" un="0"/>
        <Cm>Valor do Peso Bruto dos Volumes Transportados.</Cm>
      </Cl>
      <Cl au="0" df="" nm="pesoliquitotransportenfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="3" sg="1" un="0"/>
        <Cm>Peso liquido dos volumes na nf de saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="placaveiculotransportenfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="8" sc="null" sg="1" un="0"/>
        <Cm>Placa do veiculo da transportadora na NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="ufplacaveiculotransportenfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="2" sc="null" sg="1" un="0"/>
        <Cm>UF da Placa do Veiculo da Transportadora da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="inscricaoestadualstnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
        <Cm>InscriÃ§Ã£o Estadual do Substituto TributÃ¡rio (quando aplicavel)</Cm>
      </Cl>
      <Cl au="0" df="" nm="marcavolumetransportenfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Marca dos volumes transportados da nf de saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="numeracaovolumestransportenfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>NumeraÃ§Ã£o dos volumes transportados da NF de Saida</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorbasecalculoicmsnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor da base de calculo para o ICMS.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoricmsnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do ICMS da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorbasecalculoicmsstnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor da Base de Calculo para ICMS Substituicao Tributaria.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoricmsstnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do ICMS Substituicao Tributaria.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalprodutosnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total dos produtos.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfretenfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do Frete.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorseguronfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do Seguro da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotaldescontonfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Total do Desconto da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalipinfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do IPI da NF de saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalpisnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do PIS da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalcofinsnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor total do Cofins da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoroutrasdespesasnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de Outras Despesas Acessorias da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valortotalnfsaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor Total da NF de Saida.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusnfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaonfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="300" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="destinatario_enderecopessoa_nfsaida_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="nfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojadestinatarionfsaida" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresadestinatarionfsaida" prCl="codigoempresa"/>
        <ClPr cdCl="codigoenderecopessoadestinatarionfsaida" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigopessoadestinatarionfsaida" prCl="codigopessoa"/>
      </Fk>
      <Fk deAc="3" nm="empresa_nfsaida_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_nfsaida_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="nfeletronica_nfsaida_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="nfeletronica" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="nfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigonfe" prCl="codigonfe"/>
      </Fk>
      <Fk deAc="3" nm="operacaotributacao_nfsaida" prLkCl="operacaotributacao" upAc="3">
        <PrTb mn="0" nm="operacaotributacao" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="nfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="operacaotributacao" prCl="operacaotributacao"/>
      </Fk>
      <Fk deAc="3" nm="transportadora_enderecopessoa_nfsaida_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="nfsaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojatransportadoranfsaida" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresatransportadoranfsaida" prCl="codigoempresa"/>
        <ClPr cdCl="codigoenderecopessoatransportadoranfsaida" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigopessoatransportadoranfsaida" prCl="codigopessoa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_nfsaida" upd="1">
        <Sql>personalerp.fn_replica_nfsaida()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="nivelmetavenda">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigonivelmetavenda" nm="pk_nivelmetavenda"/>
      <Cl au="0" df="" nm="codigonivelmetavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomenivelmetavenda" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="pesonivelmetavenda" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_nivelmetavenda" upd="1">
        <Sql>personalerp.fn_replica_nivelmetavenda()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="objeto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoobjeto" nm="objeto_pk"/>
      <Cl au="0" df="nextval('objeto_codigoobjeto_seq'::regclass)" nm="codigoobjeto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeobjeto" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaoobjeto" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_objeto" upd="1">
        <Sql>personalerp.fn_replica_objeto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="operacaotributacao">
      <Cm>Tabela de Operações Possiveis para a Tributação</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="operacaotributacao" nm="operacaotributacao_pk"/>
      <Cl au="0" df="" nm="operacaotributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaooperacaotributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_operacaotributacao" upd="1">
        <Sql>personalerp.fn_replica_operacaotributacao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="operadoracartao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigooperadoracartao" nm="pk_operadoracartao"/>
      <Cl au="0" df="nextval('operadoracartao_codigooperadoracartao_seq'::regclass)" nm="codigooperadoracartao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeoperadoracartao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusoperadoracartao" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>A - Ativa I - Inativa</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contabancaria_operadoracartao" prLkCl="codigocontabancaria" upAc="3">
        <PrTb mn="0" nm="contabancaria" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="operadoracartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontabancaria" prCl="codigocontabancaria"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_operadoracartao" upd="1">
        <Sql>personalerp.fn_replica_operadoracartao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pagamento">
      <Cm>Pagamento de contas</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigopagamento, codigoempresa, codigoloja" nm="pagamento_pk"/>
      <Cl au="0" df="nextval('pagamento_codigopagamento_seq'::regclass)" nm="codigopagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorabaixapagamento" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorpagamento" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoformapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaopagamento" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="tipobaixa_baixacontapagar_fk" prLkCl="codigoformapagamento" upAc="3">
        <PrTb mn="0" nm="formapagamento" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoformapagamento" prCl="codigoformapagamento"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pagamento" upd="1">
        <Sql>personalerp.fn_replica_pagamento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pais">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigopais" nm="pais_pk"/>
      <Cl au="0" df="nextval('pais_codigopais_seq'::regclass)" nm="codigopais" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomepais" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="siglapais" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoibgepais" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="210" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pais" upd="1">
        <Sql>personalerp.fn_replica_pais()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="parametro">
      <Cm>Tabela de parametros do sistema. Informacoes apenas de definicao dos mesmos.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="chaveparametro" nm="parametro_pk"/>
      <Cl au="0" df="" nm="chaveparametro" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Chave do parametro. Valor de ate 50 caracteres que identifica o mesmo.</Cm>
      </Cl>
      <Cl au="0" df="" nm="descricaoparametro" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
        <Cm>Descricao o mais completa possível sobre o parametro, bem como seus possiveis valores.</Cm>
      </Cl>
      <Cl au="0" df="" nm="tipodadoparametro" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Tipo de dados do parametro: T - Texto livre D - Data N - Numerico (informar decimais) M - Multipla escolha (informar valores)</Cm>
      </Cl>
      <Cl au="0" df="" nm="decimaisparametro" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Caso o tipo seja numerico, informar aqui o numero de parametros.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valoresparametro" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="800" sc="null" sg="1" un="0"/>
        <Cm>Coleção de valores permitidos para o parametro. Ex: Valores Sim (S) e Não (N) &lt;Valor&gt;|&lt;NomeExibicao&gt;;&lt;Valor&gt;|&lt;NomeExibicao&gt; S|Sim;N|Não</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_parametro" upd="1">
        <Sql>personalerp.fn_replica_parametro()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="parametroloja">
      <Cm>Tabela de parametros por loja</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="chaveparametro, codigoempresa, codigoloja" nm="parametroloja_pk"/>
      <Cl au="0" df="" nm="chaveparametro" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
        <Cm>Chave do parametro. Valor de ate 50 caracteres que identifica o mesmo.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorparametro" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="500" sc="null" sg="1" un="0"/>
        <Cm>Valor do parametro</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="parametro_parametroloja_fk" prLkCl="chaveparametro" upAc="3">
        <PrTb mn="0" nm="parametro" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="parametroloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="chaveparametro" prCl="chaveparametro"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_parametroloja" upd="1">
        <Sql>personalerp.fn_replica_parametroloja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="parcelaplanopagamentovenda">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoplanopagamento, codigoparcelaplanopagamento" nm="pk_parcelaplanopagamentovenda"/>
      <Cl au="0" df="" nm="codigoplanopagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('parcelaplanopagamentovenda_codigoparcelaplanopagamento_seq'::regclass)" nm="codigoparcelaplanopagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="diaspagamentoparcela" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="planopagamentovenda_parcelaplanopagamentovenda" prLkCl="codigoplanopagamento" upAc="3">
        <PrTb mn="0" nm="planopagamentovenda" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="parcelaplanopagamentovenda" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanopagamento" prCl="codigoplanopagamento"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_parcelaplanopagamentovenda" upd="1">
        <Sql>personalerp.fn_replica_parcelaplanopagamentovenda()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pdv">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigopdv" nm="pk_pdv"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopdv" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomepdv" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_pdv" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pdv" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pdv" upd="1">
        <Sql>personalerp.fn_replica_pdv()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pedido">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigopdv, codigopedido" nm="pk_pedido"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="1" nm="codigopdv" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('pedido_codigopedido_seq'::regclass)" nm="codigopedido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statuspedido" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datapedido" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoa" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoespedido" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valortotalitenspedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valordescontopedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorfretepedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valortotalpedido" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafrete" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafrete" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoafrete" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoafrete" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaentrega" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaentrega" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaentrega" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaentrega" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresanfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojanfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigonfsaida" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="serienfsaida" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoplanopagamento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeatendimentos" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_pedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_entrega_pedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaentrega" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaentrega" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoaentrega" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoaentrega" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_frete_pedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresafrete" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojafrete" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoafrete" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoafrete" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_pedido" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoa" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoa" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigoempresaenderecopessoa" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaenderecopessoa" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_pedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="nfsaida_pedido" prLkCl="codigonfsaida" upAc="3">
        <PrTb mn="0" nm="nfsaida" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigonfsaida" prCl="codigonfsaida"/>
        <ClPr cdCl="serienfsaida" prCl="serienfsaida"/>
        <ClPr cdCl="codigoempresanfsaida" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojanfsaida" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="pdv_pedido" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="pdv" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigopdv" prCl="codigopdv"/>
      </Fk>
      <Fk deAc="3" nm="planopagamentovenda_pedido" prLkCl="codigoplanopagamento" upAc="3">
        <PrTb mn="0" nm="planopagamentovenda" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanopagamento" prCl="codigoplanopagamento"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_pedido" prLkCl="codigovendedor" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="pedido" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigovendedor" prCl="codigovendedor"/>
        <ClPr cdCl="codigoempresavendedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedor" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pedido" upd="1">
        <Sql>personalerp.fn_replica_pedido()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pedidocontareceber">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigopedido, codigoempresacontareceber, codigolojacontareceber, codigocontareceber, codigopdv" nm="pk_pedidocontareceber"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopedido" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontareceber" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopdv" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contareceber_pedidocontareceber" prLkCl="codigocontareceber" upAc="3">
        <PrTb mn="0" nm="contareceber" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pedidocontareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontareceber" prCl="codigocontareceber"/>
        <ClPr cdCl="codigoempresacontareceber" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontareceber" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="pedido_pedidocontareceber" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="pedido" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pedidocontareceber" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigopedido" prCl="codigopedido"/>
        <ClPr cdCl="codigopdv" prCl="codigopdv"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pedidocontareceber" upd="1">
        <Sql>personalerp.fn_replica_pedidocontareceber()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="perfil">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoperfil, codigoempresa, codigoloja" nm="perfil_pk"/>
      <Cl au="0" df="nextval('perfil_codigoperfil_seq'::regclass)" nm="codigoperfil" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeperfil" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaoperfil" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomenu" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_perfil_fk" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="perfil" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="menu_perfil_fk" prLkCl="codigomenu" upAc="0">
        <PrTb mn="0" nm="menu" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="perfil" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigomenu" prCl="codigomenu"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_perfil" upd="1">
        <Sql>personalerp.fn_replica_perfil()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="perfilusuario">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoperfil, usuariocodigousuario, usuariocodigoempresa, usuariocodigoloja" nm="perfilusuario_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoperfil" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="usuariocodigousuario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="usuariocodigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="usuariocodigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="perfil_perfilusuario_fk" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="perfil" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="perfilusuario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoperfil" prCl="codigoperfil"/>
      </Fk>
      <Fk deAc="3" nm="usuario_perfilusuario_fk" prLkCl="codigousuario" upAc="0">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="perfilusuario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="usuariocodigousuario" prCl="codigousuario"/>
        <ClPr cdCl="usuariocodigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="usuariocodigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_perfilusuario" upd="1">
        <Sql>personalerp.fn_replica_perfilusuario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="permissaoespecial">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoopermissaoespecial" nm="permissaoespecial_pkey"/>
      <Cl au="0" df="" nm="codigoopermissaoespecial" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaopermissaoespecial" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorespermissaoespecial" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_permissaoespecial" upd="1">
        <Sql>personalerp.fn_replica_permissaoespecial()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="permissaoespecialusuario">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoopermissaoespecial, codigoempresa, codigoloja, codigousuario" nm="permissaoespecialusuario_pkey"/>
      <Cl au="0" df="" nm="codigoopermissaoespecial" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorpermissao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="permissaoespecialusuario_codigoempresa_fkey" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="permissaoespecialusuario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigousuario" prCl="codigousuario"/>
      </Fk>
      <Fk deAc="3" nm="permissaoespecialusuario_codigoopermissaoespecial_fkey" prLkCl="codigoopermissaoespecial" upAc="0">
        <PrTb mn="0" nm="permissaoespecial" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="permissaoespecialusuario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoopermissaoespecial" prCl="codigoopermissaoespecial"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_permissaoespecialusuario" upd="1">
        <Sql>personalerp.fn_replica_permissaoespecialusuario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="permissaoperfilacaoobjeto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoperfil, codigoempresa, codigoloja, codigoobjeto, codigoacaoobjeto" nm="permissaoperfilacaoobjeto_pk"/>
      <Cl au="0" df="" nm="codigoperfil" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoobjeto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoacaoobjeto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="acaoobjeto_permissaoperfilacaoobjeto_fk" prLkCl="codigoobjeto" upAc="0">
        <PrTb mn="0" nm="acaoobjeto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="permissaoperfilacaoobjeto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoobjeto" prCl="codigoobjeto"/>
        <ClPr cdCl="codigoacaoobjeto" prCl="codigoacaoobjeto"/>
      </Fk>
      <Fk deAc="3" nm="perfil_permissaoperfilacaoobjeto_fk" prLkCl="codigoperfil" upAc="0">
        <PrTb mn="0" nm="perfil" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="permissaoperfilacaoobjeto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoperfil" prCl="codigoperfil"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_permissaoperfilacaoobjeto" upd="1">
        <Sql>personalerp.fn_replica_permissaoperfilacaoobjeto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="permissaoperfilobjeto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoperfil, codigoempresa, codigoloja, codigoobjeto" nm="permissaoperfilobjeto_pk"/>
      <Cl au="0" df="" nm="codigoperfil" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoobjeto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="objeto_permissaoperfilobjeto_fk" prLkCl="codigoobjeto" upAc="0">
        <PrTb mn="0" nm="objeto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="permissaoperfilobjeto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoobjeto" prCl="codigoobjeto"/>
      </Fk>
      <Fk deAc="3" nm="perfil_permissaoperfilobjeto_fk" prLkCl="codigoperfil" upAc="0">
        <PrTb mn="0" nm="perfil" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="permissaoperfilobjeto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoperfil" prCl="codigoperfil"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_permissaoperfilobjeto" upd="1">
        <Sql>personalerp.fn_replica_permissaoperfilobjeto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pessoa">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigopessoa, codigoempresa, codigoloja" nm="pessoa_pk"/>
      <Cl au="0" df="nextval('pessoa_codigopessoa_seq'::regclass)" nm="codigopessoa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomerazaosocialpessoa" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="emailpessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoespessoa" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="180" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="naturezapessoa" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_pessoa_fk" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pessoa" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pessoa" upd="1">
        <Sql>personalerp.fn_replica_pessoa()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="pessoafisica">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigopessoafisica, codigoempresa, codigoloja" nm="pessoafisica_pk"/>
      <Cl au="0" df="" nm="codigopessoafisica" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datanascimentopessoafisica" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="rgpessoafisica" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomemaepessoafisica" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomepaipessoafisica" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeconjuguepessoafisica" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="sexopessoafisica" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="localtrabalhopessoafisica" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataadmissaopessoafisica" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cargopessoafisica" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="rendimentospessoafisica" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="pessoa_pessoafisica_fk" prLkCl="codigopessoa" upAc="0">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="pessoafisica" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoafisica" prCl="codigopessoa"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_pessoafisica" upd="1">
        <Sql>personalerp.fn_replica_pessoafisica()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="planoconta">
      <Cm>Tabela de Plano de Contas</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoplanoconta" nm="planoconta_pk"/>
      <Cl au="0" df="nextval('planoconta_codigoplanoconta_seq'::regclass)" nm="codigoplanoconta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroplanoconta" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeplanoconta" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipoplanoconta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoplanocontapai" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="planoconta_planoconta_fk" prLkCl="codigoplanoconta" upAc="3">
        <PrTb mn="0" nm="planoconta" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="planoconta" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoplanocontapai" prCl="codigoplanoconta"/>
      </Fk>
      <Fk deAc="3" nm="tipoplanoconta_planoconta_fk" prLkCl="codigotipoplanoconta" upAc="3">
        <PrTb mn="0" nm="tipoplanoconta" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="planoconta" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipoplanoconta" prCl="codigotipoplanoconta"/>
      </Fk>
      <Trg del="0" eaRow="1" exBe="1" ins="1" nm="tg_numeroplanoconta" upd="0">
        <Sql>personalerp.fn_numeroplanoconta()</Sql>
      </Trg>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_planoconta" upd="1">
        <Sql>personalerp.fn_replica_planoconta()</Sql>
      </Trg>
      <UniqueConstraints>
        <UnCon nm="planoconta_numeroplanoconta_unq">
          <ClNs>numeroplanoconta</ClNs>
        </UnCon>
      </UniqueConstraints>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="planopagamentovenda">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoplanopagamento" nm="pk_planopagamentovenda"/>
      <Cl au="0" df="nextval('planopagamentovenda_codigoplanopagamento_seq'::regclass)" nm="codigoplanopagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeplanopagamento" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="percentualjurosplanopagamento" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagativoplanopagamento" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>S- Sim N - Nao</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_planopagamentovenda" upd="1">
        <Sql>personalerp.fn_replica_planopagamentovenda()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="portador">
      <Cm>Tabela de Portadores</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoportador" nm="portador_pk"/>
      <Cl au="0" df="nextval('portador_codigoportador_seq'::regclass)" nm="codigoportador" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeportador" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_portador" upd="1">
        <Sql>personalerp.fn_replica_portador()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="produto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoproduto" nm="pk_produto"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('produto_codigoproduto_seq'::regclass)" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaoproduto" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoreferenciaproduto" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipoestoqueproduto" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigogrupo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigosubgrupo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigofabricante" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="siglaunidade" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="comprimentoproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="8" sc="3" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="larguraproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="8" sc="3" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="permitevendafracionadaproduto" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="margemlucrovarejoproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="9" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="margemlucroatacadoproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="9" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="estoqueminimoproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="8" sc="3" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="situacaoproduto" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoesproduto" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="250" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoessencia" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="volumeproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="alturaproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipomadeirabeneficiada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipotributacao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoncmproduto" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="essencia_produto_fk" prLkCl="codigoessencia" upAc="3">
        <PrTb mn="0" nm="essencia" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoessencia" prCl="codigoessencia"/>
      </Fk>
      <Fk deAc="3" nm="fk_produto_fabricante" prLkCl="codigofabricante" upAc="0">
        <PrTb mn="0" nm="fabricante" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofabricante" prCl="codigofabricante"/>
      </Fk>
      <Fk deAc="3" nm="fk_produto_fornecedor" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresafornecedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojafornecedor" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoafornecedor" prCl="codigopessoa"/>
      </Fk>
      <Fk deAc="3" nm="fk_produto_grupo" prLkCl="codigogrupo" upAc="0">
        <PrTb mn="0" nm="grupo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigogrupo" prCl="codigogrupo"/>
      </Fk>
      <Fk deAc="3" nm="fk_produto_loja" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="fk_produto_subgrupo" prLkCl="codigosubgrupo" upAc="0">
        <PrTb mn="0" nm="subgrupo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigosubgrupo" prCl="codigosubgrupo"/>
      </Fk>
      <Fk deAc="3" nm="fk_produto_unidade" prLkCl="siglaunidade" upAc="0">
        <PrTb mn="0" nm="unidade" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="siglaunidade" prCl="siglaunidade"/>
      </Fk>
      <Fk deAc="3" nm="tipomadeirabeneficiada_produto_fk" prLkCl="codigotipomadeirabeneficiada" upAc="3">
        <PrTb mn="0" nm="tipomadeirabeneficiada" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipomadeirabeneficiada" prCl="codigotipomadeirabeneficiada"/>
      </Fk>
      <Fk deAc="3" nm="tipotributacao_produto_fk" prLkCl="codigotipotributacao" upAc="3">
        <PrTb mn="0" nm="tipotributacao" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="produto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipotributacao" prCl="codigotipotributacao"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_produto" upd="1">
        <Sql>personalerp.fn_replica_produto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="produtovendadiaria">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, datavenda, codigoempresaproduto, codigolojaproduto, codigoproduto" nm="pk_produtovendadiaria"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datavenda" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeproduto" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadegavetaproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadedisplayproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="produto_produtovendadiaria" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="produtovendadiaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="vendadiaria_produtovendadiaria" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="vendadiaria" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="produtovendadiaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="datavenda" prCl="datavenda"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_produtovendadiaria" upd="1">
        <Sql>personalerp.fn_replica_produtovendadiaria()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="rateiocontapagar">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocontapagar, codigoempresarateio, codigolojarateio" nm="pk_rateiocontapagar"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontapagar" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresarateio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojarateio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorrateio" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contapagar_rateiocontapagar" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contapagar" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="rateiocontapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigocontapagar" prCl="codigocontapagar"/>
      </Fk>
      <Fk deAc="3" nm="loja_rateiocontapagar" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="rateiocontapagar" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresarateio" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojarateio" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_rateiocontapagar" upd="1">
        <Sql>personalerp.fn_replica_rateiocontapagar()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="recebimento">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigorecebimento" nm="pk_recebimento"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('recebimento_codigorecebimento_seq'::regclass)" nm="codigorecebimento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorarecebimento" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorrecebimento" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaorecebimento" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoformarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_recebimento" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="recebimento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="formarecebimento_recebimento" prLkCl="codigoformarecebimento" upAc="3">
        <PrTb mn="0" nm="formarecebimento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="recebimento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoformarecebimento" prCl="codigoformarecebimento"/>
      </Fk>
      <Fk deAc="3" nm="loja_recebimento" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="recebimento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_recebimento" upd="1">
        <Sql>personalerp.fn_replica_recebimento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="recebimentocartao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigorecebimentocartao" nm="pk_recebimentocartao"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('recebimentocartao_codigorecebimentocartao_seq'::regclass)" nm="codigorecebimentocartao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorarecebimentocartao" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="reciborecebimentocartao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorrecebimentocartao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tiporecebimentocartao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>D - Débito C - Crédito</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigobandeira" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigooperadoracartao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="parcelasrecebimentocartao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojarecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigorecebimento" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoaemitente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusrecebimentocartao" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="mensagemrecebimentocartao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="sequencialmovimentacaocontabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="bandeiracartao_recebimentocartao" prLkCl="codigobandeira" upAc="3">
        <PrTb mn="0" nm="bandeiracartao" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigobandeira" prCl="codigobandeira"/>
      </Fk>
      <Fk deAc="3" nm="empresa_recebimentocartao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_recebimentocartao" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoaemitente" prCl="codigopessoa"/>
        <ClPr cdCl="codigoenderecopessoaemitente" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigoempresaemitente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaemitente" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_recebimentocartao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="movimentacaocontabancaria_recebimentocartao" prLkCl="codigocontabancaria" upAc="3">
        <PrTb mn="0" nm="movimentacaocontabancaria" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontabancaria" prCl="codigocontabancaria"/>
        <ClPr cdCl="codigoempresacontabancaria" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontabancaria" prCl="codigoloja"/>
        <ClPr cdCl="sequencialmovimentacaocontabancaria" prCl="sequencialmovimentacaocontabancaria"/>
      </Fk>
      <Fk deAc="3" nm="operadoracartao_recebimentocartao" prLkCl="codigooperadoracartao" upAc="3">
        <PrTb mn="0" nm="operadoracartao" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigooperadoracartao" prCl="codigooperadoracartao"/>
      </Fk>
      <Fk deAc="3" nm="recebimento_recebimentocartao" prLkCl="codigorecebimento" upAc="3">
        <PrTb mn="0" nm="recebimento" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="recebimentocartao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigorecebimento" prCl="codigorecebimento"/>
        <ClPr cdCl="codigoempresarecebimento" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojarecebimento" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_recebimentocartao" upd="1">
        <Sql>personalerp.fn_replica_recebimentocartao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="referenciabancaria">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigopessoa, codigoreferenciabancaria" nm="pk_referenciabancaria"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('referenciabancaria_codigoreferenciabancaria_seq'::regclass)" nm="codigoreferenciabancaria" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigobancoreferenciabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocidadereferenciabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="agenciareferenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="contareferenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone1referenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone2referenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datareferenciabancaria" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainclusaoreferenciabancaria" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="experienciafinanceirareferenciabancaria" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="possuirestricaoreferenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="conceitoreferenciabancaria" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoesreferenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="80" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="contatoreferenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cargoreferenciabancaria" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_referenciabancaria_cidade" prLkCl="codigocidade" upAc="3">
        <PrTb mn="0" nm="cidade" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="referenciabancaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocidadereferenciabancaria" prCl="codigocidade"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_referenciabancaria" upd="1">
        <Sql>personalerp.fn_replica_referenciabancaria()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="referenciacomercial">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigopessoa, codigoreferenciacomercial" nm="pk_referenciacomercial"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval(('&quot;public&quot;.&quot;referenciacomercial_codigoreferenciacomercial_seq&quot;'::text)::regclass)" nm="codigoreferenciacomercial" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="localreferenciacomercial" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fonereferenciacomercial" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="contatoreferenciacomercial" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="40" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datareferenciacomercial" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="formapagamentoreferenciacomercial" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="mediamensalreferenciacomercial" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="mediadiasatrazoreferenciacomercial" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="maiorcomprareferenciacomercial" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datamaiorcomprareferenciacomercial" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ultimacomprareferenciacomercial" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataultimacomprareferenciacomercial" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="conceitoreferenciacomercial" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datacadastroreferenciacomercial" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacoesreferenciacomercial" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="80" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_referenciacomercial_pessoa" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="referenciacomercial" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoa" prCl="codigopessoa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_referenciacomercial" upd="1">
        <Sql>personalerp.fn_replica_referenciacomercial()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="replicacaocomandos">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="idreplicacao" nm="pk_replicacao"/>
      <Cl au="0" df="nextval('replicacao_idreplicacao'::regclass)" nm="idreplicacao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="operacaoreplicacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="now()" nm="datahorareplicacao" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="&quot;current_user&quot;()" nm="usuarioreplicacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tabelareplicacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dadosreplicacao" nu="0">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dadosrollback" nu="0">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="replicacaodestino">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="idreplicacaodestino" nm="pk_replicacao_destino"/>
      <Cl au="0" df="nextval('iddestino_replicacao'::regclass)" nm="idreplicacaodestino" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="hostreplicacaodestino" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="portareplicacaodestino" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="true" nm="ativo" nu="0">
        <DT arr="0" ds="Boolean" en="" id="16" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ultimoidreplicacao" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="replicacaoexecucao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="idreplicacao, idreplicacaoexecucao" nm="pk_replicacao_execucao"/>
      <Cl au="0" df="" nm="idreplicacao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('replicacao_idreplicacao_execucao'::regclass)" nm="idreplicacaoexecucao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="now()" nm="datahoraexecucao" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="&quot;current_user&quot;()" nm="usuarioexecucao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="iddestinoreplicacao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_replicacao_execucao_replicacao" prLkCl="idreplicacao" upAc="0">
        <PrTb mn="0" nm="replicacaocomandos" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="replicacaoexecucao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="idreplicacao" prCl="idreplicacao"/>
      </Fk>
      <Fk deAc="3" nm="fk_replicacao_execucao_replicacao_destino" prLkCl="idreplicacaodestino" upAc="0">
        <PrTb mn="0" nm="replicacaodestino" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="replicacaoexecucao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="iddestinoreplicacao" prCl="idreplicacaodestino"/>
      </Fk>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneioabate">
      <Cm>Tabela de Romaneio de Pesos (FrigorÃ­fico)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio" nm="romaneioabate_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('romaneioabate_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresapessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojapessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusromaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>N - NÃ£o processado P - Processado </Cm>
      </Cl>
      <Cl au="0" df="" nm="statusnotaromaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>N - Nao Gerada G - Gerada </Cm>
      </Cl>
      <Cl au="0" df="" nm="statuspagamentoromaneio" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>A - Aberto P - Pago</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontapagar" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contapagar_romaneioabate" prLkCl="codigocontapagar" upAc="3">
        <PrTb mn="0" nm="contapagar" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigocontapagar" prCl="codigocontapagar"/>
        <ClPr cdCl="codigolojacontapagar" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresacontapagar" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="empresa_romaneiofrigorifico_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_fornecedor_romaneiofrigorifico_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojapessoafornecedor" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresapessoafornecedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigoenderecopessoafornecedor" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigopessoafornecedor" prCl="codigopessoa"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiofrigorifico_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneioabate" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneioabate" upd="1">
        <Sql>personalerp.fn_replica_romaneioabate()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneiogado">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio" nm="pk_romaneiogado"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('romaneiogado_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecofornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecofornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoaenderecofornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusromaneio" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="enderecopessoa_romaneiogado" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiogado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoafornecedor" prCl="codigopessoa"/>
        <ClPr cdCl="codigoempresaenderecofornecedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaenderecofornecedor" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoaenderecofornecedor" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiogado" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiogado" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneiogado" upd="1">
        <Sql>personalerp.fn_replica_romaneiogado()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneiomadeirabeneficiada">
      <Cm>Tabela de Romaneios de Madeira Beneficiada</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoromaneio, codigoempresa, codigoloja" nm="romaneiomadeirabeneficiada_pk"/>
      <Cl au="0" df="nextval('romaneiomadeirabeneficiada_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data do Romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraprocessamentoromaneio" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora em que foi processado o romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="tiporomaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>(+) - Entrada
(-) - Saida
(I) - Inventário</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuarioprocessamentoromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuarioprocessamentoromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuarioprocessamentoromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresagerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojagerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigogerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="placaprincipalromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ufplacaprincipalromaneio" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="2" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="placasreboqueromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statusromaneio" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_romaneiomadeirabeneficiada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_cliente_romaneiomadeirabeneficiada_fk" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoacliente" prCl="codigopessoa"/>
        <ClPr cdCl="codigolojaenderecopessoacliente" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaenderecopessoacliente" prCl="codigoempresa"/>
        <ClPr cdCl="codigoenderecopessoacliente" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_transportadora_romaneiomadeirabeneficiada_fk" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoatransportadora" prCl="codigopessoa"/>
        <ClPr cdCl="codigolojaenderecopessoatransportadora" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresaenderecopessoatransportadora" prCl="codigoempresa"/>
        <ClPr cdCl="codigoenderecopessoatransportadora" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="gerentemadeireira_romaneiomadeirabeneficiada_fk" prLkCl="codigogerente" upAc="3">
        <PrTb mn="0" nm="gerentemadeireira" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigogerente" prCl="codigogerente"/>
        <ClPr cdCl="codigoempresagerente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojagerente" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiomadeirabeneficiada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="motorista_romaneiomadeirabeneficiada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="motorista" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresamotorista" prCl="codigoempresa"/>
        <ClPr cdCl="codigomotorista" prCl="codigomotorista"/>
        <ClPr cdCl="codigolojamotorista" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="usuario_romaneiomadeirabeneficiada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeirabeneficiada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresausuarioprocessamentoromaneio" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojausuarioprocessamentoromaneio" prCl="codigoloja"/>
        <ClPr cdCl="codigousuarioprocessamentoromaneio" prCl="codigousuario"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneiomadeirabeneficiada" upd="1">
        <Sql>personalerp.fn_replica_romaneiomadeirabeneficiada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneiomadeiraserrada">
      <Cm>Tabela de Romaneio de Madeira Serrada</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio" nm="romaneiomadeiraserrada_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('romaneiomadeiraserrada_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data do Romaneio. Data em que foi realmente feita a movimentação.</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora do lancamento do romaneio no sistema</Cm>
      </Cl>
      <Cl au="0" df="" nm="tiporomaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>(+) - Adicionar  (Romaneio de entrada)
(-) - Diminuir   (Romaneio de saida)
(I) - Inventario (Romaneio de inventario)</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>Observacoes sobre o romaneio.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="N" nm="statusromaneio" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraprocessamentoromaneio" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuarioprocessamentoromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuarioprocessamentoromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuarioprocessamentoromaneio" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresagerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigogerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojagerente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoatransportadora" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="placaprincipalromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ufplacaprincipalromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="2" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="placasreboqueromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_romaneiomadeiraserrada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_romaneiomadeiraserrada_cliente_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaenderecopessoacliente" prCl="codigoempresa"/>
        <ClPr cdCl="codigoenderecopessoacliente" prCl="codigoenderecopessoa"/>
        <ClPr cdCl="codigolojaenderecopessoacliente" prCl="codigoloja"/>
        <ClPr cdCl="codigopessoacliente" prCl="codigopessoa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_romaneiomadeiraserrada_transportadora_fk" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoatransportadora" prCl="codigopessoa"/>
        <ClPr cdCl="codigoempresaenderecopessoatransportadora" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaenderecopessoatransportadora" prCl="codigoloja"/>
        <ClPr cdCl="codigoenderecopessoatransportadora" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="gerentemadeireira_romaneiomadeiraserrada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="gerentemadeireira" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresagerente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojagerente" prCl="codigoloja"/>
        <ClPr cdCl="codigogerente" prCl="codigogerente"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiomadeiraserrada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="motorista_romaneiomadeiraserrada_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="motorista" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresamotorista" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojamotorista" prCl="codigoloja"/>
        <ClPr cdCl="codigomotorista" prCl="codigomotorista"/>
      </Fk>
      <Fk deAc="3" nm="usuario_romaneiomadeiraserrada_fk" prLkCl="codigousuario" upAc="3">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomadeiraserrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigousuarioprocessamentoromaneio" prCl="codigousuario"/>
        <ClPr cdCl="codigolojausuarioprocessamentoromaneio" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresausuarioprocessamentoromaneio" prCl="codigoempresa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneiomadeiraserrada" upd="1">
        <Sql>personalerp.fn_replica_romaneiomadeiraserrada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneiomanejotora">
      <Cm>Tabela de Romaneios de Manejo (Local de exploracao de madeira)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoromaneio" nm="romaneiomanejotora_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('romaneiomanejotora_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Numero do romaneio (vem na folha)</Cm>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data do romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora do lancamento do romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaveiculo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaveiculo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoveiculo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaenderecocliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaenderecocliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecocliente" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaesplanada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaesplanada" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoesplanada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamanejo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamanejo" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomanejo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoacliente" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="esplanada_romaneiomanejotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="esplanada" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaesplanada" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaesplanada" prCl="codigoloja"/>
        <ClPr cdCl="codigoesplanada" prCl="codigoesplanada"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiomanejotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="manejotora_romaneiomanejotora_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="manejotora" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojamanejo" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresamanejo" prCl="codigoempresa"/>
        <ClPr cdCl="codigomanejo" prCl="codigomanejo"/>
      </Fk>
      <Fk deAc="3" nm="motorista_romaneiomanejotora_fk" prLkCl="codigomotorista" upAc="3">
        <PrTb mn="0" nm="motorista" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigomotorista" prCl="codigomotorista"/>
        <ClPr cdCl="codigoempresamotorista" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojamotorista" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="veiculo_romaneiomanejotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="veiculo" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiomanejotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaveiculo" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaveiculo" prCl="codigoloja"/>
        <ClPr cdCl="codigoveiculo" prCl="codigoveiculo"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneiomanejotora" upd="1">
        <Sql>personalerp.fn_replica_romaneiomanejotora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneiosaidatora">
      <Cm>Romaneio de saida de toras por vendas</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoromaneio, codigoempresa, codigoloja" nm="romaneiosaidatora_pk"/>
      <Cl au="0" df="nextval('romaneiosaidatora_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora do sistema de digitação do romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data do Romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoenderecopessoacliente" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_romaneiosaidatora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiosaidatora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="enderecopessoa_romaneiosaidatora_fk" prLkCl="codigopessoa" upAc="3">
        <PrTb mn="0" nm="enderecopessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiosaidatora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigopessoacliente" prCl="codigopessoa"/>
        <ClPr cdCl="codigoempresacliente" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacliente" prCl="codigoloja"/>
        <ClPr cdCl="codigoenderecopessoacliente" prCl="codigoenderecopessoa"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiosaidatora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiosaidatora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneiosaidatora" upd="1">
        <Sql>personalerp.fn_replica_romaneiosaidatora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="romaneiotora">
      <Cm>Romaneio (movimento) de toras.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoromaneio, codigoempresa, codigoloja" nm="romaneiotora_pk"/>
      <Cl au="0" df="nextval('romaneiotora_codigoromaneio_seq'::regclass)" nm="codigoromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroromaneio" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoralancamentoromaneio" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data / Hora do lançamento do romaneio</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigopessoafornecedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Código do fornecedor</Cm>
      </Cl>
      <Cl au="0" df="" nm="observacaoromaneio" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigomotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojamotorista" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataromaneio" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_romaneiotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_romaneiotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="romaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="motorista_romaneiotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="motorista" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresamotorista" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojamotorista" prCl="codigoloja"/>
        <ClPr cdCl="codigomotorista" prCl="codigomotorista"/>
      </Fk>
      <Fk deAc="3" nm="pessoa_romaneiotora_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="pessoa" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="romaneiotora" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresafornecedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigopessoafornecedor" prCl="codigopessoa"/>
        <ClPr cdCl="codigolojafornecedor" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_romaneiotora" upd="1">
        <Sql>personalerp.fn_replica_romaneiotora()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="situacaotrocamanutencao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigosituacaotrocamanutencao" nm="pk_situacaotrocamanutencao"/>
      <Cl au="0" df="nextval('situacaotrocamanutencao_codigosituacaotrocamanutencao_seq'::regclass)" nm="codigosituacaotrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaosituacaotrocamanutencao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagfinalsituacaotrocamanutencao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagenviaemailsituacaotrocamanutencao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_situacaotrocamanutencao" upd="1">
        <Sql>personalerp.fn_replica_situacaotrocamanutencao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="subgrupo">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigosubgrupo" nm="pk_subgrupo"/>
      <Cl au="0" df="nextval('subgrupo_codigosubgrupo_seq'::regclass)" nm="codigosubgrupo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomesubgrupo" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_subgrupo" upd="1">
        <Sql>personalerp.fn_replica_subgrupo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="subproduto">
      <Cm>Cadastro de Sub-Produtos, produtos gerados por um produto maior.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoproduto, codigoempresasubproduto, codigolojasubproduto, codigosubproduto" nm="subproduto_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresasubproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojasubproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigosubproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadesubproduto" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="produto_subproduto_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="subproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="produto_subproduto_subproduto_fk" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="subproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigosubproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigolojasubproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresasubproduto" prCl="codigoempresa"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_subproduto" upd="1">
        <Sql>personalerp.fn_replica_subproduto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelainss">
      <Cm>Tabela de valores de desconto de INSS</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotabelainss" nm="tabelainss_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('tabelainss_codigotabelainss_seq'::regclass)" nm="codigotabelainss" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialvigenciatabelainss" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data inicial da vigencia desta tabela</Cm>
      </Cl>
      <Cl au="0" df="" nm="datafinalvigenciatabelainss" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data final da vigencia desta tabela. Se vazio, é a tabela corrente</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorinicialtabelainss" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor inicial da faixa da tabela.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfinaltabelainss" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor final da faixa da tabela.</Cm>
      </Cl>
      <Cl au="0" df="" nm="aliquotatabelainss" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Alíquota a ser descontada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotapatronaltabelainss" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_tabelainss_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelainss" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_tabelainss_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelainss" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelainss" upd="1">
        <Sql>personalerp.fn_replica_tabelainss()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelairrf">
      <Cm>Tabela de valores e aliquotas do IRRF (Imposto de Renda Retido na Fonte)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotabelairrf, codigoempresa, codigoloja" nm="tabelairrf_pk"/>
      <Cl au="0" df="nextval('tabelairrf_codigotabelairrf_seq'::regclass)" nm="codigotabelairrf" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialvigenciatabelairrf" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data inicial da vigencia desta tabela</Cm>
      </Cl>
      <Cl au="0" df="" nm="datafinalvigenciatabelairrf" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data final da vigencia desta tabela. Se vazio, é a tabela corrente</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorinicialtabelairrf" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor inicial da faixa da tabela.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfinaltabelairrf" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor final da faixa da tabela.</Cm>
      </Cl>
      <Cl au="0" df="" nm="aliquotatabelairrf" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Alíquota a ser descontada.</Cm>
      </Cl>
      <Cl au="0" df="0" nm="valorparceladeducaotabelairrf" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor a deduzir do imposto de renda, apos calculado.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_tabelairrf_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelairrf" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_tabelairrf_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelairrf" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelairrf" upd="1">
        <Sql>personalerp.fn_replica_tabelairrf()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelairrfdeducaodependente">
      <Cm>Valor de dedução por dependente no imposto de renda</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotabelairrfdependente, codigoempresa, codigoloja" nm="tabelairrfdeducaodependente_pk"/>
      <Cl au="0" df="nextval('tabelairrfdeducaodependente_codigotabelairrfdependente_seq'::regclass)" nm="codigotabelairrfdependente" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialvigenciatabelairrf" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data inicial da vigencia desta tabela</Cm>
      </Cl>
      <Cl au="0" df="" nm="datafinalvigenciatabelairrf" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data final da vigencia desta tabela. Se vazio, é a tabela corrente</Cm>
      </Cl>
      <Cl au="0" df="0" nm="valordeducaotabelairrf" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor a deduzir da base de calculo por dependente</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_tabelairrfdeducaodependente_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelairrfdeducaodependente" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_tabelairrfdeducaodependente_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelairrfdeducaodependente" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelairrfdeducaodependente" upd="1">
        <Sql>personalerp.fn_replica_tabelairrfdeducaodependente()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelapreco">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotabelapreco" nm="pk_tabelapreco"/>
      <Cl au="0" df="nextval('tabelapreco_codigotabelapreco_seq'::regclass)" nm="codigotabelapreco" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nometabelapreco" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelapreco" upd="1">
        <Sql>personalerp.fn_replica_tabelapreco()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelaprecoproduto">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotabelapreco, codigoempresaproduto, codigolojaproduto, codigoproduto" nm="pk_tabelaprecoproduto"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotabelapreco" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="precovenda" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_tabelaprecoproduto" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelaprecoproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_tabelaprecoproduto" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelaprecoproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="produto_tabelaprecoproduto" prLkCl="codigoproduto" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelaprecoproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="tabelapreco_tabelaprecoproduto" prLkCl="codigotabelapreco" upAc="3">
        <PrTb mn="0" nm="tabelapreco" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelaprecoproduto" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotabelapreco" prCl="codigotabelapreco"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelaprecoproduto" upd="1">
        <Sql>personalerp.fn_replica_tabelaprecoproduto()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelasalariofamilia">
      <Cm>Tabela de salario familia</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotabelasalariofamilia, codigoempresa, codigoloja" nm="tabelasalariofamilia_pk"/>
      <Cl au="0" df="nextval('tabelairrf_codigotabelasalariofamilia_seq'::regclass)" nm="codigotabelasalariofamilia" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialvigenciasalariofamilia" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data inicial da vigencia desta tabela</Cm>
      </Cl>
      <Cl au="0" df="" nm="datafinalvigenciasalariofamilia" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data final da vigencia desta tabela. Se vazio, é a tabela corrente</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorinicialsalariofamilia" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor inicial da faixa da tabela.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorfinalsalariofamilia" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor final da faixa da tabela.</Cm>
      </Cl>
      <Cl au="0" df="0" nm="valorsalariofamilia" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do salario familia</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_tabelasalariofamilia_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelasalariofamilia" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_tabelasalariofamilia_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelasalariofamilia" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelasalariofamilia" upd="1">
        <Sql>personalerp.fn_replica_tabelasalariofamilia()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tabelasalariominimo">
      <Cm>Tabela de Salários mínimos (conforme variacao legal por tempo)</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigosalariominimo, codigoempresa, codigoloja" nm="tabelasalariominimo_pk"/>
      <Cl au="0" df="nextval('tabelasalariominimo_codigosalariominimo_seq'::regclass)" nm="codigosalariominimo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datainicialvigenciasalariominimo" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data inicial da vigencia deste salário mínimo</Cm>
      </Cl>
      <Cl au="0" df="" nm="datafinalvigenciasalariominimo" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data Final da vigencia deste salario minimo. Se for nulo, é a atual.</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorsalariominimo" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do salario minimo</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_tabelasalariominimo_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelasalariominimo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_tabelasalariominimo_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tabelasalariominimo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tabelasalariominimo" upd="1">
        <Sql>personalerp.fn_replica_tabelasalariominimo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipocontaresumo">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipocontaresumo" nm="pk_tipocontaresumo"/>
      <Cl au="0" df="nextval('tipocontaresumo_codigotipocontaresumo_seq'::regclass)" nm="codigotipocontaresumo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaotipocontaresumo" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipocontaresumo" upd="1">
        <Sql>personalerp.fn_replica_tipocontaresumo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipodocumento">
      <Cm>Tabela de Tipos de Documento para Contas a Pagar / Receber</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipodocumento" nm="tipodocumento_pk"/>
      <Cl au="0" df="nextval(('&quot;personalerp&quot;.&quot;tipodocumento_codigotipodocumento_seq&quot;'::text)::regclass)" nm="codigotipodocumento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nometipodocumento" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipodocumento" upd="1">
        <Sql>personalerp.fn_replica_tipodocumento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipoflagtrocamanutencao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipoflagtrocamanutencao" nm="pk_tipoflagtrocamanutencao"/>
      <Cl au="0" df="nextval('tipoflagtrocamanutencao_codigotipoflagtrocamanutencao_seq'::regclass)" nm="codigotipoflagtrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nometipoflagtrocamanutencao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipoflagtrocamanutencao" upd="1">
        <Sql>personalerp.fn_replica_tipoflagtrocamanutencao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipomadeirabeneficiada">
      <Cm>Tipos de Madeira Beneficiada</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipomadeirabeneficiada" nm="tipomadeirabeneficiada_pk"/>
      <Cl au="0" df="nextval('tipomadeirabeneficiada_codigotipomadeirabeneficiada_seq'::regclass)" nm="codigotipomadeirabeneficiada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nometipomadeirabeneficiada" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipomadeirabeneficiada" upd="1">
        <Sql>personalerp.fn_replica_tipomadeirabeneficiada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipoplanoconta">
      <Cm>Tipos de Planos de Conta</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipoplanoconta" nm="tipoplanoconta_pk"/>
      <Cl au="0" df="nextval('tipoplanoconta_codigotipoplanoconta_seq'::regclass)" nm="codigotipoplanoconta" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nometipoplanoconta" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipoplanoconta" upd="1">
        <Sql>personalerp.fn_replica_tipoplanoconta()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tiporegistronfeletronica">
      <Cm>Tabela que registra os tipos de dados arquivados da nota eletronica.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotiporegistronfe" nm="tiporegistronfeletronica_pk"/>
      <Cl au="0" df="" nm="codigotiporegistronfe" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Chave do tipo de registro</Cm>
      </Cl>
      <Cl au="0" df="" nm="descricaotiporegistronfe" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tiporegistronfeletronica" upd="1">
        <Sql>personalerp.fn_replica_tiporegistronfeletronica()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipotributacao">
      <Cm>Tipo de Tributação</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipotributacao" nm="tipotributacao_pk"/>
      <Cl au="0" df="nextval('tipotributacao_codigotipotributacao_seq'::regclass)" nm="codigotipotributacao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="identificacaotipotributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>Identificação do Tipo da Tributação - Qualquer nome que o usuário queira colocar.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipotributacao" upd="1">
        <Sql>personalerp.fn_replica_tipotributacao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tipoveiculo">
      <Cm>Tipos de Veiculo (Caminhao, maquinas, implementos, etc).</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotipoveiculo" nm="tipoveiculo_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('tipoveiculo_codigotipoveiculo_seq'::regclass)" nm="codigotipoveiculo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaotipoveiculo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_tipoveiculo_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tipoveiculo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tipoveiculo" upd="1">
        <Sql>personalerp.fn_replica_tipoveiculo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="transferenciaestoque">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotransferenciaestoque" nm="pk_transferenciaestoque"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('transferenciaestoque_codigotransferenciaestoque_seq'::regclass)" nm="codigotransferenciaestoque" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahorasaidatransferenciaestoque" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoraentradatransferenciaestoque" nu="0">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresadestino" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojadestino" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statustransferenciaestoque" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaotransferenciaestoque" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_destino_transferenciaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="transferenciaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresadestino" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojadestino" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="loja_transferenciaestoque" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="transferenciaestoque" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_transferenciaestoque" upd="1">
        <Sql>personalerp.fn_replica_transferenciaestoque()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="tributacao">
      <Cm>Tabela de Tributações do Produto.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipotributacao, uforigemtributacao, operacaotributacao, ufdestinotributacao" nm="tributacao_pk"/>
      <Cl au="0" df="" nm="codigotipotributacao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="uforigemtributacao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="2" sc="null" sg="1" un="0"/>
        <Cm>Sigla da UF</Cm>
      </Cl>
      <Cl au="0" df="" nm="operacaotributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ufdestinotributacao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="2" sc="null" sg="1" un="0"/>
        <Cm>UF de Destino da configuracao de tributacao. Informacao XX se a configuração valer para todas as UF's.</Cm>
      </Cl>
      <Cl au="0" df="" nm="complementotributacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
        <Cm>Informações complementares (Ex. SIMPLES para simples nacional.)</Cm>
      </Cl>
      <Cl au="0" df="" nm="classificacaotributariaicmstributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
        <Cm>Classificação Tributária (ST) do ICMS. Informação necessária para a NF-e.</Cm>
      </Cl>
      <Cl au="0" df="" nm="cfoptributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>CFOP para esta operação.</Cm>
      </Cl>
      <Cl au="0" df="" nm="formacalculoicmstributacao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
        <Cm>Forma de Calculo do INSS.  ST = Substituicao Tributaria GI = Garantido Integral GN = Garantido Normal NT = Nao Tributado </Cm>
      </Cl>
      <Cl au="0" df="" nm="aliquotaicmstributacao" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
        <Cm>Aliquota do ICMS para esta operação.</Cm>
      </Cl>
      <Cl au="0" df="" nm="reducaobasecalculoicmstributacao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
        <Cm>Percentual de redução da base de calculo do ICMS (se aplicavel)</Cm>
      </Cl>
      <Cl au="0" df="" nm="margemvaloragregadotributacao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
        <Cm>Percentual do MVA - Margem do Valor Agregado.  O MVA é o percentual estimado pelo governo de lucro para que possa se calcular o ICMS a apurar. Usado quando a forma de calculo for GN ou GI.</Cm>
      </Cl>
      <Cl au="0" df="" nm="ipibaseicmstributacao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Indica se usa o IPI na base de calculo do ICMS. N = Não somar A = Somar Antes da Redução D = Somar Depois da Redução</Cm>
      </Cl>
      <Cl au="0" df="" nm="outrasdespesasbaseicmstributacao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Indica se usa o valor das outras despesas na base de calculo do ICMS. N = Não somar A = Somar Antes da Redução D = Somar Depois da Redução</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstipitributacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaipitributacao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstpistributacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotapistributacao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="cstcofinstributacao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotacofinstributacao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="aliquotaicmssttributacao" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="4" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="operacaotributacao_tributacao_fk" prLkCl="operacaotributacao" upAc="3">
        <PrTb mn="0" nm="operacaotributacao" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tributacao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="operacaotributacao" prCl="operacaotributacao"/>
      </Fk>
      <Fk deAc="3" nm="uftipotributacao_tributacao_fk" prLkCl="codigotipotributacao" upAc="3">
        <PrTb mn="0" nm="uftipotributacao" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="tributacao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipotributacao" prCl="codigotipotributacao"/>
        <ClPr cdCl="uforigemtributacao" prCl="uforigemtributacao"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_tributacao" upd="1">
        <Sql>personalerp.fn_replica_tributacao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="trocamanutencao">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotrocamanutencao" nm="pk_trocamanutencao"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('trocamanutencao_codigotrocamanutencao_seq'::regclass)" nm="codigotrocamanutencao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerotrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="dataentradatrocamanutencao" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeclientetrocamanutencao" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone1clientetrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone2clientetrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="fone3clientetrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="10" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipofone1clientetrocamanutencao" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipofone2clientetrocamanutencao" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipofone3clientetrocamanutencao" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="emailclientetrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="referenciatrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numerogaranticatrocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaotrocamanutencao" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="prazotrocamanutencao" nu="1">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="email2trocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="email3trocamanutencao" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_trocamanutencao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="trocamanutencao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_trocamanutencao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="trocamanutencao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="produto_trocamanutencao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="trocamanutencao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_trocamanutencao" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="trocamanutencao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresavendedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedor" prCl="codigoloja"/>
        <ClPr cdCl="codigovendedor" prCl="codigovendedor"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_trocamanutencao" upd="1">
        <Sql>personalerp.fn_replica_trocamanutencao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="trocamercadoria">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotroca" nm="pk_trocamercadoria"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('trocamercadoria_codigotroca_seq'::regclass)" nm="codigotroca" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datahoratroca" nu="1">
        <DT arr="0" ds="TimeStamp" en="" id="93" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="statustroca" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigovendedor" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="motivotroca" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="observacaotroca" nu="1">
        <DT arr="0" ds="Text" en="" id="703" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_trocamercadoria" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="trocamercadoria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="vendedor_trocamercadoria" prLkCl="codigovendedor" upAc="3">
        <PrTb mn="0" nm="vendedor" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="trocamercadoria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigovendedor" prCl="codigovendedor"/>
        <ClPr cdCl="codigoempresavendedor" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavendedor" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_trocamercadoria" upd="1">
        <Sql>personalerp.fn_replica_trocamercadoria()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="trocamercadoriaentrada">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotroca, codigotrocaentrada" nm="pk_trocamercadoriaentrada"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotroca" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('trocamercadoriaentrada_codigotrocaentrada_seq'::regclass)" nm="codigotrocaentrada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadetrocaentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valortrocaentrada" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="produto_trocamercadoriaentrada" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="trocamercadoriaentrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="trocamercadoria_trocamercadoriaentrada" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="trocamercadoria" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="trocamercadoriaentrada" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigotroca" prCl="codigotroca"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_trocamercadoriaentrada" upd="1">
        <Sql>personalerp.fn_replica_trocamercadoriaentrada()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="trocamercadoriasaida">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigotroca, codigotrocasaida" nm="pk_trocamercadoriasaida"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotroca" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('trocamercadoriasaida_codigotrocasaida_seq'::regclass)" nm="codigotrocasaida" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadetrocasaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valortrocasaida" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="flagcomissaovendedortrocasaida" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Flag que indica se a peça vai contar como comissão para o vendedor S - Sim N - Não</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoproduto" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="produto_trocamercadoriasaida" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="produto" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="trocamercadoriasaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaproduto" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaproduto" prCl="codigoloja"/>
        <ClPr cdCl="codigoproduto" prCl="codigoproduto"/>
      </Fk>
      <Fk deAc="3" nm="trocamercadoria_trocamercadoriasaida" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="trocamercadoria" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="trocamercadoriasaida" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigotroca" prCl="codigotroca"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_trocamercadoriasaida" upd="1">
        <Sql>personalerp.fn_replica_trocamercadoriasaida()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="uftipotributacao">
      <Cm>UF's dos Tipos de Tributação</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigotipotributacao, uforigemtributacao" nm="uftipotributacao_pk"/>
      <Cl au="0" df="" nm="codigotipotributacao" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="uforigemtributacao" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="2" sc="null" sg="1" un="0"/>
        <Cm>Sigla da UF</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="tipotributacao_uftipotributacao_fk" prLkCl="codigotipotributacao" upAc="3">
        <PrTb mn="0" nm="tipotributacao" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="uftipotributacao" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigotipotributacao" prCl="codigotipotributacao"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_uftipotributacao" upd="1">
        <Sql>personalerp.fn_replica_uftipotributacao()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="unidade">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="siglaunidade" nm="pk_unidade"/>
      <Cl au="0" df="" nm="siglaunidade" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="5" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeunidadesingular" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeunidadeplural" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="30" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_unidade" upd="1">
        <Sql>personalerp.fn_replica_unidade()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="usuario">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigousuario, codigoempresa, codigoloja" nm="usuario_pk"/>
      <Cl au="0" df="nextval('usuario_codigousuario_seq'::regclass)" nm="codigousuario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomeusuario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="50" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="loginusuario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="20" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="senhausuario" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="ativo" nu="0">
        <DT arr="0" ds="Boolean" en="" id="16" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="false" nm="superusuario" nu="0">
        <DT arr="0" ds="Boolean" en="" id="16" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_usuario_fk" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="usuario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_usuario" upd="1">
        <Sql>personalerp.fn_replica_usuario()</Sql>
      </Trg>
      <UniqueConstraints>
        <UnCon nm="usuario_loginusuario_key">
          <ClNs>loginusuario</ClNs>
        </UnCon>
      </UniqueConstraints>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="usuarioloja">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigousuario, codigoempresa, codigoloja, codigoempresavinculada, codigolojavinculada" nm="usuarioloja_pk"/>
      <Cl au="0" df="" nm="codigousuario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresavinculada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojavinculada" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_usuarioloja_fk" prLkCl="codigoempresa" upAc="0">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="usuarioloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresavinculada" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojavinculada" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="usuario_usuarioloja_fk" prLkCl="codigousuario" upAc="0">
        <PrTb mn="0" nm="usuario" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="usuarioloja" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigousuario" prCl="codigousuario"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_usuarioloja" upd="1">
        <Sql>personalerp.fn_replica_usuarioloja()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="valefuncionario">
      <Cm>Controle de emissão de vales para funcionarios</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigovalefuncionario" nm="valefuncionario_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('valefuncionario_codigovalefuncionario_seq'::regclass)" nm="codigovalefuncionario" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datavalefuncionario" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
        <Cm>Data do vale</Cm>
      </Cl>
      <Cl au="0" df="" nm="valorvalefuncionario" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor do vale</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaverba" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaverba" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoverba" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaovalefuncionario" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="numeroparcelavalefuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="quantidadeparcelasvalefuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contratotrabalho_valefuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contratotrabalho" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="valefuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresacontratotrabalho" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojacontratotrabalho" prCl="codigoloja"/>
        <ClPr cdCl="codigocontratotrabalho" prCl="codigocontratotrabalho"/>
      </Fk>
      <Fk deAc="3" nm="empresa_valefuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="valefuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_valefuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="valefuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="verba_valefuncionario_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="verba" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="valefuncionario" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaverba" prCl="codigoempresa"/>
        <ClPr cdCl="codigoverba" prCl="codigoverba"/>
        <ClPr cdCl="codigolojaverba" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_valefuncionario" upd="1">
        <Sql>personalerp.fn_replica_valefuncionario()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="veiculo">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoveiculo" nm="veiculo_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('veiculo_codigoveiculo_seq'::regclass)" nm="codigoveiculo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaoveiculo" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresatipoveiculo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojatipoveiculo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigotipoveiculo" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_veiculo_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="veiculo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="tipoveiculo_veiculo_fk" prLkCl="codigoloja" upAc="3">
        <PrTb mn="0" nm="tipoveiculo" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="veiculo" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigolojatipoveiculo" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresatipoveiculo" prCl="codigoempresa"/>
        <ClPr cdCl="codigotipoveiculo" prCl="codigotipoveiculo"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_veiculo" upd="1">
        <Sql>personalerp.fn_replica_veiculo()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="vendadiaria">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, datavenda" nm="pk_vendadiaria"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="datavenda" nu="0">
        <DT arr="0" ds="Date" en="" id="91" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorvenda" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="loja_vendadiaria" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="vendadiaria" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_vendadiaria" upd="1">
        <Sql>personalerp.fn_replica_vendadiaria()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="vendedor">
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigovendedor" nm="pk_vendedor"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('vendedor_codigovendedor_seq'::regclass)" nm="codigovendedor" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="nomevendedor" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="emailvendedor" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="tipovendedor" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="categoriavendedor" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="perccomissaoclientevendedor" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="7" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="perccomissaoclienteempresa" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="7" sc="2" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="situacaovendedor" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresafuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojafuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigofuncionario" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="fk_vendedor_loja" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="vendedor" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Fk deAc="3" nm="funcionario_vendedor" prLkCl="codigofuncionario" upAc="3">
        <PrTb mn="0" nm="funcionario" oe="1" sch="personalerp" zr="1"/>
        <CdTb mn="1" nm="vendedor" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofuncionario" prCl="codigofuncionario"/>
        <ClPr cdCl="codigoempresafuncionario" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojafuncionario" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_vendedor" upd="1">
        <Sql>personalerp.fn_replica_vendedor()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="verba">
      <Cm>Cadastro de Verbas</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigoverba" nm="verba_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="nextval('verba_codigoverba_seq'::regclass)" nm="codigoverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaoverba" nu="0">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="descricaocurtaverba" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="100" sc="null" sg="1" un="0"/>
        <Cm>Descricao curta para exibicao em holerites</Cm>
      </Cl>
      <Cl au="0" df="" nm="tipoverba" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>C - Credito  D - Debito A - Auxiliar</Cm>
      </Cl>
      <Cl au="0" df="" nm="flagsalariobaseverba" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Flag que indica se esta verba é um salário base. S - Sim N - Nao</Cm>
      </Cl>
      <Cl au="0" df="" nm="flagadiantamentoverba" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Indica se a verba e de adiantamento S - Sim N - Nao</Cm>
      </Cl>
      <Cl au="0" df="" nm="flagbaseinssverba" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Indica se esta verba e usada como base de calculo para inss</Cm>
      </Cl>
      <Cl au="0" df="" nm="flagbaseirrfverba" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>Indica se a verba é base para desconto de IRRF S - Sim N - Nao</Cm>
      </Cl>
      <Cl au="0" df="" nm="tipocalculoverba" nu="0">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
        <Cm>V - Valor fixo  P - Percentual sobre base  C - Comissao (digitavel)  R - IRRF  I - INSS  F - Salario Familia</Cm>
      </Cl>
      <Cl au="0" df="" nm="classesistemaverba" nu="1">
        <DT arr="0" ds="VarChar" en="" id="12" ln="200" sc="null" sg="1" un="0"/>
        <Cm>Nome da classe, dentro do sistema, para ser criada e executada</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="S" nm="flagfolhaverba" nu="1">
        <DT arr="0" ds="Char" en="" id="1" ln="1" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="empresa_verba_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="empresa" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="verba" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
      </Fk>
      <Fk deAc="3" nm="loja_verba_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="loja" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="verba" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_verba" upd="1">
        <Sql>personalerp.fn_replica_verba()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="verbacontratotrabalho">
      <Cm>Verbas relacionadas ao contrato de trabalho</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigoempresa, codigoloja, codigocontratotrabalho, codigoempresaverba, codigolojaverba, codigoverba" nm="verbacontratotrabalho_pk"/>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorverba" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor da verba para este contrato</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contratotrabalho_verbacontratotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="contratotrabalho" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="verbacontratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigocontratotrabalho" prCl="codigocontratotrabalho"/>
      </Fk>
      <Fk deAc="3" nm="verba_verbacontratotrabalho_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="verba" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="verbacontratotrabalho" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaverba" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaverba" prCl="codigoloja"/>
        <ClPr cdCl="codigoverba" prCl="codigoverba"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_verbacontratotrabalho" upd="1">
        <Sql>personalerp.fn_replica_verbacontratotrabalho()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Tbl UsSo="1" nm="verbafolhapagamento">
      <Cm>Verbas da folha de pagamento por contrato de trabalho.</Cm>
      <TblOpts>WITHOUT OIDS</TblOpts>
      <Pk ClNs="codigofolhapagamento, codigoempresa, codigoloja, codigoempresacontratotrabalho, codigolojacontratotrabalho, codigocontratotrabalho, codigoempresaverba, codigolojaverba, codigoverba" nm="verbafolhapagamento_pk"/>
      <Cl au="0" df="" nm="codigofolhapagamento" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresa" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoloja" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresacontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojacontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigocontratotrabalho" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoempresaverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojaverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigoverba" nu="0">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="valorverba" nu="0">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor da verba calculada.</Cm>
      </Cl>
      <Cl au="0" df="" nm="referenciaverba" nu="1">
        <DT arr="0" ds="Numeric" en="" id="2" ln="10" sc="2" sg="1" un="0"/>
        <Cm>Valor de referencia para esta verba.</Cm>
      </Cl>
      <Cl au="0" df="" nm="codigoempresausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigolojausuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Cl au="0" df="" nm="codigousuariolog" nu="1">
        <DT arr="0" ds="Integer" en="" id="4" ln="null" sc="null" sg="1" un="0"/>
      </Cl>
      <Fk deAc="3" nm="contratotrabalhofolhapagamento_verbafolhapagamento_fk" prLkCl="codigofolhapagamento" upAc="3">
        <PrTb mn="0" nm="contratotrabalhofolhapagamento" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="verbafolhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigofolhapagamento" prCl="codigofolhapagamento"/>
        <ClPr cdCl="codigoempresa" prCl="codigoempresa"/>
        <ClPr cdCl="codigoloja" prCl="codigoloja"/>
        <ClPr cdCl="codigoempresacontratotrabalho" prCl="codigoempresacontratotrabalho"/>
        <ClPr cdCl="codigolojacontratotrabalho" prCl="codigolojacontratotrabalho"/>
        <ClPr cdCl="codigocontratotrabalho" prCl="codigocontratotrabalho"/>
      </Fk>
      <Fk deAc="1" nm="verba_verbafolhapagamento_fk" prLkCl="codigoempresa" upAc="3">
        <PrTb mn="0" nm="verba" oe="1" sch="personalerp" zr="0"/>
        <CdTb mn="1" nm="verbafolhapagamento" oe="0" sch="personalerp" zr="1"/>
        <ClPr cdCl="codigoempresaverba" prCl="codigoempresa"/>
        <ClPr cdCl="codigolojaverba" prCl="codigoloja"/>
        <ClPr cdCl="codigoverba" prCl="codigoverba"/>
      </Fk>
      <Trg del="1" eaRow="1" exBe="0" ins="1" nm="tg_replica_verbafolhapagamento" upd="1">
        <Sql>personalerp.fn_replica_verbafolhapagamento()</Sql>
      </Trg>
      <UniqueConstraints/>
      <SchTrHis/>
    </Tbl>
    <Proc nm="personalerp.fn_get_acoes_objeto(p_codigoobjeto integer)">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_get_acoes_objeto(p_codigoobjeto integer) 
  RETURNS character varying AS 
$$
declare 
	retorno varchar;
	cursor1 refcursor;
	linha varchar;
begin
	retorno := '';
	open cursor1 for ((SELECT b.nomeacaoobjeto FROM objeto a
				   JOIN acaoobjeto b ON a.codigoobjeto = b.codigoobjeto
				  WHERE b.codigoobjeto = p_codigoobjeto));
	loop
		fetch cursor1 into linha;
		if not found then
			exit;
		end if;
		retorno := retorno || linha || ', ';
	end loop;
	
	close cursor1;
	
	if (length(retorno) &gt; 0 ) then
		retorno = substring(retorno, 1, length(retorno) - 2);
	end if;
	
	return retorno;
end;

$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_get_permissoes_objeto(p_codigoobjeto integer, p_codigoempresa integer, p_codigoloja integer, p_codigoperfil integer)">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_get_permissoes_objeto(p_codigoobjeto integer, p_codigoempresa integer, p_codigoloja integer, p_codigoperfil integer) 
  RETURNS character varying AS 
$$
declare 
	retorno varchar;
	cursor1 refcursor;
	linha varchar;
begin
	retorno := '';
	open cursor1 for ((SELECT 
					b.nomeacaoobjeto || ' : ' ||
					COALESCE((SELECT cast('&lt;p class="Permitido"&gt;Permitido&lt;/p&gt;' as varchar)
						    FROM permissaoperfilacaoobjeto c 
						   WHERE c.codigoobjeto     = a.codigoobjeto
						     AND c.codigoacaoobjeto = b.codigoacaoobjeto
						     AND c.codigoempresa    = p_codigoempresa
						     AND c.codigoloja       = p_codigoloja
						     AND c.codigoperfil     = p_codigoperfil), '&lt;p class="Negado"&gt;Negado&lt;/p&gt;') AS status
				   FROM objeto a
				   JOIN acaoobjeto b ON a.codigoobjeto = b.codigoobjeto
				  WHERE b.codigoobjeto = p_codigoobjeto));
	loop
		fetch cursor1 into linha;
		if not found then
			exit;
		end if;
		retorno := retorno || linha || '&lt;br/&gt;';
	end loop;
	
	close cursor1;
	return retorno;
end;

$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_hash_database()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_hash_database() 
  RETURNS character varying AS 
$$ begin  return '9B0E901A47AA7DE087C76C3F7FD08BD9';  end;  $$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_numeroplanoconta()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_numeroplanoconta() 
  RETURNS trigger AS 
$$
DECLARE
  count_itens integer;
  numeroplanopai varchar(100);
BEGIN

  select coalesce(count(1), 0) + 1
  		 into count_itens 
    from personalerp.planoconta a
   where a.codigoplanocontapai = new.codigoplanocontapai;
  
  select b.numeroplanoconta 
  		 into numeroplanopai 
    from personalerp.planoconta b 
   where b.codigoplanoconta = new.codigoplanocontapai;
  
  new.numeroplanoconta = numeroplanopai || '.' || count_itens;
  
  return new;
END;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_recalc_hash_database()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_recalc_hash_database() 
  RETURNS character varying AS 
$$
declare
  v_conteudo text;
  c_tabelas cursor is 
  	(select * from information_schema.tables a
	  where a.table_schema = 'personalerp'
      order by table_name);
  c_campos cursor (tabela varchar) is
  	(select * from information_schema.columns a
      where a.table_name = tabela 
      order by column_name);
  v_script text;
  v_hash text;
begin
  	v_conteudo := '';
	for c1 in c_tabelas loop
    	v_conteudo := v_conteudo || coalesce(quote_literal(c1.table_name), 'X');
        for c2 in c_campos (c1.table_name) loop
        	v_conteudo := v_conteudo || 
                          c2.table_catalog ||  
                          c2.table_schema || 
                          c2.table_name || 
                          c2.column_name || 
                          c2.is_nullable || 
                          c2.data_type || 
                          coalesce(quote_literal(c2.character_maximum_length), 'X') || 
                          coalesce(quote_literal(c2.numeric_precision), 'X') || 
                          coalesce(quote_literal(c2.numeric_precision_radix), 'X') || 
                          coalesce(quote_literal(c2.numeric_scale), 'X');
        end loop;
    end loop;
    v_hash   := upper(md5(v_conteudo));
    v_script := 'CREATE OR REPLACE FUNCTION personalerp.fn_hash_database()  ';
    v_script := v_script || ' RETURNS character varying AS   ';
    v_script := v_script || '$BODY' || '$ ';
    v_script := v_script || 'begin  ';
    v_script := v_script || 'return ''' || v_hash || ''';  ';
    v_script := v_script || 'end;  ';
    v_script := v_script || '$BODY' || '$ ';
    v_script := v_script || '  LANGUAGE plpgsql VOLATILE  ';
    v_script := v_script || '  COST 100;  ';

    execute v_script;
    
    return v_hash;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_aberturacaixaloja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_aberturacaixaloja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ABERTURACAIXALOJA (CODIGOEMPRESA, CODIGOLOJA, CODIGOCAIXA, CODIGOABERTURACAIXA, STATUSABERTURACAIXALOJA, DATAHORAABERTURACAIXA, CODIGOEMPRESAVENDEDORABERTURA, CODIGOLOJAVENDEDORABERTURA, CODIGOVENDEDORABERTURA, DATAHORAFECHAMENTOCAIXA, CODIGOEMPRESAVENDEDORFECHAMENTO, CODIGOLOJAVENDEDORFECHAMENTO, CODIGOVENDEDORFECHAMENTO, VALORABERTURACAIXALOJA, VALORFECHAMENTOCAIXALOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusaberturacaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraaberturacaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedorabertura), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedorabertura), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedorabertura), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorafechamentocaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedorfechamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedorfechamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedorfechamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoraberturacaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfechamentocaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ABERTURACAIXALOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ', ';
			campos_new   = campos_new || 'STATUSABERTURACAIXALOJA = ' || coalesce(quote_literal(new.statusaberturacaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAABERTURACAIXA = ' || coalesce(quote_literal(new.datahoraaberturacaixa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigoempresavendedorabertura), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigolojavendedorabertura), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigovendedorabertura), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAFECHAMENTOCAIXA = ' || coalesce(quote_literal(new.datahorafechamentocaixa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigoempresavendedorfechamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigolojavendedorfechamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigovendedorfechamento), 'null') || ', ';
			campos_new   = campos_new || 'VALORABERTURACAIXALOJA = ' || coalesce(quote_literal(new.valoraberturacaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'VALORFECHAMENTOCAIXALOJA = ' || coalesce(quote_literal(new.valorfechamentocaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocaixa), 'null')  || ', ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ABERTURACAIXALOJA SET ';
			sql_rolback = 'UPDATE ABERTURACAIXALOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocaixa &lt;&gt; old.codigocaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
				sql_rolback = sql_rolback || ' CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');
				campos_new  = campos_new  || ' CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
				campos_old  = campos_old  || ' CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');
				first = false;
			end if;

			if (new.codigoaberturacaixa &lt;&gt; old.codigoaberturacaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');
				sql_rolback = sql_rolback || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null');
				campos_new  = campos_new  || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');
				campos_old  = campos_old  || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null');
				first = false;
			end if;

			if (new.statusaberturacaixaloja &lt;&gt; old.statusaberturacaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSABERTURACAIXALOJA = ' || coalesce(quote_literal(new.statusaberturacaixaloja), 'null');
				sql_rolback = sql_rolback || ' STATUSABERTURACAIXALOJA = ' || coalesce(quote_literal(old.statusaberturacaixaloja), 'null');
				campos_new  = campos_new  || ' STATUSABERTURACAIXALOJA = ' || coalesce(quote_literal(new.statusaberturacaixaloja), 'null');
				campos_old  = campos_old  || ' STATUSABERTURACAIXALOJA = ' || coalesce(quote_literal(old.statusaberturacaixaloja), 'null');
				first = false;
			end if;

			if (new.datahoraaberturacaixa &lt;&gt; old.datahoraaberturacaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAABERTURACAIXA = ' || coalesce(quote_literal(new.datahoraaberturacaixa), 'null');
				sql_rolback = sql_rolback || ' DATAHORAABERTURACAIXA = ' || coalesce(quote_literal(old.datahoraaberturacaixa), 'null');
				campos_new  = campos_new  || ' DATAHORAABERTURACAIXA = ' || coalesce(quote_literal(new.datahoraaberturacaixa), 'null');
				campos_old  = campos_old  || ' DATAHORAABERTURACAIXA = ' || coalesce(quote_literal(old.datahoraaberturacaixa), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedorabertura &lt;&gt; old.codigoempresavendedorabertura) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigoempresavendedorabertura), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigoempresavendedorabertura), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigoempresavendedorabertura), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigoempresavendedorabertura), 'null');
				first = false;
			end if;

			if (new.codigolojavendedorabertura &lt;&gt; old.codigolojavendedorabertura) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigolojavendedorabertura), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigolojavendedorabertura), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigolojavendedorabertura), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigolojavendedorabertura), 'null');
				first = false;
			end if;

			if (new.codigovendedorabertura &lt;&gt; old.codigovendedorabertura) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigovendedorabertura), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigovendedorabertura), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDORABERTURA = ' || coalesce(quote_literal(new.codigovendedorabertura), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigovendedorabertura), 'null');
				first = false;
			end if;

			if (new.datahorafechamentocaixa &lt;&gt; old.datahorafechamentocaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAFECHAMENTOCAIXA = ' || coalesce(quote_literal(new.datahorafechamentocaixa), 'null');
				sql_rolback = sql_rolback || ' DATAHORAFECHAMENTOCAIXA = ' || coalesce(quote_literal(old.datahorafechamentocaixa), 'null');
				campos_new  = campos_new  || ' DATAHORAFECHAMENTOCAIXA = ' || coalesce(quote_literal(new.datahorafechamentocaixa), 'null');
				campos_old  = campos_old  || ' DATAHORAFECHAMENTOCAIXA = ' || coalesce(quote_literal(old.datahorafechamentocaixa), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedorfechamento &lt;&gt; old.codigoempresavendedorfechamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigoempresavendedorfechamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigoempresavendedorfechamento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigoempresavendedorfechamento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigoempresavendedorfechamento), 'null');
				first = false;
			end if;

			if (new.codigolojavendedorfechamento &lt;&gt; old.codigolojavendedorfechamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigolojavendedorfechamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigolojavendedorfechamento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigolojavendedorfechamento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigolojavendedorfechamento), 'null');
				first = false;
			end if;

			if (new.codigovendedorfechamento &lt;&gt; old.codigovendedorfechamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigovendedorfechamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigovendedorfechamento), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDORFECHAMENTO = ' || coalesce(quote_literal(new.codigovendedorfechamento), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigovendedorfechamento), 'null');
				first = false;
			end if;

			if (new.valoraberturacaixaloja &lt;&gt; old.valoraberturacaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORABERTURACAIXALOJA = ' || coalesce(quote_literal(new.valoraberturacaixaloja), 'null');
				sql_rolback = sql_rolback || ' VALORABERTURACAIXALOJA = ' || coalesce(quote_literal(old.valoraberturacaixaloja), 'null');
				campos_new  = campos_new  || ' VALORABERTURACAIXALOJA = ' || coalesce(quote_literal(new.valoraberturacaixaloja), 'null');
				campos_old  = campos_old  || ' VALORABERTURACAIXALOJA = ' || coalesce(quote_literal(old.valoraberturacaixaloja), 'null');
				first = false;
			end if;

			if (new.valorfechamentocaixaloja &lt;&gt; old.valorfechamentocaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFECHAMENTOCAIXALOJA = ' || coalesce(quote_literal(new.valorfechamentocaixaloja), 'null');
				sql_rolback = sql_rolback || ' VALORFECHAMENTOCAIXALOJA = ' || coalesce(quote_literal(old.valorfechamentocaixaloja), 'null');
				campos_new  = campos_new  || ' VALORFECHAMENTOCAIXALOJA = ' || coalesce(quote_literal(new.valorfechamentocaixaloja), 'null');
				campos_old  = campos_old  || ' VALORFECHAMENTOCAIXALOJA = ' || coalesce(quote_literal(old.valorfechamentocaixaloja), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocaixa), 'null')  || ', ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ABERTURACAIXALOJA (CODIGOEMPRESA, CODIGOLOJA, CODIGOCAIXA, CODIGOABERTURACAIXA, STATUSABERTURACAIXALOJA, DATAHORAABERTURACAIXA, CODIGOEMPRESAVENDEDORABERTURA, CODIGOLOJAVENDEDORABERTURA, CODIGOVENDEDORABERTURA, DATAHORAFECHAMENTOCAIXA, CODIGOEMPRESAVENDEDORFECHAMENTO, CODIGOLOJAVENDEDORFECHAMENTO, CODIGOVENDEDORFECHAMENTO, VALORABERTURACAIXALOJA, VALORFECHAMENTOCAIXALOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoaberturacaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusaberturacaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraaberturacaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedorabertura), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedorabertura), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedorabertura), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorafechamentocaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedorfechamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedorfechamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedorfechamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoraberturacaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfechamentocaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ABERTURACAIXALOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null') || ', ';
			campos_old  = campos_old || 'STATUSABERTURACAIXALOJA = ' || coalesce(quote_literal(old.statusaberturacaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAABERTURACAIXA = ' || coalesce(quote_literal(old.datahoraaberturacaixa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigoempresavendedorabertura), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigolojavendedorabertura), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDORABERTURA = ' || coalesce(quote_literal(old.codigovendedorabertura), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAFECHAMENTOCAIXA = ' || coalesce(quote_literal(old.datahorafechamentocaixa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigoempresavendedorfechamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigolojavendedorfechamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDORFECHAMENTO = ' || coalesce(quote_literal(old.codigovendedorfechamento), 'null') || ', ';
			campos_old  = campos_old || 'VALORABERTURACAIXALOJA = ' || coalesce(quote_literal(old.valoraberturacaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'VALORFECHAMENTOCAIXALOJA = ' || coalesce(quote_literal(old.valorfechamentocaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocaixa), 'null')  || ', ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'aberturacaixaloja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('aberturacaixaloja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('aberturacaixaloja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_acaoobjeto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_acaoobjeto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ACAOOBJETO (CODIGOOBJETO, CODIGOACAOOBJETO, NOMEACAOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoacaoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeacaoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ACAOOBJETO WHERE CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'NOMEACAOOBJETO = ' || coalesce(quote_literal(new.nomeacaoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoobjeto), 'null')  || ', ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ACAOOBJETO SET ';
			sql_rolback = 'UPDATE ACAOOBJETO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoobjeto &lt;&gt; old.codigoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				first = false;
			end if;

			if (new.codigoacaoobjeto &lt;&gt; old.codigoacaoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null');
				first = false;
			end if;

			if (new.nomeacaoobjeto &lt;&gt; old.nomeacaoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEACAOOBJETO = ' || coalesce(quote_literal(new.nomeacaoobjeto), 'null');
				sql_rolback = sql_rolback || ' NOMEACAOOBJETO = ' || coalesce(quote_literal(old.nomeacaoobjeto), 'null');
				campos_new  = campos_new  || ' NOMEACAOOBJETO = ' || coalesce(quote_literal(new.nomeacaoobjeto), 'null');
				campos_old  = campos_old  || ' NOMEACAOOBJETO = ' || coalesce(quote_literal(old.nomeacaoobjeto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoobjeto), 'null')  || ', ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ACAOOBJETO (CODIGOOBJETO, CODIGOACAOOBJETO, NOMEACAOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoacaoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeacaoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ACAOOBJETO WHERE CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'NOMEACAOOBJETO = ' || coalesce(quote_literal(old.nomeacaoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoobjeto), 'null')  || ', ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'acaoobjeto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('acaoobjeto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('acaoobjeto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_baixacontapagar()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_baixacontapagar() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO BAIXACONTAPAGAR (CODIGOCONTAPAGAR, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESACONTAPAGAR, CODIGOLOJACONTAPAGAR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOPAGAMENTO, CODIGOUSUARIOLOG, VALORBAIXACONTAPAGAR) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorbaixacontapagar), 'null') || ')';

			sql_rolback = 'DELETE FROM BAIXACONTAPAGAR WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'VALORBAIXACONTAPAGAR = ' || coalesce(quote_literal(new.valorbaixacontapagar), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigopagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE BAIXACONTAPAGAR SET ';
			sql_rolback = 'UPDATE BAIXACONTAPAGAR SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocontapagar &lt;&gt; old.codigocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresacontapagar &lt;&gt; old.codigoempresacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null');
				first = false;
			end if;

			if (new.codigolojacontapagar &lt;&gt; old.codigolojacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigopagamento &lt;&gt; old.codigopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.valorbaixacontapagar &lt;&gt; old.valorbaixacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORBAIXACONTAPAGAR = ' || coalesce(quote_literal(new.valorbaixacontapagar), 'null');
				sql_rolback = sql_rolback || ' VALORBAIXACONTAPAGAR = ' || coalesce(quote_literal(old.valorbaixacontapagar), 'null');
				campos_new  = campos_new  || ' VALORBAIXACONTAPAGAR = ' || coalesce(quote_literal(new.valorbaixacontapagar), 'null');
				campos_old  = campos_old  || ' VALORBAIXACONTAPAGAR = ' || coalesce(quote_literal(old.valorbaixacontapagar), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');

			sql_chave = coalesce(quote_literal(new.codigopagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO BAIXACONTAPAGAR (CODIGOCONTAPAGAR, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESACONTAPAGAR, CODIGOLOJACONTAPAGAR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOPAGAMENTO, CODIGOUSUARIOLOG, VALORBAIXACONTAPAGAR) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorbaixacontapagar), 'null') || ')';

			sql_replica = 'DELETE FROM BAIXACONTAPAGAR WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'VALORBAIXACONTAPAGAR = ' || coalesce(quote_literal(old.valorbaixacontapagar), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigopagamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null')  || ', ' || coalesce(quote_literal(old.codigolojacontapagar), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'baixacontapagar', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('baixacontapagar', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('baixacontapagar', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_baixacontareceber()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_baixacontareceber() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO BAIXACONTARECEBER (CODIGOEMPRESACONTARECEBER, CODIGOLOJACONTARECEBER, CODIGOCONTARECEBER, CODIGOEMPRESA, CODIGOLOJA, CODIGORECEBIMENTO, VALORRECEBIMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorrecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM BAIXACONTARECEBER WHERE CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			campos_new   = campos_new || 'VALORRECEBIMENTO = ' || coalesce(quote_literal(new.valorrecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigocontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigorecebimento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE BAIXACONTARECEBER SET ';
			sql_rolback = 'UPDATE BAIXACONTARECEBER SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresacontareceber &lt;&gt; old.codigoempresacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null');
				first = false;
			end if;

			if (new.codigolojacontareceber &lt;&gt; old.codigolojacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null');
				first = false;
			end if;

			if (new.codigocontareceber &lt;&gt; old.codigocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigorecebimento &lt;&gt; old.codigorecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				campos_new  = campos_new  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				campos_old  = campos_old  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				first = false;
			end if;

			if (new.valorrecebimento &lt;&gt; old.valorrecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(new.valorrecebimento), 'null');
				sql_rolback = sql_rolback || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(old.valorrecebimento), 'null');
				campos_new  = campos_new  || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(new.valorrecebimento), 'null');
				campos_old  = campos_old  || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(old.valorrecebimento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigocontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigorecebimento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO BAIXACONTARECEBER (CODIGOEMPRESACONTARECEBER, CODIGOLOJACONTARECEBER, CODIGOCONTARECEBER, CODIGOEMPRESA, CODIGOLOJA, CODIGORECEBIMENTO, VALORRECEBIMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorrecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM BAIXACONTARECEBER WHERE CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			campos_old  = campos_old || 'VALORRECEBIMENTO = ' || coalesce(quote_literal(old.valorrecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresacontareceber), 'null')  || ', ' || coalesce(quote_literal(old.codigolojacontareceber), 'null')  || ', ' || coalesce(quote_literal(old.codigocontareceber), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigorecebimento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'baixacontareceber', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('baixacontareceber', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('baixacontareceber', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_banco()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_banco() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO BANCO (CODIGOBANCO, NOMEBANCO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigobanco), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomebanco), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM BANCO WHERE CODIGOBANCO = ' || coalesce(quote_literal(new.codigobanco), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOBANCO = ' || coalesce(quote_literal(new.codigobanco), 'null') || ', ';
			campos_new   = campos_new || 'NOMEBANCO = ' || coalesce(quote_literal(new.nomebanco), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigobanco), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE BANCO SET ';
			sql_rolback = 'UPDATE BANCO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigobanco &lt;&gt; old.codigobanco) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOBANCO = ' || coalesce(quote_literal(new.codigobanco), 'null');
				sql_rolback = sql_rolback || ' CODIGOBANCO = ' || coalesce(quote_literal(old.codigobanco), 'null');
				campos_new  = campos_new  || ' CODIGOBANCO = ' || coalesce(quote_literal(new.codigobanco), 'null');
				campos_old  = campos_old  || ' CODIGOBANCO = ' || coalesce(quote_literal(old.codigobanco), 'null');
				first = false;
			end if;

			if (new.nomebanco &lt;&gt; old.nomebanco) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEBANCO = ' || coalesce(quote_literal(new.nomebanco), 'null');
				sql_rolback = sql_rolback || ' NOMEBANCO = ' || coalesce(quote_literal(old.nomebanco), 'null');
				campos_new  = campos_new  || ' NOMEBANCO = ' || coalesce(quote_literal(new.nomebanco), 'null');
				campos_old  = campos_old  || ' NOMEBANCO = ' || coalesce(quote_literal(old.nomebanco), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOBANCO = ' || coalesce(quote_literal(new.codigobanco), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOBANCO = ' || coalesce(quote_literal(new.codigobanco), 'null');

			sql_chave = coalesce(quote_literal(new.codigobanco), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO BANCO (CODIGOBANCO, NOMEBANCO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigobanco), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomebanco), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM BANCO WHERE CODIGOBANCO = ' || coalesce(quote_literal(old.codigobanco), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOBANCO = ' || coalesce(quote_literal(old.codigobanco), 'null') || ', ';
			campos_old  = campos_old || 'NOMEBANCO = ' || coalesce(quote_literal(old.nomebanco), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigobanco), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'banco', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('banco', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('banco', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_bandeiracartao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_bandeiracartao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO BANDEIRACARTAO (CODIGOBANDEIRA, NOMEBANDEIRA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigobandeira), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomebandeira), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM BANDEIRACARTAO WHERE CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null') || ', ';
			campos_new   = campos_new || 'NOMEBANDEIRA = ' || coalesce(quote_literal(new.nomebandeira), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigobandeira), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE BANDEIRACARTAO SET ';
			sql_rolback = 'UPDATE BANDEIRACARTAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigobandeira &lt;&gt; old.codigobandeira) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');
				sql_rolback = sql_rolback || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null');
				campos_new  = campos_new  || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');
				campos_old  = campos_old  || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null');
				first = false;
			end if;

			if (new.nomebandeira &lt;&gt; old.nomebandeira) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEBANDEIRA = ' || coalesce(quote_literal(new.nomebandeira), 'null');
				sql_rolback = sql_rolback || ' NOMEBANDEIRA = ' || coalesce(quote_literal(old.nomebandeira), 'null');
				campos_new  = campos_new  || ' NOMEBANDEIRA = ' || coalesce(quote_literal(new.nomebandeira), 'null');
				campos_old  = campos_old  || ' NOMEBANDEIRA = ' || coalesce(quote_literal(old.nomebandeira), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');

			sql_chave = coalesce(quote_literal(new.codigobandeira), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO BANDEIRACARTAO (CODIGOBANDEIRA, NOMEBANDEIRA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigobandeira), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomebandeira), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM BANDEIRACARTAO WHERE CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null') || ', ';
			campos_old  = campos_old || 'NOMEBANDEIRA = ' || coalesce(quote_literal(old.nomebandeira), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigobandeira), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'bandeiracartao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('bandeiracartao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('bandeiracartao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_caixaloja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_caixaloja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CAIXALOJA (CODIGOEMPRESA, CODIGOLOJA, CODIGOCAIXA, DESCRICAOCAIXA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CAIXALOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCAIXA = ' || coalesce(quote_literal(new.descricaocaixa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocaixa), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CAIXALOJA SET ';
			sql_rolback = 'UPDATE CAIXALOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocaixa &lt;&gt; old.codigocaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
				sql_rolback = sql_rolback || ' CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');
				campos_new  = campos_new  || ' CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
				campos_old  = campos_old  || ' CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');
				first = false;
			end if;

			if (new.descricaocaixa &lt;&gt; old.descricaocaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCAIXA = ' || coalesce(quote_literal(new.descricaocaixa), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCAIXA = ' || coalesce(quote_literal(old.descricaocaixa), 'null');
				campos_new  = campos_new  || ' DESCRICAOCAIXA = ' || coalesce(quote_literal(new.descricaocaixa), 'null');
				campos_old  = campos_old  || ' DESCRICAOCAIXA = ' || coalesce(quote_literal(old.descricaocaixa), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocaixa), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CAIXALOJA (CODIGOEMPRESA, CODIGOLOJA, CODIGOCAIXA, DESCRICAOCAIXA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CAIXALOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCAIXA = ' || coalesce(quote_literal(old.descricaocaixa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocaixa), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'caixaloja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('caixaloja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('caixaloja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_cargo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_cargo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CARGO (CODIGOCARGO, CODIGOEMPRESA, CODIGOLOJA, NOMECARGO, CODIGOCBO, STATUSCARGO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocargo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomecargo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocbo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuscargo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CARGO WHERE CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NOMECARGO = ' || coalesce(quote_literal(new.nomecargo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null') || ', ';
			campos_new   = campos_new || 'STATUSCARGO = ' || coalesce(quote_literal(new.statuscargo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocargo), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CARGO SET ';
			sql_rolback = 'UPDATE CARGO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocargo &lt;&gt; old.codigocargo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null');
				sql_rolback = sql_rolback || ' CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null');
				campos_new  = campos_new  || ' CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null');
				campos_old  = campos_old  || ' CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.nomecargo &lt;&gt; old.nomecargo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMECARGO = ' || coalesce(quote_literal(new.nomecargo), 'null');
				sql_rolback = sql_rolback || ' NOMECARGO = ' || coalesce(quote_literal(old.nomecargo), 'null');
				campos_new  = campos_new  || ' NOMECARGO = ' || coalesce(quote_literal(new.nomecargo), 'null');
				campos_old  = campos_old  || ' NOMECARGO = ' || coalesce(quote_literal(old.nomecargo), 'null');
				first = false;
			end if;

			if (new.codigocbo &lt;&gt; old.codigocbo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');
				sql_rolback = sql_rolback || ' CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null');
				campos_new  = campos_new  || ' CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');
				campos_old  = campos_old  || ' CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null');
				first = false;
			end if;

			if (new.statuscargo &lt;&gt; old.statuscargo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSCARGO = ' || coalesce(quote_literal(new.statuscargo), 'null');
				sql_rolback = sql_rolback || ' STATUSCARGO = ' || coalesce(quote_literal(old.statuscargo), 'null');
				campos_new  = campos_new  || ' STATUSCARGO = ' || coalesce(quote_literal(new.statuscargo), 'null');
				campos_old  = campos_old  || ' STATUSCARGO = ' || coalesce(quote_literal(old.statuscargo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigocargo), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CARGO (CODIGOCARGO, CODIGOEMPRESA, CODIGOLOJA, NOMECARGO, CODIGOCBO, STATUSCARGO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocargo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomecargo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocbo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuscargo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CARGO WHERE CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NOMECARGO = ' || coalesce(quote_literal(old.nomecargo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null') || ', ';
			campos_old  = campos_old || 'STATUSCARGO = ' || coalesce(quote_literal(old.statuscargo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocargo), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'cargo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cargo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cargo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_cbo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_cbo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CBO (CODIGOCBO, DESCRICAOCBO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocbo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocbo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CBO WHERE CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCBO = ' || coalesce(quote_literal(new.descricaocbo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocbo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CBO SET ';
			sql_rolback = 'UPDATE CBO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocbo &lt;&gt; old.codigocbo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');
				sql_rolback = sql_rolback || ' CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null');
				campos_new  = campos_new  || ' CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');
				campos_old  = campos_old  || ' CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null');
				first = false;
			end if;

			if (new.descricaocbo &lt;&gt; old.descricaocbo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCBO = ' || coalesce(quote_literal(new.descricaocbo), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCBO = ' || coalesce(quote_literal(old.descricaocbo), 'null');
				campos_new  = campos_new  || ' DESCRICAOCBO = ' || coalesce(quote_literal(new.descricaocbo), 'null');
				campos_old  = campos_old  || ' DESCRICAOCBO = ' || coalesce(quote_literal(old.descricaocbo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCBO = ' || coalesce(quote_literal(new.codigocbo), 'null');

			sql_chave = coalesce(quote_literal(new.codigocbo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CBO (CODIGOCBO, DESCRICAOCBO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocbo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocbo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CBO WHERE CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCBO = ' || coalesce(quote_literal(old.codigocbo), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCBO = ' || coalesce(quote_literal(old.descricaocbo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocbo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'cbo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cbo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cbo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_centrocusto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_centrocusto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CENTROCUSTO (CODIGOCENTROCUSTO, NOMECENTROCUSTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocentrocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomecentrocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CENTROCUSTO WHERE CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null') || ', ';
			campos_new   = campos_new || 'NOMECENTROCUSTO = ' || coalesce(quote_literal(new.nomecentrocusto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocentrocusto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CENTROCUSTO SET ';
			sql_rolback = 'UPDATE CENTROCUSTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocentrocusto &lt;&gt; old.codigocentrocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
				sql_rolback = sql_rolback || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');
				campos_new  = campos_new  || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
				campos_old  = campos_old  || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');
				first = false;
			end if;

			if (new.nomecentrocusto &lt;&gt; old.nomecentrocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMECENTROCUSTO = ' || coalesce(quote_literal(new.nomecentrocusto), 'null');
				sql_rolback = sql_rolback || ' NOMECENTROCUSTO = ' || coalesce(quote_literal(old.nomecentrocusto), 'null');
				campos_new  = campos_new  || ' NOMECENTROCUSTO = ' || coalesce(quote_literal(new.nomecentrocusto), 'null');
				campos_old  = campos_old  || ' NOMECENTROCUSTO = ' || coalesce(quote_literal(old.nomecentrocusto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');

			sql_chave = coalesce(quote_literal(new.codigocentrocusto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CENTROCUSTO (CODIGOCENTROCUSTO, NOMECENTROCUSTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocentrocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomecentrocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CENTROCUSTO WHERE CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null') || ', ';
			campos_old  = campos_old || 'NOMECENTROCUSTO = ' || coalesce(quote_literal(old.nomecentrocusto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocentrocusto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'centrocusto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('centrocusto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('centrocusto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_cfop()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_cfop() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CFOP (CODIGOCFOP, COMPLEMENTOCFOP, DESCRICAOCFOP, TIPOCFOP, CLASSIFICACAOCFOP, OBSERVACOESCFOP, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocfop), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.complementocfop), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocfop), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipocfop), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.classificacaocfop), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoescfop), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CFOP WHERE CODIGOCFOP = ' || coalesce(quote_literal(new.codigocfop), 'null') || ' AND COMPLEMENTOCFOP = ' || coalesce(quote_literal(new.complementocfop), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCFOP = ' || coalesce(quote_literal(new.codigocfop), 'null') || ', ';
			campos_new   = campos_new || 'COMPLEMENTOCFOP = ' || coalesce(quote_literal(new.complementocfop), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCFOP = ' || coalesce(quote_literal(new.descricaocfop), 'null') || ', ';
			campos_new   = campos_new || 'TIPOCFOP = ' || coalesce(quote_literal(new.tipocfop), 'null') || ', ';
			campos_new   = campos_new || 'CLASSIFICACAOCFOP = ' || coalesce(quote_literal(new.classificacaocfop), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESCFOP = ' || coalesce(quote_literal(new.observacoescfop), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocfop), 'null')  || ', ' || coalesce(quote_literal(new.complementocfop), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CFOP SET ';
			sql_rolback = 'UPDATE CFOP SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocfop &lt;&gt; old.codigocfop) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCFOP = ' || coalesce(quote_literal(new.codigocfop), 'null');
				sql_rolback = sql_rolback || ' CODIGOCFOP = ' || coalesce(quote_literal(old.codigocfop), 'null');
				campos_new  = campos_new  || ' CODIGOCFOP = ' || coalesce(quote_literal(new.codigocfop), 'null');
				campos_old  = campos_old  || ' CODIGOCFOP = ' || coalesce(quote_literal(old.codigocfop), 'null');
				first = false;
			end if;

			if (new.complementocfop &lt;&gt; old.complementocfop) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' COMPLEMENTOCFOP = ' || coalesce(quote_literal(new.complementocfop), 'null');
				sql_rolback = sql_rolback || ' COMPLEMENTOCFOP = ' || coalesce(quote_literal(old.complementocfop), 'null');
				campos_new  = campos_new  || ' COMPLEMENTOCFOP = ' || coalesce(quote_literal(new.complementocfop), 'null');
				campos_old  = campos_old  || ' COMPLEMENTOCFOP = ' || coalesce(quote_literal(old.complementocfop), 'null');
				first = false;
			end if;

			if (new.descricaocfop &lt;&gt; old.descricaocfop) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCFOP = ' || coalesce(quote_literal(new.descricaocfop), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCFOP = ' || coalesce(quote_literal(old.descricaocfop), 'null');
				campos_new  = campos_new  || ' DESCRICAOCFOP = ' || coalesce(quote_literal(new.descricaocfop), 'null');
				campos_old  = campos_old  || ' DESCRICAOCFOP = ' || coalesce(quote_literal(old.descricaocfop), 'null');
				first = false;
			end if;

			if (new.tipocfop &lt;&gt; old.tipocfop) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOCFOP = ' || coalesce(quote_literal(new.tipocfop), 'null');
				sql_rolback = sql_rolback || ' TIPOCFOP = ' || coalesce(quote_literal(old.tipocfop), 'null');
				campos_new  = campos_new  || ' TIPOCFOP = ' || coalesce(quote_literal(new.tipocfop), 'null');
				campos_old  = campos_old  || ' TIPOCFOP = ' || coalesce(quote_literal(old.tipocfop), 'null');
				first = false;
			end if;

			if (new.classificacaocfop &lt;&gt; old.classificacaocfop) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CLASSIFICACAOCFOP = ' || coalesce(quote_literal(new.classificacaocfop), 'null');
				sql_rolback = sql_rolback || ' CLASSIFICACAOCFOP = ' || coalesce(quote_literal(old.classificacaocfop), 'null');
				campos_new  = campos_new  || ' CLASSIFICACAOCFOP = ' || coalesce(quote_literal(new.classificacaocfop), 'null');
				campos_old  = campos_old  || ' CLASSIFICACAOCFOP = ' || coalesce(quote_literal(old.classificacaocfop), 'null');
				first = false;
			end if;

			if (new.observacoescfop &lt;&gt; old.observacoescfop) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESCFOP = ' || coalesce(quote_literal(new.observacoescfop), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESCFOP = ' || coalesce(quote_literal(old.observacoescfop), 'null');
				campos_new  = campos_new  || ' OBSERVACOESCFOP = ' || coalesce(quote_literal(new.observacoescfop), 'null');
				campos_old  = campos_old  || ' OBSERVACOESCFOP = ' || coalesce(quote_literal(old.observacoescfop), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCFOP = ' || coalesce(quote_literal(new.codigocfop), 'null') || ' AND COMPLEMENTOCFOP = ' || coalesce(quote_literal(new.complementocfop), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCFOP = ' || coalesce(quote_literal(new.codigocfop), 'null') || ' AND COMPLEMENTOCFOP = ' || coalesce(quote_literal(new.complementocfop), 'null');

			sql_chave = coalesce(quote_literal(new.codigocfop), 'null')  || ', ' || coalesce(quote_literal(new.complementocfop), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CFOP (CODIGOCFOP, COMPLEMENTOCFOP, DESCRICAOCFOP, TIPOCFOP, CLASSIFICACAOCFOP, OBSERVACOESCFOP, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocfop), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.complementocfop), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocfop), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipocfop), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.classificacaocfop), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoescfop), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CFOP WHERE CODIGOCFOP = ' || coalesce(quote_literal(old.codigocfop), 'null') || ' AND COMPLEMENTOCFOP = ' || coalesce(quote_literal(old.complementocfop), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCFOP = ' || coalesce(quote_literal(old.codigocfop), 'null') || ', ';
			campos_old  = campos_old || 'COMPLEMENTOCFOP = ' || coalesce(quote_literal(old.complementocfop), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCFOP = ' || coalesce(quote_literal(old.descricaocfop), 'null') || ', ';
			campos_old  = campos_old || 'TIPOCFOP = ' || coalesce(quote_literal(old.tipocfop), 'null') || ', ';
			campos_old  = campos_old || 'CLASSIFICACAOCFOP = ' || coalesce(quote_literal(old.classificacaocfop), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESCFOP = ' || coalesce(quote_literal(old.observacoescfop), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocfop), 'null')  || ', ' || coalesce(quote_literal(old.complementocfop), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'cfop', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cfop', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cfop', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_chequeemitido()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_chequeemitido() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CHEQUEEMITIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCHEQUEEMITIDO, NUMEROCHEQUEEMITIDO, CODIGOEMPRESACONTABANCARIA, CODIGOLOJACONTABANCARIA, CODIGOCONTABANCARIA, SEQUENCIALMOVIMENTACAOCONTABANCARIA, VALORCHEQUEEMITIDO, DATAEMISSAOCHEQUEEMITIDO, BOMPARACHEQUEEMITIDO, CODIGOEMPRESADESTINATARIO, CODIGOLOJADESTINATARIO, CODIGOPESSOADESTINATARIO, CODIGOEMPRESAPAGAMENTO, CODIGOLOJAPAGAMENTO, CODIGOPAGAMENTO, STATUSCHEQUEEMITIDO, DATACOMPENSACAOCHEQUEEMITIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigochequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerochequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorchequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaochequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.bomparachequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresadestinatario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojadestinatario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoadestinatario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuschequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datacompensacaochequeemitido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CHEQUEEMITIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.codigochequeemitido), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.codigochequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROCHEQUEEMITIDO = ' || coalesce(quote_literal(new.numerochequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'VALORCHEQUEEMITIDO = ' || coalesce(quote_literal(new.valorchequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.dataemissaochequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'BOMPARACHEQUEEMITIDO = ' || coalesce(quote_literal(new.bomparachequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESADESTINATARIO = ' || coalesce(quote_literal(new.codigoempresadestinatario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJADESTINATARIO = ' || coalesce(quote_literal(new.codigolojadestinatario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOADESTINATARIO = ' || coalesce(quote_literal(new.codigopessoadestinatario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(new.codigoempresapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(new.codigolojapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			campos_new   = campos_new || 'STATUSCHEQUEEMITIDO = ' || coalesce(quote_literal(new.statuschequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'DATACOMPENSACAOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.datacompensacaochequeemitido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigochequeemitido), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CHEQUEEMITIDO SET ';
			sql_rolback = 'UPDATE CHEQUEEMITIDO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigochequeemitido &lt;&gt; old.codigochequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.codigochequeemitido), 'null');
				sql_rolback = sql_rolback || ' CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.codigochequeemitido), 'null');
				campos_new  = campos_new  || ' CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.codigochequeemitido), 'null');
				campos_old  = campos_old  || ' CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.codigochequeemitido), 'null');
				first = false;
			end if;

			if (new.numerochequeemitido &lt;&gt; old.numerochequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROCHEQUEEMITIDO = ' || coalesce(quote_literal(new.numerochequeemitido), 'null');
				sql_rolback = sql_rolback || ' NUMEROCHEQUEEMITIDO = ' || coalesce(quote_literal(old.numerochequeemitido), 'null');
				campos_new  = campos_new  || ' NUMEROCHEQUEEMITIDO = ' || coalesce(quote_literal(new.numerochequeemitido), 'null');
				campos_old  = campos_old  || ' NUMEROCHEQUEEMITIDO = ' || coalesce(quote_literal(old.numerochequeemitido), 'null');
				first = false;
			end if;

			if (new.codigoempresacontabancaria &lt;&gt; old.codigoempresacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null');
				first = false;
			end if;

			if (new.codigolojacontabancaria &lt;&gt; old.codigolojacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null');
				first = false;
			end if;

			if (new.codigocontabancaria &lt;&gt; old.codigocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				first = false;
			end if;

			if (new.sequencialmovimentacaocontabancaria &lt;&gt; old.sequencialmovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				first = false;
			end if;

			if (new.valorchequeemitido &lt;&gt; old.valorchequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCHEQUEEMITIDO = ' || coalesce(quote_literal(new.valorchequeemitido), 'null');
				sql_rolback = sql_rolback || ' VALORCHEQUEEMITIDO = ' || coalesce(quote_literal(old.valorchequeemitido), 'null');
				campos_new  = campos_new  || ' VALORCHEQUEEMITIDO = ' || coalesce(quote_literal(new.valorchequeemitido), 'null');
				campos_old  = campos_old  || ' VALORCHEQUEEMITIDO = ' || coalesce(quote_literal(old.valorchequeemitido), 'null');
				first = false;
			end if;

			if (new.dataemissaochequeemitido &lt;&gt; old.dataemissaochequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.dataemissaochequeemitido), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.dataemissaochequeemitido), 'null');
				campos_new  = campos_new  || ' DATAEMISSAOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.dataemissaochequeemitido), 'null');
				campos_old  = campos_old  || ' DATAEMISSAOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.dataemissaochequeemitido), 'null');
				first = false;
			end if;

			if (new.bomparachequeemitido &lt;&gt; old.bomparachequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BOMPARACHEQUEEMITIDO = ' || coalesce(quote_literal(new.bomparachequeemitido), 'null');
				sql_rolback = sql_rolback || ' BOMPARACHEQUEEMITIDO = ' || coalesce(quote_literal(old.bomparachequeemitido), 'null');
				campos_new  = campos_new  || ' BOMPARACHEQUEEMITIDO = ' || coalesce(quote_literal(new.bomparachequeemitido), 'null');
				campos_old  = campos_old  || ' BOMPARACHEQUEEMITIDO = ' || coalesce(quote_literal(old.bomparachequeemitido), 'null');
				first = false;
			end if;

			if (new.codigoempresadestinatario &lt;&gt; old.codigoempresadestinatario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESADESTINATARIO = ' || coalesce(quote_literal(new.codigoempresadestinatario), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESADESTINATARIO = ' || coalesce(quote_literal(old.codigoempresadestinatario), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESADESTINATARIO = ' || coalesce(quote_literal(new.codigoempresadestinatario), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESADESTINATARIO = ' || coalesce(quote_literal(old.codigoempresadestinatario), 'null');
				first = false;
			end if;

			if (new.codigolojadestinatario &lt;&gt; old.codigolojadestinatario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJADESTINATARIO = ' || coalesce(quote_literal(new.codigolojadestinatario), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJADESTINATARIO = ' || coalesce(quote_literal(old.codigolojadestinatario), 'null');
				campos_new  = campos_new  || ' CODIGOLOJADESTINATARIO = ' || coalesce(quote_literal(new.codigolojadestinatario), 'null');
				campos_old  = campos_old  || ' CODIGOLOJADESTINATARIO = ' || coalesce(quote_literal(old.codigolojadestinatario), 'null');
				first = false;
			end if;

			if (new.codigopessoadestinatario &lt;&gt; old.codigopessoadestinatario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOADESTINATARIO = ' || coalesce(quote_literal(new.codigopessoadestinatario), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOADESTINATARIO = ' || coalesce(quote_literal(old.codigopessoadestinatario), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOADESTINATARIO = ' || coalesce(quote_literal(new.codigopessoadestinatario), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOADESTINATARIO = ' || coalesce(quote_literal(old.codigopessoadestinatario), 'null');
				first = false;
			end if;

			if (new.codigoempresapagamento &lt;&gt; old.codigoempresapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(new.codigoempresapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(old.codigoempresapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(new.codigoempresapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(old.codigoempresapagamento), 'null');
				first = false;
			end if;

			if (new.codigolojapagamento &lt;&gt; old.codigolojapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(new.codigolojapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(old.codigolojapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(new.codigolojapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(old.codigolojapagamento), 'null');
				first = false;
			end if;

			if (new.codigopagamento &lt;&gt; old.codigopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				first = false;
			end if;

			if (new.statuschequeemitido &lt;&gt; old.statuschequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSCHEQUEEMITIDO = ' || coalesce(quote_literal(new.statuschequeemitido), 'null');
				sql_rolback = sql_rolback || ' STATUSCHEQUEEMITIDO = ' || coalesce(quote_literal(old.statuschequeemitido), 'null');
				campos_new  = campos_new  || ' STATUSCHEQUEEMITIDO = ' || coalesce(quote_literal(new.statuschequeemitido), 'null');
				campos_old  = campos_old  || ' STATUSCHEQUEEMITIDO = ' || coalesce(quote_literal(old.statuschequeemitido), 'null');
				first = false;
			end if;

			if (new.datacompensacaochequeemitido &lt;&gt; old.datacompensacaochequeemitido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATACOMPENSACAOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.datacompensacaochequeemitido), 'null');
				sql_rolback = sql_rolback || ' DATACOMPENSACAOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.datacompensacaochequeemitido), 'null');
				campos_new  = campos_new  || ' DATACOMPENSACAOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.datacompensacaochequeemitido), 'null');
				campos_old  = campos_old  || ' DATACOMPENSACAOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.datacompensacaochequeemitido), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.codigochequeemitido), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(new.codigochequeemitido), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigochequeemitido), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CHEQUEEMITIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCHEQUEEMITIDO, NUMEROCHEQUEEMITIDO, CODIGOEMPRESACONTABANCARIA, CODIGOLOJACONTABANCARIA, CODIGOCONTABANCARIA, SEQUENCIALMOVIMENTACAOCONTABANCARIA, VALORCHEQUEEMITIDO, DATAEMISSAOCHEQUEEMITIDO, BOMPARACHEQUEEMITIDO, CODIGOEMPRESADESTINATARIO, CODIGOLOJADESTINATARIO, CODIGOPESSOADESTINATARIO, CODIGOEMPRESAPAGAMENTO, CODIGOLOJAPAGAMENTO, CODIGOPAGAMENTO, STATUSCHEQUEEMITIDO, DATACOMPENSACAOCHEQUEEMITIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigochequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerochequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorchequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaochequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.bomparachequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresadestinatario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojadestinatario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoadestinatario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuschequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datacompensacaochequeemitido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CHEQUEEMITIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.codigochequeemitido), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.codigochequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROCHEQUEEMITIDO = ' || coalesce(quote_literal(old.numerochequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'VALORCHEQUEEMITIDO = ' || coalesce(quote_literal(old.valorchequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.dataemissaochequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'BOMPARACHEQUEEMITIDO = ' || coalesce(quote_literal(old.bomparachequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESADESTINATARIO = ' || coalesce(quote_literal(old.codigoempresadestinatario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJADESTINATARIO = ' || coalesce(quote_literal(old.codigolojadestinatario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOADESTINATARIO = ' || coalesce(quote_literal(old.codigopessoadestinatario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(old.codigoempresapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(old.codigolojapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			campos_old  = campos_old || 'STATUSCHEQUEEMITIDO = ' || coalesce(quote_literal(old.statuschequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'DATACOMPENSACAOCHEQUEEMITIDO = ' || coalesce(quote_literal(old.datacompensacaochequeemitido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigochequeemitido), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'chequeemitido', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('chequeemitido', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('chequeemitido', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_chequerecebido()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_chequerecebido() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CHEQUERECEBIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCHEQUERECEBIDO, NUMEROCHEQUERECEBIDO, VALORCHEQUERECEBIDO, DATAEMISSAOCHEQUERECEBIDO, BOMPARACHEQUERECEBIDO, CODIGOBANCOCHEQUERECEBIDO, CODIGOEMPRESARECEBIMENTO, CODIGOLOJARECEBIMENTO, CODIGORECEBIMENTO, CODIGOEMPRESAEMITENTE, CODIGOLOJAEMITENTE, CODIGOPESSOAEMITENTE, CODIGOENDERECOPESSOAEMITENTE, AGENCIACHEQUERECEBIDO, DIGITOAGENCIACHEQUERECEBIDO, CONTACHEQUERECEBIDO, DIGITOCONTACHEQUERECEBIDO, STATUSCHEQUERECEBIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOCONTABANCARIA, CODIGOEMPRESACONTABANCARIA, CODIGOLOJACONTABANCARIA, SEQUENCIALMOVIMENTACAOCONTABANCARIA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigochequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerochequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorchequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaochequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.bomparachequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigobancochequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.agenciachequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.digitoagenciachequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.contachequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.digitocontachequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuschequerecebido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ')';

			sql_rolback = 'DELETE FROM CHEQUERECEBIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigochequerecebido), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigochequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROCHEQUERECEBIDO = ' || coalesce(quote_literal(new.numerochequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'VALORCHEQUERECEBIDO = ' || coalesce(quote_literal(new.valorchequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.dataemissaochequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'BOMPARACHEQUERECEBIDO = ' || coalesce(quote_literal(new.bomparachequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOBANCOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigobancochequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(new.codigoempresaemitente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(new.codigolojaemitente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigopessoaemitente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null') || ', ';
			campos_new   = campos_new || 'AGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(new.agenciachequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'DIGITOAGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(new.digitoagenciachequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'CONTACHEQUERECEBIDO = ' || coalesce(quote_literal(new.contachequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'DIGITOCONTACHEQUERECEBIDO = ' || coalesce(quote_literal(new.digitocontachequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'STATUSCHEQUERECEBIDO = ' || coalesce(quote_literal(new.statuschequerecebido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigochequerecebido), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CHEQUERECEBIDO SET ';
			sql_rolback = 'UPDATE CHEQUERECEBIDO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigochequerecebido &lt;&gt; old.codigochequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigochequerecebido), 'null');
				sql_rolback = sql_rolback || ' CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigochequerecebido), 'null');
				campos_new  = campos_new  || ' CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigochequerecebido), 'null');
				campos_old  = campos_old  || ' CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigochequerecebido), 'null');
				first = false;
			end if;

			if (new.numerochequerecebido &lt;&gt; old.numerochequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROCHEQUERECEBIDO = ' || coalesce(quote_literal(new.numerochequerecebido), 'null');
				sql_rolback = sql_rolback || ' NUMEROCHEQUERECEBIDO = ' || coalesce(quote_literal(old.numerochequerecebido), 'null');
				campos_new  = campos_new  || ' NUMEROCHEQUERECEBIDO = ' || coalesce(quote_literal(new.numerochequerecebido), 'null');
				campos_old  = campos_old  || ' NUMEROCHEQUERECEBIDO = ' || coalesce(quote_literal(old.numerochequerecebido), 'null');
				first = false;
			end if;

			if (new.valorchequerecebido &lt;&gt; old.valorchequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCHEQUERECEBIDO = ' || coalesce(quote_literal(new.valorchequerecebido), 'null');
				sql_rolback = sql_rolback || ' VALORCHEQUERECEBIDO = ' || coalesce(quote_literal(old.valorchequerecebido), 'null');
				campos_new  = campos_new  || ' VALORCHEQUERECEBIDO = ' || coalesce(quote_literal(new.valorchequerecebido), 'null');
				campos_old  = campos_old  || ' VALORCHEQUERECEBIDO = ' || coalesce(quote_literal(old.valorchequerecebido), 'null');
				first = false;
			end if;

			if (new.dataemissaochequerecebido &lt;&gt; old.dataemissaochequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.dataemissaochequerecebido), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.dataemissaochequerecebido), 'null');
				campos_new  = campos_new  || ' DATAEMISSAOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.dataemissaochequerecebido), 'null');
				campos_old  = campos_old  || ' DATAEMISSAOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.dataemissaochequerecebido), 'null');
				first = false;
			end if;

			if (new.bomparachequerecebido &lt;&gt; old.bomparachequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BOMPARACHEQUERECEBIDO = ' || coalesce(quote_literal(new.bomparachequerecebido), 'null');
				sql_rolback = sql_rolback || ' BOMPARACHEQUERECEBIDO = ' || coalesce(quote_literal(old.bomparachequerecebido), 'null');
				campos_new  = campos_new  || ' BOMPARACHEQUERECEBIDO = ' || coalesce(quote_literal(new.bomparachequerecebido), 'null');
				campos_old  = campos_old  || ' BOMPARACHEQUERECEBIDO = ' || coalesce(quote_literal(old.bomparachequerecebido), 'null');
				first = false;
			end if;

			if (new.codigobancochequerecebido &lt;&gt; old.codigobancochequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOBANCOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigobancochequerecebido), 'null');
				sql_rolback = sql_rolback || ' CODIGOBANCOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigobancochequerecebido), 'null');
				campos_new  = campos_new  || ' CODIGOBANCOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigobancochequerecebido), 'null');
				campos_old  = campos_old  || ' CODIGOBANCOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigobancochequerecebido), 'null');
				first = false;
			end if;

			if (new.codigoempresarecebimento &lt;&gt; old.codigoempresarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null');
				first = false;
			end if;

			if (new.codigolojarecebimento &lt;&gt; old.codigolojarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null');
				first = false;
			end if;

			if (new.codigorecebimento &lt;&gt; old.codigorecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				campos_new  = campos_new  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				campos_old  = campos_old  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitente &lt;&gt; old.codigoempresaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(new.codigoempresaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(old.codigoempresaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(new.codigoempresaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(old.codigoempresaemitente), 'null');
				first = false;
			end if;

			if (new.codigolojaemitente &lt;&gt; old.codigolojaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(new.codigolojaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(old.codigolojaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(new.codigolojaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(old.codigolojaemitente), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitente &lt;&gt; old.codigopessoaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigopessoaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigopessoaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigopessoaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigopessoaemitente), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitente &lt;&gt; old.codigoenderecopessoaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null');
				first = false;
			end if;

			if (new.agenciachequerecebido &lt;&gt; old.agenciachequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' AGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(new.agenciachequerecebido), 'null');
				sql_rolback = sql_rolback || ' AGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(old.agenciachequerecebido), 'null');
				campos_new  = campos_new  || ' AGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(new.agenciachequerecebido), 'null');
				campos_old  = campos_old  || ' AGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(old.agenciachequerecebido), 'null');
				first = false;
			end if;

			if (new.digitoagenciachequerecebido &lt;&gt; old.digitoagenciachequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIGITOAGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(new.digitoagenciachequerecebido), 'null');
				sql_rolback = sql_rolback || ' DIGITOAGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(old.digitoagenciachequerecebido), 'null');
				campos_new  = campos_new  || ' DIGITOAGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(new.digitoagenciachequerecebido), 'null');
				campos_old  = campos_old  || ' DIGITOAGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(old.digitoagenciachequerecebido), 'null');
				first = false;
			end if;

			if (new.contachequerecebido &lt;&gt; old.contachequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CONTACHEQUERECEBIDO = ' || coalesce(quote_literal(new.contachequerecebido), 'null');
				sql_rolback = sql_rolback || ' CONTACHEQUERECEBIDO = ' || coalesce(quote_literal(old.contachequerecebido), 'null');
				campos_new  = campos_new  || ' CONTACHEQUERECEBIDO = ' || coalesce(quote_literal(new.contachequerecebido), 'null');
				campos_old  = campos_old  || ' CONTACHEQUERECEBIDO = ' || coalesce(quote_literal(old.contachequerecebido), 'null');
				first = false;
			end if;

			if (new.digitocontachequerecebido &lt;&gt; old.digitocontachequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIGITOCONTACHEQUERECEBIDO = ' || coalesce(quote_literal(new.digitocontachequerecebido), 'null');
				sql_rolback = sql_rolback || ' DIGITOCONTACHEQUERECEBIDO = ' || coalesce(quote_literal(old.digitocontachequerecebido), 'null');
				campos_new  = campos_new  || ' DIGITOCONTACHEQUERECEBIDO = ' || coalesce(quote_literal(new.digitocontachequerecebido), 'null');
				campos_old  = campos_old  || ' DIGITOCONTACHEQUERECEBIDO = ' || coalesce(quote_literal(old.digitocontachequerecebido), 'null');
				first = false;
			end if;

			if (new.statuschequerecebido &lt;&gt; old.statuschequerecebido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSCHEQUERECEBIDO = ' || coalesce(quote_literal(new.statuschequerecebido), 'null');
				sql_rolback = sql_rolback || ' STATUSCHEQUERECEBIDO = ' || coalesce(quote_literal(old.statuschequerecebido), 'null');
				campos_new  = campos_new  || ' STATUSCHEQUERECEBIDO = ' || coalesce(quote_literal(new.statuschequerecebido), 'null');
				campos_old  = campos_old  || ' STATUSCHEQUERECEBIDO = ' || coalesce(quote_literal(old.statuschequerecebido), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigocontabancaria &lt;&gt; old.codigocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresacontabancaria &lt;&gt; old.codigoempresacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null');
				first = false;
			end if;

			if (new.codigolojacontabancaria &lt;&gt; old.codigolojacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null');
				first = false;
			end if;

			if (new.sequencialmovimentacaocontabancaria &lt;&gt; old.sequencialmovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigochequerecebido), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(new.codigochequerecebido), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigochequerecebido), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CHEQUERECEBIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCHEQUERECEBIDO, NUMEROCHEQUERECEBIDO, VALORCHEQUERECEBIDO, DATAEMISSAOCHEQUERECEBIDO, BOMPARACHEQUERECEBIDO, CODIGOBANCOCHEQUERECEBIDO, CODIGOEMPRESARECEBIMENTO, CODIGOLOJARECEBIMENTO, CODIGORECEBIMENTO, CODIGOEMPRESAEMITENTE, CODIGOLOJAEMITENTE, CODIGOPESSOAEMITENTE, CODIGOENDERECOPESSOAEMITENTE, AGENCIACHEQUERECEBIDO, DIGITOAGENCIACHEQUERECEBIDO, CONTACHEQUERECEBIDO, DIGITOCONTACHEQUERECEBIDO, STATUSCHEQUERECEBIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOCONTABANCARIA, CODIGOEMPRESACONTABANCARIA, CODIGOLOJACONTABANCARIA, SEQUENCIALMOVIMENTACAOCONTABANCARIA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigochequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerochequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorchequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaochequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.bomparachequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigobancochequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.agenciachequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.digitoagenciachequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.contachequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.digitocontachequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuschequerecebido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ')';

			sql_replica = 'DELETE FROM CHEQUERECEBIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigochequerecebido), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigochequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROCHEQUERECEBIDO = ' || coalesce(quote_literal(old.numerochequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'VALORCHEQUERECEBIDO = ' || coalesce(quote_literal(old.valorchequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.dataemissaochequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'BOMPARACHEQUERECEBIDO = ' || coalesce(quote_literal(old.bomparachequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOBANCOCHEQUERECEBIDO = ' || coalesce(quote_literal(old.codigobancochequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(old.codigoempresaemitente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(old.codigolojaemitente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigopessoaemitente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null') || ', ';
			campos_old  = campos_old || 'AGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(old.agenciachequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'DIGITOAGENCIACHEQUERECEBIDO = ' || coalesce(quote_literal(old.digitoagenciachequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'CONTACHEQUERECEBIDO = ' || coalesce(quote_literal(old.contachequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'DIGITOCONTACHEQUERECEBIDO = ' || coalesce(quote_literal(old.digitocontachequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'STATUSCHEQUERECEBIDO = ' || coalesce(quote_literal(old.statuschequerecebido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigochequerecebido), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'chequerecebido', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('chequerecebido', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('chequerecebido', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_cidade()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_cidade() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CIDADE (CODIGOCIDADE, NOMECIDADE, CODIGOIBGECIDADE, CODIGOESTADO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomecidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoibgecidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoestado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CIDADE WHERE CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null') || ', ';
			campos_new   = campos_new || 'NOMECIDADE = ' || coalesce(quote_literal(new.nomecidade), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOIBGECIDADE = ' || coalesce(quote_literal(new.codigoibgecidade), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocidade), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CIDADE SET ';
			sql_rolback = 'UPDATE CIDADE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocidade &lt;&gt; old.codigocidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
				sql_rolback = sql_rolback || ' CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');
				campos_new  = campos_new  || ' CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
				campos_old  = campos_old  || ' CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');
				first = false;
			end if;

			if (new.nomecidade &lt;&gt; old.nomecidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMECIDADE = ' || coalesce(quote_literal(new.nomecidade), 'null');
				sql_rolback = sql_rolback || ' NOMECIDADE = ' || coalesce(quote_literal(old.nomecidade), 'null');
				campos_new  = campos_new  || ' NOMECIDADE = ' || coalesce(quote_literal(new.nomecidade), 'null');
				campos_old  = campos_old  || ' NOMECIDADE = ' || coalesce(quote_literal(old.nomecidade), 'null');
				first = false;
			end if;

			if (new.codigoibgecidade &lt;&gt; old.codigoibgecidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOIBGECIDADE = ' || coalesce(quote_literal(new.codigoibgecidade), 'null');
				sql_rolback = sql_rolback || ' CODIGOIBGECIDADE = ' || coalesce(quote_literal(old.codigoibgecidade), 'null');
				campos_new  = campos_new  || ' CODIGOIBGECIDADE = ' || coalesce(quote_literal(new.codigoibgecidade), 'null');
				campos_old  = campos_old  || ' CODIGOIBGECIDADE = ' || coalesce(quote_literal(old.codigoibgecidade), 'null');
				first = false;
			end if;

			if (new.codigoestado &lt;&gt; old.codigoestado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');
				sql_rolback = sql_rolback || ' CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null');
				campos_new  = campos_new  || ' CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');
				campos_old  = campos_old  || ' CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');

			sql_chave = coalesce(quote_literal(new.codigocidade), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CIDADE (CODIGOCIDADE, NOMECIDADE, CODIGOIBGECIDADE, CODIGOESTADO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomecidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoibgecidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoestado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CIDADE WHERE CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null') || ', ';
			campos_old  = campos_old || 'NOMECIDADE = ' || coalesce(quote_literal(old.nomecidade), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOIBGECIDADE = ' || coalesce(quote_literal(old.codigoibgecidade), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocidade), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'cidade', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cidade', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('cidade', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_comissaovenda()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_comissaovenda() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO COMISSAOVENDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMETAVENDA, CODIGOITEMMETAVENDA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, VALORCOMISSAOVENDA, VALORATINGIDOMETAVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigometavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorcomissaovenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoratingidometavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM COMISSAOVENDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ' AND CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ' AND CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			campos_new   = campos_new || 'VALORCOMISSAOVENDA = ' || coalesce(quote_literal(new.valorcomissaovenda), 'null') || ', ';
			campos_new   = campos_new || 'VALORATINGIDOMETAVENDA = ' || coalesce(quote_literal(new.valoratingidometavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigometavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresavendedor), 'null')  || ', ' || coalesce(quote_literal(new.codigolojavendedor), 'null')  || ', ' || coalesce(quote_literal(new.codigovendedor), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE COMISSAOVENDA SET ';
			sql_rolback = 'UPDATE COMISSAOVENDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigometavenda &lt;&gt; old.codigometavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');
				campos_new  = campos_new  || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
				campos_old  = campos_old  || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');
				first = false;
			end if;

			if (new.codigoitemmetavenda &lt;&gt; old.codigoitemmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null');
				campos_new  = campos_new  || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');
				campos_old  = campos_old  || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedor &lt;&gt; old.codigoempresavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				first = false;
			end if;

			if (new.codigolojavendedor &lt;&gt; old.codigolojavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				first = false;
			end if;

			if (new.codigovendedor &lt;&gt; old.codigovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				first = false;
			end if;

			if (new.valorcomissaovenda &lt;&gt; old.valorcomissaovenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCOMISSAOVENDA = ' || coalesce(quote_literal(new.valorcomissaovenda), 'null');
				sql_rolback = sql_rolback || ' VALORCOMISSAOVENDA = ' || coalesce(quote_literal(old.valorcomissaovenda), 'null');
				campos_new  = campos_new  || ' VALORCOMISSAOVENDA = ' || coalesce(quote_literal(new.valorcomissaovenda), 'null');
				campos_old  = campos_old  || ' VALORCOMISSAOVENDA = ' || coalesce(quote_literal(old.valorcomissaovenda), 'null');
				first = false;
			end if;

			if (new.valoratingidometavenda &lt;&gt; old.valoratingidometavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORATINGIDOMETAVENDA = ' || coalesce(quote_literal(new.valoratingidometavenda), 'null');
				sql_rolback = sql_rolback || ' VALORATINGIDOMETAVENDA = ' || coalesce(quote_literal(old.valoratingidometavenda), 'null');
				campos_new  = campos_new  || ' VALORATINGIDOMETAVENDA = ' || coalesce(quote_literal(new.valoratingidometavenda), 'null');
				campos_old  = campos_old  || ' VALORATINGIDOMETAVENDA = ' || coalesce(quote_literal(old.valoratingidometavenda), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ' AND CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ' AND CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ' AND CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ' AND CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigometavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresavendedor), 'null')  || ', ' || coalesce(quote_literal(new.codigolojavendedor), 'null')  || ', ' || coalesce(quote_literal(new.codigovendedor), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO COMISSAOVENDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMETAVENDA, CODIGOITEMMETAVENDA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, VALORCOMISSAOVENDA, VALORATINGIDOMETAVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigometavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorcomissaovenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoratingidometavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM COMISSAOVENDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null') || ' AND CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ' AND CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			campos_old  = campos_old || 'VALORCOMISSAOVENDA = ' || coalesce(quote_literal(old.valorcomissaovenda), 'null') || ', ';
			campos_old  = campos_old || 'VALORATINGIDOMETAVENDA = ' || coalesce(quote_literal(old.valoratingidometavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigometavenda), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresavendedor), 'null')  || ', ' || coalesce(quote_literal(old.codigolojavendedor), 'null')  || ', ' || coalesce(quote_literal(old.codigovendedor), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'comissaovenda', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('comissaovenda', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('comissaovenda', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contabancaria()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contabancaria() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTABANCARIA (CODIGOCONTABANCARIA, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOCONTABANCARIA, CODIGOBANCOCONTABANCARIA, NUMEROCONTABANCARIA, DIGITOAGENCIACONTABANCARIA, NUMEROAGENCIACONTABANCARIA, DIGITOCONTABANCARIA, FLAGCONTACORRENTECONTABANCARIA, FLAGCONTAPOUPANCACONTABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigobancocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.digitoagenciacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroagenciacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.digitocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagcontacorrentecontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagcontapoupancacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTABANCARIA WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCONTABANCARIA = ' || coalesce(quote_literal(new.descricaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOBANCOCONTABANCARIA = ' || coalesce(quote_literal(new.codigobancocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROCONTABANCARIA = ' || coalesce(quote_literal(new.numerocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'DIGITOAGENCIACONTABANCARIA = ' || coalesce(quote_literal(new.digitoagenciacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROAGENCIACONTABANCARIA = ' || coalesce(quote_literal(new.numeroagenciacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'DIGITOCONTABANCARIA = ' || coalesce(quote_literal(new.digitocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'FLAGCONTACORRENTECONTABANCARIA = ' || coalesce(quote_literal(new.flagcontacorrentecontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'FLAGCONTAPOUPANCACONTABANCARIA = ' || coalesce(quote_literal(new.flagcontapoupancacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocontabancaria), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTABANCARIA SET ';
			sql_rolback = 'UPDATE CONTABANCARIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocontabancaria &lt;&gt; old.codigocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.descricaocontabancaria &lt;&gt; old.descricaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCONTABANCARIA = ' || coalesce(quote_literal(new.descricaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCONTABANCARIA = ' || coalesce(quote_literal(old.descricaocontabancaria), 'null');
				campos_new  = campos_new  || ' DESCRICAOCONTABANCARIA = ' || coalesce(quote_literal(new.descricaocontabancaria), 'null');
				campos_old  = campos_old  || ' DESCRICAOCONTABANCARIA = ' || coalesce(quote_literal(old.descricaocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigobancocontabancaria &lt;&gt; old.codigobancocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOBANCOCONTABANCARIA = ' || coalesce(quote_literal(new.codigobancocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOBANCOCONTABANCARIA = ' || coalesce(quote_literal(old.codigobancocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOBANCOCONTABANCARIA = ' || coalesce(quote_literal(new.codigobancocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOBANCOCONTABANCARIA = ' || coalesce(quote_literal(old.codigobancocontabancaria), 'null');
				first = false;
			end if;

			if (new.numerocontabancaria &lt;&gt; old.numerocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROCONTABANCARIA = ' || coalesce(quote_literal(new.numerocontabancaria), 'null');
				sql_rolback = sql_rolback || ' NUMEROCONTABANCARIA = ' || coalesce(quote_literal(old.numerocontabancaria), 'null');
				campos_new  = campos_new  || ' NUMEROCONTABANCARIA = ' || coalesce(quote_literal(new.numerocontabancaria), 'null');
				campos_old  = campos_old  || ' NUMEROCONTABANCARIA = ' || coalesce(quote_literal(old.numerocontabancaria), 'null');
				first = false;
			end if;

			if (new.digitoagenciacontabancaria &lt;&gt; old.digitoagenciacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIGITOAGENCIACONTABANCARIA = ' || coalesce(quote_literal(new.digitoagenciacontabancaria), 'null');
				sql_rolback = sql_rolback || ' DIGITOAGENCIACONTABANCARIA = ' || coalesce(quote_literal(old.digitoagenciacontabancaria), 'null');
				campos_new  = campos_new  || ' DIGITOAGENCIACONTABANCARIA = ' || coalesce(quote_literal(new.digitoagenciacontabancaria), 'null');
				campos_old  = campos_old  || ' DIGITOAGENCIACONTABANCARIA = ' || coalesce(quote_literal(old.digitoagenciacontabancaria), 'null');
				first = false;
			end if;

			if (new.numeroagenciacontabancaria &lt;&gt; old.numeroagenciacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROAGENCIACONTABANCARIA = ' || coalesce(quote_literal(new.numeroagenciacontabancaria), 'null');
				sql_rolback = sql_rolback || ' NUMEROAGENCIACONTABANCARIA = ' || coalesce(quote_literal(old.numeroagenciacontabancaria), 'null');
				campos_new  = campos_new  || ' NUMEROAGENCIACONTABANCARIA = ' || coalesce(quote_literal(new.numeroagenciacontabancaria), 'null');
				campos_old  = campos_old  || ' NUMEROAGENCIACONTABANCARIA = ' || coalesce(quote_literal(old.numeroagenciacontabancaria), 'null');
				first = false;
			end if;

			if (new.digitocontabancaria &lt;&gt; old.digitocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIGITOCONTABANCARIA = ' || coalesce(quote_literal(new.digitocontabancaria), 'null');
				sql_rolback = sql_rolback || ' DIGITOCONTABANCARIA = ' || coalesce(quote_literal(old.digitocontabancaria), 'null');
				campos_new  = campos_new  || ' DIGITOCONTABANCARIA = ' || coalesce(quote_literal(new.digitocontabancaria), 'null');
				campos_old  = campos_old  || ' DIGITOCONTABANCARIA = ' || coalesce(quote_literal(old.digitocontabancaria), 'null');
				first = false;
			end if;

			if (new.flagcontacorrentecontabancaria &lt;&gt; old.flagcontacorrentecontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGCONTACORRENTECONTABANCARIA = ' || coalesce(quote_literal(new.flagcontacorrentecontabancaria), 'null');
				sql_rolback = sql_rolback || ' FLAGCONTACORRENTECONTABANCARIA = ' || coalesce(quote_literal(old.flagcontacorrentecontabancaria), 'null');
				campos_new  = campos_new  || ' FLAGCONTACORRENTECONTABANCARIA = ' || coalesce(quote_literal(new.flagcontacorrentecontabancaria), 'null');
				campos_old  = campos_old  || ' FLAGCONTACORRENTECONTABANCARIA = ' || coalesce(quote_literal(old.flagcontacorrentecontabancaria), 'null');
				first = false;
			end if;

			if (new.flagcontapoupancacontabancaria &lt;&gt; old.flagcontapoupancacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGCONTAPOUPANCACONTABANCARIA = ' || coalesce(quote_literal(new.flagcontapoupancacontabancaria), 'null');
				sql_rolback = sql_rolback || ' FLAGCONTAPOUPANCACONTABANCARIA = ' || coalesce(quote_literal(old.flagcontapoupancacontabancaria), 'null');
				campos_new  = campos_new  || ' FLAGCONTAPOUPANCACONTABANCARIA = ' || coalesce(quote_literal(new.flagcontapoupancacontabancaria), 'null');
				campos_old  = campos_old  || ' FLAGCONTAPOUPANCACONTABANCARIA = ' || coalesce(quote_literal(old.flagcontapoupancacontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigocontabancaria), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTABANCARIA (CODIGOCONTABANCARIA, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOCONTABANCARIA, CODIGOBANCOCONTABANCARIA, NUMEROCONTABANCARIA, DIGITOAGENCIACONTABANCARIA, NUMEROAGENCIACONTABANCARIA, DIGITOCONTABANCARIA, FLAGCONTACORRENTECONTABANCARIA, FLAGCONTAPOUPANCACONTABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigobancocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.digitoagenciacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroagenciacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.digitocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagcontacorrentecontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagcontapoupancacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CONTABANCARIA WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCONTABANCARIA = ' || coalesce(quote_literal(old.descricaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOBANCOCONTABANCARIA = ' || coalesce(quote_literal(old.codigobancocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROCONTABANCARIA = ' || coalesce(quote_literal(old.numerocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'DIGITOAGENCIACONTABANCARIA = ' || coalesce(quote_literal(old.digitoagenciacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROAGENCIACONTABANCARIA = ' || coalesce(quote_literal(old.numeroagenciacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'DIGITOCONTABANCARIA = ' || coalesce(quote_literal(old.digitocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'FLAGCONTACORRENTECONTABANCARIA = ' || coalesce(quote_literal(old.flagcontacorrentecontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'FLAGCONTAPOUPANCACONTABANCARIA = ' || coalesce(quote_literal(old.flagcontapoupancacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocontabancaria), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contabancaria', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contabancaria', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contabancaria', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contapagar()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contapagar() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTAPAGAR (CODIGOCONTAPAGAR, CODIGOEMPRESA, CODIGOLOJA, DATALANCAMENTOCONTAPAGAR, DESCRICAOCONTAPAGAR, CODIGOPLANOCONTA, CODIGOCENTROCUSTO, CODIGOPESSOACONTAPAGAR, CODIGOEMPRESAPESSOACONTAPAGAR, CODIGOLOJAPESSOACONTAPAGAR, NUMEROTITULOCONTAPAGAR, CODIGOTIPODOCUMENTO, SITUACAOCONTAPAGAR, DATAVENCIMENTOCONTAPAGAR, VALORMULTACONTAPAGAR, PERCENTUALMULTACONTAPAGAR, VALORJUROSDIARIOCONTAPAGAR, PERCENTUALJUROSDIARIOCONTAPAGAR, VALORCONTAPAGAR, DESCONTOCONTAPAGAR, DESCONTOATECONTAPAGAR, CODIGOPORTADOR, OBSERVACAOCONTAPAGAR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, PARCELACONTAPAGAR, OBSERVACAOCANCELAMENTOCONTAPAGAR, NUMEROPARCELASCONTAPAGAR, DATAEMISSAOCONTAPAGAR, FLAGDRECONTAPAGAR, FLAGRESUMOCONTAPAGAR) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datalancamentocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocentrocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapessoacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapessoacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerotitulocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipodocumento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.situacaocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datavencimentocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valormultacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualmultacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorjurosdiariocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualjurosdiariocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorcontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descontocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descontoatecontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoportador), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.parcelacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaocancelamentocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroparcelascontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagdrecontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagresumocontapagar), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTAPAGAR WHERE CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATALANCAMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.datalancamentocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCONTAPAGAR = ' || coalesce(quote_literal(new.descricaocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigopessoacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresapessoacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojapessoacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROTITULOCONTAPAGAR = ' || coalesce(quote_literal(new.numerotitulocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null') || ', ';
			campos_new   = campos_new || 'SITUACAOCONTAPAGAR = ' || coalesce(quote_literal(new.situacaocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'DATAVENCIMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.datavencimentocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'VALORMULTACONTAPAGAR = ' || coalesce(quote_literal(new.valormultacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALMULTACONTAPAGAR = ' || coalesce(quote_literal(new.percentualmultacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'VALORJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(new.valorjurosdiariocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(new.percentualjurosdiariocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'VALORCONTAPAGAR = ' || coalesce(quote_literal(new.valorcontapagar), 'null') || ', ';
			campos_new   = campos_new || 'DESCONTOCONTAPAGAR = ' || coalesce(quote_literal(new.descontocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'DESCONTOATECONTAPAGAR = ' || coalesce(quote_literal(new.descontoatecontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOCONTAPAGAR = ' || coalesce(quote_literal(new.observacaocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'PARCELACONTAPAGAR = ' || coalesce(quote_literal(new.parcelacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOCANCELAMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.observacaocancelamentocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROPARCELASCONTAPAGAR = ' || coalesce(quote_literal(new.numeroparcelascontapagar), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAOCONTAPAGAR = ' || coalesce(quote_literal(new.dataemissaocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'FLAGDRECONTAPAGAR = ' || coalesce(quote_literal(new.flagdrecontapagar), 'null') || ', ';
			campos_new   = campos_new || 'FLAGRESUMOCONTAPAGAR = ' || coalesce(quote_literal(new.flagresumocontapagar), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTAPAGAR SET ';
			sql_rolback = 'UPDATE CONTAPAGAR SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocontapagar &lt;&gt; old.codigocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datalancamentocontapagar &lt;&gt; old.datalancamentocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATALANCAMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.datalancamentocontapagar), 'null');
				sql_rolback = sql_rolback || ' DATALANCAMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.datalancamentocontapagar), 'null');
				campos_new  = campos_new  || ' DATALANCAMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.datalancamentocontapagar), 'null');
				campos_old  = campos_old  || ' DATALANCAMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.datalancamentocontapagar), 'null');
				first = false;
			end if;

			if (new.descricaocontapagar &lt;&gt; old.descricaocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCONTAPAGAR = ' || coalesce(quote_literal(new.descricaocontapagar), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCONTAPAGAR = ' || coalesce(quote_literal(old.descricaocontapagar), 'null');
				campos_new  = campos_new  || ' DESCRICAOCONTAPAGAR = ' || coalesce(quote_literal(new.descricaocontapagar), 'null');
				campos_old  = campos_old  || ' DESCRICAOCONTAPAGAR = ' || coalesce(quote_literal(old.descricaocontapagar), 'null');
				first = false;
			end if;

			if (new.codigoplanoconta &lt;&gt; old.codigoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				first = false;
			end if;

			if (new.codigocentrocusto &lt;&gt; old.codigocentrocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
				sql_rolback = sql_rolback || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');
				campos_new  = campos_new  || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
				campos_old  = campos_old  || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');
				first = false;
			end if;

			if (new.codigopessoacontapagar &lt;&gt; old.codigopessoacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigopessoacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigopessoacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigopessoacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigopessoacontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresapessoacontapagar &lt;&gt; old.codigoempresapessoacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresapessoacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresapessoacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresapessoacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresapessoacontapagar), 'null');
				first = false;
			end if;

			if (new.codigolojapessoacontapagar &lt;&gt; old.codigolojapessoacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojapessoacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojapessoacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPESSOACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojapessoacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojapessoacontapagar), 'null');
				first = false;
			end if;

			if (new.numerotitulocontapagar &lt;&gt; old.numerotitulocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROTITULOCONTAPAGAR = ' || coalesce(quote_literal(new.numerotitulocontapagar), 'null');
				sql_rolback = sql_rolback || ' NUMEROTITULOCONTAPAGAR = ' || coalesce(quote_literal(old.numerotitulocontapagar), 'null');
				campos_new  = campos_new  || ' NUMEROTITULOCONTAPAGAR = ' || coalesce(quote_literal(new.numerotitulocontapagar), 'null');
				campos_old  = campos_old  || ' NUMEROTITULOCONTAPAGAR = ' || coalesce(quote_literal(old.numerotitulocontapagar), 'null');
				first = false;
			end if;

			if (new.codigotipodocumento &lt;&gt; old.codigotipodocumento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');
				campos_new  = campos_new  || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
				campos_old  = campos_old  || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');
				first = false;
			end if;

			if (new.situacaocontapagar &lt;&gt; old.situacaocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SITUACAOCONTAPAGAR = ' || coalesce(quote_literal(new.situacaocontapagar), 'null');
				sql_rolback = sql_rolback || ' SITUACAOCONTAPAGAR = ' || coalesce(quote_literal(old.situacaocontapagar), 'null');
				campos_new  = campos_new  || ' SITUACAOCONTAPAGAR = ' || coalesce(quote_literal(new.situacaocontapagar), 'null');
				campos_old  = campos_old  || ' SITUACAOCONTAPAGAR = ' || coalesce(quote_literal(old.situacaocontapagar), 'null');
				first = false;
			end if;

			if (new.datavencimentocontapagar &lt;&gt; old.datavencimentocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAVENCIMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.datavencimentocontapagar), 'null');
				sql_rolback = sql_rolback || ' DATAVENCIMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.datavencimentocontapagar), 'null');
				campos_new  = campos_new  || ' DATAVENCIMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.datavencimentocontapagar), 'null');
				campos_old  = campos_old  || ' DATAVENCIMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.datavencimentocontapagar), 'null');
				first = false;
			end if;

			if (new.valormultacontapagar &lt;&gt; old.valormultacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORMULTACONTAPAGAR = ' || coalesce(quote_literal(new.valormultacontapagar), 'null');
				sql_rolback = sql_rolback || ' VALORMULTACONTAPAGAR = ' || coalesce(quote_literal(old.valormultacontapagar), 'null');
				campos_new  = campos_new  || ' VALORMULTACONTAPAGAR = ' || coalesce(quote_literal(new.valormultacontapagar), 'null');
				campos_old  = campos_old  || ' VALORMULTACONTAPAGAR = ' || coalesce(quote_literal(old.valormultacontapagar), 'null');
				first = false;
			end if;

			if (new.percentualmultacontapagar &lt;&gt; old.percentualmultacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALMULTACONTAPAGAR = ' || coalesce(quote_literal(new.percentualmultacontapagar), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALMULTACONTAPAGAR = ' || coalesce(quote_literal(old.percentualmultacontapagar), 'null');
				campos_new  = campos_new  || ' PERCENTUALMULTACONTAPAGAR = ' || coalesce(quote_literal(new.percentualmultacontapagar), 'null');
				campos_old  = campos_old  || ' PERCENTUALMULTACONTAPAGAR = ' || coalesce(quote_literal(old.percentualmultacontapagar), 'null');
				first = false;
			end if;

			if (new.valorjurosdiariocontapagar &lt;&gt; old.valorjurosdiariocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(new.valorjurosdiariocontapagar), 'null');
				sql_rolback = sql_rolback || ' VALORJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(old.valorjurosdiariocontapagar), 'null');
				campos_new  = campos_new  || ' VALORJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(new.valorjurosdiariocontapagar), 'null');
				campos_old  = campos_old  || ' VALORJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(old.valorjurosdiariocontapagar), 'null');
				first = false;
			end if;

			if (new.percentualjurosdiariocontapagar &lt;&gt; old.percentualjurosdiariocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(new.percentualjurosdiariocontapagar), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(old.percentualjurosdiariocontapagar), 'null');
				campos_new  = campos_new  || ' PERCENTUALJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(new.percentualjurosdiariocontapagar), 'null');
				campos_old  = campos_old  || ' PERCENTUALJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(old.percentualjurosdiariocontapagar), 'null');
				first = false;
			end if;

			if (new.valorcontapagar &lt;&gt; old.valorcontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCONTAPAGAR = ' || coalesce(quote_literal(new.valorcontapagar), 'null');
				sql_rolback = sql_rolback || ' VALORCONTAPAGAR = ' || coalesce(quote_literal(old.valorcontapagar), 'null');
				campos_new  = campos_new  || ' VALORCONTAPAGAR = ' || coalesce(quote_literal(new.valorcontapagar), 'null');
				campos_old  = campos_old  || ' VALORCONTAPAGAR = ' || coalesce(quote_literal(old.valorcontapagar), 'null');
				first = false;
			end if;

			if (new.descontocontapagar &lt;&gt; old.descontocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCONTOCONTAPAGAR = ' || coalesce(quote_literal(new.descontocontapagar), 'null');
				sql_rolback = sql_rolback || ' DESCONTOCONTAPAGAR = ' || coalesce(quote_literal(old.descontocontapagar), 'null');
				campos_new  = campos_new  || ' DESCONTOCONTAPAGAR = ' || coalesce(quote_literal(new.descontocontapagar), 'null');
				campos_old  = campos_old  || ' DESCONTOCONTAPAGAR = ' || coalesce(quote_literal(old.descontocontapagar), 'null');
				first = false;
			end if;

			if (new.descontoatecontapagar &lt;&gt; old.descontoatecontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCONTOATECONTAPAGAR = ' || coalesce(quote_literal(new.descontoatecontapagar), 'null');
				sql_rolback = sql_rolback || ' DESCONTOATECONTAPAGAR = ' || coalesce(quote_literal(old.descontoatecontapagar), 'null');
				campos_new  = campos_new  || ' DESCONTOATECONTAPAGAR = ' || coalesce(quote_literal(new.descontoatecontapagar), 'null');
				campos_old  = campos_old  || ' DESCONTOATECONTAPAGAR = ' || coalesce(quote_literal(old.descontoatecontapagar), 'null');
				first = false;
			end if;

			if (new.codigoportador &lt;&gt; old.codigoportador) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
				sql_rolback = sql_rolback || ' CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');
				campos_new  = campos_new  || ' CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
				campos_old  = campos_old  || ' CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');
				first = false;
			end if;

			if (new.observacaocontapagar &lt;&gt; old.observacaocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOCONTAPAGAR = ' || coalesce(quote_literal(new.observacaocontapagar), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOCONTAPAGAR = ' || coalesce(quote_literal(old.observacaocontapagar), 'null');
				campos_new  = campos_new  || ' OBSERVACAOCONTAPAGAR = ' || coalesce(quote_literal(new.observacaocontapagar), 'null');
				campos_old  = campos_old  || ' OBSERVACAOCONTAPAGAR = ' || coalesce(quote_literal(old.observacaocontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.parcelacontapagar &lt;&gt; old.parcelacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PARCELACONTAPAGAR = ' || coalesce(quote_literal(new.parcelacontapagar), 'null');
				sql_rolback = sql_rolback || ' PARCELACONTAPAGAR = ' || coalesce(quote_literal(old.parcelacontapagar), 'null');
				campos_new  = campos_new  || ' PARCELACONTAPAGAR = ' || coalesce(quote_literal(new.parcelacontapagar), 'null');
				campos_old  = campos_old  || ' PARCELACONTAPAGAR = ' || coalesce(quote_literal(old.parcelacontapagar), 'null');
				first = false;
			end if;

			if (new.observacaocancelamentocontapagar &lt;&gt; old.observacaocancelamentocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOCANCELAMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.observacaocancelamentocontapagar), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOCANCELAMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.observacaocancelamentocontapagar), 'null');
				campos_new  = campos_new  || ' OBSERVACAOCANCELAMENTOCONTAPAGAR = ' || coalesce(quote_literal(new.observacaocancelamentocontapagar), 'null');
				campos_old  = campos_old  || ' OBSERVACAOCANCELAMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.observacaocancelamentocontapagar), 'null');
				first = false;
			end if;

			if (new.numeroparcelascontapagar &lt;&gt; old.numeroparcelascontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROPARCELASCONTAPAGAR = ' || coalesce(quote_literal(new.numeroparcelascontapagar), 'null');
				sql_rolback = sql_rolback || ' NUMEROPARCELASCONTAPAGAR = ' || coalesce(quote_literal(old.numeroparcelascontapagar), 'null');
				campos_new  = campos_new  || ' NUMEROPARCELASCONTAPAGAR = ' || coalesce(quote_literal(new.numeroparcelascontapagar), 'null');
				campos_old  = campos_old  || ' NUMEROPARCELASCONTAPAGAR = ' || coalesce(quote_literal(old.numeroparcelascontapagar), 'null');
				first = false;
			end if;

			if (new.dataemissaocontapagar &lt;&gt; old.dataemissaocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAOCONTAPAGAR = ' || coalesce(quote_literal(new.dataemissaocontapagar), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAOCONTAPAGAR = ' || coalesce(quote_literal(old.dataemissaocontapagar), 'null');
				campos_new  = campos_new  || ' DATAEMISSAOCONTAPAGAR = ' || coalesce(quote_literal(new.dataemissaocontapagar), 'null');
				campos_old  = campos_old  || ' DATAEMISSAOCONTAPAGAR = ' || coalesce(quote_literal(old.dataemissaocontapagar), 'null');
				first = false;
			end if;

			if (new.flagdrecontapagar &lt;&gt; old.flagdrecontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGDRECONTAPAGAR = ' || coalesce(quote_literal(new.flagdrecontapagar), 'null');
				sql_rolback = sql_rolback || ' FLAGDRECONTAPAGAR = ' || coalesce(quote_literal(old.flagdrecontapagar), 'null');
				campos_new  = campos_new  || ' FLAGDRECONTAPAGAR = ' || coalesce(quote_literal(new.flagdrecontapagar), 'null');
				campos_old  = campos_old  || ' FLAGDRECONTAPAGAR = ' || coalesce(quote_literal(old.flagdrecontapagar), 'null');
				first = false;
			end if;

			if (new.flagresumocontapagar &lt;&gt; old.flagresumocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGRESUMOCONTAPAGAR = ' || coalesce(quote_literal(new.flagresumocontapagar), 'null');
				sql_rolback = sql_rolback || ' FLAGRESUMOCONTAPAGAR = ' || coalesce(quote_literal(old.flagresumocontapagar), 'null');
				campos_new  = campos_new  || ' FLAGRESUMOCONTAPAGAR = ' || coalesce(quote_literal(new.flagresumocontapagar), 'null');
				campos_old  = campos_old  || ' FLAGRESUMOCONTAPAGAR = ' || coalesce(quote_literal(old.flagresumocontapagar), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTAPAGAR (CODIGOCONTAPAGAR, CODIGOEMPRESA, CODIGOLOJA, DATALANCAMENTOCONTAPAGAR, DESCRICAOCONTAPAGAR, CODIGOPLANOCONTA, CODIGOCENTROCUSTO, CODIGOPESSOACONTAPAGAR, CODIGOEMPRESAPESSOACONTAPAGAR, CODIGOLOJAPESSOACONTAPAGAR, NUMEROTITULOCONTAPAGAR, CODIGOTIPODOCUMENTO, SITUACAOCONTAPAGAR, DATAVENCIMENTOCONTAPAGAR, VALORMULTACONTAPAGAR, PERCENTUALMULTACONTAPAGAR, VALORJUROSDIARIOCONTAPAGAR, PERCENTUALJUROSDIARIOCONTAPAGAR, VALORCONTAPAGAR, DESCONTOCONTAPAGAR, DESCONTOATECONTAPAGAR, CODIGOPORTADOR, OBSERVACAOCONTAPAGAR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, PARCELACONTAPAGAR, OBSERVACAOCANCELAMENTOCONTAPAGAR, NUMEROPARCELASCONTAPAGAR, DATAEMISSAOCONTAPAGAR, FLAGDRECONTAPAGAR, FLAGRESUMOCONTAPAGAR) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datalancamentocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocentrocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapessoacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapessoacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerotitulocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipodocumento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.situacaocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datavencimentocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valormultacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualmultacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorjurosdiariocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualjurosdiariocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorcontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descontocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descontoatecontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoportador), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.parcelacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaocancelamentocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroparcelascontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagdrecontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagresumocontapagar), 'null') || ')';

			sql_replica = 'DELETE FROM CONTAPAGAR WHERE CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATALANCAMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.datalancamentocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCONTAPAGAR = ' || coalesce(quote_literal(old.descricaocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigopessoacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresapessoacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPESSOACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojapessoacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROTITULOCONTAPAGAR = ' || coalesce(quote_literal(old.numerotitulocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null') || ', ';
			campos_old  = campos_old || 'SITUACAOCONTAPAGAR = ' || coalesce(quote_literal(old.situacaocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'DATAVENCIMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.datavencimentocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'VALORMULTACONTAPAGAR = ' || coalesce(quote_literal(old.valormultacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALMULTACONTAPAGAR = ' || coalesce(quote_literal(old.percentualmultacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'VALORJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(old.valorjurosdiariocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALJUROSDIARIOCONTAPAGAR = ' || coalesce(quote_literal(old.percentualjurosdiariocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'VALORCONTAPAGAR = ' || coalesce(quote_literal(old.valorcontapagar), 'null') || ', ';
			campos_old  = campos_old || 'DESCONTOCONTAPAGAR = ' || coalesce(quote_literal(old.descontocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'DESCONTOATECONTAPAGAR = ' || coalesce(quote_literal(old.descontoatecontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOCONTAPAGAR = ' || coalesce(quote_literal(old.observacaocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'PARCELACONTAPAGAR = ' || coalesce(quote_literal(old.parcelacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOCANCELAMENTOCONTAPAGAR = ' || coalesce(quote_literal(old.observacaocancelamentocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROPARCELASCONTAPAGAR = ' || coalesce(quote_literal(old.numeroparcelascontapagar), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAOCONTAPAGAR = ' || coalesce(quote_literal(old.dataemissaocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'FLAGDRECONTAPAGAR = ' || coalesce(quote_literal(old.flagdrecontapagar), 'null') || ', ';
			campos_old  = campos_old || 'FLAGRESUMOCONTAPAGAR = ' || coalesce(quote_literal(old.flagresumocontapagar), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contapagar', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contapagar', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contapagar', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contareceber()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contareceber() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTARECEBER (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTARECEBER, PARCELACONTARECEBER, DATALANCAMENTOCONTARECEBER, NUMEROPARCELASCONTARECEBER, DATAEMISSAOCONTARECEBER, NUMEROTITULOCONTARECEBER, SITUACAOCONTARECEBER, DATAVENCIMENTOCONTARECEBER, VALORMULTACONTARECEBER, PERCENTUALMULTACONTARECEBER, VALORJUROSDIARIOCONTARECEBER, PERCENTUALJUROSDIARIOCONTARECEBER, VALORCONTARECEBER, DESCONTOCONTARECEBER, DESCONTOATECONTARECEBER, OBSERVACAOCONTARECEBER, OBSERVACAOCANCELAMENTOCONTARECEBER, CODIGOPLANOCONTA, CODIGOCENTROCUSTO, CODIGOTIPODOCUMENTO, CODIGOPORTADOR, CODIGOEMPRESACLIENTE, CODIGOLOJACLIENTE, CODIGOPESSOACLIENTE, CODIGOENDERECOPESSOACLIENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, DESCRICAOCONTARECEBER, FLAGDRECONTARECEBER) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.parcelacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datalancamentocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroparcelascontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerotitulocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.situacaocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datavencimentocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valormultacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualmultacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorjurosdiariocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualjurosdiariocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorcontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descontocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descontoatecontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaocancelamentocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocentrocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipodocumento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoportador), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagdrecontareceber), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTARECEBER WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'PARCELACONTARECEBER = ' || coalesce(quote_literal(new.parcelacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'DATALANCAMENTOCONTARECEBER = ' || coalesce(quote_literal(new.datalancamentocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROPARCELASCONTARECEBER = ' || coalesce(quote_literal(new.numeroparcelascontareceber), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAOCONTARECEBER = ' || coalesce(quote_literal(new.dataemissaocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROTITULOCONTARECEBER = ' || coalesce(quote_literal(new.numerotitulocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'SITUACAOCONTARECEBER = ' || coalesce(quote_literal(new.situacaocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'DATAVENCIMENTOCONTARECEBER = ' || coalesce(quote_literal(new.datavencimentocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'VALORMULTACONTARECEBER = ' || coalesce(quote_literal(new.valormultacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALMULTACONTARECEBER = ' || coalesce(quote_literal(new.percentualmultacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'VALORJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(new.valorjurosdiariocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(new.percentualjurosdiariocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'VALORCONTARECEBER = ' || coalesce(quote_literal(new.valorcontareceber), 'null') || ', ';
			campos_new   = campos_new || 'DESCONTOCONTARECEBER = ' || coalesce(quote_literal(new.descontocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'DESCONTOATECONTARECEBER = ' || coalesce(quote_literal(new.descontoatecontareceber), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOCONTARECEBER = ' || coalesce(quote_literal(new.observacaocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOCANCELAMENTOCONTARECEBER = ' || coalesce(quote_literal(new.observacaocancelamentocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(new.codigoempresacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACLIENTE = ' || coalesce(quote_literal(new.codigolojacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCONTARECEBER = ' || coalesce(quote_literal(new.descricaocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'FLAGDRECONTARECEBER = ' || coalesce(quote_literal(new.flagdrecontareceber), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontareceber), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTARECEBER SET ';
			sql_rolback = 'UPDATE CONTARECEBER SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocontareceber &lt;&gt; old.codigocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');
				first = false;
			end if;

			if (new.parcelacontareceber &lt;&gt; old.parcelacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PARCELACONTARECEBER = ' || coalesce(quote_literal(new.parcelacontareceber), 'null');
				sql_rolback = sql_rolback || ' PARCELACONTARECEBER = ' || coalesce(quote_literal(old.parcelacontareceber), 'null');
				campos_new  = campos_new  || ' PARCELACONTARECEBER = ' || coalesce(quote_literal(new.parcelacontareceber), 'null');
				campos_old  = campos_old  || ' PARCELACONTARECEBER = ' || coalesce(quote_literal(old.parcelacontareceber), 'null');
				first = false;
			end if;

			if (new.datalancamentocontareceber &lt;&gt; old.datalancamentocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATALANCAMENTOCONTARECEBER = ' || coalesce(quote_literal(new.datalancamentocontareceber), 'null');
				sql_rolback = sql_rolback || ' DATALANCAMENTOCONTARECEBER = ' || coalesce(quote_literal(old.datalancamentocontareceber), 'null');
				campos_new  = campos_new  || ' DATALANCAMENTOCONTARECEBER = ' || coalesce(quote_literal(new.datalancamentocontareceber), 'null');
				campos_old  = campos_old  || ' DATALANCAMENTOCONTARECEBER = ' || coalesce(quote_literal(old.datalancamentocontareceber), 'null');
				first = false;
			end if;

			if (new.numeroparcelascontareceber &lt;&gt; old.numeroparcelascontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROPARCELASCONTARECEBER = ' || coalesce(quote_literal(new.numeroparcelascontareceber), 'null');
				sql_rolback = sql_rolback || ' NUMEROPARCELASCONTARECEBER = ' || coalesce(quote_literal(old.numeroparcelascontareceber), 'null');
				campos_new  = campos_new  || ' NUMEROPARCELASCONTARECEBER = ' || coalesce(quote_literal(new.numeroparcelascontareceber), 'null');
				campos_old  = campos_old  || ' NUMEROPARCELASCONTARECEBER = ' || coalesce(quote_literal(old.numeroparcelascontareceber), 'null');
				first = false;
			end if;

			if (new.dataemissaocontareceber &lt;&gt; old.dataemissaocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAOCONTARECEBER = ' || coalesce(quote_literal(new.dataemissaocontareceber), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAOCONTARECEBER = ' || coalesce(quote_literal(old.dataemissaocontareceber), 'null');
				campos_new  = campos_new  || ' DATAEMISSAOCONTARECEBER = ' || coalesce(quote_literal(new.dataemissaocontareceber), 'null');
				campos_old  = campos_old  || ' DATAEMISSAOCONTARECEBER = ' || coalesce(quote_literal(old.dataemissaocontareceber), 'null');
				first = false;
			end if;

			if (new.numerotitulocontareceber &lt;&gt; old.numerotitulocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROTITULOCONTARECEBER = ' || coalesce(quote_literal(new.numerotitulocontareceber), 'null');
				sql_rolback = sql_rolback || ' NUMEROTITULOCONTARECEBER = ' || coalesce(quote_literal(old.numerotitulocontareceber), 'null');
				campos_new  = campos_new  || ' NUMEROTITULOCONTARECEBER = ' || coalesce(quote_literal(new.numerotitulocontareceber), 'null');
				campos_old  = campos_old  || ' NUMEROTITULOCONTARECEBER = ' || coalesce(quote_literal(old.numerotitulocontareceber), 'null');
				first = false;
			end if;

			if (new.situacaocontareceber &lt;&gt; old.situacaocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SITUACAOCONTARECEBER = ' || coalesce(quote_literal(new.situacaocontareceber), 'null');
				sql_rolback = sql_rolback || ' SITUACAOCONTARECEBER = ' || coalesce(quote_literal(old.situacaocontareceber), 'null');
				campos_new  = campos_new  || ' SITUACAOCONTARECEBER = ' || coalesce(quote_literal(new.situacaocontareceber), 'null');
				campos_old  = campos_old  || ' SITUACAOCONTARECEBER = ' || coalesce(quote_literal(old.situacaocontareceber), 'null');
				first = false;
			end if;

			if (new.datavencimentocontareceber &lt;&gt; old.datavencimentocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAVENCIMENTOCONTARECEBER = ' || coalesce(quote_literal(new.datavencimentocontareceber), 'null');
				sql_rolback = sql_rolback || ' DATAVENCIMENTOCONTARECEBER = ' || coalesce(quote_literal(old.datavencimentocontareceber), 'null');
				campos_new  = campos_new  || ' DATAVENCIMENTOCONTARECEBER = ' || coalesce(quote_literal(new.datavencimentocontareceber), 'null');
				campos_old  = campos_old  || ' DATAVENCIMENTOCONTARECEBER = ' || coalesce(quote_literal(old.datavencimentocontareceber), 'null');
				first = false;
			end if;

			if (new.valormultacontareceber &lt;&gt; old.valormultacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORMULTACONTARECEBER = ' || coalesce(quote_literal(new.valormultacontareceber), 'null');
				sql_rolback = sql_rolback || ' VALORMULTACONTARECEBER = ' || coalesce(quote_literal(old.valormultacontareceber), 'null');
				campos_new  = campos_new  || ' VALORMULTACONTARECEBER = ' || coalesce(quote_literal(new.valormultacontareceber), 'null');
				campos_old  = campos_old  || ' VALORMULTACONTARECEBER = ' || coalesce(quote_literal(old.valormultacontareceber), 'null');
				first = false;
			end if;

			if (new.percentualmultacontareceber &lt;&gt; old.percentualmultacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALMULTACONTARECEBER = ' || coalesce(quote_literal(new.percentualmultacontareceber), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALMULTACONTARECEBER = ' || coalesce(quote_literal(old.percentualmultacontareceber), 'null');
				campos_new  = campos_new  || ' PERCENTUALMULTACONTARECEBER = ' || coalesce(quote_literal(new.percentualmultacontareceber), 'null');
				campos_old  = campos_old  || ' PERCENTUALMULTACONTARECEBER = ' || coalesce(quote_literal(old.percentualmultacontareceber), 'null');
				first = false;
			end if;

			if (new.valorjurosdiariocontareceber &lt;&gt; old.valorjurosdiariocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(new.valorjurosdiariocontareceber), 'null');
				sql_rolback = sql_rolback || ' VALORJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(old.valorjurosdiariocontareceber), 'null');
				campos_new  = campos_new  || ' VALORJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(new.valorjurosdiariocontareceber), 'null');
				campos_old  = campos_old  || ' VALORJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(old.valorjurosdiariocontareceber), 'null');
				first = false;
			end if;

			if (new.percentualjurosdiariocontareceber &lt;&gt; old.percentualjurosdiariocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(new.percentualjurosdiariocontareceber), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(old.percentualjurosdiariocontareceber), 'null');
				campos_new  = campos_new  || ' PERCENTUALJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(new.percentualjurosdiariocontareceber), 'null');
				campos_old  = campos_old  || ' PERCENTUALJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(old.percentualjurosdiariocontareceber), 'null');
				first = false;
			end if;

			if (new.valorcontareceber &lt;&gt; old.valorcontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCONTARECEBER = ' || coalesce(quote_literal(new.valorcontareceber), 'null');
				sql_rolback = sql_rolback || ' VALORCONTARECEBER = ' || coalesce(quote_literal(old.valorcontareceber), 'null');
				campos_new  = campos_new  || ' VALORCONTARECEBER = ' || coalesce(quote_literal(new.valorcontareceber), 'null');
				campos_old  = campos_old  || ' VALORCONTARECEBER = ' || coalesce(quote_literal(old.valorcontareceber), 'null');
				first = false;
			end if;

			if (new.descontocontareceber &lt;&gt; old.descontocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCONTOCONTARECEBER = ' || coalesce(quote_literal(new.descontocontareceber), 'null');
				sql_rolback = sql_rolback || ' DESCONTOCONTARECEBER = ' || coalesce(quote_literal(old.descontocontareceber), 'null');
				campos_new  = campos_new  || ' DESCONTOCONTARECEBER = ' || coalesce(quote_literal(new.descontocontareceber), 'null');
				campos_old  = campos_old  || ' DESCONTOCONTARECEBER = ' || coalesce(quote_literal(old.descontocontareceber), 'null');
				first = false;
			end if;

			if (new.descontoatecontareceber &lt;&gt; old.descontoatecontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCONTOATECONTARECEBER = ' || coalesce(quote_literal(new.descontoatecontareceber), 'null');
				sql_rolback = sql_rolback || ' DESCONTOATECONTARECEBER = ' || coalesce(quote_literal(old.descontoatecontareceber), 'null');
				campos_new  = campos_new  || ' DESCONTOATECONTARECEBER = ' || coalesce(quote_literal(new.descontoatecontareceber), 'null');
				campos_old  = campos_old  || ' DESCONTOATECONTARECEBER = ' || coalesce(quote_literal(old.descontoatecontareceber), 'null');
				first = false;
			end if;

			if (new.observacaocontareceber &lt;&gt; old.observacaocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOCONTARECEBER = ' || coalesce(quote_literal(new.observacaocontareceber), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOCONTARECEBER = ' || coalesce(quote_literal(old.observacaocontareceber), 'null');
				campos_new  = campos_new  || ' OBSERVACAOCONTARECEBER = ' || coalesce(quote_literal(new.observacaocontareceber), 'null');
				campos_old  = campos_old  || ' OBSERVACAOCONTARECEBER = ' || coalesce(quote_literal(old.observacaocontareceber), 'null');
				first = false;
			end if;

			if (new.observacaocancelamentocontareceber &lt;&gt; old.observacaocancelamentocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOCANCELAMENTOCONTARECEBER = ' || coalesce(quote_literal(new.observacaocancelamentocontareceber), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOCANCELAMENTOCONTARECEBER = ' || coalesce(quote_literal(old.observacaocancelamentocontareceber), 'null');
				campos_new  = campos_new  || ' OBSERVACAOCANCELAMENTOCONTARECEBER = ' || coalesce(quote_literal(new.observacaocancelamentocontareceber), 'null');
				campos_old  = campos_old  || ' OBSERVACAOCANCELAMENTOCONTARECEBER = ' || coalesce(quote_literal(old.observacaocancelamentocontareceber), 'null');
				first = false;
			end if;

			if (new.codigoplanoconta &lt;&gt; old.codigoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				first = false;
			end if;

			if (new.codigocentrocusto &lt;&gt; old.codigocentrocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
				sql_rolback = sql_rolback || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');
				campos_new  = campos_new  || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(new.codigocentrocusto), 'null');
				campos_old  = campos_old  || ' CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null');
				first = false;
			end if;

			if (new.codigotipodocumento &lt;&gt; old.codigotipodocumento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');
				campos_new  = campos_new  || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
				campos_old  = campos_old  || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');
				first = false;
			end if;

			if (new.codigoportador &lt;&gt; old.codigoportador) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
				sql_rolback = sql_rolback || ' CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');
				campos_new  = campos_new  || ' CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
				campos_old  = campos_old  || ' CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');
				first = false;
			end if;

			if (new.codigoempresacliente &lt;&gt; old.codigoempresacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(new.codigoempresacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(old.codigoempresacliente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(new.codigoempresacliente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(old.codigoempresacliente), 'null');
				first = false;
			end if;

			if (new.codigolojacliente &lt;&gt; old.codigolojacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(new.codigolojacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(old.codigolojacliente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(new.codigolojacliente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(old.codigolojacliente), 'null');
				first = false;
			end if;

			if (new.codigopessoacliente &lt;&gt; old.codigopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoacliente &lt;&gt; old.codigoenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.descricaocontareceber &lt;&gt; old.descricaocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCONTARECEBER = ' || coalesce(quote_literal(new.descricaocontareceber), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCONTARECEBER = ' || coalesce(quote_literal(old.descricaocontareceber), 'null');
				campos_new  = campos_new  || ' DESCRICAOCONTARECEBER = ' || coalesce(quote_literal(new.descricaocontareceber), 'null');
				campos_old  = campos_old  || ' DESCRICAOCONTARECEBER = ' || coalesce(quote_literal(old.descricaocontareceber), 'null');
				first = false;
			end if;

			if (new.flagdrecontareceber &lt;&gt; old.flagdrecontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGDRECONTARECEBER = ' || coalesce(quote_literal(new.flagdrecontareceber), 'null');
				sql_rolback = sql_rolback || ' FLAGDRECONTARECEBER = ' || coalesce(quote_literal(old.flagdrecontareceber), 'null');
				campos_new  = campos_new  || ' FLAGDRECONTARECEBER = ' || coalesce(quote_literal(new.flagdrecontareceber), 'null');
				campos_old  = campos_old  || ' FLAGDRECONTARECEBER = ' || coalesce(quote_literal(old.flagdrecontareceber), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontareceber), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTARECEBER (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTARECEBER, PARCELACONTARECEBER, DATALANCAMENTOCONTARECEBER, NUMEROPARCELASCONTARECEBER, DATAEMISSAOCONTARECEBER, NUMEROTITULOCONTARECEBER, SITUACAOCONTARECEBER, DATAVENCIMENTOCONTARECEBER, VALORMULTACONTARECEBER, PERCENTUALMULTACONTARECEBER, VALORJUROSDIARIOCONTARECEBER, PERCENTUALJUROSDIARIOCONTARECEBER, VALORCONTARECEBER, DESCONTOCONTARECEBER, DESCONTOATECONTARECEBER, OBSERVACAOCONTARECEBER, OBSERVACAOCANCELAMENTOCONTARECEBER, CODIGOPLANOCONTA, CODIGOCENTROCUSTO, CODIGOTIPODOCUMENTO, CODIGOPORTADOR, CODIGOEMPRESACLIENTE, CODIGOLOJACLIENTE, CODIGOPESSOACLIENTE, CODIGOENDERECOPESSOACLIENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, DESCRICAOCONTARECEBER, FLAGDRECONTARECEBER) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.parcelacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datalancamentocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroparcelascontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerotitulocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.situacaocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datavencimentocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valormultacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualmultacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorjurosdiariocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualjurosdiariocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorcontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descontocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descontoatecontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaocancelamentocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocentrocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipodocumento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoportador), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagdrecontareceber), 'null') || ')';

			sql_replica = 'DELETE FROM CONTARECEBER WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'PARCELACONTARECEBER = ' || coalesce(quote_literal(old.parcelacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'DATALANCAMENTOCONTARECEBER = ' || coalesce(quote_literal(old.datalancamentocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROPARCELASCONTARECEBER = ' || coalesce(quote_literal(old.numeroparcelascontareceber), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAOCONTARECEBER = ' || coalesce(quote_literal(old.dataemissaocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROTITULOCONTARECEBER = ' || coalesce(quote_literal(old.numerotitulocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'SITUACAOCONTARECEBER = ' || coalesce(quote_literal(old.situacaocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'DATAVENCIMENTOCONTARECEBER = ' || coalesce(quote_literal(old.datavencimentocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'VALORMULTACONTARECEBER = ' || coalesce(quote_literal(old.valormultacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALMULTACONTARECEBER = ' || coalesce(quote_literal(old.percentualmultacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'VALORJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(old.valorjurosdiariocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALJUROSDIARIOCONTARECEBER = ' || coalesce(quote_literal(old.percentualjurosdiariocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'VALORCONTARECEBER = ' || coalesce(quote_literal(old.valorcontareceber), 'null') || ', ';
			campos_old  = campos_old || 'DESCONTOCONTARECEBER = ' || coalesce(quote_literal(old.descontocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'DESCONTOATECONTARECEBER = ' || coalesce(quote_literal(old.descontoatecontareceber), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOCONTARECEBER = ' || coalesce(quote_literal(old.observacaocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOCANCELAMENTOCONTARECEBER = ' || coalesce(quote_literal(old.observacaocancelamentocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCENTROCUSTO = ' || coalesce(quote_literal(old.codigocentrocusto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(old.codigoempresacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACLIENTE = ' || coalesce(quote_literal(old.codigolojacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCONTARECEBER = ' || coalesce(quote_literal(old.descricaocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'FLAGDRECONTARECEBER = ' || coalesce(quote_literal(old.flagdrecontareceber), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocontareceber), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contareceber', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contareceber', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contareceber', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contaresumo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contaresumo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTARESUMO (CODIGOCONTARESUMO, CODIGOTIPOCONTARESUMO, CODIGOCONTARESUMOPAI, CODIGOCONTARESUMOTOTAL, DESCRICAOCONTARESUMO, NEGRITOCONTARESUMO, ORDEMCONTARESUMO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontaresumopai), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontaresumototal), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.negritocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ordemcontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTARESUMO WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTARESUMOPAI = ' || coalesce(quote_literal(new.codigocontaresumopai), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTARESUMOTOTAL = ' || coalesce(quote_literal(new.codigocontaresumototal), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCONTARESUMO = ' || coalesce(quote_literal(new.descricaocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'NEGRITOCONTARESUMO = ' || coalesce(quote_literal(new.negritocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'ORDEMCONTARESUMO = ' || coalesce(quote_literal(new.ordemcontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocontaresumo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTARESUMO SET ';
			sql_rolback = 'UPDATE CONTARESUMO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocontaresumo &lt;&gt; old.codigocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null');
				first = false;
			end if;

			if (new.codigotipocontaresumo &lt;&gt; old.codigotipocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null');
				first = false;
			end if;

			if (new.codigocontaresumopai &lt;&gt; old.codigocontaresumopai) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARESUMOPAI = ' || coalesce(quote_literal(new.codigocontaresumopai), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARESUMOPAI = ' || coalesce(quote_literal(old.codigocontaresumopai), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARESUMOPAI = ' || coalesce(quote_literal(new.codigocontaresumopai), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARESUMOPAI = ' || coalesce(quote_literal(old.codigocontaresumopai), 'null');
				first = false;
			end if;

			if (new.codigocontaresumototal &lt;&gt; old.codigocontaresumototal) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARESUMOTOTAL = ' || coalesce(quote_literal(new.codigocontaresumototal), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARESUMOTOTAL = ' || coalesce(quote_literal(old.codigocontaresumototal), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARESUMOTOTAL = ' || coalesce(quote_literal(new.codigocontaresumototal), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARESUMOTOTAL = ' || coalesce(quote_literal(old.codigocontaresumototal), 'null');
				first = false;
			end if;

			if (new.descricaocontaresumo &lt;&gt; old.descricaocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCONTARESUMO = ' || coalesce(quote_literal(new.descricaocontaresumo), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCONTARESUMO = ' || coalesce(quote_literal(old.descricaocontaresumo), 'null');
				campos_new  = campos_new  || ' DESCRICAOCONTARESUMO = ' || coalesce(quote_literal(new.descricaocontaresumo), 'null');
				campos_old  = campos_old  || ' DESCRICAOCONTARESUMO = ' || coalesce(quote_literal(old.descricaocontaresumo), 'null');
				first = false;
			end if;

			if (new.negritocontaresumo &lt;&gt; old.negritocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NEGRITOCONTARESUMO = ' || coalesce(quote_literal(new.negritocontaresumo), 'null');
				sql_rolback = sql_rolback || ' NEGRITOCONTARESUMO = ' || coalesce(quote_literal(old.negritocontaresumo), 'null');
				campos_new  = campos_new  || ' NEGRITOCONTARESUMO = ' || coalesce(quote_literal(new.negritocontaresumo), 'null');
				campos_old  = campos_old  || ' NEGRITOCONTARESUMO = ' || coalesce(quote_literal(old.negritocontaresumo), 'null');
				first = false;
			end if;

			if (new.ordemcontaresumo &lt;&gt; old.ordemcontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ORDEMCONTARESUMO = ' || coalesce(quote_literal(new.ordemcontaresumo), 'null');
				sql_rolback = sql_rolback || ' ORDEMCONTARESUMO = ' || coalesce(quote_literal(old.ordemcontaresumo), 'null');
				campos_new  = campos_new  || ' ORDEMCONTARESUMO = ' || coalesce(quote_literal(new.ordemcontaresumo), 'null');
				campos_old  = campos_old  || ' ORDEMCONTARESUMO = ' || coalesce(quote_literal(old.ordemcontaresumo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');

			sql_chave = coalesce(quote_literal(new.codigocontaresumo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTARESUMO (CODIGOCONTARESUMO, CODIGOTIPOCONTARESUMO, CODIGOCONTARESUMOPAI, CODIGOCONTARESUMOTOTAL, DESCRICAOCONTARESUMO, NEGRITOCONTARESUMO, ORDEMCONTARESUMO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontaresumopai), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontaresumototal), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.negritocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ordemcontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CONTARESUMO WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTARESUMOPAI = ' || coalesce(quote_literal(old.codigocontaresumopai), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTARESUMOTOTAL = ' || coalesce(quote_literal(old.codigocontaresumototal), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCONTARESUMO = ' || coalesce(quote_literal(old.descricaocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'NEGRITOCONTARESUMO = ' || coalesce(quote_literal(old.negritocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'ORDEMCONTARESUMO = ' || coalesce(quote_literal(old.ordemcontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocontaresumo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contaresumo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contaresumo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contaresumo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contaresumoplanoconta()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contaresumoplanoconta() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTARESUMOPLANOCONTA (CODIGOCONTARESUMO, CODIGOPLANOCONTA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTARESUMOPLANOCONTA WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null') || ' AND CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocontaresumo), 'null')  || ', ' || coalesce(quote_literal(new.codigoplanoconta), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTARESUMOPLANOCONTA SET ';
			sql_rolback = 'UPDATE CONTARESUMOPLANOCONTA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocontaresumo &lt;&gt; old.codigocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null');
				first = false;
			end if;

			if (new.codigoplanoconta &lt;&gt; old.codigoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null') || ' AND CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(new.codigocontaresumo), 'null') || ' AND CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');

			sql_chave = coalesce(quote_literal(new.codigocontaresumo), 'null')  || ', ' || coalesce(quote_literal(new.codigoplanoconta), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTARESUMOPLANOCONTA (CODIGOCONTARESUMO, CODIGOPLANOCONTA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CONTARESUMOPLANOCONTA WHERE CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null') || ' AND CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCONTARESUMO = ' || coalesce(quote_literal(old.codigocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocontaresumo), 'null')  || ', ' || coalesce(quote_literal(old.codigoplanoconta), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contaresumoplanoconta', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contaresumoplanoconta', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contaresumoplanoconta', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contratotrabalho()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contratotrabalho() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTRATOTRABALHO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTRATOTRABALHO, DATAINICIOCONTRATOTRABALHO, DIASEXPERIENCIA1CONTRATOTRABALHO, DIASEXPERIENCIA2CONTRATOTRABALHO, STATUSCONTRATOTRABALHO, CODIGOEMPRESACARGO, CODIGOLOJACARGO, CODIGOCARGO, CODIGOEMPRESAMOTIVODESLIGAMENTO, CODIGOLOJAMOTIVODESLIGAMENTO, CODIGOMOTIVODESLIGAMENTO, CODIGOEMPRESAFUNCIONARIO, CODIGOLOJAFUNCIONARIO, CODIGOFUNCIONARIO, CODIGOEMPRESAHORARIOTRABALHO, CODIGOLOJAHORARIOTRABALHO, CODIGOHORARIOTRABALHO, OBSERVACOESCONTRATOTRABALHO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, DATAFIMCONTRATOTRABALHO, FLAGCARTEIRAASSINADACONTRATOTRABALHO, CODIGOEMPRESALOTACAO, CODIGOLOJALOTACAO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainiciocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diasexperiencia1contratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diasexperiencia2contratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuscontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacargo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacargo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocargo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamotivodesligamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamotivodesligamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresahorariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojahorariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigohorariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoescontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafimcontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagcarteiraassinadacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresalotacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojalotacao), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTRATOTRABALHO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.datainiciocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'DIASEXPERIENCIA1CONTRATOTRABALHO = ' || coalesce(quote_literal(new.diasexperiencia1contratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'DIASEXPERIENCIA2CONTRATOTRABALHO = ' || coalesce(quote_literal(new.diasexperiencia2contratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'STATUSCONTRATOTRABALHO = ' || coalesce(quote_literal(new.statuscontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACARGO = ' || coalesce(quote_literal(new.codigoempresacargo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACARGO = ' || coalesce(quote_literal(new.codigolojacargo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigoempresamotivodesligamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigolojamotivodesligamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigoempresahorariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigolojahorariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESCONTRATOTRABALHO = ' || coalesce(quote_literal(new.observacoescontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'DATAFIMCONTRATOTRABALHO = ' || coalesce(quote_literal(new.datafimcontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'FLAGCARTEIRAASSINADACONTRATOTRABALHO = ' || coalesce(quote_literal(new.flagcarteiraassinadacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(new.codigoempresalotacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJALOTACAO = ' || coalesce(quote_literal(new.codigolojalotacao), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTRATOTRABALHO SET ';
			sql_rolback = 'UPDATE CONTRATOTRABALHO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.datainiciocontratotrabalho &lt;&gt; old.datainiciocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.datainiciocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' DATAINICIOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.datainiciocontratotrabalho), 'null');
				campos_new  = campos_new  || ' DATAINICIOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.datainiciocontratotrabalho), 'null');
				campos_old  = campos_old  || ' DATAINICIOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.datainiciocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.diasexperiencia1contratotrabalho &lt;&gt; old.diasexperiencia1contratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIASEXPERIENCIA1CONTRATOTRABALHO = ' || coalesce(quote_literal(new.diasexperiencia1contratotrabalho), 'null');
				sql_rolback = sql_rolback || ' DIASEXPERIENCIA1CONTRATOTRABALHO = ' || coalesce(quote_literal(old.diasexperiencia1contratotrabalho), 'null');
				campos_new  = campos_new  || ' DIASEXPERIENCIA1CONTRATOTRABALHO = ' || coalesce(quote_literal(new.diasexperiencia1contratotrabalho), 'null');
				campos_old  = campos_old  || ' DIASEXPERIENCIA1CONTRATOTRABALHO = ' || coalesce(quote_literal(old.diasexperiencia1contratotrabalho), 'null');
				first = false;
			end if;

			if (new.diasexperiencia2contratotrabalho &lt;&gt; old.diasexperiencia2contratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIASEXPERIENCIA2CONTRATOTRABALHO = ' || coalesce(quote_literal(new.diasexperiencia2contratotrabalho), 'null');
				sql_rolback = sql_rolback || ' DIASEXPERIENCIA2CONTRATOTRABALHO = ' || coalesce(quote_literal(old.diasexperiencia2contratotrabalho), 'null');
				campos_new  = campos_new  || ' DIASEXPERIENCIA2CONTRATOTRABALHO = ' || coalesce(quote_literal(new.diasexperiencia2contratotrabalho), 'null');
				campos_old  = campos_old  || ' DIASEXPERIENCIA2CONTRATOTRABALHO = ' || coalesce(quote_literal(old.diasexperiencia2contratotrabalho), 'null');
				first = false;
			end if;

			if (new.statuscontratotrabalho &lt;&gt; old.statuscontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSCONTRATOTRABALHO = ' || coalesce(quote_literal(new.statuscontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' STATUSCONTRATOTRABALHO = ' || coalesce(quote_literal(old.statuscontratotrabalho), 'null');
				campos_new  = campos_new  || ' STATUSCONTRATOTRABALHO = ' || coalesce(quote_literal(new.statuscontratotrabalho), 'null');
				campos_old  = campos_old  || ' STATUSCONTRATOTRABALHO = ' || coalesce(quote_literal(old.statuscontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresacargo &lt;&gt; old.codigoempresacargo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACARGO = ' || coalesce(quote_literal(new.codigoempresacargo), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACARGO = ' || coalesce(quote_literal(old.codigoempresacargo), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACARGO = ' || coalesce(quote_literal(new.codigoempresacargo), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACARGO = ' || coalesce(quote_literal(old.codigoempresacargo), 'null');
				first = false;
			end if;

			if (new.codigolojacargo &lt;&gt; old.codigolojacargo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACARGO = ' || coalesce(quote_literal(new.codigolojacargo), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACARGO = ' || coalesce(quote_literal(old.codigolojacargo), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACARGO = ' || coalesce(quote_literal(new.codigolojacargo), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACARGO = ' || coalesce(quote_literal(old.codigolojacargo), 'null');
				first = false;
			end if;

			if (new.codigocargo &lt;&gt; old.codigocargo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null');
				sql_rolback = sql_rolback || ' CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null');
				campos_new  = campos_new  || ' CODIGOCARGO = ' || coalesce(quote_literal(new.codigocargo), 'null');
				campos_old  = campos_old  || ' CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null');
				first = false;
			end if;

			if (new.codigoempresamotivodesligamento &lt;&gt; old.codigoempresamotivodesligamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigoempresamotivodesligamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigoempresamotivodesligamento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigoempresamotivodesligamento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigoempresamotivodesligamento), 'null');
				first = false;
			end if;

			if (new.codigolojamotivodesligamento &lt;&gt; old.codigolojamotivodesligamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigolojamotivodesligamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigolojamotivodesligamento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigolojamotivodesligamento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigolojamotivodesligamento), 'null');
				first = false;
			end if;

			if (new.codigomotivodesligamento &lt;&gt; old.codigomotivodesligamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null');
				campos_new  = campos_new  || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null');
				campos_old  = campos_old  || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null');
				first = false;
			end if;

			if (new.codigoempresafuncionario &lt;&gt; old.codigoempresafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresafuncionario), 'null');
				first = false;
			end if;

			if (new.codigolojafuncionario &lt;&gt; old.codigolojafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojafuncionario), 'null');
				first = false;
			end if;

			if (new.codigofuncionario &lt;&gt; old.codigofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresahorariotrabalho &lt;&gt; old.codigoempresahorariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigoempresahorariotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigoempresahorariotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigoempresahorariotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigoempresahorariotrabalho), 'null');
				first = false;
			end if;

			if (new.codigolojahorariotrabalho &lt;&gt; old.codigolojahorariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigolojahorariotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigolojahorariotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigolojahorariotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigolojahorariotrabalho), 'null');
				first = false;
			end if;

			if (new.codigohorariotrabalho &lt;&gt; old.codigohorariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null');
				first = false;
			end if;

			if (new.observacoescontratotrabalho &lt;&gt; old.observacoescontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESCONTRATOTRABALHO = ' || coalesce(quote_literal(new.observacoescontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESCONTRATOTRABALHO = ' || coalesce(quote_literal(old.observacoescontratotrabalho), 'null');
				campos_new  = campos_new  || ' OBSERVACOESCONTRATOTRABALHO = ' || coalesce(quote_literal(new.observacoescontratotrabalho), 'null');
				campos_old  = campos_old  || ' OBSERVACOESCONTRATOTRABALHO = ' || coalesce(quote_literal(old.observacoescontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.datafimcontratotrabalho &lt;&gt; old.datafimcontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFIMCONTRATOTRABALHO = ' || coalesce(quote_literal(new.datafimcontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' DATAFIMCONTRATOTRABALHO = ' || coalesce(quote_literal(old.datafimcontratotrabalho), 'null');
				campos_new  = campos_new  || ' DATAFIMCONTRATOTRABALHO = ' || coalesce(quote_literal(new.datafimcontratotrabalho), 'null');
				campos_old  = campos_old  || ' DATAFIMCONTRATOTRABALHO = ' || coalesce(quote_literal(old.datafimcontratotrabalho), 'null');
				first = false;
			end if;

			if (new.flagcarteiraassinadacontratotrabalho &lt;&gt; old.flagcarteiraassinadacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGCARTEIRAASSINADACONTRATOTRABALHO = ' || coalesce(quote_literal(new.flagcarteiraassinadacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' FLAGCARTEIRAASSINADACONTRATOTRABALHO = ' || coalesce(quote_literal(old.flagcarteiraassinadacontratotrabalho), 'null');
				campos_new  = campos_new  || ' FLAGCARTEIRAASSINADACONTRATOTRABALHO = ' || coalesce(quote_literal(new.flagcarteiraassinadacontratotrabalho), 'null');
				campos_old  = campos_old  || ' FLAGCARTEIRAASSINADACONTRATOTRABALHO = ' || coalesce(quote_literal(old.flagcarteiraassinadacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresalotacao &lt;&gt; old.codigoempresalotacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(new.codigoempresalotacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(old.codigoempresalotacao), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(new.codigoempresalotacao), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(old.codigoempresalotacao), 'null');
				first = false;
			end if;

			if (new.codigolojalotacao &lt;&gt; old.codigolojalotacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(new.codigolojalotacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(old.codigolojalotacao), 'null');
				campos_new  = campos_new  || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(new.codigolojalotacao), 'null');
				campos_old  = campos_old  || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(old.codigolojalotacao), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTRATOTRABALHO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTRATOTRABALHO, DATAINICIOCONTRATOTRABALHO, DIASEXPERIENCIA1CONTRATOTRABALHO, DIASEXPERIENCIA2CONTRATOTRABALHO, STATUSCONTRATOTRABALHO, CODIGOEMPRESACARGO, CODIGOLOJACARGO, CODIGOCARGO, CODIGOEMPRESAMOTIVODESLIGAMENTO, CODIGOLOJAMOTIVODESLIGAMENTO, CODIGOMOTIVODESLIGAMENTO, CODIGOEMPRESAFUNCIONARIO, CODIGOLOJAFUNCIONARIO, CODIGOFUNCIONARIO, CODIGOEMPRESAHORARIOTRABALHO, CODIGOLOJAHORARIOTRABALHO, CODIGOHORARIOTRABALHO, OBSERVACOESCONTRATOTRABALHO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, DATAFIMCONTRATOTRABALHO, FLAGCARTEIRAASSINADACONTRATOTRABALHO, CODIGOEMPRESALOTACAO, CODIGOLOJALOTACAO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainiciocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diasexperiencia1contratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diasexperiencia2contratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuscontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacargo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacargo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocargo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamotivodesligamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamotivodesligamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotivodesligamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresahorariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojahorariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigohorariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoescontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafimcontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagcarteiraassinadacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresalotacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojalotacao), 'null') || ')';

			sql_replica = 'DELETE FROM CONTRATOTRABALHO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.datainiciocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'DIASEXPERIENCIA1CONTRATOTRABALHO = ' || coalesce(quote_literal(old.diasexperiencia1contratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'DIASEXPERIENCIA2CONTRATOTRABALHO = ' || coalesce(quote_literal(old.diasexperiencia2contratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'STATUSCONTRATOTRABALHO = ' || coalesce(quote_literal(old.statuscontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACARGO = ' || coalesce(quote_literal(old.codigoempresacargo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACARGO = ' || coalesce(quote_literal(old.codigolojacargo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCARGO = ' || coalesce(quote_literal(old.codigocargo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigoempresamotivodesligamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigolojamotivodesligamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigoempresahorariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigolojahorariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESCONTRATOTRABALHO = ' || coalesce(quote_literal(old.observacoescontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'DATAFIMCONTRATOTRABALHO = ' || coalesce(quote_literal(old.datafimcontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'FLAGCARTEIRAASSINADACONTRATOTRABALHO = ' || coalesce(quote_literal(old.flagcarteiraassinadacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(old.codigoempresalotacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJALOTACAO = ' || coalesce(quote_literal(old.codigolojalotacao), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contratotrabalho', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contratotrabalho', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contratotrabalho', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_contratotrabalhofolhapagamento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_contratotrabalhofolhapagamento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CONTRATOTRABALHOFOLHAPAGAMENTO (CODIGOFOLHAPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO, CODIGOCONTRATOTRABALHO, SALARIOBASE, BASEINSS, BASEFGTS, VALORFGTS, BASEIRRF, FAIXAIRRF, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, VALORINSSPATRONAL) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.salariobase), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.baseinss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.basefgts), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfgts), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.baseirrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.faixairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorinsspatronal), 'null') || ')';

			sql_rolback = 'DELETE FROM CONTRATOTRABALHOFOLHAPAGAMENTO WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'SALARIOBASE = ' || coalesce(quote_literal(new.salariobase), 'null') || ', ';
			campos_new   = campos_new || 'BASEINSS = ' || coalesce(quote_literal(new.baseinss), 'null') || ', ';
			campos_new   = campos_new || 'BASEFGTS = ' || coalesce(quote_literal(new.basefgts), 'null') || ', ';
			campos_new   = campos_new || 'VALORFGTS = ' || coalesce(quote_literal(new.valorfgts), 'null') || ', ';
			campos_new   = campos_new || 'BASEIRRF = ' || coalesce(quote_literal(new.baseirrf), 'null') || ', ';
			campos_new   = campos_new || 'FAIXAIRRF = ' || coalesce(quote_literal(new.faixairrf), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'VALORINSSPATRONAL = ' || coalesce(quote_literal(new.valorinsspatronal), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CONTRATOTRABALHOFOLHAPAGAMENTO SET ';
			sql_rolback = 'UPDATE CONTRATOTRABALHOFOLHAPAGAMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigofolhapagamento &lt;&gt; old.codigofolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresacontratotrabalho &lt;&gt; old.codigoempresacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigolojacontratotrabalho &lt;&gt; old.codigolojacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.salariobase &lt;&gt; old.salariobase) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SALARIOBASE = ' || coalesce(quote_literal(new.salariobase), 'null');
				sql_rolback = sql_rolback || ' SALARIOBASE = ' || coalesce(quote_literal(old.salariobase), 'null');
				campos_new  = campos_new  || ' SALARIOBASE = ' || coalesce(quote_literal(new.salariobase), 'null');
				campos_old  = campos_old  || ' SALARIOBASE = ' || coalesce(quote_literal(old.salariobase), 'null');
				first = false;
			end if;

			if (new.baseinss &lt;&gt; old.baseinss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASEINSS = ' || coalesce(quote_literal(new.baseinss), 'null');
				sql_rolback = sql_rolback || ' BASEINSS = ' || coalesce(quote_literal(old.baseinss), 'null');
				campos_new  = campos_new  || ' BASEINSS = ' || coalesce(quote_literal(new.baseinss), 'null');
				campos_old  = campos_old  || ' BASEINSS = ' || coalesce(quote_literal(old.baseinss), 'null');
				first = false;
			end if;

			if (new.basefgts &lt;&gt; old.basefgts) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASEFGTS = ' || coalesce(quote_literal(new.basefgts), 'null');
				sql_rolback = sql_rolback || ' BASEFGTS = ' || coalesce(quote_literal(old.basefgts), 'null');
				campos_new  = campos_new  || ' BASEFGTS = ' || coalesce(quote_literal(new.basefgts), 'null');
				campos_old  = campos_old  || ' BASEFGTS = ' || coalesce(quote_literal(old.basefgts), 'null');
				first = false;
			end if;

			if (new.valorfgts &lt;&gt; old.valorfgts) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFGTS = ' || coalesce(quote_literal(new.valorfgts), 'null');
				sql_rolback = sql_rolback || ' VALORFGTS = ' || coalesce(quote_literal(old.valorfgts), 'null');
				campos_new  = campos_new  || ' VALORFGTS = ' || coalesce(quote_literal(new.valorfgts), 'null');
				campos_old  = campos_old  || ' VALORFGTS = ' || coalesce(quote_literal(old.valorfgts), 'null');
				first = false;
			end if;

			if (new.baseirrf &lt;&gt; old.baseirrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASEIRRF = ' || coalesce(quote_literal(new.baseirrf), 'null');
				sql_rolback = sql_rolback || ' BASEIRRF = ' || coalesce(quote_literal(old.baseirrf), 'null');
				campos_new  = campos_new  || ' BASEIRRF = ' || coalesce(quote_literal(new.baseirrf), 'null');
				campos_old  = campos_old  || ' BASEIRRF = ' || coalesce(quote_literal(old.baseirrf), 'null');
				first = false;
			end if;

			if (new.faixairrf &lt;&gt; old.faixairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FAIXAIRRF = ' || coalesce(quote_literal(new.faixairrf), 'null');
				sql_rolback = sql_rolback || ' FAIXAIRRF = ' || coalesce(quote_literal(old.faixairrf), 'null');
				campos_new  = campos_new  || ' FAIXAIRRF = ' || coalesce(quote_literal(new.faixairrf), 'null');
				campos_old  = campos_old  || ' FAIXAIRRF = ' || coalesce(quote_literal(old.faixairrf), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.valorinsspatronal &lt;&gt; old.valorinsspatronal) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORINSSPATRONAL = ' || coalesce(quote_literal(new.valorinsspatronal), 'null');
				sql_rolback = sql_rolback || ' VALORINSSPATRONAL = ' || coalesce(quote_literal(old.valorinsspatronal), 'null');
				campos_new  = campos_new  || ' VALORINSSPATRONAL = ' || coalesce(quote_literal(new.valorinsspatronal), 'null');
				campos_old  = campos_old  || ' VALORINSSPATRONAL = ' || coalesce(quote_literal(old.valorinsspatronal), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');

			sql_chave = coalesce(quote_literal(new.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CONTRATOTRABALHOFOLHAPAGAMENTO (CODIGOFOLHAPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO, CODIGOCONTRATOTRABALHO, SALARIOBASE, BASEINSS, BASEFGTS, VALORFGTS, BASEIRRF, FAIXAIRRF, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, VALORINSSPATRONAL) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.salariobase), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.baseinss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.basefgts), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfgts), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.baseirrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.faixairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorinsspatronal), 'null') || ')';

			sql_replica = 'DELETE FROM CONTRATOTRABALHOFOLHAPAGAMENTO WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'SALARIOBASE = ' || coalesce(quote_literal(old.salariobase), 'null') || ', ';
			campos_old  = campos_old || 'BASEINSS = ' || coalesce(quote_literal(old.baseinss), 'null') || ', ';
			campos_old  = campos_old || 'BASEFGTS = ' || coalesce(quote_literal(old.basefgts), 'null') || ', ';
			campos_old  = campos_old || 'VALORFGTS = ' || coalesce(quote_literal(old.valorfgts), 'null') || ', ';
			campos_old  = campos_old || 'BASEIRRF = ' || coalesce(quote_literal(old.baseirrf), 'null') || ', ';
			campos_old  = campos_old || 'FAIXAIRRF = ' || coalesce(quote_literal(old.faixairrf), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'VALORINSSPATRONAL = ' || coalesce(quote_literal(old.valorinsspatronal), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'contratotrabalhofolhapagamento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contratotrabalhofolhapagamento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('contratotrabalhofolhapagamento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_curral()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_curral() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO CURRAL (CODIGOEMPRESA, CODIGOLOJA, CODIGOCURRAL, DESCRICAOCURRAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM CURRAL WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCURRAL = ' || coalesce(quote_literal(new.descricaocurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocurral), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE CURRAL SET ';
			sql_rolback = 'UPDATE CURRAL SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocurral &lt;&gt; old.codigocurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				campos_new  = campos_new  || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				campos_old  = campos_old  || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				first = false;
			end if;

			if (new.descricaocurral &lt;&gt; old.descricaocurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCURRAL = ' || coalesce(quote_literal(new.descricaocurral), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCURRAL = ' || coalesce(quote_literal(old.descricaocurral), 'null');
				campos_new  = campos_new  || ' DESCRICAOCURRAL = ' || coalesce(quote_literal(new.descricaocurral), 'null');
				campos_old  = campos_old  || ' DESCRICAOCURRAL = ' || coalesce(quote_literal(old.descricaocurral), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocurral), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO CURRAL (CODIGOEMPRESA, CODIGOLOJA, CODIGOCURRAL, DESCRICAOCURRAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM CURRAL WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCURRAL = ' || coalesce(quote_literal(old.descricaocurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocurral), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'curral', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('curral', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('curral', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_dependente()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_dependente() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO DEPENDENTE (CODIGODEPENDENTE, CODIGOFUNCIONARIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOVERBA, NOMEDEPENDENTE, TIPODEPENDENTE, DATAINICIALDEPENDENTE, DATAFINALDEPENDENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigodependente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomedependente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipodependente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialdependente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinaldependente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM DEPENDENTE WHERE CODIGODEPENDENTE = ' || coalesce(quote_literal(new.codigodependente), 'null') || ' AND CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGODEPENDENTE = ' || coalesce(quote_literal(new.codigodependente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			campos_new   = campos_new || 'NOMEDEPENDENTE = ' || coalesce(quote_literal(new.nomedependente), 'null') || ', ';
			campos_new   = campos_new || 'TIPODEPENDENTE = ' || coalesce(quote_literal(new.tipodependente), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALDEPENDENTE = ' || coalesce(quote_literal(new.datainicialdependente), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALDEPENDENTE = ' || coalesce(quote_literal(new.datafinaldependente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigodependente), 'null')  || ', ' || coalesce(quote_literal(new.codigofuncionario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE DEPENDENTE SET ';
			sql_rolback = 'UPDATE DEPENDENTE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigodependente &lt;&gt; old.codigodependente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGODEPENDENTE = ' || coalesce(quote_literal(new.codigodependente), 'null');
				sql_rolback = sql_rolback || ' CODIGODEPENDENTE = ' || coalesce(quote_literal(old.codigodependente), 'null');
				campos_new  = campos_new  || ' CODIGODEPENDENTE = ' || coalesce(quote_literal(new.codigodependente), 'null');
				campos_old  = campos_old  || ' CODIGODEPENDENTE = ' || coalesce(quote_literal(old.codigodependente), 'null');
				first = false;
			end if;

			if (new.codigofuncionario &lt;&gt; old.codigofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoverba &lt;&gt; old.codigoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				campos_new  = campos_new  || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				campos_old  = campos_old  || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				first = false;
			end if;

			if (new.nomedependente &lt;&gt; old.nomedependente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEDEPENDENTE = ' || coalesce(quote_literal(new.nomedependente), 'null');
				sql_rolback = sql_rolback || ' NOMEDEPENDENTE = ' || coalesce(quote_literal(old.nomedependente), 'null');
				campos_new  = campos_new  || ' NOMEDEPENDENTE = ' || coalesce(quote_literal(new.nomedependente), 'null');
				campos_old  = campos_old  || ' NOMEDEPENDENTE = ' || coalesce(quote_literal(old.nomedependente), 'null');
				first = false;
			end if;

			if (new.tipodependente &lt;&gt; old.tipodependente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPODEPENDENTE = ' || coalesce(quote_literal(new.tipodependente), 'null');
				sql_rolback = sql_rolback || ' TIPODEPENDENTE = ' || coalesce(quote_literal(old.tipodependente), 'null');
				campos_new  = campos_new  || ' TIPODEPENDENTE = ' || coalesce(quote_literal(new.tipodependente), 'null');
				campos_old  = campos_old  || ' TIPODEPENDENTE = ' || coalesce(quote_literal(old.tipodependente), 'null');
				first = false;
			end if;

			if (new.datainicialdependente &lt;&gt; old.datainicialdependente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALDEPENDENTE = ' || coalesce(quote_literal(new.datainicialdependente), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALDEPENDENTE = ' || coalesce(quote_literal(old.datainicialdependente), 'null');
				campos_new  = campos_new  || ' DATAINICIALDEPENDENTE = ' || coalesce(quote_literal(new.datainicialdependente), 'null');
				campos_old  = campos_old  || ' DATAINICIALDEPENDENTE = ' || coalesce(quote_literal(old.datainicialdependente), 'null');
				first = false;
			end if;

			if (new.datafinaldependente &lt;&gt; old.datafinaldependente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALDEPENDENTE = ' || coalesce(quote_literal(new.datafinaldependente), 'null');
				sql_rolback = sql_rolback || ' DATAFINALDEPENDENTE = ' || coalesce(quote_literal(old.datafinaldependente), 'null');
				campos_new  = campos_new  || ' DATAFINALDEPENDENTE = ' || coalesce(quote_literal(new.datafinaldependente), 'null');
				campos_old  = campos_old  || ' DATAFINALDEPENDENTE = ' || coalesce(quote_literal(old.datafinaldependente), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGODEPENDENTE = ' || coalesce(quote_literal(new.codigodependente), 'null') || ' AND CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGODEPENDENTE = ' || coalesce(quote_literal(new.codigodependente), 'null') || ' AND CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');

			sql_chave = coalesce(quote_literal(new.codigodependente), 'null')  || ', ' || coalesce(quote_literal(new.codigofuncionario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO DEPENDENTE (CODIGODEPENDENTE, CODIGOFUNCIONARIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOVERBA, NOMEDEPENDENTE, TIPODEPENDENTE, DATAINICIALDEPENDENTE, DATAFINALDEPENDENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigodependente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomedependente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipodependente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialdependente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinaldependente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM DEPENDENTE WHERE CODIGODEPENDENTE = ' || coalesce(quote_literal(old.codigodependente), 'null') || ' AND CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGODEPENDENTE = ' || coalesce(quote_literal(old.codigodependente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			campos_old  = campos_old || 'NOMEDEPENDENTE = ' || coalesce(quote_literal(old.nomedependente), 'null') || ', ';
			campos_old  = campos_old || 'TIPODEPENDENTE = ' || coalesce(quote_literal(old.tipodependente), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALDEPENDENTE = ' || coalesce(quote_literal(old.datainicialdependente), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALDEPENDENTE = ' || coalesce(quote_literal(old.datafinaldependente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigodependente), 'null')  || ', ' || coalesce(quote_literal(old.codigofuncionario), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoverba), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'dependente', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('dependente', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('dependente', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_dimensaotempo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_dimensaotempo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO DIMENSAOTEMPO (DATA, ANO, MES, NOMEMES, DIA, DIADOANO, DIADASEMANA, SEMANACALENDARIO, DATAFORMATADA, QUADRIMESTREDESCRICAO, QUADRIMESTREANO, ANOMES, ANOSEMANA, MESSEMANA, MESSEMANADESC, INICIOSEMANA, FIMSEMANA, PRIMEIROMES, ULTIMODIAMES, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.data), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ano), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.mes), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemes), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diadoano), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diadasemana), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.semanacalendario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataformatada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quadrimestredescricao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quadrimestreano), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.anomes), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.anosemana), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.messemana), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.messemanadesc), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.iniciosemana), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fimsemana), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.primeiromes), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ultimodiames), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM DIMENSAOTEMPO WHERE DATA = ' || coalesce(quote_literal(new.data), 'null');
			campos_new = '';
			campos_new   = campos_new || 'DATA = ' || coalesce(quote_literal(new.data), 'null') || ', ';
			campos_new   = campos_new || 'ANO = ' || coalesce(quote_literal(new.ano), 'null') || ', ';
			campos_new   = campos_new || 'MES = ' || coalesce(quote_literal(new.mes), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMES = ' || coalesce(quote_literal(new.nomemes), 'null') || ', ';
			campos_new   = campos_new || 'DIA = ' || coalesce(quote_literal(new.dia), 'null') || ', ';
			campos_new   = campos_new || 'DIADOANO = ' || coalesce(quote_literal(new.diadoano), 'null') || ', ';
			campos_new   = campos_new || 'DIADASEMANA = ' || coalesce(quote_literal(new.diadasemana), 'null') || ', ';
			campos_new   = campos_new || 'SEMANACALENDARIO = ' || coalesce(quote_literal(new.semanacalendario), 'null') || ', ';
			campos_new   = campos_new || 'DATAFORMATADA = ' || coalesce(quote_literal(new.dataformatada), 'null') || ', ';
			campos_new   = campos_new || 'QUADRIMESTREDESCRICAO = ' || coalesce(quote_literal(new.quadrimestredescricao), 'null') || ', ';
			campos_new   = campos_new || 'QUADRIMESTREANO = ' || coalesce(quote_literal(new.quadrimestreano), 'null') || ', ';
			campos_new   = campos_new || 'ANOMES = ' || coalesce(quote_literal(new.anomes), 'null') || ', ';
			campos_new   = campos_new || 'ANOSEMANA = ' || coalesce(quote_literal(new.anosemana), 'null') || ', ';
			campos_new   = campos_new || 'MESSEMANA = ' || coalesce(quote_literal(new.messemana), 'null') || ', ';
			campos_new   = campos_new || 'MESSEMANADESC = ' || coalesce(quote_literal(new.messemanadesc), 'null') || ', ';
			campos_new   = campos_new || 'INICIOSEMANA = ' || coalesce(quote_literal(new.iniciosemana), 'null') || ', ';
			campos_new   = campos_new || 'FIMSEMANA = ' || coalesce(quote_literal(new.fimsemana), 'null') || ', ';
			campos_new   = campos_new || 'PRIMEIROMES = ' || coalesce(quote_literal(new.primeiromes), 'null') || ', ';
			campos_new   = campos_new || 'ULTIMODIAMES = ' || coalesce(quote_literal(new.ultimodiames), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.data), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE DIMENSAOTEMPO SET ';
			sql_rolback = 'UPDATE DIMENSAOTEMPO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.data &lt;&gt; old.data) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATA = ' || coalesce(quote_literal(new.data), 'null');
				sql_rolback = sql_rolback || ' DATA = ' || coalesce(quote_literal(old.data), 'null');
				campos_new  = campos_new  || ' DATA = ' || coalesce(quote_literal(new.data), 'null');
				campos_old  = campos_old  || ' DATA = ' || coalesce(quote_literal(old.data), 'null');
				first = false;
			end if;

			if (new.ano &lt;&gt; old.ano) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ANO = ' || coalesce(quote_literal(new.ano), 'null');
				sql_rolback = sql_rolback || ' ANO = ' || coalesce(quote_literal(old.ano), 'null');
				campos_new  = campos_new  || ' ANO = ' || coalesce(quote_literal(new.ano), 'null');
				campos_old  = campos_old  || ' ANO = ' || coalesce(quote_literal(old.ano), 'null');
				first = false;
			end if;

			if (new.mes &lt;&gt; old.mes) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MES = ' || coalesce(quote_literal(new.mes), 'null');
				sql_rolback = sql_rolback || ' MES = ' || coalesce(quote_literal(old.mes), 'null');
				campos_new  = campos_new  || ' MES = ' || coalesce(quote_literal(new.mes), 'null');
				campos_old  = campos_old  || ' MES = ' || coalesce(quote_literal(old.mes), 'null');
				first = false;
			end if;

			if (new.nomemes &lt;&gt; old.nomemes) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMES = ' || coalesce(quote_literal(new.nomemes), 'null');
				sql_rolback = sql_rolback || ' NOMEMES = ' || coalesce(quote_literal(old.nomemes), 'null');
				campos_new  = campos_new  || ' NOMEMES = ' || coalesce(quote_literal(new.nomemes), 'null');
				campos_old  = campos_old  || ' NOMEMES = ' || coalesce(quote_literal(old.nomemes), 'null');
				first = false;
			end if;

			if (new.dia &lt;&gt; old.dia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIA = ' || coalesce(quote_literal(new.dia), 'null');
				sql_rolback = sql_rolback || ' DIA = ' || coalesce(quote_literal(old.dia), 'null');
				campos_new  = campos_new  || ' DIA = ' || coalesce(quote_literal(new.dia), 'null');
				campos_old  = campos_old  || ' DIA = ' || coalesce(quote_literal(old.dia), 'null');
				first = false;
			end if;

			if (new.diadoano &lt;&gt; old.diadoano) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIADOANO = ' || coalesce(quote_literal(new.diadoano), 'null');
				sql_rolback = sql_rolback || ' DIADOANO = ' || coalesce(quote_literal(old.diadoano), 'null');
				campos_new  = campos_new  || ' DIADOANO = ' || coalesce(quote_literal(new.diadoano), 'null');
				campos_old  = campos_old  || ' DIADOANO = ' || coalesce(quote_literal(old.diadoano), 'null');
				first = false;
			end if;

			if (new.diadasemana &lt;&gt; old.diadasemana) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIADASEMANA = ' || coalesce(quote_literal(new.diadasemana), 'null');
				sql_rolback = sql_rolback || ' DIADASEMANA = ' || coalesce(quote_literal(old.diadasemana), 'null');
				campos_new  = campos_new  || ' DIADASEMANA = ' || coalesce(quote_literal(new.diadasemana), 'null');
				campos_old  = campos_old  || ' DIADASEMANA = ' || coalesce(quote_literal(old.diadasemana), 'null');
				first = false;
			end if;

			if (new.semanacalendario &lt;&gt; old.semanacalendario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEMANACALENDARIO = ' || coalesce(quote_literal(new.semanacalendario), 'null');
				sql_rolback = sql_rolback || ' SEMANACALENDARIO = ' || coalesce(quote_literal(old.semanacalendario), 'null');
				campos_new  = campos_new  || ' SEMANACALENDARIO = ' || coalesce(quote_literal(new.semanacalendario), 'null');
				campos_old  = campos_old  || ' SEMANACALENDARIO = ' || coalesce(quote_literal(old.semanacalendario), 'null');
				first = false;
			end if;

			if (new.dataformatada &lt;&gt; old.dataformatada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFORMATADA = ' || coalesce(quote_literal(new.dataformatada), 'null');
				sql_rolback = sql_rolback || ' DATAFORMATADA = ' || coalesce(quote_literal(old.dataformatada), 'null');
				campos_new  = campos_new  || ' DATAFORMATADA = ' || coalesce(quote_literal(new.dataformatada), 'null');
				campos_old  = campos_old  || ' DATAFORMATADA = ' || coalesce(quote_literal(old.dataformatada), 'null');
				first = false;
			end if;

			if (new.quadrimestredescricao &lt;&gt; old.quadrimestredescricao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUADRIMESTREDESCRICAO = ' || coalesce(quote_literal(new.quadrimestredescricao), 'null');
				sql_rolback = sql_rolback || ' QUADRIMESTREDESCRICAO = ' || coalesce(quote_literal(old.quadrimestredescricao), 'null');
				campos_new  = campos_new  || ' QUADRIMESTREDESCRICAO = ' || coalesce(quote_literal(new.quadrimestredescricao), 'null');
				campos_old  = campos_old  || ' QUADRIMESTREDESCRICAO = ' || coalesce(quote_literal(old.quadrimestredescricao), 'null');
				first = false;
			end if;

			if (new.quadrimestreano &lt;&gt; old.quadrimestreano) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUADRIMESTREANO = ' || coalesce(quote_literal(new.quadrimestreano), 'null');
				sql_rolback = sql_rolback || ' QUADRIMESTREANO = ' || coalesce(quote_literal(old.quadrimestreano), 'null');
				campos_new  = campos_new  || ' QUADRIMESTREANO = ' || coalesce(quote_literal(new.quadrimestreano), 'null');
				campos_old  = campos_old  || ' QUADRIMESTREANO = ' || coalesce(quote_literal(old.quadrimestreano), 'null');
				first = false;
			end if;

			if (new.anomes &lt;&gt; old.anomes) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ANOMES = ' || coalesce(quote_literal(new.anomes), 'null');
				sql_rolback = sql_rolback || ' ANOMES = ' || coalesce(quote_literal(old.anomes), 'null');
				campos_new  = campos_new  || ' ANOMES = ' || coalesce(quote_literal(new.anomes), 'null');
				campos_old  = campos_old  || ' ANOMES = ' || coalesce(quote_literal(old.anomes), 'null');
				first = false;
			end if;

			if (new.anosemana &lt;&gt; old.anosemana) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ANOSEMANA = ' || coalesce(quote_literal(new.anosemana), 'null');
				sql_rolback = sql_rolback || ' ANOSEMANA = ' || coalesce(quote_literal(old.anosemana), 'null');
				campos_new  = campos_new  || ' ANOSEMANA = ' || coalesce(quote_literal(new.anosemana), 'null');
				campos_old  = campos_old  || ' ANOSEMANA = ' || coalesce(quote_literal(old.anosemana), 'null');
				first = false;
			end if;

			if (new.messemana &lt;&gt; old.messemana) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MESSEMANA = ' || coalesce(quote_literal(new.messemana), 'null');
				sql_rolback = sql_rolback || ' MESSEMANA = ' || coalesce(quote_literal(old.messemana), 'null');
				campos_new  = campos_new  || ' MESSEMANA = ' || coalesce(quote_literal(new.messemana), 'null');
				campos_old  = campos_old  || ' MESSEMANA = ' || coalesce(quote_literal(old.messemana), 'null');
				first = false;
			end if;

			if (new.messemanadesc &lt;&gt; old.messemanadesc) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MESSEMANADESC = ' || coalesce(quote_literal(new.messemanadesc), 'null');
				sql_rolback = sql_rolback || ' MESSEMANADESC = ' || coalesce(quote_literal(old.messemanadesc), 'null');
				campos_new  = campos_new  || ' MESSEMANADESC = ' || coalesce(quote_literal(new.messemanadesc), 'null');
				campos_old  = campos_old  || ' MESSEMANADESC = ' || coalesce(quote_literal(old.messemanadesc), 'null');
				first = false;
			end if;

			if (new.iniciosemana &lt;&gt; old.iniciosemana) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INICIOSEMANA = ' || coalesce(quote_literal(new.iniciosemana), 'null');
				sql_rolback = sql_rolback || ' INICIOSEMANA = ' || coalesce(quote_literal(old.iniciosemana), 'null');
				campos_new  = campos_new  || ' INICIOSEMANA = ' || coalesce(quote_literal(new.iniciosemana), 'null');
				campos_old  = campos_old  || ' INICIOSEMANA = ' || coalesce(quote_literal(old.iniciosemana), 'null');
				first = false;
			end if;

			if (new.fimsemana &lt;&gt; old.fimsemana) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FIMSEMANA = ' || coalesce(quote_literal(new.fimsemana), 'null');
				sql_rolback = sql_rolback || ' FIMSEMANA = ' || coalesce(quote_literal(old.fimsemana), 'null');
				campos_new  = campos_new  || ' FIMSEMANA = ' || coalesce(quote_literal(new.fimsemana), 'null');
				campos_old  = campos_old  || ' FIMSEMANA = ' || coalesce(quote_literal(old.fimsemana), 'null');
				first = false;
			end if;

			if (new.primeiromes &lt;&gt; old.primeiromes) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRIMEIROMES = ' || coalesce(quote_literal(new.primeiromes), 'null');
				sql_rolback = sql_rolback || ' PRIMEIROMES = ' || coalesce(quote_literal(old.primeiromes), 'null');
				campos_new  = campos_new  || ' PRIMEIROMES = ' || coalesce(quote_literal(new.primeiromes), 'null');
				campos_old  = campos_old  || ' PRIMEIROMES = ' || coalesce(quote_literal(old.primeiromes), 'null');
				first = false;
			end if;

			if (new.ultimodiames &lt;&gt; old.ultimodiames) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ULTIMODIAMES = ' || coalesce(quote_literal(new.ultimodiames), 'null');
				sql_rolback = sql_rolback || ' ULTIMODIAMES = ' || coalesce(quote_literal(old.ultimodiames), 'null');
				campos_new  = campos_new  || ' ULTIMODIAMES = ' || coalesce(quote_literal(new.ultimodiames), 'null');
				campos_old  = campos_old  || ' ULTIMODIAMES = ' || coalesce(quote_literal(old.ultimodiames), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE DATA = ' || coalesce(quote_literal(new.data), 'null');
			sql_rolback = sql_rolback  || ' WHERE DATA = ' || coalesce(quote_literal(new.data), 'null');

			sql_chave = coalesce(quote_literal(new.data), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO DIMENSAOTEMPO (DATA, ANO, MES, NOMEMES, DIA, DIADOANO, DIADASEMANA, SEMANACALENDARIO, DATAFORMATADA, QUADRIMESTREDESCRICAO, QUADRIMESTREANO, ANOMES, ANOSEMANA, MESSEMANA, MESSEMANADESC, INICIOSEMANA, FIMSEMANA, PRIMEIROMES, ULTIMODIAMES, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.data), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ano), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.mes), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemes), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diadoano), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diadasemana), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.semanacalendario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataformatada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quadrimestredescricao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quadrimestreano), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.anomes), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.anosemana), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.messemana), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.messemanadesc), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.iniciosemana), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fimsemana), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.primeiromes), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ultimodiames), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM DIMENSAOTEMPO WHERE DATA = ' || coalesce(quote_literal(old.data), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'DATA = ' || coalesce(quote_literal(old.data), 'null') || ', ';
			campos_old  = campos_old || 'ANO = ' || coalesce(quote_literal(old.ano), 'null') || ', ';
			campos_old  = campos_old || 'MES = ' || coalesce(quote_literal(old.mes), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMES = ' || coalesce(quote_literal(old.nomemes), 'null') || ', ';
			campos_old  = campos_old || 'DIA = ' || coalesce(quote_literal(old.dia), 'null') || ', ';
			campos_old  = campos_old || 'DIADOANO = ' || coalesce(quote_literal(old.diadoano), 'null') || ', ';
			campos_old  = campos_old || 'DIADASEMANA = ' || coalesce(quote_literal(old.diadasemana), 'null') || ', ';
			campos_old  = campos_old || 'SEMANACALENDARIO = ' || coalesce(quote_literal(old.semanacalendario), 'null') || ', ';
			campos_old  = campos_old || 'DATAFORMATADA = ' || coalesce(quote_literal(old.dataformatada), 'null') || ', ';
			campos_old  = campos_old || 'QUADRIMESTREDESCRICAO = ' || coalesce(quote_literal(old.quadrimestredescricao), 'null') || ', ';
			campos_old  = campos_old || 'QUADRIMESTREANO = ' || coalesce(quote_literal(old.quadrimestreano), 'null') || ', ';
			campos_old  = campos_old || 'ANOMES = ' || coalesce(quote_literal(old.anomes), 'null') || ', ';
			campos_old  = campos_old || 'ANOSEMANA = ' || coalesce(quote_literal(old.anosemana), 'null') || ', ';
			campos_old  = campos_old || 'MESSEMANA = ' || coalesce(quote_literal(old.messemana), 'null') || ', ';
			campos_old  = campos_old || 'MESSEMANADESC = ' || coalesce(quote_literal(old.messemanadesc), 'null') || ', ';
			campos_old  = campos_old || 'INICIOSEMANA = ' || coalesce(quote_literal(old.iniciosemana), 'null') || ', ';
			campos_old  = campos_old || 'FIMSEMANA = ' || coalesce(quote_literal(old.fimsemana), 'null') || ', ';
			campos_old  = campos_old || 'PRIMEIROMES = ' || coalesce(quote_literal(old.primeiromes), 'null') || ', ';
			campos_old  = campos_old || 'ULTIMODIAMES = ' || coalesce(quote_literal(old.ultimodiames), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.data), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'dimensaotempo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('dimensaotempo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('dimensaotempo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_distribuicaocusto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_distribuicaocusto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO DISTRIBUICAOCUSTO (CODIGODISTRIBUICAOCUSTO, CODIGOEMPRESA, CODIGOLOJA, PERCENTUALCUSTO, CODIGOPLANOCONTA, CODIGOEMPRESAREFERENCIA, CODIGOLOJAREFERENCIA, DATAINICIALDISTRIBUICAOCUSTO, DATAFINALDISTRIBUICAOCUSTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigodistribuicaocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualcusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresareferencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojareferencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialdistribuicaocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinaldistribuicaocusto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM DISTRIBUICAOCUSTO WHERE CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.codigodistribuicaocusto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.codigodistribuicaocusto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALCUSTO = ' || coalesce(quote_literal(new.percentualcusto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAREFERENCIA = ' || coalesce(quote_literal(new.codigoempresareferencia), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAREFERENCIA = ' || coalesce(quote_literal(new.codigolojareferencia), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.datainicialdistribuicaocusto), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.datafinaldistribuicaocusto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigodistribuicaocusto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE DISTRIBUICAOCUSTO SET ';
			sql_rolback = 'UPDATE DISTRIBUICAOCUSTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigodistribuicaocusto &lt;&gt; old.codigodistribuicaocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.codigodistribuicaocusto), 'null');
				sql_rolback = sql_rolback || ' CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.codigodistribuicaocusto), 'null');
				campos_new  = campos_new  || ' CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.codigodistribuicaocusto), 'null');
				campos_old  = campos_old  || ' CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.codigodistribuicaocusto), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.percentualcusto &lt;&gt; old.percentualcusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALCUSTO = ' || coalesce(quote_literal(new.percentualcusto), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALCUSTO = ' || coalesce(quote_literal(old.percentualcusto), 'null');
				campos_new  = campos_new  || ' PERCENTUALCUSTO = ' || coalesce(quote_literal(new.percentualcusto), 'null');
				campos_old  = campos_old  || ' PERCENTUALCUSTO = ' || coalesce(quote_literal(old.percentualcusto), 'null');
				first = false;
			end if;

			if (new.codigoplanoconta &lt;&gt; old.codigoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				first = false;
			end if;

			if (new.codigoempresareferencia &lt;&gt; old.codigoempresareferencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAREFERENCIA = ' || coalesce(quote_literal(new.codigoempresareferencia), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAREFERENCIA = ' || coalesce(quote_literal(old.codigoempresareferencia), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAREFERENCIA = ' || coalesce(quote_literal(new.codigoempresareferencia), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAREFERENCIA = ' || coalesce(quote_literal(old.codigoempresareferencia), 'null');
				first = false;
			end if;

			if (new.codigolojareferencia &lt;&gt; old.codigolojareferencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAREFERENCIA = ' || coalesce(quote_literal(new.codigolojareferencia), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAREFERENCIA = ' || coalesce(quote_literal(old.codigolojareferencia), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAREFERENCIA = ' || coalesce(quote_literal(new.codigolojareferencia), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAREFERENCIA = ' || coalesce(quote_literal(old.codigolojareferencia), 'null');
				first = false;
			end if;

			if (new.datainicialdistribuicaocusto &lt;&gt; old.datainicialdistribuicaocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.datainicialdistribuicaocusto), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.datainicialdistribuicaocusto), 'null');
				campos_new  = campos_new  || ' DATAINICIALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.datainicialdistribuicaocusto), 'null');
				campos_old  = campos_old  || ' DATAINICIALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.datainicialdistribuicaocusto), 'null');
				first = false;
			end if;

			if (new.datafinaldistribuicaocusto &lt;&gt; old.datafinaldistribuicaocusto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.datafinaldistribuicaocusto), 'null');
				sql_rolback = sql_rolback || ' DATAFINALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.datafinaldistribuicaocusto), 'null');
				campos_new  = campos_new  || ' DATAFINALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.datafinaldistribuicaocusto), 'null');
				campos_old  = campos_old  || ' DATAFINALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.datafinaldistribuicaocusto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.codigodistribuicaocusto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(new.codigodistribuicaocusto), 'null');

			sql_chave = coalesce(quote_literal(new.codigodistribuicaocusto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO DISTRIBUICAOCUSTO (CODIGODISTRIBUICAOCUSTO, CODIGOEMPRESA, CODIGOLOJA, PERCENTUALCUSTO, CODIGOPLANOCONTA, CODIGOEMPRESAREFERENCIA, CODIGOLOJAREFERENCIA, DATAINICIALDISTRIBUICAOCUSTO, DATAFINALDISTRIBUICAOCUSTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigodistribuicaocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualcusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresareferencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojareferencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialdistribuicaocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinaldistribuicaocusto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM DISTRIBUICAOCUSTO WHERE CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.codigodistribuicaocusto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGODISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.codigodistribuicaocusto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALCUSTO = ' || coalesce(quote_literal(old.percentualcusto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAREFERENCIA = ' || coalesce(quote_literal(old.codigoempresareferencia), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAREFERENCIA = ' || coalesce(quote_literal(old.codigolojareferencia), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.datainicialdistribuicaocusto), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALDISTRIBUICAOCUSTO = ' || coalesce(quote_literal(old.datafinaldistribuicaocusto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigodistribuicaocusto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'distribuicaocusto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('distribuicaocusto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('distribuicaocusto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_empresa()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_empresa() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO EMPRESA (CODIGOEMPRESA, RAZAOSOCIALEMPRESA, FANTASIAEMPRESA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.razaosocialempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fantasiaempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM EMPRESA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'RAZAOSOCIALEMPRESA = ' || coalesce(quote_literal(new.razaosocialempresa), 'null') || ', ';
			campos_new   = campos_new || 'FANTASIAEMPRESA = ' || coalesce(quote_literal(new.fantasiaempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE EMPRESA SET ';
			sql_rolback = 'UPDATE EMPRESA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.razaosocialempresa &lt;&gt; old.razaosocialempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' RAZAOSOCIALEMPRESA = ' || coalesce(quote_literal(new.razaosocialempresa), 'null');
				sql_rolback = sql_rolback || ' RAZAOSOCIALEMPRESA = ' || coalesce(quote_literal(old.razaosocialempresa), 'null');
				campos_new  = campos_new  || ' RAZAOSOCIALEMPRESA = ' || coalesce(quote_literal(new.razaosocialempresa), 'null');
				campos_old  = campos_old  || ' RAZAOSOCIALEMPRESA = ' || coalesce(quote_literal(old.razaosocialempresa), 'null');
				first = false;
			end if;

			if (new.fantasiaempresa &lt;&gt; old.fantasiaempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FANTASIAEMPRESA = ' || coalesce(quote_literal(new.fantasiaempresa), 'null');
				sql_rolback = sql_rolback || ' FANTASIAEMPRESA = ' || coalesce(quote_literal(old.fantasiaempresa), 'null');
				campos_new  = campos_new  || ' FANTASIAEMPRESA = ' || coalesce(quote_literal(new.fantasiaempresa), 'null');
				campos_old  = campos_old  || ' FANTASIAEMPRESA = ' || coalesce(quote_literal(old.fantasiaempresa), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO EMPRESA (CODIGOEMPRESA, RAZAOSOCIALEMPRESA, FANTASIAEMPRESA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.razaosocialempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fantasiaempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM EMPRESA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'RAZAOSOCIALEMPRESA = ' || coalesce(quote_literal(old.razaosocialempresa), 'null') || ', ';
			campos_old  = campos_old || 'FANTASIAEMPRESA = ' || coalesce(quote_literal(old.fantasiaempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'empresa', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('empresa', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('empresa', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_enderecopessoa()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_enderecopessoa() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ENDERECOPESSOA (CODIGOPESSOA, CODIGOEMPRESA, CODIGOLOJA, CODIGOENDERECOPESSOA, EMAILENDERECOPESSOA, LOGRADOUROENDERECOPESSOA, BAIRROENDERECOPESSOA, CODIGOCIDADEENDERECOPESSOA, CEPENDERECOPESSOA, FONE1ENDERECOPESSOA, FONE2ENDERECOPESSOA, TIPOENDERECOPESSOA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CPFCNPJENDERECOPESSOA, FANTASIAAPELIDOENDERECOPESSOA, INSCRICAOESTADUALENDERECOPESSOA, INSCRICAOMUNICIPALENDERECOPESSOA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.emailenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.logradouroenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.bairroenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocidadeenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cependerecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone1enderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone2enderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipoenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cpfcnpjenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fantasiaapelidoenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.inscricaoestadualenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.inscricaomunicipalenderecopessoa), 'null') || ')';

			sql_rolback = 'DELETE FROM ENDERECOPESSOA WHERE CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'EMAILENDERECOPESSOA = ' || coalesce(quote_literal(new.emailenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'LOGRADOUROENDERECOPESSOA = ' || coalesce(quote_literal(new.logradouroenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'BAIRROENDERECOPESSOA = ' || coalesce(quote_literal(new.bairroenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCIDADEENDERECOPESSOA = ' || coalesce(quote_literal(new.codigocidadeenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CEPENDERECOPESSOA = ' || coalesce(quote_literal(new.cependerecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'FONE1ENDERECOPESSOA = ' || coalesce(quote_literal(new.fone1enderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'FONE2ENDERECOPESSOA = ' || coalesce(quote_literal(new.fone2enderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'TIPOENDERECOPESSOA = ' || coalesce(quote_literal(new.tipoenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CPFCNPJENDERECOPESSOA = ' || coalesce(quote_literal(new.cpfcnpjenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'FANTASIAAPELIDOENDERECOPESSOA = ' || coalesce(quote_literal(new.fantasiaapelidoenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'INSCRICAOESTADUALENDERECOPESSOA = ' || coalesce(quote_literal(new.inscricaoestadualenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'INSCRICAOMUNICIPALENDERECOPESSOA = ' || coalesce(quote_literal(new.inscricaomunicipalenderecopessoa), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ENDERECOPESSOA SET ';
			sql_rolback = 'UPDATE ENDERECOPESSOA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoa &lt;&gt; old.codigoenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');
				first = false;
			end if;

			if (new.emailenderecopessoa &lt;&gt; old.emailenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EMAILENDERECOPESSOA = ' || coalesce(quote_literal(new.emailenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' EMAILENDERECOPESSOA = ' || coalesce(quote_literal(old.emailenderecopessoa), 'null');
				campos_new  = campos_new  || ' EMAILENDERECOPESSOA = ' || coalesce(quote_literal(new.emailenderecopessoa), 'null');
				campos_old  = campos_old  || ' EMAILENDERECOPESSOA = ' || coalesce(quote_literal(old.emailenderecopessoa), 'null');
				first = false;
			end if;

			if (new.logradouroenderecopessoa &lt;&gt; old.logradouroenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' LOGRADOUROENDERECOPESSOA = ' || coalesce(quote_literal(new.logradouroenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' LOGRADOUROENDERECOPESSOA = ' || coalesce(quote_literal(old.logradouroenderecopessoa), 'null');
				campos_new  = campos_new  || ' LOGRADOUROENDERECOPESSOA = ' || coalesce(quote_literal(new.logradouroenderecopessoa), 'null');
				campos_old  = campos_old  || ' LOGRADOUROENDERECOPESSOA = ' || coalesce(quote_literal(old.logradouroenderecopessoa), 'null');
				first = false;
			end if;

			if (new.bairroenderecopessoa &lt;&gt; old.bairroenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BAIRROENDERECOPESSOA = ' || coalesce(quote_literal(new.bairroenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' BAIRROENDERECOPESSOA = ' || coalesce(quote_literal(old.bairroenderecopessoa), 'null');
				campos_new  = campos_new  || ' BAIRROENDERECOPESSOA = ' || coalesce(quote_literal(new.bairroenderecopessoa), 'null');
				campos_old  = campos_old  || ' BAIRROENDERECOPESSOA = ' || coalesce(quote_literal(old.bairroenderecopessoa), 'null');
				first = false;
			end if;

			if (new.codigocidadeenderecopessoa &lt;&gt; old.codigocidadeenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCIDADEENDERECOPESSOA = ' || coalesce(quote_literal(new.codigocidadeenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOCIDADEENDERECOPESSOA = ' || coalesce(quote_literal(old.codigocidadeenderecopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOCIDADEENDERECOPESSOA = ' || coalesce(quote_literal(new.codigocidadeenderecopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOCIDADEENDERECOPESSOA = ' || coalesce(quote_literal(old.codigocidadeenderecopessoa), 'null');
				first = false;
			end if;

			if (new.cependerecopessoa &lt;&gt; old.cependerecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CEPENDERECOPESSOA = ' || coalesce(quote_literal(new.cependerecopessoa), 'null');
				sql_rolback = sql_rolback || ' CEPENDERECOPESSOA = ' || coalesce(quote_literal(old.cependerecopessoa), 'null');
				campos_new  = campos_new  || ' CEPENDERECOPESSOA = ' || coalesce(quote_literal(new.cependerecopessoa), 'null');
				campos_old  = campos_old  || ' CEPENDERECOPESSOA = ' || coalesce(quote_literal(old.cependerecopessoa), 'null');
				first = false;
			end if;

			if (new.fone1enderecopessoa &lt;&gt; old.fone1enderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE1ENDERECOPESSOA = ' || coalesce(quote_literal(new.fone1enderecopessoa), 'null');
				sql_rolback = sql_rolback || ' FONE1ENDERECOPESSOA = ' || coalesce(quote_literal(old.fone1enderecopessoa), 'null');
				campos_new  = campos_new  || ' FONE1ENDERECOPESSOA = ' || coalesce(quote_literal(new.fone1enderecopessoa), 'null');
				campos_old  = campos_old  || ' FONE1ENDERECOPESSOA = ' || coalesce(quote_literal(old.fone1enderecopessoa), 'null');
				first = false;
			end if;

			if (new.fone2enderecopessoa &lt;&gt; old.fone2enderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE2ENDERECOPESSOA = ' || coalesce(quote_literal(new.fone2enderecopessoa), 'null');
				sql_rolback = sql_rolback || ' FONE2ENDERECOPESSOA = ' || coalesce(quote_literal(old.fone2enderecopessoa), 'null');
				campos_new  = campos_new  || ' FONE2ENDERECOPESSOA = ' || coalesce(quote_literal(new.fone2enderecopessoa), 'null');
				campos_old  = campos_old  || ' FONE2ENDERECOPESSOA = ' || coalesce(quote_literal(old.fone2enderecopessoa), 'null');
				first = false;
			end if;

			if (new.tipoenderecopessoa &lt;&gt; old.tipoenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOENDERECOPESSOA = ' || coalesce(quote_literal(new.tipoenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' TIPOENDERECOPESSOA = ' || coalesce(quote_literal(old.tipoenderecopessoa), 'null');
				campos_new  = campos_new  || ' TIPOENDERECOPESSOA = ' || coalesce(quote_literal(new.tipoenderecopessoa), 'null');
				campos_old  = campos_old  || ' TIPOENDERECOPESSOA = ' || coalesce(quote_literal(old.tipoenderecopessoa), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.cpfcnpjenderecopessoa &lt;&gt; old.cpfcnpjenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CPFCNPJENDERECOPESSOA = ' || coalesce(quote_literal(new.cpfcnpjenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CPFCNPJENDERECOPESSOA = ' || coalesce(quote_literal(old.cpfcnpjenderecopessoa), 'null');
				campos_new  = campos_new  || ' CPFCNPJENDERECOPESSOA = ' || coalesce(quote_literal(new.cpfcnpjenderecopessoa), 'null');
				campos_old  = campos_old  || ' CPFCNPJENDERECOPESSOA = ' || coalesce(quote_literal(old.cpfcnpjenderecopessoa), 'null');
				first = false;
			end if;

			if (new.fantasiaapelidoenderecopessoa &lt;&gt; old.fantasiaapelidoenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FANTASIAAPELIDOENDERECOPESSOA = ' || coalesce(quote_literal(new.fantasiaapelidoenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' FANTASIAAPELIDOENDERECOPESSOA = ' || coalesce(quote_literal(old.fantasiaapelidoenderecopessoa), 'null');
				campos_new  = campos_new  || ' FANTASIAAPELIDOENDERECOPESSOA = ' || coalesce(quote_literal(new.fantasiaapelidoenderecopessoa), 'null');
				campos_old  = campos_old  || ' FANTASIAAPELIDOENDERECOPESSOA = ' || coalesce(quote_literal(old.fantasiaapelidoenderecopessoa), 'null');
				first = false;
			end if;

			if (new.inscricaoestadualenderecopessoa &lt;&gt; old.inscricaoestadualenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INSCRICAOESTADUALENDERECOPESSOA = ' || coalesce(quote_literal(new.inscricaoestadualenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' INSCRICAOESTADUALENDERECOPESSOA = ' || coalesce(quote_literal(old.inscricaoestadualenderecopessoa), 'null');
				campos_new  = campos_new  || ' INSCRICAOESTADUALENDERECOPESSOA = ' || coalesce(quote_literal(new.inscricaoestadualenderecopessoa), 'null');
				campos_old  = campos_old  || ' INSCRICAOESTADUALENDERECOPESSOA = ' || coalesce(quote_literal(old.inscricaoestadualenderecopessoa), 'null');
				first = false;
			end if;

			if (new.inscricaomunicipalenderecopessoa &lt;&gt; old.inscricaomunicipalenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INSCRICAOMUNICIPALENDERECOPESSOA = ' || coalesce(quote_literal(new.inscricaomunicipalenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' INSCRICAOMUNICIPALENDERECOPESSOA = ' || coalesce(quote_literal(old.inscricaomunicipalenderecopessoa), 'null');
				campos_new  = campos_new  || ' INSCRICAOMUNICIPALENDERECOPESSOA = ' || coalesce(quote_literal(new.inscricaomunicipalenderecopessoa), 'null');
				campos_old  = campos_old  || ' INSCRICAOMUNICIPALENDERECOPESSOA = ' || coalesce(quote_literal(old.inscricaomunicipalenderecopessoa), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');

			sql_chave = coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ENDERECOPESSOA (CODIGOPESSOA, CODIGOEMPRESA, CODIGOLOJA, CODIGOENDERECOPESSOA, EMAILENDERECOPESSOA, LOGRADOUROENDERECOPESSOA, BAIRROENDERECOPESSOA, CODIGOCIDADEENDERECOPESSOA, CEPENDERECOPESSOA, FONE1ENDERECOPESSOA, FONE2ENDERECOPESSOA, TIPOENDERECOPESSOA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CPFCNPJENDERECOPESSOA, FANTASIAAPELIDOENDERECOPESSOA, INSCRICAOESTADUALENDERECOPESSOA, INSCRICAOMUNICIPALENDERECOPESSOA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.emailenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.logradouroenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.bairroenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocidadeenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cependerecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone1enderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone2enderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipoenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cpfcnpjenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fantasiaapelidoenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.inscricaoestadualenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.inscricaomunicipalenderecopessoa), 'null') || ')';

			sql_replica = 'DELETE FROM ENDERECOPESSOA WHERE CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'EMAILENDERECOPESSOA = ' || coalesce(quote_literal(old.emailenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'LOGRADOUROENDERECOPESSOA = ' || coalesce(quote_literal(old.logradouroenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'BAIRROENDERECOPESSOA = ' || coalesce(quote_literal(old.bairroenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCIDADEENDERECOPESSOA = ' || coalesce(quote_literal(old.codigocidadeenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CEPENDERECOPESSOA = ' || coalesce(quote_literal(old.cependerecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'FONE1ENDERECOPESSOA = ' || coalesce(quote_literal(old.fone1enderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'FONE2ENDERECOPESSOA = ' || coalesce(quote_literal(old.fone2enderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'TIPOENDERECOPESSOA = ' || coalesce(quote_literal(old.tipoenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CPFCNPJENDERECOPESSOA = ' || coalesce(quote_literal(old.cpfcnpjenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'FANTASIAAPELIDOENDERECOPESSOA = ' || coalesce(quote_literal(old.fantasiaapelidoenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'INSCRICAOESTADUALENDERECOPESSOA = ' || coalesce(quote_literal(old.inscricaoestadualenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'INSCRICAOMUNICIPALENDERECOPESSOA = ' || coalesce(quote_literal(old.inscricaomunicipalenderecopessoa), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'enderecopessoa', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('enderecopessoa', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('enderecopessoa', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_entradaestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_entradaestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ENTRADAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOENTRADAESTOQUE, DATAHORAENTRADAESTOQUE, STATUSENTRADAESTOQUE, DATAHORAPROCESSAMENTOENTRADAESTOQUE, CODIGOEMPRESAPESSOA, CODIGOLOJAPESSOA, CODIGOPESSOA, CODIGOENDERECOPESSOA, NUMERODOCUMENTOENTRADAESTOQUE, OBSERVACOESENTRADAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraprocessamentoentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerodocumentoentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ENTRADAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAENTRADAESTOQUE = ' || coalesce(quote_literal(new.datahoraentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'STATUSENTRADAESTOQUE = ' || coalesce(quote_literal(new.statusentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAPROCESSAMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(new.datahoraprocessamentoentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(new.codigoempresapessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPESSOA = ' || coalesce(quote_literal(new.codigolojapessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'NUMERODOCUMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(new.numerodocumentoentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESENTRADAESTOQUE = ' || coalesce(quote_literal(new.observacoesentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ENTRADAESTOQUE SET ';
			sql_rolback = 'UPDATE ENTRADAESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoentradaestoque &lt;&gt; old.codigoentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');
				first = false;
			end if;

			if (new.datahoraentradaestoque &lt;&gt; old.datahoraentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAENTRADAESTOQUE = ' || coalesce(quote_literal(new.datahoraentradaestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAENTRADAESTOQUE = ' || coalesce(quote_literal(old.datahoraentradaestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAENTRADAESTOQUE = ' || coalesce(quote_literal(new.datahoraentradaestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAENTRADAESTOQUE = ' || coalesce(quote_literal(old.datahoraentradaestoque), 'null');
				first = false;
			end if;

			if (new.statusentradaestoque &lt;&gt; old.statusentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSENTRADAESTOQUE = ' || coalesce(quote_literal(new.statusentradaestoque), 'null');
				sql_rolback = sql_rolback || ' STATUSENTRADAESTOQUE = ' || coalesce(quote_literal(old.statusentradaestoque), 'null');
				campos_new  = campos_new  || ' STATUSENTRADAESTOQUE = ' || coalesce(quote_literal(new.statusentradaestoque), 'null');
				campos_old  = campos_old  || ' STATUSENTRADAESTOQUE = ' || coalesce(quote_literal(old.statusentradaestoque), 'null');
				first = false;
			end if;

			if (new.datahoraprocessamentoentradaestoque &lt;&gt; old.datahoraprocessamentoentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAPROCESSAMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(new.datahoraprocessamentoentradaestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAPROCESSAMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(old.datahoraprocessamentoentradaestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAPROCESSAMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(new.datahoraprocessamentoentradaestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAPROCESSAMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(old.datahoraprocessamentoentradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresapessoa &lt;&gt; old.codigoempresapessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(new.codigoempresapessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(old.codigoempresapessoa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(new.codigoempresapessoa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(old.codigoempresapessoa), 'null');
				first = false;
			end if;

			if (new.codigolojapessoa &lt;&gt; old.codigolojapessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(new.codigolojapessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(old.codigolojapessoa), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(new.codigolojapessoa), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(old.codigolojapessoa), 'null');
				first = false;
			end if;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoa &lt;&gt; old.codigoenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');
				first = false;
			end if;

			if (new.numerodocumentoentradaestoque &lt;&gt; old.numerodocumentoentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMERODOCUMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(new.numerodocumentoentradaestoque), 'null');
				sql_rolback = sql_rolback || ' NUMERODOCUMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(old.numerodocumentoentradaestoque), 'null');
				campos_new  = campos_new  || ' NUMERODOCUMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(new.numerodocumentoentradaestoque), 'null');
				campos_old  = campos_old  || ' NUMERODOCUMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(old.numerodocumentoentradaestoque), 'null');
				first = false;
			end if;

			if (new.observacoesentradaestoque &lt;&gt; old.observacoesentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESENTRADAESTOQUE = ' || coalesce(quote_literal(new.observacoesentradaestoque), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESENTRADAESTOQUE = ' || coalesce(quote_literal(old.observacoesentradaestoque), 'null');
				campos_new  = campos_new  || ' OBSERVACOESENTRADAESTOQUE = ' || coalesce(quote_literal(new.observacoesentradaestoque), 'null');
				campos_old  = campos_old  || ' OBSERVACOESENTRADAESTOQUE = ' || coalesce(quote_literal(old.observacoesentradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ENTRADAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOENTRADAESTOQUE, DATAHORAENTRADAESTOQUE, STATUSENTRADAESTOQUE, DATAHORAPROCESSAMENTOENTRADAESTOQUE, CODIGOEMPRESAPESSOA, CODIGOLOJAPESSOA, CODIGOPESSOA, CODIGOENDERECOPESSOA, NUMERODOCUMENTOENTRADAESTOQUE, OBSERVACOESENTRADAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraprocessamentoentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerodocumentoentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ENTRADAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAENTRADAESTOQUE = ' || coalesce(quote_literal(old.datahoraentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'STATUSENTRADAESTOQUE = ' || coalesce(quote_literal(old.statusentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAPROCESSAMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(old.datahoraprocessamentoentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(old.codigoempresapessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPESSOA = ' || coalesce(quote_literal(old.codigolojapessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'NUMERODOCUMENTOENTRADAESTOQUE = ' || coalesce(quote_literal(old.numerodocumentoentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESENTRADAESTOQUE = ' || coalesce(quote_literal(old.observacoesentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoentradaestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'entradaestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('entradaestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('entradaestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_esplanada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_esplanada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ESPLANADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOESPLANADA, NOMEESPLANADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoesplanada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeesplanada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ESPLANADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null') || ', ';
			campos_new   = campos_new || 'NOMEESPLANADA = ' || coalesce(quote_literal(new.nomeesplanada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoesplanada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ESPLANADA SET ';
			sql_rolback = 'UPDATE ESPLANADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoesplanada &lt;&gt; old.codigoesplanada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');
				sql_rolback = sql_rolback || ' CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null');
				campos_new  = campos_new  || ' CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');
				campos_old  = campos_old  || ' CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null');
				first = false;
			end if;

			if (new.nomeesplanada &lt;&gt; old.nomeesplanada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEESPLANADA = ' || coalesce(quote_literal(new.nomeesplanada), 'null');
				sql_rolback = sql_rolback || ' NOMEESPLANADA = ' || coalesce(quote_literal(old.nomeesplanada), 'null');
				campos_new  = campos_new  || ' NOMEESPLANADA = ' || coalesce(quote_literal(new.nomeesplanada), 'null');
				campos_old  = campos_old  || ' NOMEESPLANADA = ' || coalesce(quote_literal(old.nomeesplanada), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoesplanada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ESPLANADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOESPLANADA, NOMEESPLANADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoesplanada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeesplanada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ESPLANADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null') || ', ';
			campos_old  = campos_old || 'NOMEESPLANADA = ' || coalesce(quote_literal(old.nomeesplanada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoesplanada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'esplanada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('esplanada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('esplanada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_essencia()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_essencia() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ESSENCIA (CODIGOESSENCIA, NOMEESSENCIA, CODIGOUSUARIOLOG, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeessencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ESSENCIA WHERE CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			campos_new   = campos_new || 'NOMEESSENCIA = ' || coalesce(quote_literal(new.nomeessencia), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoessencia), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ESSENCIA SET ';
			sql_rolback = 'UPDATE ESSENCIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoessencia &lt;&gt; old.codigoessencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				sql_rolback = sql_rolback || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				campos_new  = campos_new  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				campos_old  = campos_old  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				first = false;
			end if;

			if (new.nomeessencia &lt;&gt; old.nomeessencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEESSENCIA = ' || coalesce(quote_literal(new.nomeessencia), 'null');
				sql_rolback = sql_rolback || ' NOMEESSENCIA = ' || coalesce(quote_literal(old.nomeessencia), 'null');
				campos_new  = campos_new  || ' NOMEESSENCIA = ' || coalesce(quote_literal(new.nomeessencia), 'null');
				campos_old  = campos_old  || ' NOMEESSENCIA = ' || coalesce(quote_literal(old.nomeessencia), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');

			sql_chave = coalesce(quote_literal(new.codigoessencia), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ESSENCIA (CODIGOESSENCIA, NOMEESSENCIA, CODIGOUSUARIOLOG, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeessencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ESSENCIA WHERE CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			campos_old  = campos_old || 'NOMEESSENCIA = ' || coalesce(quote_literal(old.nomeessencia), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoessencia), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'essencia', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('essencia', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('essencia', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_estado()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_estado() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ESTADO (CODIGOESTADO, NOMEESTADO, SIGLAESTADO, CODIGOIBGEESTADO, CODIGOPAIS, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, REGIAOESTADO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoestado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeestado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.siglaestado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoibgeestado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopais), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.regiaoestado), 'null') || ')';

			sql_rolback = 'DELETE FROM ESTADO WHERE CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null') || ', ';
			campos_new   = campos_new || 'NOMEESTADO = ' || coalesce(quote_literal(new.nomeestado), 'null') || ', ';
			campos_new   = campos_new || 'SIGLAESTADO = ' || coalesce(quote_literal(new.siglaestado), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOIBGEESTADO = ' || coalesce(quote_literal(new.codigoibgeestado), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'REGIAOESTADO = ' || coalesce(quote_literal(new.regiaoestado), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoestado), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ESTADO SET ';
			sql_rolback = 'UPDATE ESTADO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoestado &lt;&gt; old.codigoestado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');
				sql_rolback = sql_rolback || ' CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null');
				campos_new  = campos_new  || ' CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');
				campos_old  = campos_old  || ' CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null');
				first = false;
			end if;

			if (new.nomeestado &lt;&gt; old.nomeestado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEESTADO = ' || coalesce(quote_literal(new.nomeestado), 'null');
				sql_rolback = sql_rolback || ' NOMEESTADO = ' || coalesce(quote_literal(old.nomeestado), 'null');
				campos_new  = campos_new  || ' NOMEESTADO = ' || coalesce(quote_literal(new.nomeestado), 'null');
				campos_old  = campos_old  || ' NOMEESTADO = ' || coalesce(quote_literal(old.nomeestado), 'null');
				first = false;
			end if;

			if (new.siglaestado &lt;&gt; old.siglaestado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SIGLAESTADO = ' || coalesce(quote_literal(new.siglaestado), 'null');
				sql_rolback = sql_rolback || ' SIGLAESTADO = ' || coalesce(quote_literal(old.siglaestado), 'null');
				campos_new  = campos_new  || ' SIGLAESTADO = ' || coalesce(quote_literal(new.siglaestado), 'null');
				campos_old  = campos_old  || ' SIGLAESTADO = ' || coalesce(quote_literal(old.siglaestado), 'null');
				first = false;
			end if;

			if (new.codigoibgeestado &lt;&gt; old.codigoibgeestado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOIBGEESTADO = ' || coalesce(quote_literal(new.codigoibgeestado), 'null');
				sql_rolback = sql_rolback || ' CODIGOIBGEESTADO = ' || coalesce(quote_literal(old.codigoibgeestado), 'null');
				campos_new  = campos_new  || ' CODIGOIBGEESTADO = ' || coalesce(quote_literal(new.codigoibgeestado), 'null');
				campos_old  = campos_old  || ' CODIGOIBGEESTADO = ' || coalesce(quote_literal(old.codigoibgeestado), 'null');
				first = false;
			end if;

			if (new.codigopais &lt;&gt; old.codigopais) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');
				sql_rolback = sql_rolback || ' CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null');
				campos_new  = campos_new  || ' CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');
				campos_old  = campos_old  || ' CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.regiaoestado &lt;&gt; old.regiaoestado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' REGIAOESTADO = ' || coalesce(quote_literal(new.regiaoestado), 'null');
				sql_rolback = sql_rolback || ' REGIAOESTADO = ' || coalesce(quote_literal(old.regiaoestado), 'null');
				campos_new  = campos_new  || ' REGIAOESTADO = ' || coalesce(quote_literal(new.regiaoestado), 'null');
				campos_old  = campos_old  || ' REGIAOESTADO = ' || coalesce(quote_literal(old.regiaoestado), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOESTADO = ' || coalesce(quote_literal(new.codigoestado), 'null');

			sql_chave = coalesce(quote_literal(new.codigoestado), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ESTADO (CODIGOESTADO, NOMEESTADO, SIGLAESTADO, CODIGOIBGEESTADO, CODIGOPAIS, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, REGIAOESTADO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoestado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeestado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.siglaestado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoibgeestado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopais), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.regiaoestado), 'null') || ')';

			sql_replica = 'DELETE FROM ESTADO WHERE CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOESTADO = ' || coalesce(quote_literal(old.codigoestado), 'null') || ', ';
			campos_old  = campos_old || 'NOMEESTADO = ' || coalesce(quote_literal(old.nomeestado), 'null') || ', ';
			campos_old  = campos_old || 'SIGLAESTADO = ' || coalesce(quote_literal(old.siglaestado), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOIBGEESTADO = ' || coalesce(quote_literal(old.codigoibgeestado), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'REGIAOESTADO = ' || coalesce(quote_literal(old.regiaoestado), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoestado), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'estado', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('estado', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('estado', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_estoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_estoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, ESTOQUEFISICO, ESTOQUEFISCAL, PRECOMEDIOESTOQUE, DATAPRECOMEDIOESTOQUE, DATAULTIMAENTRADAESTOQUE, LOCACAOESTOQUE, DEMANDAESTOQUE, FREQUENCIAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEDISPLAYESTOQUE, QUANTIDADEGAVETAESTOQUE) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.estoquefisico), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.estoquefiscal), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.precomedioestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataprecomedioestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataultimaentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.locacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.demandaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.frequenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadedisplayestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadegavetaestoque), 'null') || ')';

			sql_rolback = 'DELETE FROM ESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'ESTOQUEFISICO = ' || coalesce(quote_literal(new.estoquefisico), 'null') || ', ';
			campos_new   = campos_new || 'ESTOQUEFISCAL = ' || coalesce(quote_literal(new.estoquefiscal), 'null') || ', ';
			campos_new   = campos_new || 'PRECOMEDIOESTOQUE = ' || coalesce(quote_literal(new.precomedioestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAPRECOMEDIOESTOQUE = ' || coalesce(quote_literal(new.dataprecomedioestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAULTIMAENTRADAESTOQUE = ' || coalesce(quote_literal(new.dataultimaentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'LOCACAOESTOQUE = ' || coalesce(quote_literal(new.locacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'DEMANDAESTOQUE = ' || coalesce(quote_literal(new.demandaestoque), 'null') || ', ';
			campos_new   = campos_new || 'FREQUENCIAESTOQUE = ' || coalesce(quote_literal(new.frequenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEDISPLAYESTOQUE = ' || coalesce(quote_literal(new.quantidadedisplayestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEGAVETAESTOQUE = ' || coalesce(quote_literal(new.quantidadegavetaestoque), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ESTOQUE SET ';
			sql_rolback = 'UPDATE ESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.estoquefisico &lt;&gt; old.estoquefisico) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ESTOQUEFISICO = ' || coalesce(quote_literal(new.estoquefisico), 'null');
				sql_rolback = sql_rolback || ' ESTOQUEFISICO = ' || coalesce(quote_literal(old.estoquefisico), 'null');
				campos_new  = campos_new  || ' ESTOQUEFISICO = ' || coalesce(quote_literal(new.estoquefisico), 'null');
				campos_old  = campos_old  || ' ESTOQUEFISICO = ' || coalesce(quote_literal(old.estoquefisico), 'null');
				first = false;
			end if;

			if (new.estoquefiscal &lt;&gt; old.estoquefiscal) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ESTOQUEFISCAL = ' || coalesce(quote_literal(new.estoquefiscal), 'null');
				sql_rolback = sql_rolback || ' ESTOQUEFISCAL = ' || coalesce(quote_literal(old.estoquefiscal), 'null');
				campos_new  = campos_new  || ' ESTOQUEFISCAL = ' || coalesce(quote_literal(new.estoquefiscal), 'null');
				campos_old  = campos_old  || ' ESTOQUEFISCAL = ' || coalesce(quote_literal(old.estoquefiscal), 'null');
				first = false;
			end if;

			if (new.precomedioestoque &lt;&gt; old.precomedioestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRECOMEDIOESTOQUE = ' || coalesce(quote_literal(new.precomedioestoque), 'null');
				sql_rolback = sql_rolback || ' PRECOMEDIOESTOQUE = ' || coalesce(quote_literal(old.precomedioestoque), 'null');
				campos_new  = campos_new  || ' PRECOMEDIOESTOQUE = ' || coalesce(quote_literal(new.precomedioestoque), 'null');
				campos_old  = campos_old  || ' PRECOMEDIOESTOQUE = ' || coalesce(quote_literal(old.precomedioestoque), 'null');
				first = false;
			end if;

			if (new.dataprecomedioestoque &lt;&gt; old.dataprecomedioestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAPRECOMEDIOESTOQUE = ' || coalesce(quote_literal(new.dataprecomedioestoque), 'null');
				sql_rolback = sql_rolback || ' DATAPRECOMEDIOESTOQUE = ' || coalesce(quote_literal(old.dataprecomedioestoque), 'null');
				campos_new  = campos_new  || ' DATAPRECOMEDIOESTOQUE = ' || coalesce(quote_literal(new.dataprecomedioestoque), 'null');
				campos_old  = campos_old  || ' DATAPRECOMEDIOESTOQUE = ' || coalesce(quote_literal(old.dataprecomedioestoque), 'null');
				first = false;
			end if;

			if (new.dataultimaentradaestoque &lt;&gt; old.dataultimaentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAULTIMAENTRADAESTOQUE = ' || coalesce(quote_literal(new.dataultimaentradaestoque), 'null');
				sql_rolback = sql_rolback || ' DATAULTIMAENTRADAESTOQUE = ' || coalesce(quote_literal(old.dataultimaentradaestoque), 'null');
				campos_new  = campos_new  || ' DATAULTIMAENTRADAESTOQUE = ' || coalesce(quote_literal(new.dataultimaentradaestoque), 'null');
				campos_old  = campos_old  || ' DATAULTIMAENTRADAESTOQUE = ' || coalesce(quote_literal(old.dataultimaentradaestoque), 'null');
				first = false;
			end if;

			if (new.locacaoestoque &lt;&gt; old.locacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' LOCACAOESTOQUE = ' || coalesce(quote_literal(new.locacaoestoque), 'null');
				sql_rolback = sql_rolback || ' LOCACAOESTOQUE = ' || coalesce(quote_literal(old.locacaoestoque), 'null');
				campos_new  = campos_new  || ' LOCACAOESTOQUE = ' || coalesce(quote_literal(new.locacaoestoque), 'null');
				campos_old  = campos_old  || ' LOCACAOESTOQUE = ' || coalesce(quote_literal(old.locacaoestoque), 'null');
				first = false;
			end if;

			if (new.demandaestoque &lt;&gt; old.demandaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DEMANDAESTOQUE = ' || coalesce(quote_literal(new.demandaestoque), 'null');
				sql_rolback = sql_rolback || ' DEMANDAESTOQUE = ' || coalesce(quote_literal(old.demandaestoque), 'null');
				campos_new  = campos_new  || ' DEMANDAESTOQUE = ' || coalesce(quote_literal(new.demandaestoque), 'null');
				campos_old  = campos_old  || ' DEMANDAESTOQUE = ' || coalesce(quote_literal(old.demandaestoque), 'null');
				first = false;
			end if;

			if (new.frequenciaestoque &lt;&gt; old.frequenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FREQUENCIAESTOQUE = ' || coalesce(quote_literal(new.frequenciaestoque), 'null');
				sql_rolback = sql_rolback || ' FREQUENCIAESTOQUE = ' || coalesce(quote_literal(old.frequenciaestoque), 'null');
				campos_new  = campos_new  || ' FREQUENCIAESTOQUE = ' || coalesce(quote_literal(new.frequenciaestoque), 'null');
				campos_old  = campos_old  || ' FREQUENCIAESTOQUE = ' || coalesce(quote_literal(old.frequenciaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.quantidadedisplayestoque &lt;&gt; old.quantidadedisplayestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEDISPLAYESTOQUE = ' || coalesce(quote_literal(new.quantidadedisplayestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEDISPLAYESTOQUE = ' || coalesce(quote_literal(old.quantidadedisplayestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEDISPLAYESTOQUE = ' || coalesce(quote_literal(new.quantidadedisplayestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEDISPLAYESTOQUE = ' || coalesce(quote_literal(old.quantidadedisplayestoque), 'null');
				first = false;
			end if;

			if (new.quantidadegavetaestoque &lt;&gt; old.quantidadegavetaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEGAVETAESTOQUE = ' || coalesce(quote_literal(new.quantidadegavetaestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEGAVETAESTOQUE = ' || coalesce(quote_literal(old.quantidadegavetaestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEGAVETAESTOQUE = ' || coalesce(quote_literal(new.quantidadegavetaestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEGAVETAESTOQUE = ' || coalesce(quote_literal(old.quantidadegavetaestoque), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, ESTOQUEFISICO, ESTOQUEFISCAL, PRECOMEDIOESTOQUE, DATAPRECOMEDIOESTOQUE, DATAULTIMAENTRADAESTOQUE, LOCACAOESTOQUE, DEMANDAESTOQUE, FREQUENCIAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEDISPLAYESTOQUE, QUANTIDADEGAVETAESTOQUE) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.estoquefisico), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.estoquefiscal), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.precomedioestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataprecomedioestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataultimaentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.locacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.demandaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.frequenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadedisplayestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadegavetaestoque), 'null') || ')';

			sql_replica = 'DELETE FROM ESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'ESTOQUEFISICO = ' || coalesce(quote_literal(old.estoquefisico), 'null') || ', ';
			campos_old  = campos_old || 'ESTOQUEFISCAL = ' || coalesce(quote_literal(old.estoquefiscal), 'null') || ', ';
			campos_old  = campos_old || 'PRECOMEDIOESTOQUE = ' || coalesce(quote_literal(old.precomedioestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAPRECOMEDIOESTOQUE = ' || coalesce(quote_literal(old.dataprecomedioestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAULTIMAENTRADAESTOQUE = ' || coalesce(quote_literal(old.dataultimaentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'LOCACAOESTOQUE = ' || coalesce(quote_literal(old.locacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'DEMANDAESTOQUE = ' || coalesce(quote_literal(old.demandaestoque), 'null') || ', ';
			campos_old  = campos_old || 'FREQUENCIAESTOQUE = ' || coalesce(quote_literal(old.frequenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEDISPLAYESTOQUE = ' || coalesce(quote_literal(old.quantidadedisplayestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEGAVETAESTOQUE = ' || coalesce(quote_literal(old.quantidadegavetaestoque), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'estoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('estoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('estoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_fabricante()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_fabricante() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FABRICANTE (CODIGOFABRICANTE, NOMEFABRICANTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofabricante), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomefabricante), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FABRICANTE WHERE CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null') || ', ';
			campos_new   = campos_new || 'NOMEFABRICANTE = ' || coalesce(quote_literal(new.nomefabricante), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigofabricante), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FABRICANTE SET ';
			sql_rolback = 'UPDATE FABRICANTE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigofabricante &lt;&gt; old.codigofabricante) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');
				sql_rolback = sql_rolback || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null');
				campos_new  = campos_new  || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');
				campos_old  = campos_old  || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null');
				first = false;
			end if;

			if (new.nomefabricante &lt;&gt; old.nomefabricante) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEFABRICANTE = ' || coalesce(quote_literal(new.nomefabricante), 'null');
				sql_rolback = sql_rolback || ' NOMEFABRICANTE = ' || coalesce(quote_literal(old.nomefabricante), 'null');
				campos_new  = campos_new  || ' NOMEFABRICANTE = ' || coalesce(quote_literal(new.nomefabricante), 'null');
				campos_old  = campos_old  || ' NOMEFABRICANTE = ' || coalesce(quote_literal(old.nomefabricante), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');

			sql_chave = coalesce(quote_literal(new.codigofabricante), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FABRICANTE (CODIGOFABRICANTE, NOMEFABRICANTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofabricante), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomefabricante), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FABRICANTE WHERE CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null') || ', ';
			campos_old  = campos_old || 'NOMEFABRICANTE = ' || coalesce(quote_literal(old.nomefabricante), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigofabricante), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'fabricante', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('fabricante', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('fabricante', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_faltafuncionario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_faltafuncionario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FALTAFUNCIONARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTRATOTRABALHO, SEQUENCIALFALTAFUNCIONARIO, DATAFALTAFUNCIONARIO, HORASFALTAFUNCIONARIO, CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO, CODIGOLOJAMOTIVOFALTAFUNCIONARIO, CODIGOMOTIVOFALTAFUNCIONARIO, OBSERVACOESFALTAFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horasfaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamotivofaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamotivofaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesfaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FALTAFUNCIONARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'DATAFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.datafaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'HORASFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.horasfaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresamotivofaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojamotivofaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.observacoesfaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FALTAFUNCIONARIO SET ';
			sql_rolback = 'UPDATE FALTAFUNCIONARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.sequencialfaltafuncionario &lt;&gt; old.sequencialfaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.sequencialfaltafuncionario), 'null');
				campos_new  = campos_new  || ' SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null');
				campos_old  = campos_old  || ' SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.sequencialfaltafuncionario), 'null');
				first = false;
			end if;

			if (new.datafaltafuncionario &lt;&gt; old.datafaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.datafaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' DATAFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.datafaltafuncionario), 'null');
				campos_new  = campos_new  || ' DATAFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.datafaltafuncionario), 'null');
				campos_old  = campos_old  || ' DATAFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.datafaltafuncionario), 'null');
				first = false;
			end if;

			if (new.horasfaltafuncionario &lt;&gt; old.horasfaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORASFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.horasfaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' HORASFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.horasfaltafuncionario), 'null');
				campos_new  = campos_new  || ' HORASFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.horasfaltafuncionario), 'null');
				campos_old  = campos_old  || ' HORASFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.horasfaltafuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresamotivofaltafuncionario &lt;&gt; old.codigoempresamotivofaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresamotivofaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresamotivofaltafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresamotivofaltafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresamotivofaltafuncionario), 'null');
				first = false;
			end if;

			if (new.codigolojamotivofaltafuncionario &lt;&gt; old.codigolojamotivofaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojamotivofaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojamotivofaltafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojamotivofaltafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojamotivofaltafuncionario), 'null');
				first = false;
			end if;

			if (new.codigomotivofaltafuncionario &lt;&gt; old.codigomotivofaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null');
				first = false;
			end if;

			if (new.observacoesfaltafuncionario &lt;&gt; old.observacoesfaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.observacoesfaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.observacoesfaltafuncionario), 'null');
				campos_new  = campos_new  || ' OBSERVACOESFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.observacoesfaltafuncionario), 'null');
				campos_old  = campos_old  || ' OBSERVACOESFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.observacoesfaltafuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.sequencialfaltafuncionario), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FALTAFUNCIONARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTRATOTRABALHO, SEQUENCIALFALTAFUNCIONARIO, DATAFALTAFUNCIONARIO, HORASFALTAFUNCIONARIO, CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO, CODIGOLOJAMOTIVOFALTAFUNCIONARIO, CODIGOMOTIVOFALTAFUNCIONARIO, OBSERVACOESFALTAFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialfaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horasfaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamotivofaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamotivofaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesfaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FALTAFUNCIONARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ' AND SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.sequencialfaltafuncionario), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.sequencialfaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'DATAFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.datafaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'HORASFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.horasfaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresamotivofaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojamotivofaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.observacoesfaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.sequencialfaltafuncionario), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'faltafuncionario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('faltafuncionario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('faltafuncionario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_feriado()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_feriado() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FERIADO (CODIGOFERIADO, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOFERIADO, DIAFERIADO, MESFERIADO, ANOFERIADO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoferiado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoferiado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diaferiado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.mesferiado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.anoferiado), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FERIADO WHERE CODIGOFERIADO = ' || coalesce(quote_literal(new.codigoferiado), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFERIADO = ' || coalesce(quote_literal(new.codigoferiado), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOFERIADO = ' || coalesce(quote_literal(new.descricaoferiado), 'null') || ', ';
			campos_new   = campos_new || 'DIAFERIADO = ' || coalesce(quote_literal(new.diaferiado), 'null') || ', ';
			campos_new   = campos_new || 'MESFERIADO = ' || coalesce(quote_literal(new.mesferiado), 'null') || ', ';
			campos_new   = campos_new || 'ANOFERIADO = ' || coalesce(quote_literal(new.anoferiado), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoferiado), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FERIADO SET ';
			sql_rolback = 'UPDATE FERIADO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoferiado &lt;&gt; old.codigoferiado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFERIADO = ' || coalesce(quote_literal(new.codigoferiado), 'null');
				sql_rolback = sql_rolback || ' CODIGOFERIADO = ' || coalesce(quote_literal(old.codigoferiado), 'null');
				campos_new  = campos_new  || ' CODIGOFERIADO = ' || coalesce(quote_literal(new.codigoferiado), 'null');
				campos_old  = campos_old  || ' CODIGOFERIADO = ' || coalesce(quote_literal(old.codigoferiado), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.descricaoferiado &lt;&gt; old.descricaoferiado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOFERIADO = ' || coalesce(quote_literal(new.descricaoferiado), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOFERIADO = ' || coalesce(quote_literal(old.descricaoferiado), 'null');
				campos_new  = campos_new  || ' DESCRICAOFERIADO = ' || coalesce(quote_literal(new.descricaoferiado), 'null');
				campos_old  = campos_old  || ' DESCRICAOFERIADO = ' || coalesce(quote_literal(old.descricaoferiado), 'null');
				first = false;
			end if;

			if (new.diaferiado &lt;&gt; old.diaferiado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIAFERIADO = ' || coalesce(quote_literal(new.diaferiado), 'null');
				sql_rolback = sql_rolback || ' DIAFERIADO = ' || coalesce(quote_literal(old.diaferiado), 'null');
				campos_new  = campos_new  || ' DIAFERIADO = ' || coalesce(quote_literal(new.diaferiado), 'null');
				campos_old  = campos_old  || ' DIAFERIADO = ' || coalesce(quote_literal(old.diaferiado), 'null');
				first = false;
			end if;

			if (new.mesferiado &lt;&gt; old.mesferiado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MESFERIADO = ' || coalesce(quote_literal(new.mesferiado), 'null');
				sql_rolback = sql_rolback || ' MESFERIADO = ' || coalesce(quote_literal(old.mesferiado), 'null');
				campos_new  = campos_new  || ' MESFERIADO = ' || coalesce(quote_literal(new.mesferiado), 'null');
				campos_old  = campos_old  || ' MESFERIADO = ' || coalesce(quote_literal(old.mesferiado), 'null');
				first = false;
			end if;

			if (new.anoferiado &lt;&gt; old.anoferiado) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ANOFERIADO = ' || coalesce(quote_literal(new.anoferiado), 'null');
				sql_rolback = sql_rolback || ' ANOFERIADO = ' || coalesce(quote_literal(old.anoferiado), 'null');
				campos_new  = campos_new  || ' ANOFERIADO = ' || coalesce(quote_literal(new.anoferiado), 'null');
				campos_old  = campos_old  || ' ANOFERIADO = ' || coalesce(quote_literal(old.anoferiado), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFERIADO = ' || coalesce(quote_literal(new.codigoferiado), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFERIADO = ' || coalesce(quote_literal(new.codigoferiado), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoferiado), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FERIADO (CODIGOFERIADO, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOFERIADO, DIAFERIADO, MESFERIADO, ANOFERIADO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoferiado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoferiado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diaferiado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.mesferiado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.anoferiado), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FERIADO WHERE CODIGOFERIADO = ' || coalesce(quote_literal(old.codigoferiado), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFERIADO = ' || coalesce(quote_literal(old.codigoferiado), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOFERIADO = ' || coalesce(quote_literal(old.descricaoferiado), 'null') || ', ';
			campos_old  = campos_old || 'DIAFERIADO = ' || coalesce(quote_literal(old.diaferiado), 'null') || ', ';
			campos_old  = campos_old || 'MESFERIADO = ' || coalesce(quote_literal(old.mesferiado), 'null') || ', ';
			campos_old  = campos_old || 'ANOFERIADO = ' || coalesce(quote_literal(old.anoferiado), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoferiado), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'feriado', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('feriado', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('feriado', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_flagtrocamanutencao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_flagtrocamanutencao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FLAGTROCAMANUTENCAO (CODIGOTIPOFLAGTROCAMANUTENCAO, CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCAMANUTENCAO, VALORFLAGTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorflagtrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FLAGTROCAMANUTENCAO WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'VALORFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.valorflagtrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FLAGTROCAMANUTENCAO SET ';
			sql_rolback = 'UPDATE FLAGTROCAMANUTENCAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipoflagtrocamanutencao &lt;&gt; old.codigotipoflagtrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotrocamanutencao &lt;&gt; old.codigotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.valorflagtrocamanutencao &lt;&gt; old.valorflagtrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.valorflagtrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' VALORFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.valorflagtrocamanutencao), 'null');
				campos_new  = campos_new  || ' VALORFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.valorflagtrocamanutencao), 'null');
				campos_old  = campos_old  || ' VALORFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.valorflagtrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FLAGTROCAMANUTENCAO (CODIGOTIPOFLAGTROCAMANUTENCAO, CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCAMANUTENCAO, VALORFLAGTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorflagtrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FLAGTROCAMANUTENCAO WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'VALORFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.valorflagtrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'flagtrocamanutencao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('flagtrocamanutencao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('flagtrocamanutencao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_folhapagamento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_folhapagamento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FOLHAPAGAMENTO (CODIGOFOLHAPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, MESCOMPETENCIAFOLHAPAGAMENTO, ANOCOMPETENCIAFOLHAPAGAMENTO, STATUSFOLHAPAGAMENTO, TIPOFOLHAPAGAMENTO, PERCENTUALPROCESSADOFOLHAPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESALOTACAO, CODIGOLOJALOTACAO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.mescompetenciafolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.anocompetenciafolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusfolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipofolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualprocessadofolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresalotacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojalotacao), 'null') || ')';

			sql_rolback = 'DELETE FROM FOLHAPAGAMENTO WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'MESCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.mescompetenciafolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'ANOCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.anocompetenciafolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'STATUSFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.statusfolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'TIPOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.tipofolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALPROCESSADOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.percentualprocessadofolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(new.codigoempresalotacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJALOTACAO = ' || coalesce(quote_literal(new.codigolojalotacao), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FOLHAPAGAMENTO SET ';
			sql_rolback = 'UPDATE FOLHAPAGAMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigofolhapagamento &lt;&gt; old.codigofolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.mescompetenciafolhapagamento &lt;&gt; old.mescompetenciafolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MESCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.mescompetenciafolhapagamento), 'null');
				sql_rolback = sql_rolback || ' MESCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.mescompetenciafolhapagamento), 'null');
				campos_new  = campos_new  || ' MESCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.mescompetenciafolhapagamento), 'null');
				campos_old  = campos_old  || ' MESCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.mescompetenciafolhapagamento), 'null');
				first = false;
			end if;

			if (new.anocompetenciafolhapagamento &lt;&gt; old.anocompetenciafolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ANOCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.anocompetenciafolhapagamento), 'null');
				sql_rolback = sql_rolback || ' ANOCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.anocompetenciafolhapagamento), 'null');
				campos_new  = campos_new  || ' ANOCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.anocompetenciafolhapagamento), 'null');
				campos_old  = campos_old  || ' ANOCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.anocompetenciafolhapagamento), 'null');
				first = false;
			end if;

			if (new.statusfolhapagamento &lt;&gt; old.statusfolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.statusfolhapagamento), 'null');
				sql_rolback = sql_rolback || ' STATUSFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.statusfolhapagamento), 'null');
				campos_new  = campos_new  || ' STATUSFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.statusfolhapagamento), 'null');
				campos_old  = campos_old  || ' STATUSFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.statusfolhapagamento), 'null');
				first = false;
			end if;

			if (new.tipofolhapagamento &lt;&gt; old.tipofolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.tipofolhapagamento), 'null');
				sql_rolback = sql_rolback || ' TIPOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.tipofolhapagamento), 'null');
				campos_new  = campos_new  || ' TIPOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.tipofolhapagamento), 'null');
				campos_old  = campos_old  || ' TIPOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.tipofolhapagamento), 'null');
				first = false;
			end if;

			if (new.percentualprocessadofolhapagamento &lt;&gt; old.percentualprocessadofolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALPROCESSADOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.percentualprocessadofolhapagamento), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALPROCESSADOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.percentualprocessadofolhapagamento), 'null');
				campos_new  = campos_new  || ' PERCENTUALPROCESSADOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.percentualprocessadofolhapagamento), 'null');
				campos_old  = campos_old  || ' PERCENTUALPROCESSADOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.percentualprocessadofolhapagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresalotacao &lt;&gt; old.codigoempresalotacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(new.codigoempresalotacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(old.codigoempresalotacao), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(new.codigoempresalotacao), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(old.codigoempresalotacao), 'null');
				first = false;
			end if;

			if (new.codigolojalotacao &lt;&gt; old.codigolojalotacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(new.codigolojalotacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(old.codigolojalotacao), 'null');
				campos_new  = campos_new  || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(new.codigolojalotacao), 'null');
				campos_old  = campos_old  || ' CODIGOLOJALOTACAO = ' || coalesce(quote_literal(old.codigolojalotacao), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FOLHAPAGAMENTO (CODIGOFOLHAPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, MESCOMPETENCIAFOLHAPAGAMENTO, ANOCOMPETENCIAFOLHAPAGAMENTO, STATUSFOLHAPAGAMENTO, TIPOFOLHAPAGAMENTO, PERCENTUALPROCESSADOFOLHAPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESALOTACAO, CODIGOLOJALOTACAO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.mescompetenciafolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.anocompetenciafolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusfolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipofolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualprocessadofolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresalotacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojalotacao), 'null') || ')';

			sql_replica = 'DELETE FROM FOLHAPAGAMENTO WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'MESCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.mescompetenciafolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'ANOCOMPETENCIAFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.anocompetenciafolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'STATUSFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.statusfolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'TIPOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.tipofolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALPROCESSADOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.percentualprocessadofolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESALOTACAO = ' || coalesce(quote_literal(old.codigoempresalotacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJALOTACAO = ' || coalesce(quote_literal(old.codigolojalotacao), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'folhapagamento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('folhapagamento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('folhapagamento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_formapagamento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_formapagamento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FORMAPAGAMENTO (CODIGOFORMAPAGAMENTO, NOMEFORMAPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoformapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeformapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FORMAPAGAMENTO WHERE CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null') || ', ';
			campos_new   = campos_new || 'NOMEFORMAPAGAMENTO = ' || coalesce(quote_literal(new.nomeformapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoformapagamento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FORMAPAGAMENTO SET ';
			sql_rolback = 'UPDATE FORMAPAGAMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoformapagamento &lt;&gt; old.codigoformapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null');
				first = false;
			end if;

			if (new.nomeformapagamento &lt;&gt; old.nomeformapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEFORMAPAGAMENTO = ' || coalesce(quote_literal(new.nomeformapagamento), 'null');
				sql_rolback = sql_rolback || ' NOMEFORMAPAGAMENTO = ' || coalesce(quote_literal(old.nomeformapagamento), 'null');
				campos_new  = campos_new  || ' NOMEFORMAPAGAMENTO = ' || coalesce(quote_literal(new.nomeformapagamento), 'null');
				campos_old  = campos_old  || ' NOMEFORMAPAGAMENTO = ' || coalesce(quote_literal(old.nomeformapagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');

			sql_chave = coalesce(quote_literal(new.codigoformapagamento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FORMAPAGAMENTO (CODIGOFORMAPAGAMENTO, NOMEFORMAPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoformapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeformapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FORMAPAGAMENTO WHERE CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null') || ', ';
			campos_old  = campos_old || 'NOMEFORMAPAGAMENTO = ' || coalesce(quote_literal(old.nomeformapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoformapagamento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'formapagamento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('formapagamento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('formapagamento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_formarecebimento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_formarecebimento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FORMARECEBIMENTO (CODIGOFORMARECEBIMENTO, NOMEFORMARECEBIMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoformarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeformarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FORMARECEBIMENTO WHERE CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'NOMEFORMARECEBIMENTO = ' || coalesce(quote_literal(new.nomeformarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoformarecebimento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FORMARECEBIMENTO SET ';
			sql_rolback = 'UPDATE FORMARECEBIMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoformarecebimento &lt;&gt; old.codigoformarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null');
				first = false;
			end if;

			if (new.nomeformarecebimento &lt;&gt; old.nomeformarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEFORMARECEBIMENTO = ' || coalesce(quote_literal(new.nomeformarecebimento), 'null');
				sql_rolback = sql_rolback || ' NOMEFORMARECEBIMENTO = ' || coalesce(quote_literal(old.nomeformarecebimento), 'null');
				campos_new  = campos_new  || ' NOMEFORMARECEBIMENTO = ' || coalesce(quote_literal(new.nomeformarecebimento), 'null');
				campos_old  = campos_old  || ' NOMEFORMARECEBIMENTO = ' || coalesce(quote_literal(old.nomeformarecebimento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');

			sql_chave = coalesce(quote_literal(new.codigoformarecebimento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FORMARECEBIMENTO (CODIGOFORMARECEBIMENTO, NOMEFORMARECEBIMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoformarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeformarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FORMARECEBIMENTO WHERE CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'NOMEFORMARECEBIMENTO = ' || coalesce(quote_literal(old.nomeformarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoformarecebimento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'formarecebimento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('formarecebimento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('formarecebimento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_funcionario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_funcionario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO FUNCIONARIO (CODIGOFUNCIONARIO, CODIGOEMPRESA, CODIGOLOJA, NOMEFUNCIONARIO, SEXOFUNCIONARIO, ENDERECOFUNCIONARIO, FONE1FUNCIONARIO, FONE2FUNCIONARIO, FONE3FUNCIONARIO, BAIRROFUNCIONARIO, CEPFUNCIONARIO, CODIGOCIDADE, CPFFUNCIONARIO, RGFUNCIONARIO, DATAEMISSAORGFUNCIONARIO, ORGAOEMISSAORGFUNCIONARIO, UFEMISSAORGFUNCIONARIO, CTPSFUNCIONARIO, PISFUNCIONARIO, TITULOELEITORFUNCIONARIO, SECAOTITULOELEITORFUNCIONARIO, ZONATITULOELEITORFUNCIONARIO, NATURALIDADEFUNCIONARIO, DATANASCIMENTOFUNCIONARIO, ESTADOCIVILFUNCIONARIO, NOMEPAIFUNCIONARIO, NOMEMAEFUNCIONARIO, NOMECONJUGUEFUNCIONARIO, OBSERVACOESFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sexofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.enderecofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone1funcionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone2funcionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone3funcionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.bairrofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cepfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cpffuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.rgfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaorgfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.orgaoemissaorgfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ufemissaorgfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ctpsfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pisfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tituloeleitorfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.secaotituloeleitorfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.zonatituloeleitorfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.naturalidadefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datanascimentofuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.estadocivilfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomepaifuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemaefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeconjuguefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesfuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM FUNCIONARIO WHERE CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NOMEFUNCIONARIO = ' || coalesce(quote_literal(new.nomefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'SEXOFUNCIONARIO = ' || coalesce(quote_literal(new.sexofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'ENDERECOFUNCIONARIO = ' || coalesce(quote_literal(new.enderecofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'FONE1FUNCIONARIO = ' || coalesce(quote_literal(new.fone1funcionario), 'null') || ', ';
			campos_new   = campos_new || 'FONE2FUNCIONARIO = ' || coalesce(quote_literal(new.fone2funcionario), 'null') || ', ';
			campos_new   = campos_new || 'FONE3FUNCIONARIO = ' || coalesce(quote_literal(new.fone3funcionario), 'null') || ', ';
			campos_new   = campos_new || 'BAIRROFUNCIONARIO = ' || coalesce(quote_literal(new.bairrofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CEPFUNCIONARIO = ' || coalesce(quote_literal(new.cepfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null') || ', ';
			campos_new   = campos_new || 'CPFFUNCIONARIO = ' || coalesce(quote_literal(new.cpffuncionario), 'null') || ', ';
			campos_new   = campos_new || 'RGFUNCIONARIO = ' || coalesce(quote_literal(new.rgfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.dataemissaorgfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'ORGAOEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.orgaoemissaorgfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'UFEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.ufemissaorgfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CTPSFUNCIONARIO = ' || coalesce(quote_literal(new.ctpsfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'PISFUNCIONARIO = ' || coalesce(quote_literal(new.pisfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'TITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.tituloeleitorfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'SECAOTITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.secaotituloeleitorfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'ZONATITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.zonatituloeleitorfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'NATURALIDADEFUNCIONARIO = ' || coalesce(quote_literal(new.naturalidadefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'DATANASCIMENTOFUNCIONARIO = ' || coalesce(quote_literal(new.datanascimentofuncionario), 'null') || ', ';
			campos_new   = campos_new || 'ESTADOCIVILFUNCIONARIO = ' || coalesce(quote_literal(new.estadocivilfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPAIFUNCIONARIO = ' || coalesce(quote_literal(new.nomepaifuncionario), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMAEFUNCIONARIO = ' || coalesce(quote_literal(new.nomemaefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'NOMECONJUGUEFUNCIONARIO = ' || coalesce(quote_literal(new.nomeconjuguefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESFUNCIONARIO = ' || coalesce(quote_literal(new.observacoesfuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigofuncionario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE FUNCIONARIO SET ';
			sql_rolback = 'UPDATE FUNCIONARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigofuncionario &lt;&gt; old.codigofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.nomefuncionario &lt;&gt; old.nomefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEFUNCIONARIO = ' || coalesce(quote_literal(new.nomefuncionario), 'null');
				sql_rolback = sql_rolback || ' NOMEFUNCIONARIO = ' || coalesce(quote_literal(old.nomefuncionario), 'null');
				campos_new  = campos_new  || ' NOMEFUNCIONARIO = ' || coalesce(quote_literal(new.nomefuncionario), 'null');
				campos_old  = campos_old  || ' NOMEFUNCIONARIO = ' || coalesce(quote_literal(old.nomefuncionario), 'null');
				first = false;
			end if;

			if (new.sexofuncionario &lt;&gt; old.sexofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEXOFUNCIONARIO = ' || coalesce(quote_literal(new.sexofuncionario), 'null');
				sql_rolback = sql_rolback || ' SEXOFUNCIONARIO = ' || coalesce(quote_literal(old.sexofuncionario), 'null');
				campos_new  = campos_new  || ' SEXOFUNCIONARIO = ' || coalesce(quote_literal(new.sexofuncionario), 'null');
				campos_old  = campos_old  || ' SEXOFUNCIONARIO = ' || coalesce(quote_literal(old.sexofuncionario), 'null');
				first = false;
			end if;

			if (new.enderecofuncionario &lt;&gt; old.enderecofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ENDERECOFUNCIONARIO = ' || coalesce(quote_literal(new.enderecofuncionario), 'null');
				sql_rolback = sql_rolback || ' ENDERECOFUNCIONARIO = ' || coalesce(quote_literal(old.enderecofuncionario), 'null');
				campos_new  = campos_new  || ' ENDERECOFUNCIONARIO = ' || coalesce(quote_literal(new.enderecofuncionario), 'null');
				campos_old  = campos_old  || ' ENDERECOFUNCIONARIO = ' || coalesce(quote_literal(old.enderecofuncionario), 'null');
				first = false;
			end if;

			if (new.fone1funcionario &lt;&gt; old.fone1funcionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE1FUNCIONARIO = ' || coalesce(quote_literal(new.fone1funcionario), 'null');
				sql_rolback = sql_rolback || ' FONE1FUNCIONARIO = ' || coalesce(quote_literal(old.fone1funcionario), 'null');
				campos_new  = campos_new  || ' FONE1FUNCIONARIO = ' || coalesce(quote_literal(new.fone1funcionario), 'null');
				campos_old  = campos_old  || ' FONE1FUNCIONARIO = ' || coalesce(quote_literal(old.fone1funcionario), 'null');
				first = false;
			end if;

			if (new.fone2funcionario &lt;&gt; old.fone2funcionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE2FUNCIONARIO = ' || coalesce(quote_literal(new.fone2funcionario), 'null');
				sql_rolback = sql_rolback || ' FONE2FUNCIONARIO = ' || coalesce(quote_literal(old.fone2funcionario), 'null');
				campos_new  = campos_new  || ' FONE2FUNCIONARIO = ' || coalesce(quote_literal(new.fone2funcionario), 'null');
				campos_old  = campos_old  || ' FONE2FUNCIONARIO = ' || coalesce(quote_literal(old.fone2funcionario), 'null');
				first = false;
			end if;

			if (new.fone3funcionario &lt;&gt; old.fone3funcionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE3FUNCIONARIO = ' || coalesce(quote_literal(new.fone3funcionario), 'null');
				sql_rolback = sql_rolback || ' FONE3FUNCIONARIO = ' || coalesce(quote_literal(old.fone3funcionario), 'null');
				campos_new  = campos_new  || ' FONE3FUNCIONARIO = ' || coalesce(quote_literal(new.fone3funcionario), 'null');
				campos_old  = campos_old  || ' FONE3FUNCIONARIO = ' || coalesce(quote_literal(old.fone3funcionario), 'null');
				first = false;
			end if;

			if (new.bairrofuncionario &lt;&gt; old.bairrofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BAIRROFUNCIONARIO = ' || coalesce(quote_literal(new.bairrofuncionario), 'null');
				sql_rolback = sql_rolback || ' BAIRROFUNCIONARIO = ' || coalesce(quote_literal(old.bairrofuncionario), 'null');
				campos_new  = campos_new  || ' BAIRROFUNCIONARIO = ' || coalesce(quote_literal(new.bairrofuncionario), 'null');
				campos_old  = campos_old  || ' BAIRROFUNCIONARIO = ' || coalesce(quote_literal(old.bairrofuncionario), 'null');
				first = false;
			end if;

			if (new.cepfuncionario &lt;&gt; old.cepfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CEPFUNCIONARIO = ' || coalesce(quote_literal(new.cepfuncionario), 'null');
				sql_rolback = sql_rolback || ' CEPFUNCIONARIO = ' || coalesce(quote_literal(old.cepfuncionario), 'null');
				campos_new  = campos_new  || ' CEPFUNCIONARIO = ' || coalesce(quote_literal(new.cepfuncionario), 'null');
				campos_old  = campos_old  || ' CEPFUNCIONARIO = ' || coalesce(quote_literal(old.cepfuncionario), 'null');
				first = false;
			end if;

			if (new.codigocidade &lt;&gt; old.codigocidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
				sql_rolback = sql_rolback || ' CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');
				campos_new  = campos_new  || ' CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
				campos_old  = campos_old  || ' CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');
				first = false;
			end if;

			if (new.cpffuncionario &lt;&gt; old.cpffuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CPFFUNCIONARIO = ' || coalesce(quote_literal(new.cpffuncionario), 'null');
				sql_rolback = sql_rolback || ' CPFFUNCIONARIO = ' || coalesce(quote_literal(old.cpffuncionario), 'null');
				campos_new  = campos_new  || ' CPFFUNCIONARIO = ' || coalesce(quote_literal(new.cpffuncionario), 'null');
				campos_old  = campos_old  || ' CPFFUNCIONARIO = ' || coalesce(quote_literal(old.cpffuncionario), 'null');
				first = false;
			end if;

			if (new.rgfuncionario &lt;&gt; old.rgfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' RGFUNCIONARIO = ' || coalesce(quote_literal(new.rgfuncionario), 'null');
				sql_rolback = sql_rolback || ' RGFUNCIONARIO = ' || coalesce(quote_literal(old.rgfuncionario), 'null');
				campos_new  = campos_new  || ' RGFUNCIONARIO = ' || coalesce(quote_literal(new.rgfuncionario), 'null');
				campos_old  = campos_old  || ' RGFUNCIONARIO = ' || coalesce(quote_literal(old.rgfuncionario), 'null');
				first = false;
			end if;

			if (new.dataemissaorgfuncionario &lt;&gt; old.dataemissaorgfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.dataemissaorgfuncionario), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.dataemissaorgfuncionario), 'null');
				campos_new  = campos_new  || ' DATAEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.dataemissaorgfuncionario), 'null');
				campos_old  = campos_old  || ' DATAEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.dataemissaorgfuncionario), 'null');
				first = false;
			end if;

			if (new.orgaoemissaorgfuncionario &lt;&gt; old.orgaoemissaorgfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ORGAOEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.orgaoemissaorgfuncionario), 'null');
				sql_rolback = sql_rolback || ' ORGAOEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.orgaoemissaorgfuncionario), 'null');
				campos_new  = campos_new  || ' ORGAOEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.orgaoemissaorgfuncionario), 'null');
				campos_old  = campos_old  || ' ORGAOEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.orgaoemissaorgfuncionario), 'null');
				first = false;
			end if;

			if (new.ufemissaorgfuncionario &lt;&gt; old.ufemissaorgfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.ufemissaorgfuncionario), 'null');
				sql_rolback = sql_rolback || ' UFEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.ufemissaorgfuncionario), 'null');
				campos_new  = campos_new  || ' UFEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(new.ufemissaorgfuncionario), 'null');
				campos_old  = campos_old  || ' UFEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.ufemissaorgfuncionario), 'null');
				first = false;
			end if;

			if (new.ctpsfuncionario &lt;&gt; old.ctpsfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CTPSFUNCIONARIO = ' || coalesce(quote_literal(new.ctpsfuncionario), 'null');
				sql_rolback = sql_rolback || ' CTPSFUNCIONARIO = ' || coalesce(quote_literal(old.ctpsfuncionario), 'null');
				campos_new  = campos_new  || ' CTPSFUNCIONARIO = ' || coalesce(quote_literal(new.ctpsfuncionario), 'null');
				campos_old  = campos_old  || ' CTPSFUNCIONARIO = ' || coalesce(quote_literal(old.ctpsfuncionario), 'null');
				first = false;
			end if;

			if (new.pisfuncionario &lt;&gt; old.pisfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PISFUNCIONARIO = ' || coalesce(quote_literal(new.pisfuncionario), 'null');
				sql_rolback = sql_rolback || ' PISFUNCIONARIO = ' || coalesce(quote_literal(old.pisfuncionario), 'null');
				campos_new  = campos_new  || ' PISFUNCIONARIO = ' || coalesce(quote_literal(new.pisfuncionario), 'null');
				campos_old  = campos_old  || ' PISFUNCIONARIO = ' || coalesce(quote_literal(old.pisfuncionario), 'null');
				first = false;
			end if;

			if (new.tituloeleitorfuncionario &lt;&gt; old.tituloeleitorfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.tituloeleitorfuncionario), 'null');
				sql_rolback = sql_rolback || ' TITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.tituloeleitorfuncionario), 'null');
				campos_new  = campos_new  || ' TITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.tituloeleitorfuncionario), 'null');
				campos_old  = campos_old  || ' TITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.tituloeleitorfuncionario), 'null');
				first = false;
			end if;

			if (new.secaotituloeleitorfuncionario &lt;&gt; old.secaotituloeleitorfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SECAOTITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.secaotituloeleitorfuncionario), 'null');
				sql_rolback = sql_rolback || ' SECAOTITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.secaotituloeleitorfuncionario), 'null');
				campos_new  = campos_new  || ' SECAOTITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.secaotituloeleitorfuncionario), 'null');
				campos_old  = campos_old  || ' SECAOTITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.secaotituloeleitorfuncionario), 'null');
				first = false;
			end if;

			if (new.zonatituloeleitorfuncionario &lt;&gt; old.zonatituloeleitorfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ZONATITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.zonatituloeleitorfuncionario), 'null');
				sql_rolback = sql_rolback || ' ZONATITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.zonatituloeleitorfuncionario), 'null');
				campos_new  = campos_new  || ' ZONATITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(new.zonatituloeleitorfuncionario), 'null');
				campos_old  = campos_old  || ' ZONATITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.zonatituloeleitorfuncionario), 'null');
				first = false;
			end if;

			if (new.naturalidadefuncionario &lt;&gt; old.naturalidadefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NATURALIDADEFUNCIONARIO = ' || coalesce(quote_literal(new.naturalidadefuncionario), 'null');
				sql_rolback = sql_rolback || ' NATURALIDADEFUNCIONARIO = ' || coalesce(quote_literal(old.naturalidadefuncionario), 'null');
				campos_new  = campos_new  || ' NATURALIDADEFUNCIONARIO = ' || coalesce(quote_literal(new.naturalidadefuncionario), 'null');
				campos_old  = campos_old  || ' NATURALIDADEFUNCIONARIO = ' || coalesce(quote_literal(old.naturalidadefuncionario), 'null');
				first = false;
			end if;

			if (new.datanascimentofuncionario &lt;&gt; old.datanascimentofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATANASCIMENTOFUNCIONARIO = ' || coalesce(quote_literal(new.datanascimentofuncionario), 'null');
				sql_rolback = sql_rolback || ' DATANASCIMENTOFUNCIONARIO = ' || coalesce(quote_literal(old.datanascimentofuncionario), 'null');
				campos_new  = campos_new  || ' DATANASCIMENTOFUNCIONARIO = ' || coalesce(quote_literal(new.datanascimentofuncionario), 'null');
				campos_old  = campos_old  || ' DATANASCIMENTOFUNCIONARIO = ' || coalesce(quote_literal(old.datanascimentofuncionario), 'null');
				first = false;
			end if;

			if (new.estadocivilfuncionario &lt;&gt; old.estadocivilfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ESTADOCIVILFUNCIONARIO = ' || coalesce(quote_literal(new.estadocivilfuncionario), 'null');
				sql_rolback = sql_rolback || ' ESTADOCIVILFUNCIONARIO = ' || coalesce(quote_literal(old.estadocivilfuncionario), 'null');
				campos_new  = campos_new  || ' ESTADOCIVILFUNCIONARIO = ' || coalesce(quote_literal(new.estadocivilfuncionario), 'null');
				campos_old  = campos_old  || ' ESTADOCIVILFUNCIONARIO = ' || coalesce(quote_literal(old.estadocivilfuncionario), 'null');
				first = false;
			end if;

			if (new.nomepaifuncionario &lt;&gt; old.nomepaifuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPAIFUNCIONARIO = ' || coalesce(quote_literal(new.nomepaifuncionario), 'null');
				sql_rolback = sql_rolback || ' NOMEPAIFUNCIONARIO = ' || coalesce(quote_literal(old.nomepaifuncionario), 'null');
				campos_new  = campos_new  || ' NOMEPAIFUNCIONARIO = ' || coalesce(quote_literal(new.nomepaifuncionario), 'null');
				campos_old  = campos_old  || ' NOMEPAIFUNCIONARIO = ' || coalesce(quote_literal(old.nomepaifuncionario), 'null');
				first = false;
			end if;

			if (new.nomemaefuncionario &lt;&gt; old.nomemaefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMAEFUNCIONARIO = ' || coalesce(quote_literal(new.nomemaefuncionario), 'null');
				sql_rolback = sql_rolback || ' NOMEMAEFUNCIONARIO = ' || coalesce(quote_literal(old.nomemaefuncionario), 'null');
				campos_new  = campos_new  || ' NOMEMAEFUNCIONARIO = ' || coalesce(quote_literal(new.nomemaefuncionario), 'null');
				campos_old  = campos_old  || ' NOMEMAEFUNCIONARIO = ' || coalesce(quote_literal(old.nomemaefuncionario), 'null');
				first = false;
			end if;

			if (new.nomeconjuguefuncionario &lt;&gt; old.nomeconjuguefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMECONJUGUEFUNCIONARIO = ' || coalesce(quote_literal(new.nomeconjuguefuncionario), 'null');
				sql_rolback = sql_rolback || ' NOMECONJUGUEFUNCIONARIO = ' || coalesce(quote_literal(old.nomeconjuguefuncionario), 'null');
				campos_new  = campos_new  || ' NOMECONJUGUEFUNCIONARIO = ' || coalesce(quote_literal(new.nomeconjuguefuncionario), 'null');
				campos_old  = campos_old  || ' NOMECONJUGUEFUNCIONARIO = ' || coalesce(quote_literal(old.nomeconjuguefuncionario), 'null');
				first = false;
			end if;

			if (new.observacoesfuncionario &lt;&gt; old.observacoesfuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESFUNCIONARIO = ' || coalesce(quote_literal(new.observacoesfuncionario), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESFUNCIONARIO = ' || coalesce(quote_literal(old.observacoesfuncionario), 'null');
				campos_new  = campos_new  || ' OBSERVACOESFUNCIONARIO = ' || coalesce(quote_literal(new.observacoesfuncionario), 'null');
				campos_old  = campos_old  || ' OBSERVACOESFUNCIONARIO = ' || coalesce(quote_literal(old.observacoesfuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigofuncionario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO FUNCIONARIO (CODIGOFUNCIONARIO, CODIGOEMPRESA, CODIGOLOJA, NOMEFUNCIONARIO, SEXOFUNCIONARIO, ENDERECOFUNCIONARIO, FONE1FUNCIONARIO, FONE2FUNCIONARIO, FONE3FUNCIONARIO, BAIRROFUNCIONARIO, CEPFUNCIONARIO, CODIGOCIDADE, CPFFUNCIONARIO, RGFUNCIONARIO, DATAEMISSAORGFUNCIONARIO, ORGAOEMISSAORGFUNCIONARIO, UFEMISSAORGFUNCIONARIO, CTPSFUNCIONARIO, PISFUNCIONARIO, TITULOELEITORFUNCIONARIO, SECAOTITULOELEITORFUNCIONARIO, ZONATITULOELEITORFUNCIONARIO, NATURALIDADEFUNCIONARIO, DATANASCIMENTOFUNCIONARIO, ESTADOCIVILFUNCIONARIO, NOMEPAIFUNCIONARIO, NOMEMAEFUNCIONARIO, NOMECONJUGUEFUNCIONARIO, OBSERVACOESFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sexofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.enderecofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone1funcionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone2funcionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone3funcionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.bairrofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cepfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cpffuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.rgfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaorgfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.orgaoemissaorgfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ufemissaorgfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ctpsfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pisfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tituloeleitorfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.secaotituloeleitorfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.zonatituloeleitorfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.naturalidadefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datanascimentofuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.estadocivilfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomepaifuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemaefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeconjuguefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesfuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM FUNCIONARIO WHERE CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NOMEFUNCIONARIO = ' || coalesce(quote_literal(old.nomefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'SEXOFUNCIONARIO = ' || coalesce(quote_literal(old.sexofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'ENDERECOFUNCIONARIO = ' || coalesce(quote_literal(old.enderecofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'FONE1FUNCIONARIO = ' || coalesce(quote_literal(old.fone1funcionario), 'null') || ', ';
			campos_old  = campos_old || 'FONE2FUNCIONARIO = ' || coalesce(quote_literal(old.fone2funcionario), 'null') || ', ';
			campos_old  = campos_old || 'FONE3FUNCIONARIO = ' || coalesce(quote_literal(old.fone3funcionario), 'null') || ', ';
			campos_old  = campos_old || 'BAIRROFUNCIONARIO = ' || coalesce(quote_literal(old.bairrofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CEPFUNCIONARIO = ' || coalesce(quote_literal(old.cepfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null') || ', ';
			campos_old  = campos_old || 'CPFFUNCIONARIO = ' || coalesce(quote_literal(old.cpffuncionario), 'null') || ', ';
			campos_old  = campos_old || 'RGFUNCIONARIO = ' || coalesce(quote_literal(old.rgfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.dataemissaorgfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'ORGAOEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.orgaoemissaorgfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'UFEMISSAORGFUNCIONARIO = ' || coalesce(quote_literal(old.ufemissaorgfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CTPSFUNCIONARIO = ' || coalesce(quote_literal(old.ctpsfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'PISFUNCIONARIO = ' || coalesce(quote_literal(old.pisfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'TITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.tituloeleitorfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'SECAOTITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.secaotituloeleitorfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'ZONATITULOELEITORFUNCIONARIO = ' || coalesce(quote_literal(old.zonatituloeleitorfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'NATURALIDADEFUNCIONARIO = ' || coalesce(quote_literal(old.naturalidadefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'DATANASCIMENTOFUNCIONARIO = ' || coalesce(quote_literal(old.datanascimentofuncionario), 'null') || ', ';
			campos_old  = campos_old || 'ESTADOCIVILFUNCIONARIO = ' || coalesce(quote_literal(old.estadocivilfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPAIFUNCIONARIO = ' || coalesce(quote_literal(old.nomepaifuncionario), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMAEFUNCIONARIO = ' || coalesce(quote_literal(old.nomemaefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'NOMECONJUGUEFUNCIONARIO = ' || coalesce(quote_literal(old.nomeconjuguefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESFUNCIONARIO = ' || coalesce(quote_literal(old.observacoesfuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigofuncionario), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'funcionario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('funcionario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('funcionario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_gerentemadeireira()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_gerentemadeireira() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO GERENTEMADEIREIRA (CODIGOEMPRESA, CODIGOLOJA, CODIGOGERENTE, NOMEGERENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOCONTRATOTRABALHO, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomegerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ')';

			sql_rolback = 'DELETE FROM GERENTEMADEIREIRA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			campos_new   = campos_new || 'NOMEGERENTE = ' || coalesce(quote_literal(new.nomegerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigogerente), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE GERENTEMADEIREIRA SET ';
			sql_rolback = 'UPDATE GERENTEMADEIREIRA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigogerente &lt;&gt; old.codigogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				campos_new  = campos_new  || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				campos_old  = campos_old  || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				first = false;
			end if;

			if (new.nomegerente &lt;&gt; old.nomegerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEGERENTE = ' || coalesce(quote_literal(new.nomegerente), 'null');
				sql_rolback = sql_rolback || ' NOMEGERENTE = ' || coalesce(quote_literal(old.nomegerente), 'null');
				campos_new  = campos_new  || ' NOMEGERENTE = ' || coalesce(quote_literal(new.nomegerente), 'null');
				campos_old  = campos_old  || ' NOMEGERENTE = ' || coalesce(quote_literal(old.nomegerente), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresacontratotrabalho &lt;&gt; old.codigoempresacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigolojacontratotrabalho &lt;&gt; old.codigolojacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigogerente), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO GERENTEMADEIREIRA (CODIGOEMPRESA, CODIGOLOJA, CODIGOGERENTE, NOMEGERENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOCONTRATOTRABALHO, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomegerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ')';

			sql_replica = 'DELETE FROM GERENTEMADEIREIRA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			campos_old  = campos_old || 'NOMEGERENTE = ' || coalesce(quote_literal(old.nomegerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigogerente), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'gerentemadeireira', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('gerentemadeireira', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('gerentemadeireira', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_grupo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_grupo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO GRUPO (CODIGOGRUPO, NOMEGRUPO, TIPOGRUPO, QUANTIDADEMINIMAUNITARIAGRUPO, QUANTIDADEMINIMAMETROGRUPO, PERCENTUALCOMISSAOGRUPO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomegrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipogrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidademinimaunitariagrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidademinimametrogrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualcomissaogrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM GRUPO WHERE CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null') || ', ';
			campos_new   = campos_new || 'NOMEGRUPO = ' || coalesce(quote_literal(new.nomegrupo), 'null') || ', ';
			campos_new   = campos_new || 'TIPOGRUPO = ' || coalesce(quote_literal(new.tipogrupo), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEMINIMAUNITARIAGRUPO = ' || coalesce(quote_literal(new.quantidademinimaunitariagrupo), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEMINIMAMETROGRUPO = ' || coalesce(quote_literal(new.quantidademinimametrogrupo), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALCOMISSAOGRUPO = ' || coalesce(quote_literal(new.percentualcomissaogrupo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigogrupo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE GRUPO SET ';
			sql_rolback = 'UPDATE GRUPO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigogrupo &lt;&gt; old.codigogrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');
				sql_rolback = sql_rolback || ' CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null');
				campos_new  = campos_new  || ' CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');
				campos_old  = campos_old  || ' CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null');
				first = false;
			end if;

			if (new.nomegrupo &lt;&gt; old.nomegrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEGRUPO = ' || coalesce(quote_literal(new.nomegrupo), 'null');
				sql_rolback = sql_rolback || ' NOMEGRUPO = ' || coalesce(quote_literal(old.nomegrupo), 'null');
				campos_new  = campos_new  || ' NOMEGRUPO = ' || coalesce(quote_literal(new.nomegrupo), 'null');
				campos_old  = campos_old  || ' NOMEGRUPO = ' || coalesce(quote_literal(old.nomegrupo), 'null');
				first = false;
			end if;

			if (new.tipogrupo &lt;&gt; old.tipogrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOGRUPO = ' || coalesce(quote_literal(new.tipogrupo), 'null');
				sql_rolback = sql_rolback || ' TIPOGRUPO = ' || coalesce(quote_literal(old.tipogrupo), 'null');
				campos_new  = campos_new  || ' TIPOGRUPO = ' || coalesce(quote_literal(new.tipogrupo), 'null');
				campos_old  = campos_old  || ' TIPOGRUPO = ' || coalesce(quote_literal(old.tipogrupo), 'null');
				first = false;
			end if;

			if (new.quantidademinimaunitariagrupo &lt;&gt; old.quantidademinimaunitariagrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEMINIMAUNITARIAGRUPO = ' || coalesce(quote_literal(new.quantidademinimaunitariagrupo), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEMINIMAUNITARIAGRUPO = ' || coalesce(quote_literal(old.quantidademinimaunitariagrupo), 'null');
				campos_new  = campos_new  || ' QUANTIDADEMINIMAUNITARIAGRUPO = ' || coalesce(quote_literal(new.quantidademinimaunitariagrupo), 'null');
				campos_old  = campos_old  || ' QUANTIDADEMINIMAUNITARIAGRUPO = ' || coalesce(quote_literal(old.quantidademinimaunitariagrupo), 'null');
				first = false;
			end if;

			if (new.quantidademinimametrogrupo &lt;&gt; old.quantidademinimametrogrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEMINIMAMETROGRUPO = ' || coalesce(quote_literal(new.quantidademinimametrogrupo), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEMINIMAMETROGRUPO = ' || coalesce(quote_literal(old.quantidademinimametrogrupo), 'null');
				campos_new  = campos_new  || ' QUANTIDADEMINIMAMETROGRUPO = ' || coalesce(quote_literal(new.quantidademinimametrogrupo), 'null');
				campos_old  = campos_old  || ' QUANTIDADEMINIMAMETROGRUPO = ' || coalesce(quote_literal(old.quantidademinimametrogrupo), 'null');
				first = false;
			end if;

			if (new.percentualcomissaogrupo &lt;&gt; old.percentualcomissaogrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALCOMISSAOGRUPO = ' || coalesce(quote_literal(new.percentualcomissaogrupo), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALCOMISSAOGRUPO = ' || coalesce(quote_literal(old.percentualcomissaogrupo), 'null');
				campos_new  = campos_new  || ' PERCENTUALCOMISSAOGRUPO = ' || coalesce(quote_literal(new.percentualcomissaogrupo), 'null');
				campos_old  = campos_old  || ' PERCENTUALCOMISSAOGRUPO = ' || coalesce(quote_literal(old.percentualcomissaogrupo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');

			sql_chave = coalesce(quote_literal(new.codigogrupo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO GRUPO (CODIGOGRUPO, NOMEGRUPO, TIPOGRUPO, QUANTIDADEMINIMAUNITARIAGRUPO, QUANTIDADEMINIMAMETROGRUPO, PERCENTUALCOMISSAOGRUPO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomegrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipogrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidademinimaunitariagrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidademinimametrogrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualcomissaogrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM GRUPO WHERE CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null') || ', ';
			campos_old  = campos_old || 'NOMEGRUPO = ' || coalesce(quote_literal(old.nomegrupo), 'null') || ', ';
			campos_old  = campos_old || 'TIPOGRUPO = ' || coalesce(quote_literal(old.tipogrupo), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEMINIMAUNITARIAGRUPO = ' || coalesce(quote_literal(old.quantidademinimaunitariagrupo), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEMINIMAMETROGRUPO = ' || coalesce(quote_literal(old.quantidademinimametrogrupo), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALCOMISSAOGRUPO = ' || coalesce(quote_literal(old.percentualcomissaogrupo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigogrupo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'grupo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('grupo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('grupo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_grupoempresa()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_grupoempresa() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO GRUPOEMPRESA (CODIGOGRUPOEMPRESA, NOMEGRUPOEMPRESA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomegrupoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM GRUPOEMPRESA WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ', ';
			campos_new   = campos_new || 'NOMEGRUPOEMPRESA = ' || coalesce(quote_literal(new.nomegrupoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigogrupoempresa), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE GRUPOEMPRESA SET ';
			sql_rolback = 'UPDATE GRUPOEMPRESA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigogrupoempresa &lt;&gt; old.codigogrupoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null');
				first = false;
			end if;

			if (new.nomegrupoempresa &lt;&gt; old.nomegrupoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEGRUPOEMPRESA = ' || coalesce(quote_literal(new.nomegrupoempresa), 'null');
				sql_rolback = sql_rolback || ' NOMEGRUPOEMPRESA = ' || coalesce(quote_literal(old.nomegrupoempresa), 'null');
				campos_new  = campos_new  || ' NOMEGRUPOEMPRESA = ' || coalesce(quote_literal(new.nomegrupoempresa), 'null');
				campos_old  = campos_old  || ' NOMEGRUPOEMPRESA = ' || coalesce(quote_literal(old.nomegrupoempresa), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');

			sql_chave = coalesce(quote_literal(new.codigogrupoempresa), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO GRUPOEMPRESA (CODIGOGRUPOEMPRESA, NOMEGRUPOEMPRESA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogrupoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomegrupoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM GRUPOEMPRESA WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null') || ', ';
			campos_old  = campos_old || 'NOMEGRUPOEMPRESA = ' || coalesce(quote_literal(old.nomegrupoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigogrupoempresa), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'grupoempresa', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('grupoempresa', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('grupoempresa', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_grupoempresaloja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_grupoempresaloja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO GRUPOEMPRESALOJA (CODIGOGRUPOEMPRESA, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM GRUPOEMPRESALOJA WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigogrupoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE GRUPOEMPRESALOJA SET ';
			sql_rolback = 'UPDATE GRUPOEMPRESALOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigogrupoempresa &lt;&gt; old.codigogrupoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(new.codigogrupoempresa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigogrupoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO GRUPOEMPRESALOJA (CODIGOGRUPOEMPRESA, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogrupoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM GRUPOEMPRESALOJA WHERE CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOGRUPOEMPRESA = ' || coalesce(quote_literal(old.codigogrupoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigogrupoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'grupoempresaloja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('grupoempresaloja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('grupoempresaloja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_historicotrocamanutencao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_historicotrocamanutencao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO HISTORICOTROCAMANUTENCAO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCAMANUTENCAO, CODIGOHISTORICOTROCAMANUTENCAO, DATAHORAHISTORICOTROCAMANUTENCAO, DESCRICAOHISTORICOTROCAMANUTENCAO, CODIGOSITUACAOTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, FLAGEMAILENVIADOTROCAMANUTENCAO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorahistoricotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaohistoricotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagemailenviadotrocamanutencao), 'null') || ')';

			sql_rolback = 'DELETE FROM HISTORICOTROCAMANUTENCAO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ' AND CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.datahorahistoricotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaohistoricotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'FLAGEMAILENVIADOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagemailenviadotrocamanutencao), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null')  || ', ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE HISTORICOTROCAMANUTENCAO SET ';
			sql_rolback = 'UPDATE HISTORICOTROCAMANUTENCAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotrocamanutencao &lt;&gt; old.codigotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigohistoricotrocamanutencao &lt;&gt; old.codigohistoricotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigohistoricotrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigohistoricotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.datahorahistoricotrocamanutencao &lt;&gt; old.datahorahistoricotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.datahorahistoricotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' DATAHORAHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.datahorahistoricotrocamanutencao), 'null');
				campos_new  = campos_new  || ' DATAHORAHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.datahorahistoricotrocamanutencao), 'null');
				campos_old  = campos_old  || ' DATAHORAHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.datahorahistoricotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.descricaohistoricotrocamanutencao &lt;&gt; old.descricaohistoricotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaohistoricotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaohistoricotrocamanutencao), 'null');
				campos_new  = campos_new  || ' DESCRICAOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaohistoricotrocamanutencao), 'null');
				campos_old  = campos_old  || ' DESCRICAOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaohistoricotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigosituacaotrocamanutencao &lt;&gt; old.codigosituacaotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.flagemailenviadotrocamanutencao &lt;&gt; old.flagemailenviadotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGEMAILENVIADOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagemailenviadotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' FLAGEMAILENVIADOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagemailenviadotrocamanutencao), 'null');
				campos_new  = campos_new  || ' FLAGEMAILENVIADOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagemailenviadotrocamanutencao), 'null');
				campos_old  = campos_old  || ' FLAGEMAILENVIADOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagemailenviadotrocamanutencao), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ' AND CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ' AND CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null')  || ', ' || coalesce(quote_literal(new.codigohistoricotrocamanutencao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO HISTORICOTROCAMANUTENCAO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCAMANUTENCAO, CODIGOHISTORICOTROCAMANUTENCAO, DATAHORAHISTORICOTROCAMANUTENCAO, DESCRICAOHISTORICOTROCAMANUTENCAO, CODIGOSITUACAOTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, FLAGEMAILENVIADOTROCAMANUTENCAO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigohistoricotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorahistoricotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaohistoricotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagemailenviadotrocamanutencao), 'null') || ')';

			sql_replica = 'DELETE FROM HISTORICOTROCAMANUTENCAO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ' AND CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigohistoricotrocamanutencao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigohistoricotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.datahorahistoricotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOHISTORICOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaohistoricotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'FLAGEMAILENVIADOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagemailenviadotrocamanutencao), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null')  || ', ' || coalesce(quote_literal(old.codigohistoricotrocamanutencao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'historicotrocamanutencao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('historicotrocamanutencao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('historicotrocamanutencao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_horariotrabalho()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_horariotrabalho() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO HORARIOTRABALHO (CODIGOEMPRESA, CODIGOLOJA, CODIGOHORARIOTRABALHO, DESCRICAOHORARIOTRABALHO, HORAINICIO1HORARIOTRABALHO, HORAFIM1HORARIOTRABALHO, HORAINICIO2HORARIOTRABALHO, HORAFIM2HORARIOTRABALHO, HORAINICIO3HORARIOTRABALHO, HORAFIM3HORARIOTRABALHO, HORAINICIO4HORARIOTRABALHO, HORAFIM4HORARIOTRABALHO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigohorariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaohorariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horainicio1horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horafim1horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horainicio2horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horafim2horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horainicio3horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horafim3horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horainicio4horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.horafim4horariotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM HORARIOTRABALHO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOHORARIOTRABALHO = ' || coalesce(quote_literal(new.descricaohorariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAINICIO1HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio1horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAFIM1HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim1horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAINICIO2HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio2horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAFIM2HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim2horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAINICIO3HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio3horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAFIM3HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim3horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAINICIO4HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio4horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'HORAFIM4HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim4horariotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE HORARIOTRABALHO SET ';
			sql_rolback = 'UPDATE HORARIOTRABALHO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigohorariotrabalho &lt;&gt; old.codigohorariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null');
				first = false;
			end if;

			if (new.descricaohorariotrabalho &lt;&gt; old.descricaohorariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOHORARIOTRABALHO = ' || coalesce(quote_literal(new.descricaohorariotrabalho), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOHORARIOTRABALHO = ' || coalesce(quote_literal(old.descricaohorariotrabalho), 'null');
				campos_new  = campos_new  || ' DESCRICAOHORARIOTRABALHO = ' || coalesce(quote_literal(new.descricaohorariotrabalho), 'null');
				campos_old  = campos_old  || ' DESCRICAOHORARIOTRABALHO = ' || coalesce(quote_literal(old.descricaohorariotrabalho), 'null');
				first = false;
			end if;

			if (new.horainicio1horariotrabalho &lt;&gt; old.horainicio1horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAINICIO1HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio1horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAINICIO1HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio1horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAINICIO1HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio1horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAINICIO1HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio1horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horafim1horariotrabalho &lt;&gt; old.horafim1horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAFIM1HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim1horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAFIM1HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim1horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAFIM1HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim1horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAFIM1HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim1horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horainicio2horariotrabalho &lt;&gt; old.horainicio2horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAINICIO2HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio2horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAINICIO2HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio2horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAINICIO2HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio2horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAINICIO2HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio2horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horafim2horariotrabalho &lt;&gt; old.horafim2horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAFIM2HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim2horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAFIM2HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim2horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAFIM2HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim2horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAFIM2HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim2horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horainicio3horariotrabalho &lt;&gt; old.horainicio3horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAINICIO3HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio3horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAINICIO3HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio3horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAINICIO3HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio3horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAINICIO3HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio3horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horafim3horariotrabalho &lt;&gt; old.horafim3horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAFIM3HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim3horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAFIM3HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim3horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAFIM3HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim3horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAFIM3HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim3horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horainicio4horariotrabalho &lt;&gt; old.horainicio4horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAINICIO4HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio4horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAINICIO4HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio4horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAINICIO4HORARIOTRABALHO = ' || coalesce(quote_literal(new.horainicio4horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAINICIO4HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio4horariotrabalho), 'null');
				first = false;
			end if;

			if (new.horafim4horariotrabalho &lt;&gt; old.horafim4horariotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HORAFIM4HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim4horariotrabalho), 'null');
				sql_rolback = sql_rolback || ' HORAFIM4HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim4horariotrabalho), 'null');
				campos_new  = campos_new  || ' HORAFIM4HORARIOTRABALHO = ' || coalesce(quote_literal(new.horafim4horariotrabalho), 'null');
				campos_old  = campos_old  || ' HORAFIM4HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim4horariotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigohorariotrabalho), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO HORARIOTRABALHO (CODIGOEMPRESA, CODIGOLOJA, CODIGOHORARIOTRABALHO, DESCRICAOHORARIOTRABALHO, HORAINICIO1HORARIOTRABALHO, HORAFIM1HORARIOTRABALHO, HORAINICIO2HORARIOTRABALHO, HORAFIM2HORARIOTRABALHO, HORAINICIO3HORARIOTRABALHO, HORAFIM3HORARIOTRABALHO, HORAINICIO4HORARIOTRABALHO, HORAFIM4HORARIOTRABALHO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigohorariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaohorariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horainicio1horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horafim1horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horainicio2horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horafim2horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horainicio3horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horafim3horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horainicio4horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.horafim4horariotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM HORARIOTRABALHO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOHORARIOTRABALHO = ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOHORARIOTRABALHO = ' || coalesce(quote_literal(old.descricaohorariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAINICIO1HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio1horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAFIM1HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim1horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAINICIO2HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio2horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAFIM2HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim2horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAINICIO3HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio3horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAFIM3HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim3horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAINICIO4HORARIOTRABALHO = ' || coalesce(quote_literal(old.horainicio4horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'HORAFIM4HORARIOTRABALHO = ' || coalesce(quote_literal(old.horafim4horariotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigohorariotrabalho), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'horariotrabalho', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('horariotrabalho', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('horariotrabalho', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemcurral()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemcurral() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMCURRAL (CODIGOEMPRESA, CODIGOLOJA, CODIGOCURRAL, CODIGOITEMCURRAL, CODIGOEMPRESAPESSOA, CODIGOLOJAPESSOA, CODIGOPESSOA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMCURRAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemcurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemcurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMCURRAL WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ' AND CODIGOITEMCURRAL = ' || coalesce(quote_literal(new.codigoitemcurral), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMCURRAL = ' || coalesce(quote_literal(new.codigoitemcurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(new.codigoempresapessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPESSOA = ' || coalesce(quote_literal(new.codigolojapessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMCURRAL = ' || coalesce(quote_literal(new.quantidadeitemcurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocurral), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemcurral), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMCURRAL SET ';
			sql_rolback = 'UPDATE ITEMCURRAL SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocurral &lt;&gt; old.codigocurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				campos_new  = campos_new  || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				campos_old  = campos_old  || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				first = false;
			end if;

			if (new.codigoitemcurral &lt;&gt; old.codigoitemcurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMCURRAL = ' || coalesce(quote_literal(new.codigoitemcurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMCURRAL = ' || coalesce(quote_literal(old.codigoitemcurral), 'null');
				campos_new  = campos_new  || ' CODIGOITEMCURRAL = ' || coalesce(quote_literal(new.codigoitemcurral), 'null');
				campos_old  = campos_old  || ' CODIGOITEMCURRAL = ' || coalesce(quote_literal(old.codigoitemcurral), 'null');
				first = false;
			end if;

			if (new.codigoempresapessoa &lt;&gt; old.codigoempresapessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(new.codigoempresapessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(old.codigoempresapessoa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(new.codigoempresapessoa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(old.codigoempresapessoa), 'null');
				first = false;
			end if;

			if (new.codigolojapessoa &lt;&gt; old.codigolojapessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(new.codigolojapessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(old.codigolojapessoa), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(new.codigolojapessoa), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPESSOA = ' || coalesce(quote_literal(old.codigolojapessoa), 'null');
				first = false;
			end if;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeitemcurral &lt;&gt; old.quantidadeitemcurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMCURRAL = ' || coalesce(quote_literal(new.quantidadeitemcurral), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMCURRAL = ' || coalesce(quote_literal(old.quantidadeitemcurral), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMCURRAL = ' || coalesce(quote_literal(new.quantidadeitemcurral), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMCURRAL = ' || coalesce(quote_literal(old.quantidadeitemcurral), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ' AND CODIGOITEMCURRAL = ' || coalesce(quote_literal(new.codigoitemcurral), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ' AND CODIGOITEMCURRAL = ' || coalesce(quote_literal(new.codigoitemcurral), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocurral), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemcurral), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMCURRAL (CODIGOEMPRESA, CODIGOLOJA, CODIGOCURRAL, CODIGOITEMCURRAL, CODIGOEMPRESAPESSOA, CODIGOLOJAPESSOA, CODIGOPESSOA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMCURRAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemcurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemcurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMCURRAL WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null') || ' AND CODIGOITEMCURRAL = ' || coalesce(quote_literal(old.codigoitemcurral), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMCURRAL = ' || coalesce(quote_literal(old.codigoitemcurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPESSOA = ' || coalesce(quote_literal(old.codigoempresapessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPESSOA = ' || coalesce(quote_literal(old.codigolojapessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMCURRAL = ' || coalesce(quote_literal(old.quantidadeitemcurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocurral), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemcurral), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemcurral', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemcurral', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemcurral', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itementradaestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itementradaestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMENTRADAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOENTRADAESTOQUE, CODIGOITEMENTRADAESTOQUE, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMENTRADAESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitementradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitementradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMENTRADAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ' AND CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.quantidadeitementradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoentradaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMENTRADAESTOQUE SET ';
			sql_rolback = 'UPDATE ITEMENTRADAESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoentradaestoque &lt;&gt; old.codigoentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoitementradaestoque &lt;&gt; old.codigoitementradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoitementradaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoitementradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeitementradaestoque &lt;&gt; old.quantidadeitementradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.quantidadeitementradaestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.quantidadeitementradaestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.quantidadeitementradaestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.quantidadeitementradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ' AND CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ' AND CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoentradaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoitementradaestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMENTRADAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOENTRADAESTOQUE, CODIGOITEMENTRADAESTOQUE, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMENTRADAESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitementradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitementradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMENTRADAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ' AND CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoitementradaestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoitementradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMENTRADAESTOQUE = ' || coalesce(quote_literal(old.quantidadeitementradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoentradaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoitementradaestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itementradaestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itementradaestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itementradaestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemmetavenda()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemmetavenda() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMMETAVENDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMETAVENDA, CODIGOITEMMETAVENDA, REFERENCIAMETAVENDA, TIPOITEMMETAVENDA, CODIGONIVELMETAVENDA, VALORMETAVENDA, PREMIOMETAVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigometavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.referenciametavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipoitemmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonivelmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valormetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.premiometavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMMETAVENDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'REFERENCIAMETAVENDA = ' || coalesce(quote_literal(new.referenciametavenda), 'null') || ', ';
			campos_new   = campos_new || 'TIPOITEMMETAVENDA = ' || coalesce(quote_literal(new.tipoitemmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'VALORMETAVENDA = ' || coalesce(quote_literal(new.valormetavenda), 'null') || ', ';
			campos_new   = campos_new || 'PREMIOMETAVENDA = ' || coalesce(quote_literal(new.premiometavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigometavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMMETAVENDA SET ';
			sql_rolback = 'UPDATE ITEMMETAVENDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigometavenda &lt;&gt; old.codigometavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');
				campos_new  = campos_new  || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
				campos_old  = campos_old  || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');
				first = false;
			end if;

			if (new.codigoitemmetavenda &lt;&gt; old.codigoitemmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null');
				campos_new  = campos_new  || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');
				campos_old  = campos_old  || ' CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null');
				first = false;
			end if;

			if (new.referenciametavenda &lt;&gt; old.referenciametavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' REFERENCIAMETAVENDA = ' || coalesce(quote_literal(new.referenciametavenda), 'null');
				sql_rolback = sql_rolback || ' REFERENCIAMETAVENDA = ' || coalesce(quote_literal(old.referenciametavenda), 'null');
				campos_new  = campos_new  || ' REFERENCIAMETAVENDA = ' || coalesce(quote_literal(new.referenciametavenda), 'null');
				campos_old  = campos_old  || ' REFERENCIAMETAVENDA = ' || coalesce(quote_literal(old.referenciametavenda), 'null');
				first = false;
			end if;

			if (new.tipoitemmetavenda &lt;&gt; old.tipoitemmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOITEMMETAVENDA = ' || coalesce(quote_literal(new.tipoitemmetavenda), 'null');
				sql_rolback = sql_rolback || ' TIPOITEMMETAVENDA = ' || coalesce(quote_literal(old.tipoitemmetavenda), 'null');
				campos_new  = campos_new  || ' TIPOITEMMETAVENDA = ' || coalesce(quote_literal(new.tipoitemmetavenda), 'null');
				campos_old  = campos_old  || ' TIPOITEMMETAVENDA = ' || coalesce(quote_literal(old.tipoitemmetavenda), 'null');
				first = false;
			end if;

			if (new.codigonivelmetavenda &lt;&gt; old.codigonivelmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null');
				campos_new  = campos_new  || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');
				campos_old  = campos_old  || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null');
				first = false;
			end if;

			if (new.valormetavenda &lt;&gt; old.valormetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORMETAVENDA = ' || coalesce(quote_literal(new.valormetavenda), 'null');
				sql_rolback = sql_rolback || ' VALORMETAVENDA = ' || coalesce(quote_literal(old.valormetavenda), 'null');
				campos_new  = campos_new  || ' VALORMETAVENDA = ' || coalesce(quote_literal(new.valormetavenda), 'null');
				campos_old  = campos_old  || ' VALORMETAVENDA = ' || coalesce(quote_literal(old.valormetavenda), 'null');
				first = false;
			end if;

			if (new.premiometavenda &lt;&gt; old.premiometavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PREMIOMETAVENDA = ' || coalesce(quote_literal(new.premiometavenda), 'null');
				sql_rolback = sql_rolback || ' PREMIOMETAVENDA = ' || coalesce(quote_literal(old.premiometavenda), 'null');
				campos_new  = campos_new  || ' PREMIOMETAVENDA = ' || coalesce(quote_literal(new.premiometavenda), 'null');
				campos_old  = campos_old  || ' PREMIOMETAVENDA = ' || coalesce(quote_literal(old.premiometavenda), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigometavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemmetavenda), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMMETAVENDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMETAVENDA, CODIGOITEMMETAVENDA, REFERENCIAMETAVENDA, TIPOITEMMETAVENDA, CODIGONIVELMETAVENDA, VALORMETAVENDA, PREMIOMETAVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigometavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.referenciametavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipoitemmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonivelmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valormetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.premiometavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMMETAVENDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null') || ' AND CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMMETAVENDA = ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'REFERENCIAMETAVENDA = ' || coalesce(quote_literal(old.referenciametavenda), 'null') || ', ';
			campos_old  = campos_old || 'TIPOITEMMETAVENDA = ' || coalesce(quote_literal(old.tipoitemmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'VALORMETAVENDA = ' || coalesce(quote_literal(old.valormetavenda), 'null') || ', ';
			campos_old  = campos_old || 'PREMIOMETAVENDA = ' || coalesce(quote_literal(old.premiometavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigometavenda), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemmetavenda), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemmetavenda', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemmetavenda', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemmetavenda', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemnfentrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemnfentrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMNFENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, SEQUENCIALITEMNFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CFOPITEMNFENTRADA, DESCRICAOITEMNFENTRADA, NCMITEMNFENTRADA, UNIDADEITEMNFENTRADA, QUANTIDADEITEMNFENTRADA, VALORUNITARIOITEMNFENTRADA, VALORSEGUROITEMNFENTRADA, VALORDESCONTOITEMNFENTRADA, VALORFRETEITEMNFENTRADA, VALOROUTRASDESPESASITEMNFENTRADA, VALORTOTALBRUTOITEMNFENTRADA, VALORTOTALLIQUIDOITEMNFENTRADA, CSTICMSITEMNFENTRADA, ALIQUOTAICMSITEMNFENTRADA, BASECALCULOICMSITEMNFENTRADA, PERCENTUALREDUCAOBCITEMNFENTRADA, VALORICMSITEMNFENTRADA, ALIQUOTAICMSSTITEMNFENTRADA, PERCENTUALMVAITEMNFENTRADA, BASEICMSSTITEMNFENTRADA, VALORICMSSTITEMNFENTRADA, CSTPISITEMNFENTRADA, ALIQUOTAPISITEMNFENTRADA, VALORPISITEMNFENTRADA, CSTCOFINSITEMNFENTRADA, ALIQUOTACOFINSITEMNFENTRADA, VALORCOFINSITEMNFENTRADA, CSTIPIITEMNFENTRADA, ALIQUOTAIPIITEMNFENTRADA, VALORIPIITEMNFENTRADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cfopitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ncmitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.unidadeitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.csticmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstpisitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorpisitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstipiitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoripiitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMNFENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CFOPITEMNFENTRADA = ' || coalesce(quote_literal(new.cfopitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(new.descricaoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'NCMITEMNFENTRADA = ' || coalesce(quote_literal(new.ncmitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.unidadeitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.csticmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(new.cstpisitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(new.valorpisitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.cstipiitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.valoripiitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMNFENTRADA SET ';
			sql_rolback = 'UPDATE ITEMNFENTRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfentrada &lt;&gt; old.codigonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				campos_new  = campos_new  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				campos_old  = campos_old  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				first = false;
			end if;

			if (new.serienfentrada &lt;&gt; old.serienfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				sql_rolback = sql_rolback || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				campos_new  = campos_new  || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				campos_old  = campos_old  || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				first = false;
			end if;

			if (new.sequencialitemnfentrada &lt;&gt; old.sequencialitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null');
				campos_new  = campos_new  || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null');
				campos_old  = campos_old  || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitentenfentrada &lt;&gt; old.codigoempresaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigolojaemitentenfentrada &lt;&gt; old.codigolojaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitentenfentrada &lt;&gt; old.codigopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitentenfentrada &lt;&gt; old.codigoenderecopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.cfopitemnfentrada &lt;&gt; old.cfopitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(new.cfopitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(old.cfopitemnfentrada), 'null');
				campos_new  = campos_new  || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(new.cfopitemnfentrada), 'null');
				campos_old  = campos_old  || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(old.cfopitemnfentrada), 'null');
				first = false;
			end if;

			if (new.descricaoitemnfentrada &lt;&gt; old.descricaoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(new.descricaoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(old.descricaoitemnfentrada), 'null');
				campos_new  = campos_new  || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(new.descricaoitemnfentrada), 'null');
				campos_old  = campos_old  || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(old.descricaoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.ncmitemnfentrada &lt;&gt; old.ncmitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(new.ncmitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(old.ncmitemnfentrada), 'null');
				campos_new  = campos_new  || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(new.ncmitemnfentrada), 'null');
				campos_old  = campos_old  || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(old.ncmitemnfentrada), 'null');
				first = false;
			end if;

			if (new.unidadeitemnfentrada &lt;&gt; old.unidadeitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.unidadeitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.unidadeitemnfentrada), 'null');
				campos_new  = campos_new  || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.unidadeitemnfentrada), 'null');
				campos_old  = campos_old  || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.unidadeitemnfentrada), 'null');
				first = false;
			end if;

			if (new.quantidadeitemnfentrada &lt;&gt; old.quantidadeitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorunitarioitemnfentrada &lt;&gt; old.valorunitarioitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorseguroitemnfentrada &lt;&gt; old.valorseguroitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valordescontoitemnfentrada &lt;&gt; old.valordescontoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorfreteitemnfentrada &lt;&gt; old.valorfreteitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoroutrasdespesasitemnfentrada &lt;&gt; old.valoroutrasdespesasitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalbrutoitemnfentrada &lt;&gt; old.valortotalbrutoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalliquidoitemnfentrada &lt;&gt; old.valortotalliquidoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.csticmsitemnfentrada &lt;&gt; old.csticmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.csticmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.csticmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.csticmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.csticmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotaicmsitemnfentrada &lt;&gt; old.aliquotaicmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.basecalculoicmsitemnfentrada &lt;&gt; old.basecalculoicmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.percentualreducaobcitemnfentrada &lt;&gt; old.percentualreducaobcitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null');
				campos_new  = campos_new  || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null');
				campos_old  = campos_old  || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoricmsitemnfentrada &lt;&gt; old.valoricmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotaicmsstitemnfentrada &lt;&gt; old.aliquotaicmsstitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null');
				first = false;
			end if;

			if (new.percentualmvaitemnfentrada &lt;&gt; old.percentualmvaitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null');
				campos_new  = campos_new  || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null');
				campos_old  = campos_old  || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null');
				first = false;
			end if;

			if (new.baseicmsstitemnfentrada &lt;&gt; old.baseicmsstitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null');
				campos_new  = campos_new  || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null');
				campos_old  = campos_old  || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoricmsstitemnfentrada &lt;&gt; old.valoricmsstitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null');
				first = false;
			end if;

			if (new.cstpisitemnfentrada &lt;&gt; old.cstpisitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(new.cstpisitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(old.cstpisitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(new.cstpisitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(old.cstpisitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotapisitemnfentrada &lt;&gt; old.aliquotapisitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorpisitemnfentrada &lt;&gt; old.valorpisitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(new.valorpisitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(old.valorpisitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(new.valorpisitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(old.valorpisitemnfentrada), 'null');
				first = false;
			end if;

			if (new.cstcofinsitemnfentrada &lt;&gt; old.cstcofinsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotacofinsitemnfentrada &lt;&gt; old.aliquotacofinsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorcofinsitemnfentrada &lt;&gt; old.valorcofinsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.cstipiitemnfentrada &lt;&gt; old.cstipiitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.cstipiitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.cstipiitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.cstipiitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.cstipiitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotaipiitemnfentrada &lt;&gt; old.aliquotaipiitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoripiitemnfentrada &lt;&gt; old.valoripiitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.valoripiitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.valoripiitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.valoripiitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.valoripiitemnfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMNFENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, SEQUENCIALITEMNFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CFOPITEMNFENTRADA, DESCRICAOITEMNFENTRADA, NCMITEMNFENTRADA, UNIDADEITEMNFENTRADA, QUANTIDADEITEMNFENTRADA, VALORUNITARIOITEMNFENTRADA, VALORSEGUROITEMNFENTRADA, VALORDESCONTOITEMNFENTRADA, VALORFRETEITEMNFENTRADA, VALOROUTRASDESPESASITEMNFENTRADA, VALORTOTALBRUTOITEMNFENTRADA, VALORTOTALLIQUIDOITEMNFENTRADA, CSTICMSITEMNFENTRADA, ALIQUOTAICMSITEMNFENTRADA, BASECALCULOICMSITEMNFENTRADA, PERCENTUALREDUCAOBCITEMNFENTRADA, VALORICMSITEMNFENTRADA, ALIQUOTAICMSSTITEMNFENTRADA, PERCENTUALMVAITEMNFENTRADA, BASEICMSSTITEMNFENTRADA, VALORICMSSTITEMNFENTRADA, CSTPISITEMNFENTRADA, ALIQUOTAPISITEMNFENTRADA, VALORPISITEMNFENTRADA, CSTCOFINSITEMNFENTRADA, ALIQUOTACOFINSITEMNFENTRADA, VALORCOFINSITEMNFENTRADA, CSTIPIITEMNFENTRADA, ALIQUOTAIPIITEMNFENTRADA, VALORIPIITEMNFENTRADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cfopitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ncmitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.unidadeitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.csticmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstpisitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorpisitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstipiitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoripiitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMNFENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CFOPITEMNFENTRADA = ' || coalesce(quote_literal(old.cfopitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(old.descricaoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'NCMITEMNFENTRADA = ' || coalesce(quote_literal(old.ncmitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.unidadeitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.csticmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(old.cstpisitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(old.valorpisitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.cstipiitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.valoripiitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(old.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemnfentrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemnfentrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemnfentrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemnfsaida()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemnfsaida() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMNFSAIDA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFSAIDA, SERIENFSAIDA, SEQUENCIALITEMNFSAIDA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CFOPITEMNFSAIDA, DESCRICAOITEMNFSAIDA, NCMITEMNFSAIDA, UNIDADEITEMNFSAIDA, QUANTIDADEITEMNFSAIDA, VALORUNITARIOITEMNFSAIDA, VALORSEGUROITEMNFSAIDA, VALORDESCONTOITEMNFSAIDA, VALORFRETEITEMNFSAIDA, VALOROUTRASDESPESASITEMNFSAIDA, VALORTOTALBRUTOITEMNFSAIDA, VALORTOTALLIQUIDOITEMNFSAIDA, CSTICMSITEMNFSAIDA, ALIQUOTAICMSITEMNFSAIDA, BASECALCULOICMSITEMNFSAIDA, PERCENTUALREDUCAOBCITEMNFSAIDA, VALORICMSITEMNFSAIDA, ALIQUOTAICMSSTITEMNFSAIDA, PERCENTUALMVAITEMNFSAIDA, BASEICMSSTITEMNFSAIDA, VALORICMSSTITEMNFSAIDA, CSTPISITEMNFSAIDA, ALIQUOTAPISITEMNFSAIDA, VALORPISITEMNFSAIDA, CSTCOFINSITEMNFSAIDA, ALIQUOTACOFINSITEMNFSAIDA, VALORCOFINSITEMNFSAIDA, CSTIPIITEMNFSAIDA, ALIQUOTAIPIITEMNFSAIDA, VALORIPIITEMNFSAIDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cfopitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ncmitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.unidadeitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorunitarioitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorseguroitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valordescontoitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfreteitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoroutrasdespesasitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalbrutoitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalliquidoitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.csticmsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.basecalculoicmsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualreducaobcitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmsstitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualmvaitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.baseicmsstitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsstitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstpisitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotapisitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorpisitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstcofinsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotacofinsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorcofinsitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstipiitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaipiitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoripiitemnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMNFSAIDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null') || ' AND SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CFOPITEMNFSAIDA = ' || coalesce(quote_literal(new.cfopitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOITEMNFSAIDA = ' || coalesce(quote_literal(new.descricaoitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'NCMITEMNFSAIDA = ' || coalesce(quote_literal(new.ncmitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'UNIDADEITEMNFSAIDA = ' || coalesce(quote_literal(new.unidadeitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMNFSAIDA = ' || coalesce(quote_literal(new.quantidadeitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORUNITARIOITEMNFSAIDA = ' || coalesce(quote_literal(new.valorunitarioitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORSEGUROITEMNFSAIDA = ' || coalesce(quote_literal(new.valorseguroitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORDESCONTOITEMNFSAIDA = ' || coalesce(quote_literal(new.valordescontoitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORFRETEITEMNFSAIDA = ' || coalesce(quote_literal(new.valorfreteitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALOROUTRASDESPESASITEMNFSAIDA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALBRUTOITEMNFSAIDA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALLIQUIDOITEMNFSAIDA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CSTICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.csticmsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'BASECALCULOICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALREDUCAOBCITEMNFSAIDA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.valoricmsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALMVAITEMNFSAIDA = ' || coalesce(quote_literal(new.percentualmvaitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'BASEICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.baseicmsstitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.valoricmsstitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CSTPISITEMNFSAIDA = ' || coalesce(quote_literal(new.cstpisitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAPISITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotapisitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORPISITEMNFSAIDA = ' || coalesce(quote_literal(new.valorpisitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CSTCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.cstcofinsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTACOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.valorcofinsitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CSTIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.cstipiitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaipiitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.valoripiitemnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfsaida), 'null')  || ', ' || coalesce(quote_literal(new.serienfsaida), 'null')  || ', ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMNFSAIDA SET ';
			sql_rolback = 'UPDATE ITEMNFSAIDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfsaida &lt;&gt; old.codigonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null');
				campos_new  = campos_new  || ' CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null');
				campos_old  = campos_old  || ' CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null');
				first = false;
			end if;

			if (new.serienfsaida &lt;&gt; old.serienfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
				sql_rolback = sql_rolback || ' SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');
				campos_new  = campos_new  || ' SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
				campos_old  = campos_old  || ' SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');
				first = false;
			end if;

			if (new.sequencialitemnfsaida &lt;&gt; old.sequencialitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(old.sequencialitemnfsaida), 'null');
				campos_new  = campos_new  || ' SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null');
				campos_old  = campos_old  || ' SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(old.sequencialitemnfsaida), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.cfopitemnfsaida &lt;&gt; old.cfopitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CFOPITEMNFSAIDA = ' || coalesce(quote_literal(new.cfopitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' CFOPITEMNFSAIDA = ' || coalesce(quote_literal(old.cfopitemnfsaida), 'null');
				campos_new  = campos_new  || ' CFOPITEMNFSAIDA = ' || coalesce(quote_literal(new.cfopitemnfsaida), 'null');
				campos_old  = campos_old  || ' CFOPITEMNFSAIDA = ' || coalesce(quote_literal(old.cfopitemnfsaida), 'null');
				first = false;
			end if;

			if (new.descricaoitemnfsaida &lt;&gt; old.descricaoitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOITEMNFSAIDA = ' || coalesce(quote_literal(new.descricaoitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOITEMNFSAIDA = ' || coalesce(quote_literal(old.descricaoitemnfsaida), 'null');
				campos_new  = campos_new  || ' DESCRICAOITEMNFSAIDA = ' || coalesce(quote_literal(new.descricaoitemnfsaida), 'null');
				campos_old  = campos_old  || ' DESCRICAOITEMNFSAIDA = ' || coalesce(quote_literal(old.descricaoitemnfsaida), 'null');
				first = false;
			end if;

			if (new.ncmitemnfsaida &lt;&gt; old.ncmitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NCMITEMNFSAIDA = ' || coalesce(quote_literal(new.ncmitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' NCMITEMNFSAIDA = ' || coalesce(quote_literal(old.ncmitemnfsaida), 'null');
				campos_new  = campos_new  || ' NCMITEMNFSAIDA = ' || coalesce(quote_literal(new.ncmitemnfsaida), 'null');
				campos_old  = campos_old  || ' NCMITEMNFSAIDA = ' || coalesce(quote_literal(old.ncmitemnfsaida), 'null');
				first = false;
			end if;

			if (new.unidadeitemnfsaida &lt;&gt; old.unidadeitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UNIDADEITEMNFSAIDA = ' || coalesce(quote_literal(new.unidadeitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' UNIDADEITEMNFSAIDA = ' || coalesce(quote_literal(old.unidadeitemnfsaida), 'null');
				campos_new  = campos_new  || ' UNIDADEITEMNFSAIDA = ' || coalesce(quote_literal(new.unidadeitemnfsaida), 'null');
				campos_old  = campos_old  || ' UNIDADEITEMNFSAIDA = ' || coalesce(quote_literal(old.unidadeitemnfsaida), 'null');
				first = false;
			end if;

			if (new.quantidadeitemnfsaida &lt;&gt; old.quantidadeitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMNFSAIDA = ' || coalesce(quote_literal(new.quantidadeitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMNFSAIDA = ' || coalesce(quote_literal(old.quantidadeitemnfsaida), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMNFSAIDA = ' || coalesce(quote_literal(new.quantidadeitemnfsaida), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMNFSAIDA = ' || coalesce(quote_literal(old.quantidadeitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valorunitarioitemnfsaida &lt;&gt; old.valorunitarioitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORUNITARIOITEMNFSAIDA = ' || coalesce(quote_literal(new.valorunitarioitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORUNITARIOITEMNFSAIDA = ' || coalesce(quote_literal(old.valorunitarioitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORUNITARIOITEMNFSAIDA = ' || coalesce(quote_literal(new.valorunitarioitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORUNITARIOITEMNFSAIDA = ' || coalesce(quote_literal(old.valorunitarioitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valorseguroitemnfsaida &lt;&gt; old.valorseguroitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSEGUROITEMNFSAIDA = ' || coalesce(quote_literal(new.valorseguroitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORSEGUROITEMNFSAIDA = ' || coalesce(quote_literal(old.valorseguroitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORSEGUROITEMNFSAIDA = ' || coalesce(quote_literal(new.valorseguroitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORSEGUROITEMNFSAIDA = ' || coalesce(quote_literal(old.valorseguroitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valordescontoitemnfsaida &lt;&gt; old.valordescontoitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORDESCONTOITEMNFSAIDA = ' || coalesce(quote_literal(new.valordescontoitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORDESCONTOITEMNFSAIDA = ' || coalesce(quote_literal(old.valordescontoitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORDESCONTOITEMNFSAIDA = ' || coalesce(quote_literal(new.valordescontoitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORDESCONTOITEMNFSAIDA = ' || coalesce(quote_literal(old.valordescontoitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valorfreteitemnfsaida &lt;&gt; old.valorfreteitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFRETEITEMNFSAIDA = ' || coalesce(quote_literal(new.valorfreteitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORFRETEITEMNFSAIDA = ' || coalesce(quote_literal(old.valorfreteitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORFRETEITEMNFSAIDA = ' || coalesce(quote_literal(new.valorfreteitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORFRETEITEMNFSAIDA = ' || coalesce(quote_literal(old.valorfreteitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valoroutrasdespesasitemnfsaida &lt;&gt; old.valoroutrasdespesasitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALOROUTRASDESPESASITEMNFSAIDA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALOROUTRASDESPESASITEMNFSAIDA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALOROUTRASDESPESASITEMNFSAIDA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALOROUTRASDESPESASITEMNFSAIDA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalbrutoitemnfsaida &lt;&gt; old.valortotalbrutoitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALBRUTOITEMNFSAIDA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALBRUTOITEMNFSAIDA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALBRUTOITEMNFSAIDA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALBRUTOITEMNFSAIDA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalliquidoitemnfsaida &lt;&gt; old.valortotalliquidoitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALLIQUIDOITEMNFSAIDA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALLIQUIDOITEMNFSAIDA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALLIQUIDOITEMNFSAIDA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALLIQUIDOITEMNFSAIDA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfsaida), 'null');
				first = false;
			end if;

			if (new.csticmsitemnfsaida &lt;&gt; old.csticmsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.csticmsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' CSTICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.csticmsitemnfsaida), 'null');
				campos_new  = campos_new  || ' CSTICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.csticmsitemnfsaida), 'null');
				campos_old  = campos_old  || ' CSTICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.csticmsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.aliquotaicmsitemnfsaida &lt;&gt; old.aliquotaicmsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfsaida), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfsaida), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.basecalculoicmsitemnfsaida &lt;&gt; old.basecalculoicmsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASECALCULOICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' BASECALCULOICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfsaida), 'null');
				campos_new  = campos_new  || ' BASECALCULOICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfsaida), 'null');
				campos_old  = campos_old  || ' BASECALCULOICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.percentualreducaobcitemnfsaida &lt;&gt; old.percentualreducaobcitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALREDUCAOBCITEMNFSAIDA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALREDUCAOBCITEMNFSAIDA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfsaida), 'null');
				campos_new  = campos_new  || ' PERCENTUALREDUCAOBCITEMNFSAIDA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfsaida), 'null');
				campos_old  = campos_old  || ' PERCENTUALREDUCAOBCITEMNFSAIDA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valoricmsitemnfsaida &lt;&gt; old.valoricmsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.valoricmsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.valoricmsitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORICMSITEMNFSAIDA = ' || coalesce(quote_literal(new.valoricmsitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.valoricmsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.aliquotaicmsstitemnfsaida &lt;&gt; old.aliquotaicmsstitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfsaida), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfsaida), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfsaida), 'null');
				first = false;
			end if;

			if (new.percentualmvaitemnfsaida &lt;&gt; old.percentualmvaitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALMVAITEMNFSAIDA = ' || coalesce(quote_literal(new.percentualmvaitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALMVAITEMNFSAIDA = ' || coalesce(quote_literal(old.percentualmvaitemnfsaida), 'null');
				campos_new  = campos_new  || ' PERCENTUALMVAITEMNFSAIDA = ' || coalesce(quote_literal(new.percentualmvaitemnfsaida), 'null');
				campos_old  = campos_old  || ' PERCENTUALMVAITEMNFSAIDA = ' || coalesce(quote_literal(old.percentualmvaitemnfsaida), 'null');
				first = false;
			end if;

			if (new.baseicmsstitemnfsaida &lt;&gt; old.baseicmsstitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASEICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.baseicmsstitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' BASEICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.baseicmsstitemnfsaida), 'null');
				campos_new  = campos_new  || ' BASEICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.baseicmsstitemnfsaida), 'null');
				campos_old  = campos_old  || ' BASEICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.baseicmsstitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valoricmsstitemnfsaida &lt;&gt; old.valoricmsstitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.valoricmsstitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.valoricmsstitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(new.valoricmsstitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.valoricmsstitemnfsaida), 'null');
				first = false;
			end if;

			if (new.cstpisitemnfsaida &lt;&gt; old.cstpisitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTPISITEMNFSAIDA = ' || coalesce(quote_literal(new.cstpisitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' CSTPISITEMNFSAIDA = ' || coalesce(quote_literal(old.cstpisitemnfsaida), 'null');
				campos_new  = campos_new  || ' CSTPISITEMNFSAIDA = ' || coalesce(quote_literal(new.cstpisitemnfsaida), 'null');
				campos_old  = campos_old  || ' CSTPISITEMNFSAIDA = ' || coalesce(quote_literal(old.cstpisitemnfsaida), 'null');
				first = false;
			end if;

			if (new.aliquotapisitemnfsaida &lt;&gt; old.aliquotapisitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAPISITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotapisitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAPISITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotapisitemnfsaida), 'null');
				campos_new  = campos_new  || ' ALIQUOTAPISITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotapisitemnfsaida), 'null');
				campos_old  = campos_old  || ' ALIQUOTAPISITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotapisitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valorpisitemnfsaida &lt;&gt; old.valorpisitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPISITEMNFSAIDA = ' || coalesce(quote_literal(new.valorpisitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORPISITEMNFSAIDA = ' || coalesce(quote_literal(old.valorpisitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORPISITEMNFSAIDA = ' || coalesce(quote_literal(new.valorpisitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORPISITEMNFSAIDA = ' || coalesce(quote_literal(old.valorpisitemnfsaida), 'null');
				first = false;
			end if;

			if (new.cstcofinsitemnfsaida &lt;&gt; old.cstcofinsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.cstcofinsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' CSTCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.cstcofinsitemnfsaida), 'null');
				campos_new  = campos_new  || ' CSTCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.cstcofinsitemnfsaida), 'null');
				campos_old  = campos_old  || ' CSTCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.cstcofinsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.aliquotacofinsitemnfsaida &lt;&gt; old.aliquotacofinsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTACOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTACOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfsaida), 'null');
				campos_new  = campos_new  || ' ALIQUOTACOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfsaida), 'null');
				campos_old  = campos_old  || ' ALIQUOTACOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valorcofinsitemnfsaida &lt;&gt; old.valorcofinsitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.valorcofinsitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.valorcofinsitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(new.valorcofinsitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.valorcofinsitemnfsaida), 'null');
				first = false;
			end if;

			if (new.cstipiitemnfsaida &lt;&gt; old.cstipiitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.cstipiitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' CSTIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.cstipiitemnfsaida), 'null');
				campos_new  = campos_new  || ' CSTIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.cstipiitemnfsaida), 'null');
				campos_old  = campos_old  || ' CSTIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.cstipiitemnfsaida), 'null');
				first = false;
			end if;

			if (new.aliquotaipiitemnfsaida &lt;&gt; old.aliquotaipiitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaipiitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaipiitemnfsaida), 'null');
				campos_new  = campos_new  || ' ALIQUOTAIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.aliquotaipiitemnfsaida), 'null');
				campos_old  = campos_old  || ' ALIQUOTAIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaipiitemnfsaida), 'null');
				first = false;
			end if;

			if (new.valoripiitemnfsaida &lt;&gt; old.valoripiitemnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.valoripiitemnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.valoripiitemnfsaida), 'null');
				campos_new  = campos_new  || ' VALORIPIITEMNFSAIDA = ' || coalesce(quote_literal(new.valoripiitemnfsaida), 'null');
				campos_old  = campos_old  || ' VALORIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.valoripiitemnfsaida), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null') || ' AND SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null') || ' AND SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfsaida), 'null')  || ', ' || coalesce(quote_literal(new.serienfsaida), 'null')  || ', ' || coalesce(quote_literal(new.sequencialitemnfsaida), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMNFSAIDA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFSAIDA, SERIENFSAIDA, SEQUENCIALITEMNFSAIDA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CFOPITEMNFSAIDA, DESCRICAOITEMNFSAIDA, NCMITEMNFSAIDA, UNIDADEITEMNFSAIDA, QUANTIDADEITEMNFSAIDA, VALORUNITARIOITEMNFSAIDA, VALORSEGUROITEMNFSAIDA, VALORDESCONTOITEMNFSAIDA, VALORFRETEITEMNFSAIDA, VALOROUTRASDESPESASITEMNFSAIDA, VALORTOTALBRUTOITEMNFSAIDA, VALORTOTALLIQUIDOITEMNFSAIDA, CSTICMSITEMNFSAIDA, ALIQUOTAICMSITEMNFSAIDA, BASECALCULOICMSITEMNFSAIDA, PERCENTUALREDUCAOBCITEMNFSAIDA, VALORICMSITEMNFSAIDA, ALIQUOTAICMSSTITEMNFSAIDA, PERCENTUALMVAITEMNFSAIDA, BASEICMSSTITEMNFSAIDA, VALORICMSSTITEMNFSAIDA, CSTPISITEMNFSAIDA, ALIQUOTAPISITEMNFSAIDA, VALORPISITEMNFSAIDA, CSTCOFINSITEMNFSAIDA, ALIQUOTACOFINSITEMNFSAIDA, VALORCOFINSITEMNFSAIDA, CSTIPIITEMNFSAIDA, ALIQUOTAIPIITEMNFSAIDA, VALORIPIITEMNFSAIDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cfopitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ncmitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.unidadeitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorunitarioitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorseguroitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valordescontoitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfreteitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoroutrasdespesasitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalbrutoitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalliquidoitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.csticmsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.basecalculoicmsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualreducaobcitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmsstitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualmvaitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.baseicmsstitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsstitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstpisitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotapisitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorpisitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstcofinsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotacofinsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorcofinsitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstipiitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaipiitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoripiitemnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMNFSAIDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null') || ' AND SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(old.sequencialitemnfsaida), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALITEMNFSAIDA = ' || coalesce(quote_literal(old.sequencialitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CFOPITEMNFSAIDA = ' || coalesce(quote_literal(old.cfopitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOITEMNFSAIDA = ' || coalesce(quote_literal(old.descricaoitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'NCMITEMNFSAIDA = ' || coalesce(quote_literal(old.ncmitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'UNIDADEITEMNFSAIDA = ' || coalesce(quote_literal(old.unidadeitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMNFSAIDA = ' || coalesce(quote_literal(old.quantidadeitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORUNITARIOITEMNFSAIDA = ' || coalesce(quote_literal(old.valorunitarioitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORSEGUROITEMNFSAIDA = ' || coalesce(quote_literal(old.valorseguroitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORDESCONTOITEMNFSAIDA = ' || coalesce(quote_literal(old.valordescontoitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORFRETEITEMNFSAIDA = ' || coalesce(quote_literal(old.valorfreteitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALOROUTRASDESPESASITEMNFSAIDA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALBRUTOITEMNFSAIDA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALLIQUIDOITEMNFSAIDA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CSTICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.csticmsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'BASECALCULOICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALREDUCAOBCITEMNFSAIDA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSITEMNFSAIDA = ' || coalesce(quote_literal(old.valoricmsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALMVAITEMNFSAIDA = ' || coalesce(quote_literal(old.percentualmvaitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'BASEICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.baseicmsstitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSSTITEMNFSAIDA = ' || coalesce(quote_literal(old.valoricmsstitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CSTPISITEMNFSAIDA = ' || coalesce(quote_literal(old.cstpisitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAPISITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotapisitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORPISITEMNFSAIDA = ' || coalesce(quote_literal(old.valorpisitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CSTCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.cstcofinsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTACOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORCOFINSITEMNFSAIDA = ' || coalesce(quote_literal(old.valorcofinsitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CSTIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.cstipiitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.aliquotaipiitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORIPIITEMNFSAIDA = ' || coalesce(quote_literal(old.valoripiitemnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfsaida), 'null')  || ', ' || coalesce(quote_literal(old.serienfsaida), 'null')  || ', ' || coalesce(quote_literal(old.sequencialitemnfsaida), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemnfsaida', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemnfsaida', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemnfsaida', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemnfsentrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemnfsentrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '5313EFAFB56A789A3D2CA62AA9DF23E5') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMNFSENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, SEQUENCIALITEMNFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CFOPITEMNFENTRADA, DESCRICAOITEMNFENTRADA, NCMITEMNFENTRADA, UNIDADEITEMNFENTRADA, QUANTIDADEITEMNFENTRADA, VALORUNITARIOITEMNFENTRADA, VALORSEGUROITEMNFENTRADA, VALORDESCONTOITEMNFENTRADA, VALORFRETEITEMNFENTRADA, VALOROUTRASDESPESASITEMNFENTRADA, VALORTOTALBRUTOITEMNFENTRADA, VALORTOTALLIQUIDOITEMNFENTRADA, CSTICMSITEMNFENTRADA, ALIQUOTAICMSITEMNFENTRADA, BASECALCULOICMSITEMNFENTRADA, PERCENTUALREDUCAOBCITEMNFENTRADA, VALORICMSITEMNFENTRADA, ALIQUOTAICMSSTITEMNFENTRADA, PERCENTUALMVAITEMNFENTRADA, BASEICMSSTITEMNFENTRADA, VALORICMSSTITEMNFENTRADA, CSTPISITEMNFENTRADA, ALIQUOTAPISITEMNFENTRADA, VALORPISITEMNFENTRADA, CSTCOFINSITEMNFENTRADA, ALIQUOTACOFINSITEMNFENTRADA, VALORCOFINSITEMNFENTRADA, CSTIPIITEMNFENTRADA, ALIQUOTAIPIITEMNFENTRADA, VALORIPIITEMNFENTRADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cfopitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ncmitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.unidadeitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.csticmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstpisitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorpisitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstipiitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoripiitemnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMNFSENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CFOPITEMNFENTRADA = ' || coalesce(quote_literal(new.cfopitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(new.descricaoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'NCMITEMNFENTRADA = ' || coalesce(quote_literal(new.ncmitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.unidadeitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.csticmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(new.cstpisitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(new.valorpisitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.cstipiitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.valoripiitemnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMNFSENTRADA SET ';
			sql_rolback = 'UPDATE ITEMNFSENTRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfentrada &lt;&gt; old.codigonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				campos_new  = campos_new  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				campos_old  = campos_old  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				first = false;
			end if;

			if (new.serienfentrada &lt;&gt; old.serienfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				sql_rolback = sql_rolback || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				campos_new  = campos_new  || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				campos_old  = campos_old  || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				first = false;
			end if;

			if (new.sequencialitemnfentrada &lt;&gt; old.sequencialitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null');
				campos_new  = campos_new  || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null');
				campos_old  = campos_old  || ' SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitentenfentrada &lt;&gt; old.codigoempresaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigolojaemitentenfentrada &lt;&gt; old.codigolojaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitentenfentrada &lt;&gt; old.codigopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitentenfentrada &lt;&gt; old.codigoenderecopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.cfopitemnfentrada &lt;&gt; old.cfopitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(new.cfopitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(old.cfopitemnfentrada), 'null');
				campos_new  = campos_new  || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(new.cfopitemnfentrada), 'null');
				campos_old  = campos_old  || ' CFOPITEMNFENTRADA = ' || coalesce(quote_literal(old.cfopitemnfentrada), 'null');
				first = false;
			end if;

			if (new.descricaoitemnfentrada &lt;&gt; old.descricaoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(new.descricaoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(old.descricaoitemnfentrada), 'null');
				campos_new  = campos_new  || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(new.descricaoitemnfentrada), 'null');
				campos_old  = campos_old  || ' DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(old.descricaoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.ncmitemnfentrada &lt;&gt; old.ncmitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(new.ncmitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(old.ncmitemnfentrada), 'null');
				campos_new  = campos_new  || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(new.ncmitemnfentrada), 'null');
				campos_old  = campos_old  || ' NCMITEMNFENTRADA = ' || coalesce(quote_literal(old.ncmitemnfentrada), 'null');
				first = false;
			end if;

			if (new.unidadeitemnfentrada &lt;&gt; old.unidadeitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.unidadeitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.unidadeitemnfentrada), 'null');
				campos_new  = campos_new  || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.unidadeitemnfentrada), 'null');
				campos_old  = campos_old  || ' UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.unidadeitemnfentrada), 'null');
				first = false;
			end if;

			if (new.quantidadeitemnfentrada &lt;&gt; old.quantidadeitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(new.quantidadeitemnfentrada), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorunitarioitemnfentrada &lt;&gt; old.valorunitarioitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(new.valorunitarioitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorseguroitemnfentrada &lt;&gt; old.valorseguroitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(new.valorseguroitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valordescontoitemnfentrada &lt;&gt; old.valordescontoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valordescontoitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorfreteitemnfentrada &lt;&gt; old.valorfreteitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(new.valorfreteitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoroutrasdespesasitemnfentrada &lt;&gt; old.valoroutrasdespesasitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalbrutoitemnfentrada &lt;&gt; old.valortotalbrutoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalbrutoitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalliquidoitemnfentrada &lt;&gt; old.valortotalliquidoitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(new.valortotalliquidoitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null');
				first = false;
			end if;

			if (new.csticmsitemnfentrada &lt;&gt; old.csticmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.csticmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.csticmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.csticmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.csticmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotaicmsitemnfentrada &lt;&gt; old.aliquotaicmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.basecalculoicmsitemnfentrada &lt;&gt; old.basecalculoicmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.basecalculoicmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.percentualreducaobcitemnfentrada &lt;&gt; old.percentualreducaobcitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null');
				campos_new  = campos_new  || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualreducaobcitemnfentrada), 'null');
				campos_old  = campos_old  || ' PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoricmsitemnfentrada &lt;&gt; old.valoricmsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotaicmsstitemnfentrada &lt;&gt; old.aliquotaicmsstitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaicmsstitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null');
				first = false;
			end if;

			if (new.percentualmvaitemnfentrada &lt;&gt; old.percentualmvaitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null');
				campos_new  = campos_new  || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(new.percentualmvaitemnfentrada), 'null');
				campos_old  = campos_old  || ' PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null');
				first = false;
			end if;

			if (new.baseicmsstitemnfentrada &lt;&gt; old.baseicmsstitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null');
				campos_new  = campos_new  || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.baseicmsstitemnfentrada), 'null');
				campos_old  = campos_old  || ' BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoricmsstitemnfentrada &lt;&gt; old.valoricmsstitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null');
				first = false;
			end if;

			if (new.cstpisitemnfentrada &lt;&gt; old.cstpisitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(new.cstpisitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(old.cstpisitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(new.cstpisitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(old.cstpisitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotapisitemnfentrada &lt;&gt; old.aliquotapisitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotapisitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorpisitemnfentrada &lt;&gt; old.valorpisitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(new.valorpisitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(old.valorpisitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(new.valorpisitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(old.valorpisitemnfentrada), 'null');
				first = false;
			end if;

			if (new.cstcofinsitemnfentrada &lt;&gt; old.cstcofinsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.cstcofinsitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotacofinsitemnfentrada &lt;&gt; old.aliquotacofinsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotacofinsitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valorcofinsitemnfentrada &lt;&gt; old.valorcofinsitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(new.valorcofinsitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null');
				first = false;
			end if;

			if (new.cstipiitemnfentrada &lt;&gt; old.cstipiitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.cstipiitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.cstipiitemnfentrada), 'null');
				campos_new  = campos_new  || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.cstipiitemnfentrada), 'null');
				campos_old  = campos_old  || ' CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.cstipiitemnfentrada), 'null');
				first = false;
			end if;

			if (new.aliquotaipiitemnfentrada &lt;&gt; old.aliquotaipiitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null');
				campos_new  = campos_new  || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.aliquotaipiitemnfentrada), 'null');
				campos_old  = campos_old  || ' ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null');
				first = false;
			end if;

			if (new.valoripiitemnfentrada &lt;&gt; old.valoripiitemnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.valoripiitemnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.valoripiitemnfentrada), 'null');
				campos_new  = campos_new  || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(new.valoripiitemnfentrada), 'null');
				campos_old  = campos_old  || ' VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.valoripiitemnfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.sequencialitemnfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMNFSENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, SEQUENCIALITEMNFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CFOPITEMNFENTRADA, DESCRICAOITEMNFENTRADA, NCMITEMNFENTRADA, UNIDADEITEMNFENTRADA, QUANTIDADEITEMNFENTRADA, VALORUNITARIOITEMNFENTRADA, VALORSEGUROITEMNFENTRADA, VALORDESCONTOITEMNFENTRADA, VALORFRETEITEMNFENTRADA, VALOROUTRASDESPESASITEMNFENTRADA, VALORTOTALBRUTOITEMNFENTRADA, VALORTOTALLIQUIDOITEMNFENTRADA, CSTICMSITEMNFENTRADA, ALIQUOTAICMSITEMNFENTRADA, BASECALCULOICMSITEMNFENTRADA, PERCENTUALREDUCAOBCITEMNFENTRADA, VALORICMSITEMNFENTRADA, ALIQUOTAICMSSTITEMNFENTRADA, PERCENTUALMVAITEMNFENTRADA, BASEICMSSTITEMNFENTRADA, VALORICMSSTITEMNFENTRADA, CSTPISITEMNFENTRADA, ALIQUOTAPISITEMNFENTRADA, VALORPISITEMNFENTRADA, CSTCOFINSITEMNFENTRADA, ALIQUOTACOFINSITEMNFENTRADA, VALORCOFINSITEMNFENTRADA, CSTIPIITEMNFENTRADA, ALIQUOTAIPIITEMNFENTRADA, VALORIPIITEMNFENTRADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cfopitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ncmitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.unidadeitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.csticmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstpisitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorpisitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstipiitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoripiitemnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMNFSENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ' AND SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALITEMNFENTRADA = ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CFOPITEMNFENTRADA = ' || coalesce(quote_literal(old.cfopitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOITEMNFENTRADA = ' || coalesce(quote_literal(old.descricaoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'NCMITEMNFENTRADA = ' || coalesce(quote_literal(old.ncmitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'UNIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.unidadeitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMNFENTRADA = ' || coalesce(quote_literal(old.quantidadeitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORUNITARIOITEMNFENTRADA = ' || coalesce(quote_literal(old.valorunitarioitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORSEGUROITEMNFENTRADA = ' || coalesce(quote_literal(old.valorseguroitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORDESCONTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valordescontoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORFRETEITEMNFENTRADA = ' || coalesce(quote_literal(old.valorfreteitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALOROUTRASDESPESASITEMNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALBRUTOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalbrutoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALLIQUIDOITEMNFENTRADA = ' || coalesce(quote_literal(old.valortotalliquidoitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.csticmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'BASECALCULOICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.basecalculoicmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALREDUCAOBCITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualreducaobcitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaicmsstitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALMVAITEMNFENTRADA = ' || coalesce(quote_literal(old.percentualmvaitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'BASEICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.baseicmsstitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSSTITEMNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTPISITEMNFENTRADA = ' || coalesce(quote_literal(old.cstpisitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAPISITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotapisitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORPISITEMNFENTRADA = ' || coalesce(quote_literal(old.valorpisitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.cstcofinsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTACOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotacofinsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORCOFINSITEMNFENTRADA = ' || coalesce(quote_literal(old.valorcofinsitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CSTIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.cstipiitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.aliquotaipiitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORIPIITEMNFENTRADA = ' || coalesce(quote_literal(old.valoripiitemnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(old.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(old.sequencialitemnfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemnfsentrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemnfsentrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemnfsentrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itempedido()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itempedido() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMPEDIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPDV, CODIGOPEDIDO, CODIGOITEMPEDIDO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMPEDIDO, VALORUNITARIOITEMPEDIDO, VALORDESCONTOITEMPEDIDO, VALORTOTALITEMPEDIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEESTOQUEITEMPEDIDO, FLAGCOMISSAOVENDEDORPEDIDO, CODIGOEMPRESALINHAPRODUTO, CODIGOLOJALINHAPRODUTO, CODIGOLINHAPRODUTO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopdv), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitempedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitempedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorunitarioitempedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valordescontoitempedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalitempedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeestoqueitempedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagcomissaovendedorpedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresalinhaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojalinhaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolinhaproduto), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMPEDIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ' AND CODIGOITEMPEDIDO = ' || coalesce(quote_literal(new.codigoitempedido), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMPEDIDO = ' || coalesce(quote_literal(new.codigoitempedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMPEDIDO = ' || coalesce(quote_literal(new.quantidadeitempedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORUNITARIOITEMPEDIDO = ' || coalesce(quote_literal(new.valorunitarioitempedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORDESCONTOITEMPEDIDO = ' || coalesce(quote_literal(new.valordescontoitempedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALITEMPEDIDO = ' || coalesce(quote_literal(new.valortotalitempedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEESTOQUEITEMPEDIDO = ' || coalesce(quote_literal(new.quantidadeestoqueitempedido), 'null') || ', ';
			campos_new   = campos_new || 'FLAGCOMISSAOVENDEDORPEDIDO = ' || coalesce(quote_literal(new.flagcomissaovendedorpedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESALINHAPRODUTO = ' || coalesce(quote_literal(new.codigoempresalinhaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJALINHAPRODUTO = ' || coalesce(quote_literal(new.codigolojalinhaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null')  || ', ' || coalesce(quote_literal(new.codigopedido), 'null')  || ', ' || coalesce(quote_literal(new.codigoitempedido), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMPEDIDO SET ';
			sql_rolback = 'UPDATE ITEMPEDIDO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigopdv &lt;&gt; old.codigopdv) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				sql_rolback = sql_rolback || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				campos_new  = campos_new  || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				campos_old  = campos_old  || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				first = false;
			end if;

			if (new.codigopedido &lt;&gt; old.codigopedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				campos_new  = campos_new  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				campos_old  = campos_old  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				first = false;
			end if;

			if (new.codigoitempedido &lt;&gt; old.codigoitempedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMPEDIDO = ' || coalesce(quote_literal(new.codigoitempedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMPEDIDO = ' || coalesce(quote_literal(old.codigoitempedido), 'null');
				campos_new  = campos_new  || ' CODIGOITEMPEDIDO = ' || coalesce(quote_literal(new.codigoitempedido), 'null');
				campos_old  = campos_old  || ' CODIGOITEMPEDIDO = ' || coalesce(quote_literal(old.codigoitempedido), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeitempedido &lt;&gt; old.quantidadeitempedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMPEDIDO = ' || coalesce(quote_literal(new.quantidadeitempedido), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMPEDIDO = ' || coalesce(quote_literal(old.quantidadeitempedido), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMPEDIDO = ' || coalesce(quote_literal(new.quantidadeitempedido), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMPEDIDO = ' || coalesce(quote_literal(old.quantidadeitempedido), 'null');
				first = false;
			end if;

			if (new.valorunitarioitempedido &lt;&gt; old.valorunitarioitempedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORUNITARIOITEMPEDIDO = ' || coalesce(quote_literal(new.valorunitarioitempedido), 'null');
				sql_rolback = sql_rolback || ' VALORUNITARIOITEMPEDIDO = ' || coalesce(quote_literal(old.valorunitarioitempedido), 'null');
				campos_new  = campos_new  || ' VALORUNITARIOITEMPEDIDO = ' || coalesce(quote_literal(new.valorunitarioitempedido), 'null');
				campos_old  = campos_old  || ' VALORUNITARIOITEMPEDIDO = ' || coalesce(quote_literal(old.valorunitarioitempedido), 'null');
				first = false;
			end if;

			if (new.valordescontoitempedido &lt;&gt; old.valordescontoitempedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORDESCONTOITEMPEDIDO = ' || coalesce(quote_literal(new.valordescontoitempedido), 'null');
				sql_rolback = sql_rolback || ' VALORDESCONTOITEMPEDIDO = ' || coalesce(quote_literal(old.valordescontoitempedido), 'null');
				campos_new  = campos_new  || ' VALORDESCONTOITEMPEDIDO = ' || coalesce(quote_literal(new.valordescontoitempedido), 'null');
				campos_old  = campos_old  || ' VALORDESCONTOITEMPEDIDO = ' || coalesce(quote_literal(old.valordescontoitempedido), 'null');
				first = false;
			end if;

			if (new.valortotalitempedido &lt;&gt; old.valortotalitempedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALITEMPEDIDO = ' || coalesce(quote_literal(new.valortotalitempedido), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALITEMPEDIDO = ' || coalesce(quote_literal(old.valortotalitempedido), 'null');
				campos_new  = campos_new  || ' VALORTOTALITEMPEDIDO = ' || coalesce(quote_literal(new.valortotalitempedido), 'null');
				campos_old  = campos_old  || ' VALORTOTALITEMPEDIDO = ' || coalesce(quote_literal(old.valortotalitempedido), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.quantidadeestoqueitempedido &lt;&gt; old.quantidadeestoqueitempedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEESTOQUEITEMPEDIDO = ' || coalesce(quote_literal(new.quantidadeestoqueitempedido), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEESTOQUEITEMPEDIDO = ' || coalesce(quote_literal(old.quantidadeestoqueitempedido), 'null');
				campos_new  = campos_new  || ' QUANTIDADEESTOQUEITEMPEDIDO = ' || coalesce(quote_literal(new.quantidadeestoqueitempedido), 'null');
				campos_old  = campos_old  || ' QUANTIDADEESTOQUEITEMPEDIDO = ' || coalesce(quote_literal(old.quantidadeestoqueitempedido), 'null');
				first = false;
			end if;

			if (new.flagcomissaovendedorpedido &lt;&gt; old.flagcomissaovendedorpedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGCOMISSAOVENDEDORPEDIDO = ' || coalesce(quote_literal(new.flagcomissaovendedorpedido), 'null');
				sql_rolback = sql_rolback || ' FLAGCOMISSAOVENDEDORPEDIDO = ' || coalesce(quote_literal(old.flagcomissaovendedorpedido), 'null');
				campos_new  = campos_new  || ' FLAGCOMISSAOVENDEDORPEDIDO = ' || coalesce(quote_literal(new.flagcomissaovendedorpedido), 'null');
				campos_old  = campos_old  || ' FLAGCOMISSAOVENDEDORPEDIDO = ' || coalesce(quote_literal(old.flagcomissaovendedorpedido), 'null');
				first = false;
			end if;

			if (new.codigoempresalinhaproduto &lt;&gt; old.codigoempresalinhaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESALINHAPRODUTO = ' || coalesce(quote_literal(new.codigoempresalinhaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESALINHAPRODUTO = ' || coalesce(quote_literal(old.codigoempresalinhaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESALINHAPRODUTO = ' || coalesce(quote_literal(new.codigoempresalinhaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESALINHAPRODUTO = ' || coalesce(quote_literal(old.codigoempresalinhaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojalinhaproduto &lt;&gt; old.codigolojalinhaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJALINHAPRODUTO = ' || coalesce(quote_literal(new.codigolojalinhaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJALINHAPRODUTO = ' || coalesce(quote_literal(old.codigolojalinhaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJALINHAPRODUTO = ' || coalesce(quote_literal(new.codigolojalinhaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJALINHAPRODUTO = ' || coalesce(quote_literal(old.codigolojalinhaproduto), 'null');
				first = false;
			end if;

			if (new.codigolinhaproduto &lt;&gt; old.codigolinhaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ' AND CODIGOITEMPEDIDO = ' || coalesce(quote_literal(new.codigoitempedido), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ' AND CODIGOITEMPEDIDO = ' || coalesce(quote_literal(new.codigoitempedido), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null')  || ', ' || coalesce(quote_literal(new.codigopedido), 'null')  || ', ' || coalesce(quote_literal(new.codigoitempedido), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMPEDIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPDV, CODIGOPEDIDO, CODIGOITEMPEDIDO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMPEDIDO, VALORUNITARIOITEMPEDIDO, VALORDESCONTOITEMPEDIDO, VALORTOTALITEMPEDIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEESTOQUEITEMPEDIDO, FLAGCOMISSAOVENDEDORPEDIDO, CODIGOEMPRESALINHAPRODUTO, CODIGOLOJALINHAPRODUTO, CODIGOLINHAPRODUTO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopdv), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitempedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitempedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorunitarioitempedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valordescontoitempedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalitempedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeestoqueitempedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagcomissaovendedorpedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresalinhaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojalinhaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolinhaproduto), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMPEDIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null') || ' AND CODIGOITEMPEDIDO = ' || coalesce(quote_literal(old.codigoitempedido), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMPEDIDO = ' || coalesce(quote_literal(old.codigoitempedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMPEDIDO = ' || coalesce(quote_literal(old.quantidadeitempedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORUNITARIOITEMPEDIDO = ' || coalesce(quote_literal(old.valorunitarioitempedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORDESCONTOITEMPEDIDO = ' || coalesce(quote_literal(old.valordescontoitempedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALITEMPEDIDO = ' || coalesce(quote_literal(old.valortotalitempedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEESTOQUEITEMPEDIDO = ' || coalesce(quote_literal(old.quantidadeestoqueitempedido), 'null') || ', ';
			campos_old  = campos_old || 'FLAGCOMISSAOVENDEDORPEDIDO = ' || coalesce(quote_literal(old.flagcomissaovendedorpedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESALINHAPRODUTO = ' || coalesce(quote_literal(old.codigoempresalinhaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJALINHAPRODUTO = ' || coalesce(quote_literal(old.codigolojalinhaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigopdv), 'null')  || ', ' || coalesce(quote_literal(old.codigopedido), 'null')  || ', ' || coalesce(quote_literal(old.codigoitempedido), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itempedido', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itempedido', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itempedido', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneioabate()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneioabate() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOABATE (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESACURRAL, CODIGOLOJACURRAL, CODIGOCURRAL, PESOBANDA1ITEMROMANEIO, PESOBANDA2ITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, VALORKGITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorkgitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOABATE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(new.codigoempresacurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACURRAL = ' || coalesce(quote_literal(new.codigolojacurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			campos_new   = campos_new || 'PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'VALORKGITEMROMANEIO = ' || coalesce(quote_literal(new.valorkgitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOABATE SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOABATE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresacurral &lt;&gt; old.codigoempresacurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(new.codigoempresacurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(old.codigoempresacurral), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(new.codigoempresacurral), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(old.codigoempresacurral), 'null');
				first = false;
			end if;

			if (new.codigolojacurral &lt;&gt; old.codigolojacurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(new.codigolojacurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(old.codigolojacurral), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(new.codigolojacurral), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(old.codigolojacurral), 'null');
				first = false;
			end if;

			if (new.codigocurral &lt;&gt; old.codigocurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				campos_new  = campos_new  || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				campos_old  = campos_old  || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				first = false;
			end if;

			if (new.pesobanda1itemromaneio &lt;&gt; old.pesobanda1itemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null');
				sql_rolback = sql_rolback || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null');
				campos_new  = campos_new  || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null');
				campos_old  = campos_old  || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null');
				first = false;
			end if;

			if (new.pesobanda2itemromaneio &lt;&gt; old.pesobanda2itemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null');
				sql_rolback = sql_rolback || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null');
				campos_new  = campos_new  || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null');
				campos_old  = campos_old  || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.valorkgitemromaneio &lt;&gt; old.valorkgitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(new.valorkgitemromaneio), 'null');
				sql_rolback = sql_rolback || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(old.valorkgitemromaneio), 'null');
				campos_new  = campos_new  || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(new.valorkgitemromaneio), 'null');
				campos_old  = campos_old  || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(old.valorkgitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOABATE (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESACURRAL, CODIGOLOJACURRAL, CODIGOCURRAL, PESOBANDA1ITEMROMANEIO, PESOBANDA2ITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, VALORKGITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorkgitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOABATE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(old.codigoempresacurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACURRAL = ' || coalesce(quote_literal(old.codigolojacurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			campos_old  = campos_old || 'PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'VALORKGITEMROMANEIO = ' || coalesce(quote_literal(old.valorkgitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneioabate', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneioabate', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneioabate', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiobeneficiada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiobeneficiada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOBENEFICIADA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMROMANEIO, DATAHORALANCAMENTOITEMROMANEIO, STATUSITEMROMANEIO, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOBENEFICIADA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOBENEFICIADA SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOBENEFICIADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeitemromaneio &lt;&gt; old.quantidadeitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoitemromaneio &lt;&gt; old.datahoralancamentoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null');
				first = false;
			end if;

			if (new.statusitemromaneio &lt;&gt; old.statusitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null');
				campos_new  = campos_new  || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null');
				campos_old  = campos_old  || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOBENEFICIADA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMROMANEIO, DATAHORALANCAMENTOITEMROMANEIO, STATUSITEMROMANEIO, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOBENEFICIADA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiobeneficiada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiobeneficiada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiobeneficiada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiobeneficiadaserrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiobeneficiadaserrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOBENEFICIADASERRADA (CODIGOITEMROMANEIO, CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMROMANEIO, DATAHORALANCAMENTOITEMROMANEIO, STATUSITEMROMANEIO, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOBENEFICIADASERRADA WHERE CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOBENEFICIADASERRADA SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOBENEFICIADASERRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeitemromaneio &lt;&gt; old.quantidadeitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoitemromaneio &lt;&gt; old.datahoralancamentoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null');
				first = false;
			end if;

			if (new.statusitemromaneio &lt;&gt; old.statusitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null');
				campos_new  = campos_new  || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null');
				campos_old  = campos_old  || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOBENEFICIADASERRADA (CODIGOITEMROMANEIO, CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMROMANEIO, DATAHORALANCAMENTOITEMROMANEIO, STATUSITEMROMANEIO, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOBENEFICIADASERRADA WHERE CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoitemromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiobeneficiadaserrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiobeneficiadaserrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiobeneficiadaserrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiofrigorifico()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiofrigorifico() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; 'DF4F6BB1504E1522F9C8E46E3517D48F') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOFRIGORIFICO (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOITEMROMANEIO, PESOBANDA1ITEMROMANEIO, PESOBANDA2ITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, VALORKGITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorkgitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOFRIGORIFICO WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'VALORKGITEMROMANEIO = ' || coalesce(quote_literal(new.valorkgitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOFRIGORIFICO SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOFRIGORIFICO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.pesobanda1itemromaneio &lt;&gt; old.pesobanda1itemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null');
				sql_rolback = sql_rolback || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null');
				campos_new  = campos_new  || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda1itemromaneio), 'null');
				campos_old  = campos_old  || ' PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null');
				first = false;
			end if;

			if (new.pesobanda2itemromaneio &lt;&gt; old.pesobanda2itemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null');
				sql_rolback = sql_rolback || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null');
				campos_new  = campos_new  || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(new.pesobanda2itemromaneio), 'null');
				campos_old  = campos_old  || ' PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.valorkgitemromaneio &lt;&gt; old.valorkgitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(new.valorkgitemromaneio), 'null');
				sql_rolback = sql_rolback || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(old.valorkgitemromaneio), 'null');
				campos_new  = campos_new  || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(new.valorkgitemromaneio), 'null');
				campos_old  = campos_old  || ' VALORKGITEMROMANEIO = ' || coalesce(quote_literal(old.valorkgitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOFRIGORIFICO (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOITEMROMANEIO, PESOBANDA1ITEMROMANEIO, PESOBANDA2ITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, VALORKGITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorkgitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOFRIGORIFICO WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'PESOBANDA1ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda1itemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'PESOBANDA2ITEMROMANEIO = ' || coalesce(quote_literal(old.pesobanda2itemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'VALORKGITEMROMANEIO = ' || coalesce(quote_literal(old.valorkgitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiofrigorifico', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiofrigorifico', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiofrigorifico', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiogado()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiogado() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOGADO (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESACURRAL, CODIGOLOJACURRAL, CODIGOCURRAL, QUANTIDADEITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOGADO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(new.codigoempresacurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACURRAL = ' || coalesce(quote_literal(new.codigolojacurral), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOGADO SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOGADO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresacurral &lt;&gt; old.codigoempresacurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(new.codigoempresacurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(old.codigoempresacurral), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(new.codigoempresacurral), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(old.codigoempresacurral), 'null');
				first = false;
			end if;

			if (new.codigolojacurral &lt;&gt; old.codigolojacurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(new.codigolojacurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(old.codigolojacurral), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(new.codigolojacurral), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACURRAL = ' || coalesce(quote_literal(old.codigolojacurral), 'null');
				first = false;
			end if;

			if (new.codigocurral &lt;&gt; old.codigocurral) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				sql_rolback = sql_rolback || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				campos_new  = campos_new  || ' CODIGOCURRAL = ' || coalesce(quote_literal(new.codigocurral), 'null');
				campos_old  = campos_old  || ' CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null');
				first = false;
			end if;

			if (new.quantidadeitemromaneio &lt;&gt; old.quantidadeitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOGADO (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESACURRAL, CODIGOLOJACURRAL, CODIGOCURRAL, QUANTIDADEITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOGADO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACURRAL = ' || coalesce(quote_literal(old.codigoempresacurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACURRAL = ' || coalesce(quote_literal(old.codigolojacurral), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCURRAL = ' || coalesce(quote_literal(old.codigocurral), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiogado', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiogado', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiogado', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiomadeiraserrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiomadeiraserrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOMADEIRASERRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMROMANEIO, DATAHORALANCAMENTOITEMROMANEIO, STATUSITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOMADEIRASERRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOMADEIRASERRADA SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOMADEIRASERRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeitemromaneio &lt;&gt; old.quantidadeitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(new.quantidadeitemromaneio), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoitemromaneio &lt;&gt; old.datahoralancamentoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoitemromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null');
				first = false;
			end if;

			if (new.statusitemromaneio &lt;&gt; old.statusitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null');
				campos_new  = campos_new  || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(new.statusitemromaneio), 'null');
				campos_old  = campos_old  || ' STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOMADEIRASERRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEITEMROMANEIO, DATAHORALANCAMENTOITEMROMANEIO, STATUSITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOMADEIRASERRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMROMANEIO = ' || coalesce(quote_literal(old.quantidadeitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOITEMROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSITEMROMANEIO = ' || coalesce(quote_literal(old.statusitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiomadeiraserrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiomadeiraserrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiomadeiraserrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiomanejotora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiomanejotora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOMANEJOTORA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOESSENCIA, DIAMETROTORA, COMPRIMENTOTORA, VOLUMETORA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diametrotora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.comprimentotora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.volumetora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOMANEJOTORA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			campos_new   = campos_new || 'DIAMETROTORA = ' || coalesce(quote_literal(new.diametrotora), 'null') || ', ';
			campos_new   = campos_new || 'COMPRIMENTOTORA = ' || coalesce(quote_literal(new.comprimentotora), 'null') || ', ';
			campos_new   = campos_new || 'VOLUMETORA = ' || coalesce(quote_literal(new.volumetora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOMANEJOTORA SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOMANEJOTORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoessencia &lt;&gt; old.codigoessencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				sql_rolback = sql_rolback || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				campos_new  = campos_new  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				campos_old  = campos_old  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				first = false;
			end if;

			if (new.diametrotora &lt;&gt; old.diametrotora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIAMETROTORA = ' || coalesce(quote_literal(new.diametrotora), 'null');
				sql_rolback = sql_rolback || ' DIAMETROTORA = ' || coalesce(quote_literal(old.diametrotora), 'null');
				campos_new  = campos_new  || ' DIAMETROTORA = ' || coalesce(quote_literal(new.diametrotora), 'null');
				campos_old  = campos_old  || ' DIAMETROTORA = ' || coalesce(quote_literal(old.diametrotora), 'null');
				first = false;
			end if;

			if (new.comprimentotora &lt;&gt; old.comprimentotora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(new.comprimentotora), 'null');
				sql_rolback = sql_rolback || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(old.comprimentotora), 'null');
				campos_new  = campos_new  || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(new.comprimentotora), 'null');
				campos_old  = campos_old  || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(old.comprimentotora), 'null');
				first = false;
			end if;

			if (new.volumetora &lt;&gt; old.volumetora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VOLUMETORA = ' || coalesce(quote_literal(new.volumetora), 'null');
				sql_rolback = sql_rolback || ' VOLUMETORA = ' || coalesce(quote_literal(old.volumetora), 'null');
				campos_new  = campos_new  || ' VOLUMETORA = ' || coalesce(quote_literal(new.volumetora), 'null');
				campos_old  = campos_old  || ' VOLUMETORA = ' || coalesce(quote_literal(old.volumetora), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOMANEJOTORA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOESSENCIA, DIAMETROTORA, COMPRIMENTOTORA, VOLUMETORA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diametrotora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.comprimentotora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.volumetora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOMANEJOTORA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			campos_old  = campos_old || 'DIAMETROTORA = ' || coalesce(quote_literal(old.diametrotora), 'null') || ', ';
			campos_old  = campos_old || 'COMPRIMENTOTORA = ' || coalesce(quote_literal(old.comprimentotora), 'null') || ', ';
			campos_old  = campos_old || 'VOLUMETORA = ' || coalesce(quote_literal(old.volumetora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiomanejotora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiomanejotora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiomanejotora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiosaidatora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiosaidatora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOSAIDATORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, NUMEROPLAQUETAROMANEIO, CODIGOEMPRESAITEMROMANEIO, CODIGOLOJAITEMROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOSAIDATORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ' AND CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null') || ' AND CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOSAIDATORA SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOSAIDATORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.numeroplaquetaromaneio &lt;&gt; old.numeroplaquetaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');
				sql_rolback = sql_rolback || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null');
				campos_new  = campos_new  || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');
				campos_old  = campos_old  || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaitemromaneio &lt;&gt; old.codigoempresaitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(old.codigoempresaitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(old.codigoempresaitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigolojaitemromaneio &lt;&gt; old.codigolojaitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(old.codigolojaitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(old.codigolojaitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ' AND CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null') || ' AND CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ' AND CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null') || ' AND CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOSAIDATORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, NUMEROPLAQUETAROMANEIO, CODIGOEMPRESAITEMROMANEIO, CODIGOLOJAITEMROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOSAIDATORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null') || ' AND CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(old.codigoempresaitemromaneio), 'null') || ' AND CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(old.codigolojaitemromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAITEMROMANEIO = ' || coalesce(quote_literal(old.codigoempresaitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAITEMROMANEIO = ' || coalesce(quote_literal(old.codigolojaitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaitemromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaitemromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiosaidatora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiosaidatora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiosaidatora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemromaneiotora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemromaneiotora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMROMANEIOTORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, NUMEROPLAQUETAROMANEIO, CODIGOESSENCIA, DIAMETROTORA, COMPRIMENTOTORA, VOLUMETORA, DATAHORABAIXAROMANEIO, CODIGOEMPRESAUSUARIOBAIXAROMANEIO, CODIGOLOJAUSUARIOBAIXAROMANEIO, CODIGOUSUARIOLOG, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, FLAGBAIXATORA, CODIGOUSUARIOBAIXAROMANEIO, CODIGOEMPRESAGERENTE, CODIGOGERENTE, CODIGOLOJAGERENTE, DATABAIXAITEMROMANEIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diametrotora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.comprimentotora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.volumetora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorabaixaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariobaixaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariobaixaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagbaixatora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariobaixaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresagerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojagerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.databaixaitemromaneio), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMROMANEIOTORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			campos_new   = campos_new || 'DIAMETROTORA = ' || coalesce(quote_literal(new.diametrotora), 'null') || ', ';
			campos_new   = campos_new || 'COMPRIMENTOTORA = ' || coalesce(quote_literal(new.comprimentotora), 'null') || ', ';
			campos_new   = campos_new || 'VOLUMETORA = ' || coalesce(quote_literal(new.volumetora), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORABAIXAROMANEIO = ' || coalesce(quote_literal(new.datahorabaixaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuariobaixaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigolojausuariobaixaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'FLAGBAIXATORA = ' || coalesce(quote_literal(new.flagbaixatora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigousuariobaixaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null') || ', ';
			campos_new   = campos_new || 'DATABAIXAITEMROMANEIO = ' || coalesce(quote_literal(new.databaixaitemromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMROMANEIOTORA SET ';
			sql_rolback = 'UPDATE ITEMROMANEIOTORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.numeroplaquetaromaneio &lt;&gt; old.numeroplaquetaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');
				sql_rolback = sql_rolback || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null');
				campos_new  = campos_new  || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');
				campos_old  = campos_old  || ' NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null');
				first = false;
			end if;

			if (new.codigoessencia &lt;&gt; old.codigoessencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				sql_rolback = sql_rolback || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				campos_new  = campos_new  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				campos_old  = campos_old  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				first = false;
			end if;

			if (new.diametrotora &lt;&gt; old.diametrotora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIAMETROTORA = ' || coalesce(quote_literal(new.diametrotora), 'null');
				sql_rolback = sql_rolback || ' DIAMETROTORA = ' || coalesce(quote_literal(old.diametrotora), 'null');
				campos_new  = campos_new  || ' DIAMETROTORA = ' || coalesce(quote_literal(new.diametrotora), 'null');
				campos_old  = campos_old  || ' DIAMETROTORA = ' || coalesce(quote_literal(old.diametrotora), 'null');
				first = false;
			end if;

			if (new.comprimentotora &lt;&gt; old.comprimentotora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(new.comprimentotora), 'null');
				sql_rolback = sql_rolback || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(old.comprimentotora), 'null');
				campos_new  = campos_new  || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(new.comprimentotora), 'null');
				campos_old  = campos_old  || ' COMPRIMENTOTORA = ' || coalesce(quote_literal(old.comprimentotora), 'null');
				first = false;
			end if;

			if (new.volumetora &lt;&gt; old.volumetora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VOLUMETORA = ' || coalesce(quote_literal(new.volumetora), 'null');
				sql_rolback = sql_rolback || ' VOLUMETORA = ' || coalesce(quote_literal(old.volumetora), 'null');
				campos_new  = campos_new  || ' VOLUMETORA = ' || coalesce(quote_literal(new.volumetora), 'null');
				campos_old  = campos_old  || ' VOLUMETORA = ' || coalesce(quote_literal(old.volumetora), 'null');
				first = false;
			end if;

			if (new.datahorabaixaromaneio &lt;&gt; old.datahorabaixaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORABAIXAROMANEIO = ' || coalesce(quote_literal(new.datahorabaixaromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORABAIXAROMANEIO = ' || coalesce(quote_literal(old.datahorabaixaromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORABAIXAROMANEIO = ' || coalesce(quote_literal(new.datahorabaixaromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORABAIXAROMANEIO = ' || coalesce(quote_literal(old.datahorabaixaromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariobaixaromaneio &lt;&gt; old.codigoempresausuariobaixaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuariobaixaromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuariobaixaromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuariobaixaromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuariobaixaromaneio), 'null');
				first = false;
			end if;

			if (new.codigolojausuariobaixaromaneio &lt;&gt; old.codigolojausuariobaixaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigolojausuariobaixaromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigolojausuariobaixaromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigolojausuariobaixaromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigolojausuariobaixaromaneio), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.flagbaixatora &lt;&gt; old.flagbaixatora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGBAIXATORA = ' || coalesce(quote_literal(new.flagbaixatora), 'null');
				sql_rolback = sql_rolback || ' FLAGBAIXATORA = ' || coalesce(quote_literal(old.flagbaixatora), 'null');
				campos_new  = campos_new  || ' FLAGBAIXATORA = ' || coalesce(quote_literal(new.flagbaixatora), 'null');
				campos_old  = campos_old  || ' FLAGBAIXATORA = ' || coalesce(quote_literal(old.flagbaixatora), 'null');
				first = false;
			end if;

			if (new.codigousuariobaixaromaneio &lt;&gt; old.codigousuariobaixaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigousuariobaixaromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigousuariobaixaromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(new.codigousuariobaixaromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigousuariobaixaromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresagerente &lt;&gt; old.codigoempresagerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null');
				first = false;
			end if;

			if (new.codigogerente &lt;&gt; old.codigogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				campos_new  = campos_new  || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				campos_old  = campos_old  || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				first = false;
			end if;

			if (new.codigolojagerente &lt;&gt; old.codigolojagerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null');
				first = false;
			end if;

			if (new.databaixaitemromaneio &lt;&gt; old.databaixaitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATABAIXAITEMROMANEIO = ' || coalesce(quote_literal(new.databaixaitemromaneio), 'null');
				sql_rolback = sql_rolback || ' DATABAIXAITEMROMANEIO = ' || coalesce(quote_literal(old.databaixaitemromaneio), 'null');
				campos_new  = campos_new  || ' DATABAIXAITEMROMANEIO = ' || coalesce(quote_literal(new.databaixaitemromaneio), 'null');
				campos_old  = campos_old  || ' DATABAIXAITEMROMANEIO = ' || coalesce(quote_literal(old.databaixaitemromaneio), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.numeroplaquetaromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMROMANEIOTORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, NUMEROPLAQUETAROMANEIO, CODIGOESSENCIA, DIAMETROTORA, COMPRIMENTOTORA, VOLUMETORA, DATAHORABAIXAROMANEIO, CODIGOEMPRESAUSUARIOBAIXAROMANEIO, CODIGOLOJAUSUARIOBAIXAROMANEIO, CODIGOUSUARIOLOG, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, FLAGBAIXATORA, CODIGOUSUARIOBAIXAROMANEIO, CODIGOEMPRESAGERENTE, CODIGOGERENTE, CODIGOLOJAGERENTE, DATABAIXAITEMROMANEIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diametrotora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.comprimentotora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.volumetora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorabaixaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariobaixaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariobaixaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagbaixatora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariobaixaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresagerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojagerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.databaixaitemromaneio), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMROMANEIOTORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROPLAQUETAROMANEIO = ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			campos_old  = campos_old || 'DIAMETROTORA = ' || coalesce(quote_literal(old.diametrotora), 'null') || ', ';
			campos_old  = campos_old || 'COMPRIMENTOTORA = ' || coalesce(quote_literal(old.comprimentotora), 'null') || ', ';
			campos_old  = campos_old || 'VOLUMETORA = ' || coalesce(quote_literal(old.volumetora), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORABAIXAROMANEIO = ' || coalesce(quote_literal(old.datahorabaixaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuariobaixaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigolojausuariobaixaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'FLAGBAIXATORA = ' || coalesce(quote_literal(old.flagbaixatora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOBAIXAROMANEIO = ' || coalesce(quote_literal(old.codigousuariobaixaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null') || ', ';
			campos_old  = campos_old || 'DATABAIXAITEMROMANEIO = ' || coalesce(quote_literal(old.databaixaitemromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.numeroplaquetaromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemromaneiotora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiotora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemromaneiotora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_itemtransferenciaestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_itemtransferenciaestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ITEMTRANSFERENCIAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOTRANSFERENCIAESTOQUE, CODIGOITEMTRANSFERENCIAESTOQUE, QUANTIDADEITEMTRANSFERENCIAESTOQUE, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeitemtransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ITEMTRANSFERENCIAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ' AND CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.quantidadeitemtransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ITEMTRANSFERENCIAESTOQUE SET ';
			sql_rolback = 'UPDATE ITEMTRANSFERENCIAESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotransferenciaestoque &lt;&gt; old.codigotransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.codigoitemtransferenciaestoque &lt;&gt; old.codigoitemtransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigoitemtransferenciaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigoitemtransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.quantidadeitemtransferenciaestoque &lt;&gt; old.quantidadeitemtransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.quantidadeitemtransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.quantidadeitemtransferenciaestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.quantidadeitemtransferenciaestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.quantidadeitemtransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ' AND CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ' AND CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemtransferenciaestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ITEMTRANSFERENCIAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOTRANSFERENCIAESTOQUE, CODIGOITEMTRANSFERENCIAESTOQUE, QUANTIDADEITEMTRANSFERENCIAESTOQUE, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemtransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeitemtransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ITEMTRANSFERENCIAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null') || ' AND CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigoitemtransferenciaestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigoitemtransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEITEMTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.quantidadeitemtransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemtransferenciaestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'itemtransferenciaestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemtransferenciaestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('itemtransferenciaestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_levantamentoestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_levantamentoestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO LEVANTAMENTOESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOLEVANTAMENTOESTOQUE, DATAHORAINICIOLEVANTAMENTOESTOQUE, DATAHORAFIMLEVANTAMENTOESTOQUE, CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE, CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE, CODIGOUSUARIOLEVANTAMENTOESTOQUE, STATUSLEVANTAMENTOESTOQUE, DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE, OBSERVACAOLEVANTAMENTOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorainiciolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorafimlevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuslevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraprocessamentolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM LEVANTAMENTOESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAINICIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahorainiciolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAFIMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahorafimlevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoempresausuariolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolojausuariolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigousuariolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'STATUSLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.statuslevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahoraprocessamentolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.observacaolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE LEVANTAMENTOESTOQUE SET ';
			sql_rolback = 'UPDATE LEVANTAMENTOESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigolevantamentoestoque &lt;&gt; old.codigolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.datahorainiciolevantamentoestoque &lt;&gt; old.datahorainiciolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAINICIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahorainiciolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAINICIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahorainiciolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAINICIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahorainiciolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAINICIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahorainiciolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.datahorafimlevantamentoestoque &lt;&gt; old.datahorafimlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAFIMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahorafimlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAFIMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahorafimlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAFIMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahorafimlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAFIMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahorafimlevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolevantamentoestoque &lt;&gt; old.codigoempresausuariolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoempresausuariolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoempresausuariolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoempresausuariolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoempresausuariolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolevantamentoestoque &lt;&gt; old.codigolojausuariolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolojausuariolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolojausuariolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolojausuariolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolojausuariolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigousuariolevantamentoestoque &lt;&gt; old.codigousuariolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigousuariolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigousuariolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigousuariolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigousuariolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.statuslevantamentoestoque &lt;&gt; old.statuslevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.statuslevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' STATUSLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.statuslevantamentoestoque), 'null');
				campos_new  = campos_new  || ' STATUSLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.statuslevantamentoestoque), 'null');
				campos_old  = campos_old  || ' STATUSLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.statuslevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.datahoraprocessamentolevantamentoestoque &lt;&gt; old.datahoraprocessamentolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahoraprocessamentolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahoraprocessamentolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.datahoraprocessamentolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahoraprocessamentolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.observacaolevantamentoestoque &lt;&gt; old.observacaolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.observacaolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.observacaolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' OBSERVACAOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.observacaolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' OBSERVACAOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.observacaolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO LEVANTAMENTOESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOLEVANTAMENTOESTOQUE, DATAHORAINICIOLEVANTAMENTOESTOQUE, DATAHORAFIMLEVANTAMENTOESTOQUE, CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE, CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE, CODIGOUSUARIOLEVANTAMENTOESTOQUE, STATUSLEVANTAMENTOESTOQUE, DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE, OBSERVACAOLEVANTAMENTOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorainiciolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorafimlevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuslevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraprocessamentolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM LEVANTAMENTOESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAINICIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahorainiciolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAFIMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahorafimlevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoempresausuariolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolojausuariolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigousuariolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'STATUSLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.statuslevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAPROCESSAMENTOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.datahoraprocessamentolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.observacaolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'levantamentoestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('levantamentoestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('levantamentoestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_levantamentoestoqueitem()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_levantamentoestoqueitem() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO LEVANTAMENTOESTOQUEITEM (CODIGOEMPRESA, CODIGOLOJA, CODIGOLEVANTAMENTOESTOQUE, CODIGOITEMLEVANTAMENTOESTOQUE, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE, QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE, ACAOITEMLEVANTAMENTOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE, QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadedigitadaitemlevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeencontradaitemlevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.acaoitemlevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadedisplayitemlevantamentoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadegavetaitemlevantamentoestoque), 'null') || ')';

			sql_rolback = 'DELETE FROM LEVANTAMENTOESTOQUEITEM WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ' AND CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadedigitadaitemlevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadeencontradaitemlevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'ACAOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.acaoitemlevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadedisplayitemlevantamentoestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadegavetaitemlevantamentoestoque), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE LEVANTAMENTOESTOQUEITEM SET ';
			sql_rolback = 'UPDATE LEVANTAMENTOESTOQUEITEM SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigolevantamentoestoque &lt;&gt; old.codigolevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigoitemlevantamentoestoque &lt;&gt; old.codigoitemlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoitemlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoitemlevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadedigitadaitemlevantamentoestoque &lt;&gt; old.quantidadedigitadaitemlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadedigitadaitemlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadedigitadaitemlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadedigitadaitemlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadedigitadaitemlevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.quantidadeencontradaitemlevantamentoestoque &lt;&gt; old.quantidadeencontradaitemlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadeencontradaitemlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadeencontradaitemlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadeencontradaitemlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadeencontradaitemlevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.acaoitemlevantamentoestoque &lt;&gt; old.acaoitemlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ACAOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.acaoitemlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' ACAOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.acaoitemlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' ACAOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.acaoitemlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' ACAOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.acaoitemlevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.quantidadedisplayitemlevantamentoestoque &lt;&gt; old.quantidadedisplayitemlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadedisplayitemlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadedisplayitemlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadedisplayitemlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadedisplayitemlevantamentoestoque), 'null');
				first = false;
			end if;

			if (new.quantidadegavetaitemlevantamentoestoque &lt;&gt; old.quantidadegavetaitemlevantamentoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadegavetaitemlevantamentoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadegavetaitemlevantamentoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.quantidadegavetaitemlevantamentoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadegavetaitemlevantamentoestoque), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ' AND CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null') || ' AND CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigolevantamentoestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemlevantamentoestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO LEVANTAMENTOESTOQUEITEM (CODIGOEMPRESA, CODIGOLOJA, CODIGOLEVANTAMENTOESTOQUE, CODIGOITEMLEVANTAMENTOESTOQUE, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE, QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE, ACAOITEMLEVANTAMENTOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE, QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemlevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadedigitadaitemlevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeencontradaitemlevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.acaoitemlevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadedisplayitemlevantamentoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadegavetaitemlevantamentoestoque), 'null') || ')';

			sql_replica = 'DELETE FROM LEVANTAMENTOESTOQUEITEM WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null') || ' AND CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoitemlevantamentoestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.codigoitemlevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEDIGITADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadedigitadaitemlevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEENCONTRADAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadeencontradaitemlevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'ACAOITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.acaoitemlevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEDISPLAYITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadedisplayitemlevantamentoestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEGAVETAITEMLEVANTAMENTOESTOQUE = ' || coalesce(quote_literal(old.quantidadegavetaitemlevantamentoestoque), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigolevantamentoestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemlevantamentoestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'levantamentoestoqueitem', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('levantamentoestoqueitem', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('levantamentoestoqueitem', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_linhaproduto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_linhaproduto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO LINHAPRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOLINHAPRODUTO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, NOMELINHAPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolinhaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomelinhaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM LINHAPRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'NOMELINHAPRODUTO = ' || coalesce(quote_literal(new.nomelinhaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigolinhaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE LINHAPRODUTO SET ';
			sql_rolback = 'UPDATE LINHAPRODUTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigolinhaproduto &lt;&gt; old.codigolinhaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.nomelinhaproduto &lt;&gt; old.nomelinhaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMELINHAPRODUTO = ' || coalesce(quote_literal(new.nomelinhaproduto), 'null');
				sql_rolback = sql_rolback || ' NOMELINHAPRODUTO = ' || coalesce(quote_literal(old.nomelinhaproduto), 'null');
				campos_new  = campos_new  || ' NOMELINHAPRODUTO = ' || coalesce(quote_literal(new.nomelinhaproduto), 'null');
				campos_old  = campos_old  || ' NOMELINHAPRODUTO = ' || coalesce(quote_literal(old.nomelinhaproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(new.codigolinhaproduto), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigolinhaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO LINHAPRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOLINHAPRODUTO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, NOMELINHAPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolinhaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomelinhaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM LINHAPRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLINHAPRODUTO = ' || coalesce(quote_literal(old.codigolinhaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'NOMELINHAPRODUTO = ' || coalesce(quote_literal(old.nomelinhaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigolinhaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'linhaproduto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('linhaproduto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('linhaproduto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_loja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_loja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO LOJA (CODIGOEMPRESA, CODIGOLOJA, NOMELOJA, FLAGMATRIZLOJA, CNPJLOJA, INSCRICAOESTADUALLOJA, INSCRICAOMUNICIPALLOJA, ENDERECOLOJA, BAIRROLOJA, CODIGOCIDADELOJA, CEPLOJA, FONELOJA, FAXLOJA, ISSLOJA, CODIGOPESSOALOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESAFUNCIONARIOSUPERVISOR, CODIGOLOJAFUNCIONARIOSUPERVISOR, CODIGOFUNCIONARIOSUPERVISOR, CODIGOEMPRESAFUNCIONARIOGERENTE, CODIGOLOJAFUNCIONARIOGERENTE, CODIGOFUNCIONARIOGERENTE) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagmatrizloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cnpjloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.inscricaoestadualloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.inscricaomunicipalloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.enderecoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.bairroloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocidadeloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ceploja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.foneloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.faxloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.issloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafuncionariosupervisor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafuncionariosupervisor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofuncionariosupervisor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafuncionariogerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafuncionariogerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofuncionariogerente), 'null') || ')';

			sql_rolback = 'DELETE FROM LOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NOMELOJA = ' || coalesce(quote_literal(new.nomeloja), 'null') || ', ';
			campos_new   = campos_new || 'FLAGMATRIZLOJA = ' || coalesce(quote_literal(new.flagmatrizloja), 'null') || ', ';
			campos_new   = campos_new || 'CNPJLOJA = ' || coalesce(quote_literal(new.cnpjloja), 'null') || ', ';
			campos_new   = campos_new || 'INSCRICAOESTADUALLOJA = ' || coalesce(quote_literal(new.inscricaoestadualloja), 'null') || ', ';
			campos_new   = campos_new || 'INSCRICAOMUNICIPALLOJA = ' || coalesce(quote_literal(new.inscricaomunicipalloja), 'null') || ', ';
			campos_new   = campos_new || 'ENDERECOLOJA = ' || coalesce(quote_literal(new.enderecoloja), 'null') || ', ';
			campos_new   = campos_new || 'BAIRROLOJA = ' || coalesce(quote_literal(new.bairroloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCIDADELOJA = ' || coalesce(quote_literal(new.codigocidadeloja), 'null') || ', ';
			campos_new   = campos_new || 'CEPLOJA = ' || coalesce(quote_literal(new.ceploja), 'null') || ', ';
			campos_new   = campos_new || 'FONELOJA = ' || coalesce(quote_literal(new.foneloja), 'null') || ', ';
			campos_new   = campos_new || 'FAXLOJA = ' || coalesce(quote_literal(new.faxloja), 'null') || ', ';
			campos_new   = campos_new || 'ISSLOJA = ' || coalesce(quote_literal(new.issloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOALOJA = ' || coalesce(quote_literal(new.codigopessoaloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigoempresafuncionariosupervisor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigolojafuncionariosupervisor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigofuncionariosupervisor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigoempresafuncionariogerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigolojafuncionariogerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigofuncionariogerente), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE LOJA SET ';
			sql_rolback = 'UPDATE LOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.nomeloja &lt;&gt; old.nomeloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMELOJA = ' || coalesce(quote_literal(new.nomeloja), 'null');
				sql_rolback = sql_rolback || ' NOMELOJA = ' || coalesce(quote_literal(old.nomeloja), 'null');
				campos_new  = campos_new  || ' NOMELOJA = ' || coalesce(quote_literal(new.nomeloja), 'null');
				campos_old  = campos_old  || ' NOMELOJA = ' || coalesce(quote_literal(old.nomeloja), 'null');
				first = false;
			end if;

			if (new.flagmatrizloja &lt;&gt; old.flagmatrizloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGMATRIZLOJA = ' || coalesce(quote_literal(new.flagmatrizloja), 'null');
				sql_rolback = sql_rolback || ' FLAGMATRIZLOJA = ' || coalesce(quote_literal(old.flagmatrizloja), 'null');
				campos_new  = campos_new  || ' FLAGMATRIZLOJA = ' || coalesce(quote_literal(new.flagmatrizloja), 'null');
				campos_old  = campos_old  || ' FLAGMATRIZLOJA = ' || coalesce(quote_literal(old.flagmatrizloja), 'null');
				first = false;
			end if;

			if (new.cnpjloja &lt;&gt; old.cnpjloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CNPJLOJA = ' || coalesce(quote_literal(new.cnpjloja), 'null');
				sql_rolback = sql_rolback || ' CNPJLOJA = ' || coalesce(quote_literal(old.cnpjloja), 'null');
				campos_new  = campos_new  || ' CNPJLOJA = ' || coalesce(quote_literal(new.cnpjloja), 'null');
				campos_old  = campos_old  || ' CNPJLOJA = ' || coalesce(quote_literal(old.cnpjloja), 'null');
				first = false;
			end if;

			if (new.inscricaoestadualloja &lt;&gt; old.inscricaoestadualloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INSCRICAOESTADUALLOJA = ' || coalesce(quote_literal(new.inscricaoestadualloja), 'null');
				sql_rolback = sql_rolback || ' INSCRICAOESTADUALLOJA = ' || coalesce(quote_literal(old.inscricaoestadualloja), 'null');
				campos_new  = campos_new  || ' INSCRICAOESTADUALLOJA = ' || coalesce(quote_literal(new.inscricaoestadualloja), 'null');
				campos_old  = campos_old  || ' INSCRICAOESTADUALLOJA = ' || coalesce(quote_literal(old.inscricaoestadualloja), 'null');
				first = false;
			end if;

			if (new.inscricaomunicipalloja &lt;&gt; old.inscricaomunicipalloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INSCRICAOMUNICIPALLOJA = ' || coalesce(quote_literal(new.inscricaomunicipalloja), 'null');
				sql_rolback = sql_rolback || ' INSCRICAOMUNICIPALLOJA = ' || coalesce(quote_literal(old.inscricaomunicipalloja), 'null');
				campos_new  = campos_new  || ' INSCRICAOMUNICIPALLOJA = ' || coalesce(quote_literal(new.inscricaomunicipalloja), 'null');
				campos_old  = campos_old  || ' INSCRICAOMUNICIPALLOJA = ' || coalesce(quote_literal(old.inscricaomunicipalloja), 'null');
				first = false;
			end if;

			if (new.enderecoloja &lt;&gt; old.enderecoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ENDERECOLOJA = ' || coalesce(quote_literal(new.enderecoloja), 'null');
				sql_rolback = sql_rolback || ' ENDERECOLOJA = ' || coalesce(quote_literal(old.enderecoloja), 'null');
				campos_new  = campos_new  || ' ENDERECOLOJA = ' || coalesce(quote_literal(new.enderecoloja), 'null');
				campos_old  = campos_old  || ' ENDERECOLOJA = ' || coalesce(quote_literal(old.enderecoloja), 'null');
				first = false;
			end if;

			if (new.bairroloja &lt;&gt; old.bairroloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BAIRROLOJA = ' || coalesce(quote_literal(new.bairroloja), 'null');
				sql_rolback = sql_rolback || ' BAIRROLOJA = ' || coalesce(quote_literal(old.bairroloja), 'null');
				campos_new  = campos_new  || ' BAIRROLOJA = ' || coalesce(quote_literal(new.bairroloja), 'null');
				campos_old  = campos_old  || ' BAIRROLOJA = ' || coalesce(quote_literal(old.bairroloja), 'null');
				first = false;
			end if;

			if (new.codigocidadeloja &lt;&gt; old.codigocidadeloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCIDADELOJA = ' || coalesce(quote_literal(new.codigocidadeloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOCIDADELOJA = ' || coalesce(quote_literal(old.codigocidadeloja), 'null');
				campos_new  = campos_new  || ' CODIGOCIDADELOJA = ' || coalesce(quote_literal(new.codigocidadeloja), 'null');
				campos_old  = campos_old  || ' CODIGOCIDADELOJA = ' || coalesce(quote_literal(old.codigocidadeloja), 'null');
				first = false;
			end if;

			if (new.ceploja &lt;&gt; old.ceploja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CEPLOJA = ' || coalesce(quote_literal(new.ceploja), 'null');
				sql_rolback = sql_rolback || ' CEPLOJA = ' || coalesce(quote_literal(old.ceploja), 'null');
				campos_new  = campos_new  || ' CEPLOJA = ' || coalesce(quote_literal(new.ceploja), 'null');
				campos_old  = campos_old  || ' CEPLOJA = ' || coalesce(quote_literal(old.ceploja), 'null');
				first = false;
			end if;

			if (new.foneloja &lt;&gt; old.foneloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONELOJA = ' || coalesce(quote_literal(new.foneloja), 'null');
				sql_rolback = sql_rolback || ' FONELOJA = ' || coalesce(quote_literal(old.foneloja), 'null');
				campos_new  = campos_new  || ' FONELOJA = ' || coalesce(quote_literal(new.foneloja), 'null');
				campos_old  = campos_old  || ' FONELOJA = ' || coalesce(quote_literal(old.foneloja), 'null');
				first = false;
			end if;

			if (new.faxloja &lt;&gt; old.faxloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FAXLOJA = ' || coalesce(quote_literal(new.faxloja), 'null');
				sql_rolback = sql_rolback || ' FAXLOJA = ' || coalesce(quote_literal(old.faxloja), 'null');
				campos_new  = campos_new  || ' FAXLOJA = ' || coalesce(quote_literal(new.faxloja), 'null');
				campos_old  = campos_old  || ' FAXLOJA = ' || coalesce(quote_literal(old.faxloja), 'null');
				first = false;
			end if;

			if (new.issloja &lt;&gt; old.issloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ISSLOJA = ' || coalesce(quote_literal(new.issloja), 'null');
				sql_rolback = sql_rolback || ' ISSLOJA = ' || coalesce(quote_literal(old.issloja), 'null');
				campos_new  = campos_new  || ' ISSLOJA = ' || coalesce(quote_literal(new.issloja), 'null');
				campos_old  = campos_old  || ' ISSLOJA = ' || coalesce(quote_literal(old.issloja), 'null');
				first = false;
			end if;

			if (new.codigopessoaloja &lt;&gt; old.codigopessoaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOALOJA = ' || coalesce(quote_literal(new.codigopessoaloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOALOJA = ' || coalesce(quote_literal(old.codigopessoaloja), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOALOJA = ' || coalesce(quote_literal(new.codigopessoaloja), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOALOJA = ' || coalesce(quote_literal(old.codigopessoaloja), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresafuncionariosupervisor &lt;&gt; old.codigoempresafuncionariosupervisor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigoempresafuncionariosupervisor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigoempresafuncionariosupervisor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigoempresafuncionariosupervisor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigoempresafuncionariosupervisor), 'null');
				first = false;
			end if;

			if (new.codigolojafuncionariosupervisor &lt;&gt; old.codigolojafuncionariosupervisor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigolojafuncionariosupervisor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigolojafuncionariosupervisor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigolojafuncionariosupervisor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigolojafuncionariosupervisor), 'null');
				first = false;
			end if;

			if (new.codigofuncionariosupervisor &lt;&gt; old.codigofuncionariosupervisor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigofuncionariosupervisor), 'null');
				sql_rolback = sql_rolback || ' CODIGOFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigofuncionariosupervisor), 'null');
				campos_new  = campos_new  || ' CODIGOFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(new.codigofuncionariosupervisor), 'null');
				campos_old  = campos_old  || ' CODIGOFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigofuncionariosupervisor), 'null');
				first = false;
			end if;

			if (new.codigoempresafuncionariogerente &lt;&gt; old.codigoempresafuncionariogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigoempresafuncionariogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigoempresafuncionariogerente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigoempresafuncionariogerente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigoempresafuncionariogerente), 'null');
				first = false;
			end if;

			if (new.codigolojafuncionariogerente &lt;&gt; old.codigolojafuncionariogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigolojafuncionariogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigolojafuncionariogerente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigolojafuncionariogerente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigolojafuncionariogerente), 'null');
				first = false;
			end if;

			if (new.codigofuncionariogerente &lt;&gt; old.codigofuncionariogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigofuncionariogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigofuncionariogerente), 'null');
				campos_new  = campos_new  || ' CODIGOFUNCIONARIOGERENTE = ' || coalesce(quote_literal(new.codigofuncionariogerente), 'null');
				campos_old  = campos_old  || ' CODIGOFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigofuncionariogerente), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO LOJA (CODIGOEMPRESA, CODIGOLOJA, NOMELOJA, FLAGMATRIZLOJA, CNPJLOJA, INSCRICAOESTADUALLOJA, INSCRICAOMUNICIPALLOJA, ENDERECOLOJA, BAIRROLOJA, CODIGOCIDADELOJA, CEPLOJA, FONELOJA, FAXLOJA, ISSLOJA, CODIGOPESSOALOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESAFUNCIONARIOSUPERVISOR, CODIGOLOJAFUNCIONARIOSUPERVISOR, CODIGOFUNCIONARIOSUPERVISOR, CODIGOEMPRESAFUNCIONARIOGERENTE, CODIGOLOJAFUNCIONARIOGERENTE, CODIGOFUNCIONARIOGERENTE) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagmatrizloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cnpjloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.inscricaoestadualloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.inscricaomunicipalloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.enderecoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.bairroloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocidadeloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ceploja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.foneloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.faxloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.issloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafuncionariosupervisor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafuncionariosupervisor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofuncionariosupervisor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafuncionariogerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafuncionariogerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofuncionariogerente), 'null') || ')';

			sql_replica = 'DELETE FROM LOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NOMELOJA = ' || coalesce(quote_literal(old.nomeloja), 'null') || ', ';
			campos_old  = campos_old || 'FLAGMATRIZLOJA = ' || coalesce(quote_literal(old.flagmatrizloja), 'null') || ', ';
			campos_old  = campos_old || 'CNPJLOJA = ' || coalesce(quote_literal(old.cnpjloja), 'null') || ', ';
			campos_old  = campos_old || 'INSCRICAOESTADUALLOJA = ' || coalesce(quote_literal(old.inscricaoestadualloja), 'null') || ', ';
			campos_old  = campos_old || 'INSCRICAOMUNICIPALLOJA = ' || coalesce(quote_literal(old.inscricaomunicipalloja), 'null') || ', ';
			campos_old  = campos_old || 'ENDERECOLOJA = ' || coalesce(quote_literal(old.enderecoloja), 'null') || ', ';
			campos_old  = campos_old || 'BAIRROLOJA = ' || coalesce(quote_literal(old.bairroloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCIDADELOJA = ' || coalesce(quote_literal(old.codigocidadeloja), 'null') || ', ';
			campos_old  = campos_old || 'CEPLOJA = ' || coalesce(quote_literal(old.ceploja), 'null') || ', ';
			campos_old  = campos_old || 'FONELOJA = ' || coalesce(quote_literal(old.foneloja), 'null') || ', ';
			campos_old  = campos_old || 'FAXLOJA = ' || coalesce(quote_literal(old.faxloja), 'null') || ', ';
			campos_old  = campos_old || 'ISSLOJA = ' || coalesce(quote_literal(old.issloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOALOJA = ' || coalesce(quote_literal(old.codigopessoaloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigoempresafuncionariosupervisor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigolojafuncionariosupervisor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFUNCIONARIOSUPERVISOR = ' || coalesce(quote_literal(old.codigofuncionariosupervisor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigoempresafuncionariogerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigolojafuncionariogerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFUNCIONARIOGERENTE = ' || coalesce(quote_literal(old.codigofuncionariogerente), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'loja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('loja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('loja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_manejotora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_manejotora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MANEJOTORA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMANEJO, DESCRICAOMANEJO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomanejo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaomanejo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MANEJOTORA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOMANEJO = ' || coalesce(quote_literal(new.descricaomanejo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigomanejo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MANEJOTORA SET ';
			sql_rolback = 'UPDATE MANEJOTORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigomanejo &lt;&gt; old.codigomanejo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');
				sql_rolback = sql_rolback || ' CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null');
				campos_new  = campos_new  || ' CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');
				campos_old  = campos_old  || ' CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null');
				first = false;
			end if;

			if (new.descricaomanejo &lt;&gt; old.descricaomanejo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOMANEJO = ' || coalesce(quote_literal(new.descricaomanejo), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOMANEJO = ' || coalesce(quote_literal(old.descricaomanejo), 'null');
				campos_new  = campos_new  || ' DESCRICAOMANEJO = ' || coalesce(quote_literal(new.descricaomanejo), 'null');
				campos_old  = campos_old  || ' DESCRICAOMANEJO = ' || coalesce(quote_literal(old.descricaomanejo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigomanejo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MANEJOTORA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMANEJO, DESCRICAOMANEJO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomanejo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaomanejo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MANEJOTORA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOMANEJO = ' || coalesce(quote_literal(old.descricaomanejo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigomanejo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'manejotora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('manejotora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('manejotora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_mensageminterna()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_mensageminterna() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MENSAGEMINTERNA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMENSAGEMINTERNA, CODIGOEMPRESAUSUARIO, CODIGOLOJAUSUARIO, CODIGOUSUARIO, TITULOMENSAGEMINTERNA, FROMMENSAGEMINTERNA, TEXTOMENSAGEMINTERNA, PRIORIDADEMENSAGEMINTERNA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomensageminterna), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.titulomensageminterna), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.frommensageminterna), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.textomensageminterna), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.prioridademensageminterna), 'null') || ')';

			sql_rolback = 'DELETE FROM MENSAGEMINTERNA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIO = ' || coalesce(quote_literal(new.codigoempresausuario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIO = ' || coalesce(quote_literal(new.codigolojausuario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			campos_new   = campos_new || 'TITULOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.titulomensageminterna), 'null') || ', ';
			campos_new   = campos_new || 'FROMMENSAGEMINTERNA = ' || coalesce(quote_literal(new.frommensageminterna), 'null') || ', ';
			campos_new   = campos_new || 'TEXTOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.textomensageminterna), 'null') || ', ';
			campos_new   = campos_new || 'PRIORIDADEMENSAGEMINTERNA = ' || coalesce(quote_literal(new.prioridademensageminterna), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigomensageminterna), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MENSAGEMINTERNA SET ';
			sql_rolback = 'UPDATE MENSAGEMINTERNA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigomensageminterna &lt;&gt; old.codigomensageminterna) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');
				sql_rolback = sql_rolback || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null');
				campos_new  = campos_new  || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');
				campos_old  = campos_old  || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null');
				first = false;
			end if;

			if (new.codigoempresausuario &lt;&gt; old.codigoempresausuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIO = ' || coalesce(quote_literal(new.codigoempresausuario), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIO = ' || coalesce(quote_literal(old.codigoempresausuario), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIO = ' || coalesce(quote_literal(new.codigoempresausuario), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIO = ' || coalesce(quote_literal(old.codigoempresausuario), 'null');
				first = false;
			end if;

			if (new.codigolojausuario &lt;&gt; old.codigolojausuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIO = ' || coalesce(quote_literal(new.codigolojausuario), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIO = ' || coalesce(quote_literal(old.codigolojausuario), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIO = ' || coalesce(quote_literal(new.codigolojausuario), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIO = ' || coalesce(quote_literal(old.codigolojausuario), 'null');
				first = false;
			end if;

			if (new.codigousuario &lt;&gt; old.codigousuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				first = false;
			end if;

			if (new.titulomensageminterna &lt;&gt; old.titulomensageminterna) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TITULOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.titulomensageminterna), 'null');
				sql_rolback = sql_rolback || ' TITULOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.titulomensageminterna), 'null');
				campos_new  = campos_new  || ' TITULOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.titulomensageminterna), 'null');
				campos_old  = campos_old  || ' TITULOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.titulomensageminterna), 'null');
				first = false;
			end if;

			if (new.frommensageminterna &lt;&gt; old.frommensageminterna) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FROMMENSAGEMINTERNA = ' || coalesce(quote_literal(new.frommensageminterna), 'null');
				sql_rolback = sql_rolback || ' FROMMENSAGEMINTERNA = ' || coalesce(quote_literal(old.frommensageminterna), 'null');
				campos_new  = campos_new  || ' FROMMENSAGEMINTERNA = ' || coalesce(quote_literal(new.frommensageminterna), 'null');
				campos_old  = campos_old  || ' FROMMENSAGEMINTERNA = ' || coalesce(quote_literal(old.frommensageminterna), 'null');
				first = false;
			end if;

			if (new.textomensageminterna &lt;&gt; old.textomensageminterna) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TEXTOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.textomensageminterna), 'null');
				sql_rolback = sql_rolback || ' TEXTOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.textomensageminterna), 'null');
				campos_new  = campos_new  || ' TEXTOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.textomensageminterna), 'null');
				campos_old  = campos_old  || ' TEXTOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.textomensageminterna), 'null');
				first = false;
			end if;

			if (new.prioridademensageminterna &lt;&gt; old.prioridademensageminterna) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRIORIDADEMENSAGEMINTERNA = ' || coalesce(quote_literal(new.prioridademensageminterna), 'null');
				sql_rolback = sql_rolback || ' PRIORIDADEMENSAGEMINTERNA = ' || coalesce(quote_literal(old.prioridademensageminterna), 'null');
				campos_new  = campos_new  || ' PRIORIDADEMENSAGEMINTERNA = ' || coalesce(quote_literal(new.prioridademensageminterna), 'null');
				campos_old  = campos_old  || ' PRIORIDADEMENSAGEMINTERNA = ' || coalesce(quote_literal(old.prioridademensageminterna), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigomensageminterna), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MENSAGEMINTERNA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMENSAGEMINTERNA, CODIGOEMPRESAUSUARIO, CODIGOLOJAUSUARIO, CODIGOUSUARIO, TITULOMENSAGEMINTERNA, FROMMENSAGEMINTERNA, TEXTOMENSAGEMINTERNA, PRIORIDADEMENSAGEMINTERNA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomensageminterna), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.titulomensageminterna), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.frommensageminterna), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.textomensageminterna), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.prioridademensageminterna), 'null') || ')';

			sql_replica = 'DELETE FROM MENSAGEMINTERNA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIO = ' || coalesce(quote_literal(old.codigoempresausuario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIO = ' || coalesce(quote_literal(old.codigolojausuario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			campos_old  = campos_old || 'TITULOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.titulomensageminterna), 'null') || ', ';
			campos_old  = campos_old || 'FROMMENSAGEMINTERNA = ' || coalesce(quote_literal(old.frommensageminterna), 'null') || ', ';
			campos_old  = campos_old || 'TEXTOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.textomensageminterna), 'null') || ', ';
			campos_old  = campos_old || 'PRIORIDADEMENSAGEMINTERNA = ' || coalesce(quote_literal(old.prioridademensageminterna), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigomensageminterna), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'mensageminterna', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('mensageminterna', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('mensageminterna', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_mensageminternadestinatario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_mensageminternadestinatario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MENSAGEMINTERNADESTINATARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOMENSAGEMINTERNA, CODIGOEMPRESAUSUARIODESTINATARIO, CODIGOLOJAUSUARIODESTINATARIO, CODIGOUSUARIODESTINATARIO, FLAGLIDA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomensageminterna), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariodestinatario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flaglida), 'null') || ')';

			sql_rolback = 'DELETE FROM MENSAGEMINTERNADESTINATARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null') || ' AND CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null') || ' AND CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null') || ' AND CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null') || ', ';
			campos_new   = campos_new || 'FLAGLIDA = ' || coalesce(quote_literal(new.flaglida), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigomensageminterna), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null')  || ', ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null')  || ', ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MENSAGEMINTERNADESTINATARIO SET ';
			sql_rolback = 'UPDATE MENSAGEMINTERNADESTINATARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigomensageminterna &lt;&gt; old.codigomensageminterna) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');
				sql_rolback = sql_rolback || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null');
				campos_new  = campos_new  || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null');
				campos_old  = campos_old  || ' CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariodestinatario &lt;&gt; old.codigoempresausuariodestinatario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigoempresausuariodestinatario), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigoempresausuariodestinatario), 'null');
				first = false;
			end if;

			if (new.codigolojausuariodestinatario &lt;&gt; old.codigolojausuariodestinatario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigolojausuariodestinatario), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigolojausuariodestinatario), 'null');
				first = false;
			end if;

			if (new.codigousuariodestinatario &lt;&gt; old.codigousuariodestinatario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigousuariodestinatario), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigousuariodestinatario), 'null');
				first = false;
			end if;

			if (new.flaglida &lt;&gt; old.flaglida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGLIDA = ' || coalesce(quote_literal(new.flaglida), 'null');
				sql_rolback = sql_rolback || ' FLAGLIDA = ' || coalesce(quote_literal(old.flaglida), 'null');
				campos_new  = campos_new  || ' FLAGLIDA = ' || coalesce(quote_literal(new.flaglida), 'null');
				campos_old  = campos_old  || ' FLAGLIDA = ' || coalesce(quote_literal(old.flaglida), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null') || ' AND CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null') || ' AND CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null') || ' AND CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(new.codigomensageminterna), 'null') || ' AND CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null') || ' AND CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null') || ' AND CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigomensageminterna), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresausuariodestinatario), 'null')  || ', ' || coalesce(quote_literal(new.codigolojausuariodestinatario), 'null')  || ', ' || coalesce(quote_literal(new.codigousuariodestinatario), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MENSAGEMINTERNADESTINATARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOMENSAGEMINTERNA, CODIGOEMPRESAUSUARIODESTINATARIO, CODIGOLOJAUSUARIODESTINATARIO, CODIGOUSUARIODESTINATARIO, FLAGLIDA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomensageminterna), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariodestinatario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariodestinatario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariodestinatario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flaglida), 'null') || ')';

			sql_replica = 'DELETE FROM MENSAGEMINTERNADESTINATARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null') || ' AND CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigoempresausuariodestinatario), 'null') || ' AND CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigolojausuariodestinatario), 'null') || ' AND CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigousuariodestinatario), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMENSAGEMINTERNA = ' || coalesce(quote_literal(old.codigomensageminterna), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigoempresausuariodestinatario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigolojausuariodestinatario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIODESTINATARIO = ' || coalesce(quote_literal(old.codigousuariodestinatario), 'null') || ', ';
			campos_old  = campos_old || 'FLAGLIDA = ' || coalesce(quote_literal(old.flaglida), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigomensageminterna), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresausuariodestinatario), 'null')  || ', ' || coalesce(quote_literal(old.codigolojausuariodestinatario), 'null')  || ', ' || coalesce(quote_literal(old.codigousuariodestinatario), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'mensageminternadestinatario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('mensageminternadestinatario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('mensageminternadestinatario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_menu()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_menu() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MENU (CODIGOMENU, NOMEMENU, CODIGOOBJETO, CODIGOMENUPAI, ORDEMMENU, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, TIPOMENU) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomenu), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemenu), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomenupai), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ordemmenu), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipomenu), 'null') || ')';

			sql_rolback = 'DELETE FROM MENU WHERE CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMENU = ' || coalesce(quote_literal(new.nomemenu), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMENUPAI = ' || coalesce(quote_literal(new.codigomenupai), 'null') || ', ';
			campos_new   = campos_new || 'ORDEMMENU = ' || coalesce(quote_literal(new.ordemmenu), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'TIPOMENU = ' || coalesce(quote_literal(new.tipomenu), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomenu), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MENU SET ';
			sql_rolback = 'UPDATE MENU SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomenu &lt;&gt; old.codigomenu) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');
				sql_rolback = sql_rolback || ' CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null');
				campos_new  = campos_new  || ' CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');
				campos_old  = campos_old  || ' CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null');
				first = false;
			end if;

			if (new.nomemenu &lt;&gt; old.nomemenu) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMENU = ' || coalesce(quote_literal(new.nomemenu), 'null');
				sql_rolback = sql_rolback || ' NOMEMENU = ' || coalesce(quote_literal(old.nomemenu), 'null');
				campos_new  = campos_new  || ' NOMEMENU = ' || coalesce(quote_literal(new.nomemenu), 'null');
				campos_old  = campos_old  || ' NOMEMENU = ' || coalesce(quote_literal(old.nomemenu), 'null');
				first = false;
			end if;

			if (new.codigoobjeto &lt;&gt; old.codigoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				first = false;
			end if;

			if (new.codigomenupai &lt;&gt; old.codigomenupai) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMENUPAI = ' || coalesce(quote_literal(new.codigomenupai), 'null');
				sql_rolback = sql_rolback || ' CODIGOMENUPAI = ' || coalesce(quote_literal(old.codigomenupai), 'null');
				campos_new  = campos_new  || ' CODIGOMENUPAI = ' || coalesce(quote_literal(new.codigomenupai), 'null');
				campos_old  = campos_old  || ' CODIGOMENUPAI = ' || coalesce(quote_literal(old.codigomenupai), 'null');
				first = false;
			end if;

			if (new.ordemmenu &lt;&gt; old.ordemmenu) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ORDEMMENU = ' || coalesce(quote_literal(new.ordemmenu), 'null');
				sql_rolback = sql_rolback || ' ORDEMMENU = ' || coalesce(quote_literal(old.ordemmenu), 'null');
				campos_new  = campos_new  || ' ORDEMMENU = ' || coalesce(quote_literal(new.ordemmenu), 'null');
				campos_old  = campos_old  || ' ORDEMMENU = ' || coalesce(quote_literal(old.ordemmenu), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.tipomenu &lt;&gt; old.tipomenu) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOMENU = ' || coalesce(quote_literal(new.tipomenu), 'null');
				sql_rolback = sql_rolback || ' TIPOMENU = ' || coalesce(quote_literal(old.tipomenu), 'null');
				campos_new  = campos_new  || ' TIPOMENU = ' || coalesce(quote_literal(new.tipomenu), 'null');
				campos_old  = campos_old  || ' TIPOMENU = ' || coalesce(quote_literal(old.tipomenu), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');

			sql_chave = coalesce(quote_literal(new.codigomenu), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MENU (CODIGOMENU, NOMEMENU, CODIGOOBJETO, CODIGOMENUPAI, ORDEMMENU, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, TIPOMENU) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomenu), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemenu), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomenupai), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ordemmenu), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipomenu), 'null') || ')';

			sql_replica = 'DELETE FROM MENU WHERE CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMENU = ' || coalesce(quote_literal(old.nomemenu), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMENUPAI = ' || coalesce(quote_literal(old.codigomenupai), 'null') || ', ';
			campos_old  = campos_old || 'ORDEMMENU = ' || coalesce(quote_literal(old.ordemmenu), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'TIPOMENU = ' || coalesce(quote_literal(old.tipomenu), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomenu), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'menu', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('menu', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('menu', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_metavenda()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_metavenda() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO METAVENDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMETAVENDA, DATAINICIALMETAVENDA, DATAFINALMETAVENDA, TIPOMETAVENDA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigometavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinalmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipometavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM METAVENDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALMETAVENDA = ' || coalesce(quote_literal(new.datainicialmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALMETAVENDA = ' || coalesce(quote_literal(new.datafinalmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'TIPOMETAVENDA = ' || coalesce(quote_literal(new.tipometavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigometavenda), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE METAVENDA SET ';
			sql_rolback = 'UPDATE METAVENDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigometavenda &lt;&gt; old.codigometavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');
				campos_new  = campos_new  || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
				campos_old  = campos_old  || ' CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');
				first = false;
			end if;

			if (new.datainicialmetavenda &lt;&gt; old.datainicialmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALMETAVENDA = ' || coalesce(quote_literal(new.datainicialmetavenda), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALMETAVENDA = ' || coalesce(quote_literal(old.datainicialmetavenda), 'null');
				campos_new  = campos_new  || ' DATAINICIALMETAVENDA = ' || coalesce(quote_literal(new.datainicialmetavenda), 'null');
				campos_old  = campos_old  || ' DATAINICIALMETAVENDA = ' || coalesce(quote_literal(old.datainicialmetavenda), 'null');
				first = false;
			end if;

			if (new.datafinalmetavenda &lt;&gt; old.datafinalmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALMETAVENDA = ' || coalesce(quote_literal(new.datafinalmetavenda), 'null');
				sql_rolback = sql_rolback || ' DATAFINALMETAVENDA = ' || coalesce(quote_literal(old.datafinalmetavenda), 'null');
				campos_new  = campos_new  || ' DATAFINALMETAVENDA = ' || coalesce(quote_literal(new.datafinalmetavenda), 'null');
				campos_old  = campos_old  || ' DATAFINALMETAVENDA = ' || coalesce(quote_literal(old.datafinalmetavenda), 'null');
				first = false;
			end if;

			if (new.tipometavenda &lt;&gt; old.tipometavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOMETAVENDA = ' || coalesce(quote_literal(new.tipometavenda), 'null');
				sql_rolback = sql_rolback || ' TIPOMETAVENDA = ' || coalesce(quote_literal(old.tipometavenda), 'null');
				campos_new  = campos_new  || ' TIPOMETAVENDA = ' || coalesce(quote_literal(new.tipometavenda), 'null');
				campos_old  = campos_old  || ' TIPOMETAVENDA = ' || coalesce(quote_literal(old.tipometavenda), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedor &lt;&gt; old.codigoempresavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				first = false;
			end if;

			if (new.codigolojavendedor &lt;&gt; old.codigolojavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				first = false;
			end if;

			if (new.codigovendedor &lt;&gt; old.codigovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(new.codigometavenda), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigometavenda), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO METAVENDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOMETAVENDA, DATAINICIALMETAVENDA, DATAFINALMETAVENDA, TIPOMETAVENDA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigometavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinalmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipometavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM METAVENDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMETAVENDA = ' || coalesce(quote_literal(old.codigometavenda), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALMETAVENDA = ' || coalesce(quote_literal(old.datainicialmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALMETAVENDA = ' || coalesce(quote_literal(old.datafinalmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'TIPOMETAVENDA = ' || coalesce(quote_literal(old.tipometavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigometavenda), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'metavenda', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('metavenda', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('metavenda', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_modeloetiqueta()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_modeloetiqueta() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MODELOETIQUETA (CODIGOMODELOETIQUETA, NOMEMODELOETIQUETA, ARQUIVOMODELOETIQUETA, CODIGOMODELOIMPRESSORAETIQUETA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomodeloetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemodeloetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.arquivomodeloetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MODELOETIQUETA WHERE CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(new.codigomodeloetiqueta), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(new.codigomodeloetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMODELOETIQUETA = ' || coalesce(quote_literal(new.nomemodeloetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'ARQUIVOMODELOETIQUETA = ' || coalesce(quote_literal(new.arquivomodeloetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomodeloetiqueta), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MODELOETIQUETA SET ';
			sql_rolback = 'UPDATE MODELOETIQUETA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomodeloetiqueta &lt;&gt; old.codigomodeloetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(new.codigomodeloetiqueta), 'null');
				sql_rolback = sql_rolback || ' CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(old.codigomodeloetiqueta), 'null');
				campos_new  = campos_new  || ' CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(new.codigomodeloetiqueta), 'null');
				campos_old  = campos_old  || ' CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(old.codigomodeloetiqueta), 'null');
				first = false;
			end if;

			if (new.nomemodeloetiqueta &lt;&gt; old.nomemodeloetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMODELOETIQUETA = ' || coalesce(quote_literal(new.nomemodeloetiqueta), 'null');
				sql_rolback = sql_rolback || ' NOMEMODELOETIQUETA = ' || coalesce(quote_literal(old.nomemodeloetiqueta), 'null');
				campos_new  = campos_new  || ' NOMEMODELOETIQUETA = ' || coalesce(quote_literal(new.nomemodeloetiqueta), 'null');
				campos_old  = campos_old  || ' NOMEMODELOETIQUETA = ' || coalesce(quote_literal(old.nomemodeloetiqueta), 'null');
				first = false;
			end if;

			if (new.arquivomodeloetiqueta &lt;&gt; old.arquivomodeloetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ARQUIVOMODELOETIQUETA = ' || coalesce(quote_literal(new.arquivomodeloetiqueta), 'null');
				sql_rolback = sql_rolback || ' ARQUIVOMODELOETIQUETA = ' || coalesce(quote_literal(old.arquivomodeloetiqueta), 'null');
				campos_new  = campos_new  || ' ARQUIVOMODELOETIQUETA = ' || coalesce(quote_literal(new.arquivomodeloetiqueta), 'null');
				campos_old  = campos_old  || ' ARQUIVOMODELOETIQUETA = ' || coalesce(quote_literal(old.arquivomodeloetiqueta), 'null');
				first = false;
			end if;

			if (new.codigomodeloimpressoraetiqueta &lt;&gt; old.codigomodeloimpressoraetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');
				sql_rolback = sql_rolback || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null');
				campos_new  = campos_new  || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');
				campos_old  = campos_old  || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(new.codigomodeloetiqueta), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(new.codigomodeloetiqueta), 'null');

			sql_chave = coalesce(quote_literal(new.codigomodeloetiqueta), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MODELOETIQUETA (CODIGOMODELOETIQUETA, NOMEMODELOETIQUETA, ARQUIVOMODELOETIQUETA, CODIGOMODELOIMPRESSORAETIQUETA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomodeloetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemodeloetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.arquivomodeloetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MODELOETIQUETA WHERE CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(old.codigomodeloetiqueta), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMODELOETIQUETA = ' || coalesce(quote_literal(old.codigomodeloetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMODELOETIQUETA = ' || coalesce(quote_literal(old.nomemodeloetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'ARQUIVOMODELOETIQUETA = ' || coalesce(quote_literal(old.arquivomodeloetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomodeloetiqueta), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'modeloetiqueta', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('modeloetiqueta', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('modeloetiqueta', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_modeloimpressoraetiqueta()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_modeloimpressoraetiqueta() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MODELOIMPRESSORAETIQUETA (CODIGOMODELOIMPRESSORAETIQUETA, NOMEMODELOIMPRESSORAETIQUETA, CLASSEMODELOIMPRESSORAETIQUETA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemodeloimpressoraetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.classemodeloimpressoraetiqueta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MODELOIMPRESSORAETIQUETA WHERE CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.nomemodeloimpressoraetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'CLASSEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.classemodeloimpressoraetiqueta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MODELOIMPRESSORAETIQUETA SET ';
			sql_rolback = 'UPDATE MODELOIMPRESSORAETIQUETA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomodeloimpressoraetiqueta &lt;&gt; old.codigomodeloimpressoraetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');
				sql_rolback = sql_rolback || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null');
				campos_new  = campos_new  || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');
				campos_old  = campos_old  || ' CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null');
				first = false;
			end if;

			if (new.nomemodeloimpressoraetiqueta &lt;&gt; old.nomemodeloimpressoraetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.nomemodeloimpressoraetiqueta), 'null');
				sql_rolback = sql_rolback || ' NOMEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.nomemodeloimpressoraetiqueta), 'null');
				campos_new  = campos_new  || ' NOMEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.nomemodeloimpressoraetiqueta), 'null');
				campos_old  = campos_old  || ' NOMEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.nomemodeloimpressoraetiqueta), 'null');
				first = false;
			end if;

			if (new.classemodeloimpressoraetiqueta &lt;&gt; old.classemodeloimpressoraetiqueta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CLASSEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.classemodeloimpressoraetiqueta), 'null');
				sql_rolback = sql_rolback || ' CLASSEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.classemodeloimpressoraetiqueta), 'null');
				campos_new  = campos_new  || ' CLASSEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.classemodeloimpressoraetiqueta), 'null');
				campos_old  = campos_old  || ' CLASSEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.classemodeloimpressoraetiqueta), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null');

			sql_chave = coalesce(quote_literal(new.codigomodeloimpressoraetiqueta), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MODELOIMPRESSORAETIQUETA (CODIGOMODELOIMPRESSORAETIQUETA, NOMEMODELOIMPRESSORAETIQUETA, CLASSEMODELOIMPRESSORAETIQUETA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemodeloimpressoraetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.classemodeloimpressoraetiqueta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MODELOIMPRESSORAETIQUETA WHERE CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.nomemodeloimpressoraetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'CLASSEMODELOIMPRESSORAETIQUETA = ' || coalesce(quote_literal(old.classemodeloimpressoraetiqueta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomodeloimpressoraetiqueta), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'modeloimpressoraetiqueta', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('modeloimpressoraetiqueta', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('modeloimpressoraetiqueta', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_motivodesligamento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_motivodesligamento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOTIVODESLIGAMENTO (CODIGOMOTIVODESLIGAMENTO, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOMOTIVODESLIGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaomotivodesligamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MOTIVODESLIGAMENTO WHERE CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.descricaomotivodesligamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomotivodesligamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOTIVODESLIGAMENTO SET ';
			sql_rolback = 'UPDATE MOTIVODESLIGAMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomotivodesligamento &lt;&gt; old.codigomotivodesligamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null');
				campos_new  = campos_new  || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null');
				campos_old  = campos_old  || ' CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.descricaomotivodesligamento &lt;&gt; old.descricaomotivodesligamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.descricaomotivodesligamento), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.descricaomotivodesligamento), 'null');
				campos_new  = campos_new  || ' DESCRICAOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.descricaomotivodesligamento), 'null');
				campos_old  = campos_old  || ' DESCRICAOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.descricaomotivodesligamento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(new.codigomotivodesligamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigomotivodesligamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOTIVODESLIGAMENTO (CODIGOMOTIVODESLIGAMENTO, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOMOTIVODESLIGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotivodesligamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaomotivodesligamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MOTIVODESLIGAMENTO WHERE CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.codigomotivodesligamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOMOTIVODESLIGAMENTO = ' || coalesce(quote_literal(old.descricaomotivodesligamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomotivodesligamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'motivodesligamento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('motivodesligamento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('motivodesligamento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_motivofaltafuncionario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_motivofaltafuncionario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOTIVOFALTAFUNCIONARIO (CODIGOMOTIVOFALTAFUNCIONARIO, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOMOTIVOFALTAFUNCIONARIO, FLAGPARCIALMOTIVOFALTAFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaomotivofaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagparcialmotivofaltafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MOTIVOFALTAFUNCIONARIO WHERE CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.descricaomotivofaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'FLAGPARCIALMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.flagparcialmotivofaltafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOTIVOFALTAFUNCIONARIO SET ';
			sql_rolback = 'UPDATE MOTIVOFALTAFUNCIONARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomotivofaltafuncionario &lt;&gt; old.codigomotivofaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.descricaomotivofaltafuncionario &lt;&gt; old.descricaomotivofaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.descricaomotivofaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.descricaomotivofaltafuncionario), 'null');
				campos_new  = campos_new  || ' DESCRICAOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.descricaomotivofaltafuncionario), 'null');
				campos_old  = campos_old  || ' DESCRICAOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.descricaomotivofaltafuncionario), 'null');
				first = false;
			end if;

			if (new.flagparcialmotivofaltafuncionario &lt;&gt; old.flagparcialmotivofaltafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGPARCIALMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.flagparcialmotivofaltafuncionario), 'null');
				sql_rolback = sql_rolback || ' FLAGPARCIALMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.flagparcialmotivofaltafuncionario), 'null');
				campos_new  = campos_new  || ' FLAGPARCIALMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.flagparcialmotivofaltafuncionario), 'null');
				campos_old  = campos_old  || ' FLAGPARCIALMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.flagparcialmotivofaltafuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigomotivofaltafuncionario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOTIVOFALTAFUNCIONARIO (CODIGOMOTIVOFALTAFUNCIONARIO, CODIGOEMPRESA, CODIGOLOJA, DESCRICAOMOTIVOFALTAFUNCIONARIO, FLAGPARCIALMOTIVOFALTAFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaomotivofaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagparcialmotivofaltafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MOTIVOFALTAFUNCIONARIO WHERE CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.descricaomotivofaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'FLAGPARCIALMOTIVOFALTAFUNCIONARIO = ' || coalesce(quote_literal(old.flagparcialmotivofaltafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomotivofaltafuncionario), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'motivofaltafuncionario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('motivofaltafuncionario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('motivofaltafuncionario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_motorista()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_motorista() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOTORISTA (CODIGOMOTORISTA, NOMEMOTORISTA, VEICULOMOTORISTA, PLACAVEICULOMOTORISTA, ENDERECOMOTORISTA, BAIRROMOTORISTA, FONE1MOTORISTA, FONE2MOTORISTA, CODIGOCIDADE, OBSERVACOESMOTORISTA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESA, CODIGOLOJA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.veiculomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placaveiculomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.enderecomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.bairromotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone1motorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone2motorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesmotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ')';

			sql_rolback = 'DELETE FROM MOTORISTA WHERE CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMOTORISTA = ' || coalesce(quote_literal(new.nomemotorista), 'null') || ', ';
			campos_new   = campos_new || 'VEICULOMOTORISTA = ' || coalesce(quote_literal(new.veiculomotorista), 'null') || ', ';
			campos_new   = campos_new || 'PLACAVEICULOMOTORISTA = ' || coalesce(quote_literal(new.placaveiculomotorista), 'null') || ', ';
			campos_new   = campos_new || 'ENDERECOMOTORISTA = ' || coalesce(quote_literal(new.enderecomotorista), 'null') || ', ';
			campos_new   = campos_new || 'BAIRROMOTORISTA = ' || coalesce(quote_literal(new.bairromotorista), 'null') || ', ';
			campos_new   = campos_new || 'FONE1MOTORISTA = ' || coalesce(quote_literal(new.fone1motorista), 'null') || ', ';
			campos_new   = campos_new || 'FONE2MOTORISTA = ' || coalesce(quote_literal(new.fone2motorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESMOTORISTA = ' || coalesce(quote_literal(new.observacoesmotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomotorista), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOTORISTA SET ';
			sql_rolback = 'UPDATE MOTORISTA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomotorista &lt;&gt; old.codigomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				campos_new  = campos_new  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				campos_old  = campos_old  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				first = false;
			end if;

			if (new.nomemotorista &lt;&gt; old.nomemotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMOTORISTA = ' || coalesce(quote_literal(new.nomemotorista), 'null');
				sql_rolback = sql_rolback || ' NOMEMOTORISTA = ' || coalesce(quote_literal(old.nomemotorista), 'null');
				campos_new  = campos_new  || ' NOMEMOTORISTA = ' || coalesce(quote_literal(new.nomemotorista), 'null');
				campos_old  = campos_old  || ' NOMEMOTORISTA = ' || coalesce(quote_literal(old.nomemotorista), 'null');
				first = false;
			end if;

			if (new.veiculomotorista &lt;&gt; old.veiculomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VEICULOMOTORISTA = ' || coalesce(quote_literal(new.veiculomotorista), 'null');
				sql_rolback = sql_rolback || ' VEICULOMOTORISTA = ' || coalesce(quote_literal(old.veiculomotorista), 'null');
				campos_new  = campos_new  || ' VEICULOMOTORISTA = ' || coalesce(quote_literal(new.veiculomotorista), 'null');
				campos_old  = campos_old  || ' VEICULOMOTORISTA = ' || coalesce(quote_literal(old.veiculomotorista), 'null');
				first = false;
			end if;

			if (new.placaveiculomotorista &lt;&gt; old.placaveiculomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACAVEICULOMOTORISTA = ' || coalesce(quote_literal(new.placaveiculomotorista), 'null');
				sql_rolback = sql_rolback || ' PLACAVEICULOMOTORISTA = ' || coalesce(quote_literal(old.placaveiculomotorista), 'null');
				campos_new  = campos_new  || ' PLACAVEICULOMOTORISTA = ' || coalesce(quote_literal(new.placaveiculomotorista), 'null');
				campos_old  = campos_old  || ' PLACAVEICULOMOTORISTA = ' || coalesce(quote_literal(old.placaveiculomotorista), 'null');
				first = false;
			end if;

			if (new.enderecomotorista &lt;&gt; old.enderecomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ENDERECOMOTORISTA = ' || coalesce(quote_literal(new.enderecomotorista), 'null');
				sql_rolback = sql_rolback || ' ENDERECOMOTORISTA = ' || coalesce(quote_literal(old.enderecomotorista), 'null');
				campos_new  = campos_new  || ' ENDERECOMOTORISTA = ' || coalesce(quote_literal(new.enderecomotorista), 'null');
				campos_old  = campos_old  || ' ENDERECOMOTORISTA = ' || coalesce(quote_literal(old.enderecomotorista), 'null');
				first = false;
			end if;

			if (new.bairromotorista &lt;&gt; old.bairromotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' BAIRROMOTORISTA = ' || coalesce(quote_literal(new.bairromotorista), 'null');
				sql_rolback = sql_rolback || ' BAIRROMOTORISTA = ' || coalesce(quote_literal(old.bairromotorista), 'null');
				campos_new  = campos_new  || ' BAIRROMOTORISTA = ' || coalesce(quote_literal(new.bairromotorista), 'null');
				campos_old  = campos_old  || ' BAIRROMOTORISTA = ' || coalesce(quote_literal(old.bairromotorista), 'null');
				first = false;
			end if;

			if (new.fone1motorista &lt;&gt; old.fone1motorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE1MOTORISTA = ' || coalesce(quote_literal(new.fone1motorista), 'null');
				sql_rolback = sql_rolback || ' FONE1MOTORISTA = ' || coalesce(quote_literal(old.fone1motorista), 'null');
				campos_new  = campos_new  || ' FONE1MOTORISTA = ' || coalesce(quote_literal(new.fone1motorista), 'null');
				campos_old  = campos_old  || ' FONE1MOTORISTA = ' || coalesce(quote_literal(old.fone1motorista), 'null');
				first = false;
			end if;

			if (new.fone2motorista &lt;&gt; old.fone2motorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE2MOTORISTA = ' || coalesce(quote_literal(new.fone2motorista), 'null');
				sql_rolback = sql_rolback || ' FONE2MOTORISTA = ' || coalesce(quote_literal(old.fone2motorista), 'null');
				campos_new  = campos_new  || ' FONE2MOTORISTA = ' || coalesce(quote_literal(new.fone2motorista), 'null');
				campos_old  = campos_old  || ' FONE2MOTORISTA = ' || coalesce(quote_literal(old.fone2motorista), 'null');
				first = false;
			end if;

			if (new.codigocidade &lt;&gt; old.codigocidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
				sql_rolback = sql_rolback || ' CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');
				campos_new  = campos_new  || ' CODIGOCIDADE = ' || coalesce(quote_literal(new.codigocidade), 'null');
				campos_old  = campos_old  || ' CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null');
				first = false;
			end if;

			if (new.observacoesmotorista &lt;&gt; old.observacoesmotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESMOTORISTA = ' || coalesce(quote_literal(new.observacoesmotorista), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESMOTORISTA = ' || coalesce(quote_literal(old.observacoesmotorista), 'null');
				campos_new  = campos_new  || ' OBSERVACOESMOTORISTA = ' || coalesce(quote_literal(new.observacoesmotorista), 'null');
				campos_old  = campos_old  || ' OBSERVACOESMOTORISTA = ' || coalesce(quote_literal(old.observacoesmotorista), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigomotorista), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOTORISTA (CODIGOMOTORISTA, NOMEMOTORISTA, VEICULOMOTORISTA, PLACAVEICULOMOTORISTA, ENDERECOMOTORISTA, BAIRROMOTORISTA, FONE1MOTORISTA, FONE2MOTORISTA, CODIGOCIDADE, OBSERVACOESMOTORISTA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESA, CODIGOLOJA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.veiculomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placaveiculomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.enderecomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.bairromotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone1motorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone2motorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesmotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ')';

			sql_replica = 'DELETE FROM MOTORISTA WHERE CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMOTORISTA = ' || coalesce(quote_literal(old.nomemotorista), 'null') || ', ';
			campos_old  = campos_old || 'VEICULOMOTORISTA = ' || coalesce(quote_literal(old.veiculomotorista), 'null') || ', ';
			campos_old  = campos_old || 'PLACAVEICULOMOTORISTA = ' || coalesce(quote_literal(old.placaveiculomotorista), 'null') || ', ';
			campos_old  = campos_old || 'ENDERECOMOTORISTA = ' || coalesce(quote_literal(old.enderecomotorista), 'null') || ', ';
			campos_old  = campos_old || 'BAIRROMOTORISTA = ' || coalesce(quote_literal(old.bairromotorista), 'null') || ', ';
			campos_old  = campos_old || 'FONE1MOTORISTA = ' || coalesce(quote_literal(old.fone1motorista), 'null') || ', ';
			campos_old  = campos_old || 'FONE2MOTORISTA = ' || coalesce(quote_literal(old.fone2motorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCIDADE = ' || coalesce(quote_literal(old.codigocidade), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESMOTORISTA = ' || coalesce(quote_literal(old.observacoesmotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomotorista), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'motorista', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('motorista', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('motorista', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_movimentacaocaixaloja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_movimentacaocaixaloja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOVIMENTACAOCAIXALOJA (CODIGOEMPRESA, CODIGOLOJA, CODIGOCAIXA, CODIGOABERTURACAIXA, SEQUENCIALMOVIMENTACAOCAIXALOJA, OPERACAOMOVIMENTACAOCAIXALOJA, VALORMOVIMENTACAOCAIXALOJA, DATAMOVIMENTACAOCAIXALOJA, HISTORICOMOVIMENTACAOCAIXALOJA, CODIGOEMPRESAPEDIDO, CODIGOLOJAPEDIDO, CODIGOPEDIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOPDV) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaomovimentacaocaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valormovimentacaocaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datamovimentacaocaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.historicomovimentacaocaixaloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopdv), 'null') || ')';

			sql_rolback = 'DELETE FROM MOVIMENTACAOCAIXALOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ' AND SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'OPERACAOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.operacaomovimentacaocaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'VALORMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.valormovimentacaocaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.datamovimentacaocaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'HISTORICOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.historicomovimentacaocaixaloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPEDIDO = ' || coalesce(quote_literal(new.codigoempresapedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPEDIDO = ' || coalesce(quote_literal(new.codigolojapedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocaixa), 'null')  || ', ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null')  || ', ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOVIMENTACAOCAIXALOJA SET ';
			sql_rolback = 'UPDATE MOVIMENTACAOCAIXALOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocaixa &lt;&gt; old.codigocaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
				sql_rolback = sql_rolback || ' CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');
				campos_new  = campos_new  || ' CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null');
				campos_old  = campos_old  || ' CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null');
				first = false;
			end if;

			if (new.codigoaberturacaixa &lt;&gt; old.codigoaberturacaixa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');
				sql_rolback = sql_rolback || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null');
				campos_new  = campos_new  || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null');
				campos_old  = campos_old  || ' CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null');
				first = false;
			end if;

			if (new.sequencialmovimentacaocaixaloja &lt;&gt; old.sequencialmovimentacaocaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.sequencialmovimentacaocaixaloja), 'null');
				campos_new  = campos_new  || ' SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null');
				campos_old  = campos_old  || ' SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.sequencialmovimentacaocaixaloja), 'null');
				first = false;
			end if;

			if (new.operacaomovimentacaocaixaloja &lt;&gt; old.operacaomovimentacaocaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.operacaomovimentacaocaixaloja), 'null');
				sql_rolback = sql_rolback || ' OPERACAOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.operacaomovimentacaocaixaloja), 'null');
				campos_new  = campos_new  || ' OPERACAOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.operacaomovimentacaocaixaloja), 'null');
				campos_old  = campos_old  || ' OPERACAOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.operacaomovimentacaocaixaloja), 'null');
				first = false;
			end if;

			if (new.valormovimentacaocaixaloja &lt;&gt; old.valormovimentacaocaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.valormovimentacaocaixaloja), 'null');
				sql_rolback = sql_rolback || ' VALORMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.valormovimentacaocaixaloja), 'null');
				campos_new  = campos_new  || ' VALORMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.valormovimentacaocaixaloja), 'null');
				campos_old  = campos_old  || ' VALORMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.valormovimentacaocaixaloja), 'null');
				first = false;
			end if;

			if (new.datamovimentacaocaixaloja &lt;&gt; old.datamovimentacaocaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.datamovimentacaocaixaloja), 'null');
				sql_rolback = sql_rolback || ' DATAMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.datamovimentacaocaixaloja), 'null');
				campos_new  = campos_new  || ' DATAMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.datamovimentacaocaixaloja), 'null');
				campos_old  = campos_old  || ' DATAMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.datamovimentacaocaixaloja), 'null');
				first = false;
			end if;

			if (new.historicomovimentacaocaixaloja &lt;&gt; old.historicomovimentacaocaixaloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' HISTORICOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.historicomovimentacaocaixaloja), 'null');
				sql_rolback = sql_rolback || ' HISTORICOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.historicomovimentacaocaixaloja), 'null');
				campos_new  = campos_new  || ' HISTORICOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.historicomovimentacaocaixaloja), 'null');
				campos_old  = campos_old  || ' HISTORICOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.historicomovimentacaocaixaloja), 'null');
				first = false;
			end if;

			if (new.codigoempresapedido &lt;&gt; old.codigoempresapedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPEDIDO = ' || coalesce(quote_literal(new.codigoempresapedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPEDIDO = ' || coalesce(quote_literal(old.codigoempresapedido), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPEDIDO = ' || coalesce(quote_literal(new.codigoempresapedido), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPEDIDO = ' || coalesce(quote_literal(old.codigoempresapedido), 'null');
				first = false;
			end if;

			if (new.codigolojapedido &lt;&gt; old.codigolojapedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPEDIDO = ' || coalesce(quote_literal(new.codigolojapedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPEDIDO = ' || coalesce(quote_literal(old.codigolojapedido), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPEDIDO = ' || coalesce(quote_literal(new.codigolojapedido), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPEDIDO = ' || coalesce(quote_literal(old.codigolojapedido), 'null');
				first = false;
			end if;

			if (new.codigopedido &lt;&gt; old.codigopedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				campos_new  = campos_new  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				campos_old  = campos_old  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigopdv &lt;&gt; old.codigopdv) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				sql_rolback = sql_rolback || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				campos_new  = campos_new  || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				campos_old  = campos_old  || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ' AND SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(new.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null') || ' AND SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocaixa), 'null')  || ', ' || coalesce(quote_literal(new.codigoaberturacaixa), 'null')  || ', ' || coalesce(quote_literal(new.sequencialmovimentacaocaixaloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOVIMENTACAOCAIXALOJA (CODIGOEMPRESA, CODIGOLOJA, CODIGOCAIXA, CODIGOABERTURACAIXA, SEQUENCIALMOVIMENTACAOCAIXALOJA, OPERACAOMOVIMENTACAOCAIXALOJA, VALORMOVIMENTACAOCAIXALOJA, DATAMOVIMENTACAOCAIXALOJA, HISTORICOMOVIMENTACAOCAIXALOJA, CODIGOEMPRESAPEDIDO, CODIGOLOJAPEDIDO, CODIGOPEDIDO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOPDV) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoaberturacaixa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialmovimentacaocaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaomovimentacaocaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valormovimentacaocaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datamovimentacaocaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.historicomovimentacaocaixaloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopdv), 'null') || ')';

			sql_replica = 'DELETE FROM MOVIMENTACAOCAIXALOJA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null') || ' AND CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null') || ' AND SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.sequencialmovimentacaocaixaloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCAIXA = ' || coalesce(quote_literal(old.codigocaixa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOABERTURACAIXA = ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.sequencialmovimentacaocaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'OPERACAOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.operacaomovimentacaocaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'VALORMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.valormovimentacaocaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.datamovimentacaocaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'HISTORICOMOVIMENTACAOCAIXALOJA = ' || coalesce(quote_literal(old.historicomovimentacaocaixaloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPEDIDO = ' || coalesce(quote_literal(old.codigoempresapedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPEDIDO = ' || coalesce(quote_literal(old.codigolojapedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocaixa), 'null')  || ', ' || coalesce(quote_literal(old.codigoaberturacaixa), 'null')  || ', ' || coalesce(quote_literal(old.sequencialmovimentacaocaixaloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'movimentacaocaixaloja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaocaixaloja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaocaixaloja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_movimentacaocontabancaria()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_movimentacaocontabancaria() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOVIMENTACAOCONTABANCARIA (CODIGOCONTABANCARIA, CODIGOEMPRESA, CODIGOLOJA, SEQUENCIALMOVIMENTACAOCONTABANCARIA, CODIGOPAGAMENTO, CODIGOEMPRESAPAGAMENTO, CODIGOLOJAPAGAMENTO, OPERACAOMOVIMENTACAOCONTABANCARIA, VALORMOVIMENTACAOCONTABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESARECEBIMENTO, CODIGOLOJARECEBIMENTO, CODIGORECEBIMENTO, DESCRICAOMOVIMENTACAOCONTABANCARIA, DATAMOVIMENTACAOCONTABANCARIA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaomovimentacaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valormovimentacaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaomovimentacaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datamovimentacaocontabancaria), 'null') || ')';

			sql_rolback = 'DELETE FROM MOVIMENTACAOCONTABANCARIA WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(new.codigoempresapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(new.codigolojapagamento), 'null') || ', ';
			campos_new   = campos_new || 'OPERACAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.operacaomovimentacaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'VALORMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.valormovimentacaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.descricaomovimentacaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'DATAMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.datamovimentacaocontabancaria), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigocontabancaria), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOVIMENTACAOCONTABANCARIA SET ';
			sql_rolback = 'UPDATE MOVIMENTACAOCONTABANCARIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigocontabancaria &lt;&gt; old.codigocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.sequencialmovimentacaocontabancaria &lt;&gt; old.sequencialmovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigopagamento &lt;&gt; old.codigopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresapagamento &lt;&gt; old.codigoempresapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(new.codigoempresapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(old.codigoempresapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(new.codigoempresapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(old.codigoempresapagamento), 'null');
				first = false;
			end if;

			if (new.codigolojapagamento &lt;&gt; old.codigolojapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(new.codigolojapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(old.codigolojapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(new.codigolojapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(old.codigolojapagamento), 'null');
				first = false;
			end if;

			if (new.operacaomovimentacaocontabancaria &lt;&gt; old.operacaomovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.operacaomovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' OPERACAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.operacaomovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' OPERACAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.operacaomovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' OPERACAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.operacaomovimentacaocontabancaria), 'null');
				first = false;
			end if;

			if (new.valormovimentacaocontabancaria &lt;&gt; old.valormovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.valormovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' VALORMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.valormovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' VALORMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.valormovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' VALORMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.valormovimentacaocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresarecebimento &lt;&gt; old.codigoempresarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null');
				first = false;
			end if;

			if (new.codigolojarecebimento &lt;&gt; old.codigolojarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null');
				first = false;
			end if;

			if (new.codigorecebimento &lt;&gt; old.codigorecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				campos_new  = campos_new  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				campos_old  = campos_old  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				first = false;
			end if;

			if (new.descricaomovimentacaocontabancaria &lt;&gt; old.descricaomovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.descricaomovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.descricaomovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' DESCRICAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.descricaomovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' DESCRICAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.descricaomovimentacaocontabancaria), 'null');
				first = false;
			end if;

			if (new.datamovimentacaocontabancaria &lt;&gt; old.datamovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.datamovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' DATAMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.datamovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' DATAMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.datamovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' DATAMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.datamovimentacaocontabancaria), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');

			sql_chave = coalesce(quote_literal(new.codigocontabancaria), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOVIMENTACAOCONTABANCARIA (CODIGOCONTABANCARIA, CODIGOEMPRESA, CODIGOLOJA, SEQUENCIALMOVIMENTACAOCONTABANCARIA, CODIGOPAGAMENTO, CODIGOEMPRESAPAGAMENTO, CODIGOLOJAPAGAMENTO, OPERACAOMOVIMENTACAOCONTABANCARIA, VALORMOVIMENTACAOCONTABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESARECEBIMENTO, CODIGOLOJARECEBIMENTO, CODIGORECEBIMENTO, DESCRICAOMOVIMENTACAOCONTABANCARIA, DATAMOVIMENTACAOCONTABANCARIA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaomovimentacaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valormovimentacaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaomovimentacaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datamovimentacaocontabancaria), 'null') || ')';

			sql_replica = 'DELETE FROM MOVIMENTACAOCONTABANCARIA WHERE CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPAGAMENTO = ' || coalesce(quote_literal(old.codigoempresapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPAGAMENTO = ' || coalesce(quote_literal(old.codigolojapagamento), 'null') || ', ';
			campos_old  = campos_old || 'OPERACAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.operacaomovimentacaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'VALORMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.valormovimentacaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.descricaomovimentacaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'DATAMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.datamovimentacaocontabancaria), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigocontabancaria), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'movimentacaocontabancaria', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaocontabancaria', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaocontabancaria', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_movimentacaoestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_movimentacaoestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOVIMENTACAOESTOQUE (CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, DATAHORAMOVIMENTACAOESTOQUE, OPERACAOMOVIMENTACAOESTOQUE, QUANTIDADEFISICOMOVIMENTACAOESTOQUE, QUANTIDADEFISCALMOVIMENTACAOESTOQUE, QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE, QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE, PRECOMEDIOMOVIMENTACAOESTOQUE, PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE, OBSERVACAOMOVIMENTACAOESTOQUE, DOCUMENTOMOVIMENTACAOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoramovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadefisicomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadefiscalmovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadefisicoanteriormovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadefiscalanteriormovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.precomediomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.precomedioanteriormovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.documentomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MOVIMENTACAOESTOQUE WHERE CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.datahoramovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'OPERACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.operacaomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEFISICOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefisicomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEFISCALMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefiscalmovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefisicoanteriormovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefiscalanteriormovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'PRECOMEDIOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.precomediomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.precomedioanteriormovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.observacaomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'DOCUMENTOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.documentomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigomovimentacaoestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOVIMENTACAOESTOQUE SET ';
			sql_rolback = 'UPDATE MOVIMENTACAOESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.datahoramovimentacaoestoque &lt;&gt; old.datahoramovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.datahoramovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.datahoramovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.datahoramovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.datahoramovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.operacaomovimentacaoestoque &lt;&gt; old.operacaomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.operacaomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' OPERACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.operacaomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' OPERACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.operacaomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' OPERACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.operacaomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.quantidadefisicomovimentacaoestoque &lt;&gt; old.quantidadefisicomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEFISICOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefisicomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEFISICOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefisicomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEFISICOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefisicomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEFISICOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefisicomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.quantidadefiscalmovimentacaoestoque &lt;&gt; old.quantidadefiscalmovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEFISCALMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefiscalmovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEFISCALMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefiscalmovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEFISCALMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefiscalmovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEFISCALMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefiscalmovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.quantidadefisicoanteriormovimentacaoestoque &lt;&gt; old.quantidadefisicoanteriormovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefisicoanteriormovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefisicoanteriormovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefisicoanteriormovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefisicoanteriormovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.quantidadefiscalanteriormovimentacaoestoque &lt;&gt; old.quantidadefiscalanteriormovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefiscalanteriormovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefiscalanteriormovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.quantidadefiscalanteriormovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefiscalanteriormovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.precomediomovimentacaoestoque &lt;&gt; old.precomediomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRECOMEDIOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.precomediomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' PRECOMEDIOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.precomediomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' PRECOMEDIOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.precomediomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' PRECOMEDIOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.precomediomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.precomedioanteriormovimentacaoestoque &lt;&gt; old.precomedioanteriormovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.precomedioanteriormovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.precomedioanteriormovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.precomedioanteriormovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.precomedioanteriormovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.observacaomovimentacaoestoque &lt;&gt; old.observacaomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.observacaomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.observacaomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' OBSERVACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.observacaomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' OBSERVACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.observacaomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.documentomovimentacaoestoque &lt;&gt; old.documentomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DOCUMENTOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.documentomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' DOCUMENTOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.documentomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' DOCUMENTOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.documentomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' DOCUMENTOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.documentomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigomovimentacaoestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOVIMENTACAOESTOQUE (CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, DATAHORAMOVIMENTACAOESTOQUE, OPERACAOMOVIMENTACAOESTOQUE, QUANTIDADEFISICOMOVIMENTACAOESTOQUE, QUANTIDADEFISCALMOVIMENTACAOESTOQUE, QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE, QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE, PRECOMEDIOMOVIMENTACAOESTOQUE, PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE, OBSERVACAOMOVIMENTACAOESTOQUE, DOCUMENTOMOVIMENTACAOESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoramovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadefisicomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadefiscalmovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadefisicoanteriormovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadefiscalanteriormovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.precomediomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.precomedioanteriormovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.documentomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MOVIMENTACAOESTOQUE WHERE CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.datahoramovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'OPERACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.operacaomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEFISICOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefisicomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEFISCALMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefiscalmovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEFISICOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefisicoanteriormovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEFISCALANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.quantidadefiscalanteriormovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'PRECOMEDIOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.precomediomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'PRECOMEDIOANTERIORMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.precomedioanteriormovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.observacaomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'DOCUMENTOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.documentomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigomovimentacaoestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'movimentacaoestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaoestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaoestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_movimentacaoitemromaneioabate()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_movimentacaoitemromaneioabate() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO MOVIMENTACAOITEMROMANEIOABATE (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESASUBPRODUTO, CODIGOLOJASUBPRODUTO, CODIGOSUBPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosubproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM MOVIMENTACAOITEMROMANEIOABATE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ' AND CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigosubproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE MOVIMENTACAOITEMROMANEIOABATE SET ';
			sql_rolback = 'UPDATE MOVIMENTACAOITEMROMANEIOABATE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoitemromaneio &lt;&gt; old.codigoitemromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaestoque &lt;&gt; old.codigoempresaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaestoque &lt;&gt; old.codigolojaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null');
				first = false;
			end if;

			if (new.codigomovimentacaoestoque &lt;&gt; old.codigomovimentacaoestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				campos_new  = campos_new  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null');
				campos_old  = campos_old  || ' CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresasubproduto &lt;&gt; old.codigoempresasubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null');
				first = false;
			end if;

			if (new.codigolojasubproduto &lt;&gt; old.codigolojasubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null');
				first = false;
			end if;

			if (new.codigosubproduto &lt;&gt; old.codigosubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null');
				campos_new  = campos_new  || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
				campos_old  = campos_old  || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ' AND CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(new.codigoitemromaneio), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(new.codigolojaestoque), 'null') || ' AND CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoitemromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigomovimentacaoestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigosubproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO MOVIMENTACAOITEMROMANEIOABATE (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOITEMROMANEIO, CODIGOEMPRESAESTOQUE, CODIGOLOJAESTOQUE, CODIGOMOVIMENTACAOESTOQUE, CODIGOEMPRESASUBPRODUTO, CODIGOLOJASUBPRODUTO, CODIGOSUBPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresasubproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojasubproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosubproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM MOVIMENTACAOITEMROMANEIOABATE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ' AND CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ' AND CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ' AND CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOITEMROMANEIO = ' || coalesce(quote_literal(old.codigoitemromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESTOQUE = ' || coalesce(quote_literal(old.codigolojaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOVIMENTACAOESTOQUE = ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoitemromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigomovimentacaoestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigolojasubproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigosubproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'movimentacaoitemromaneioabate', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaoitemromaneioabate', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('movimentacaoitemromaneioabate', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_nfeletronica()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_nfeletronica() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO NFELETRONICA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFE, STATUSNFE, CHAVENFE, PROTOCOLONFE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusnfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.chavenfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.protocolonfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM NFELETRONICA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null') || ', ';
			campos_new   = campos_new || 'STATUSNFE = ' || coalesce(quote_literal(new.statusnfe), 'null') || ', ';
			campos_new   = campos_new || 'CHAVENFE = ' || coalesce(quote_literal(new.chavenfe), 'null') || ', ';
			campos_new   = campos_new || 'PROTOCOLONFE = ' || coalesce(quote_literal(new.protocolonfe), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfe), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE NFELETRONICA SET ';
			sql_rolback = 'UPDATE NFELETRONICA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfe &lt;&gt; old.codigonfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');
				sql_rolback = sql_rolback || ' CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null');
				campos_new  = campos_new  || ' CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');
				campos_old  = campos_old  || ' CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null');
				first = false;
			end if;

			if (new.statusnfe &lt;&gt; old.statusnfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSNFE = ' || coalesce(quote_literal(new.statusnfe), 'null');
				sql_rolback = sql_rolback || ' STATUSNFE = ' || coalesce(quote_literal(old.statusnfe), 'null');
				campos_new  = campos_new  || ' STATUSNFE = ' || coalesce(quote_literal(new.statusnfe), 'null');
				campos_old  = campos_old  || ' STATUSNFE = ' || coalesce(quote_literal(old.statusnfe), 'null');
				first = false;
			end if;

			if (new.chavenfe &lt;&gt; old.chavenfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CHAVENFE = ' || coalesce(quote_literal(new.chavenfe), 'null');
				sql_rolback = sql_rolback || ' CHAVENFE = ' || coalesce(quote_literal(old.chavenfe), 'null');
				campos_new  = campos_new  || ' CHAVENFE = ' || coalesce(quote_literal(new.chavenfe), 'null');
				campos_old  = campos_old  || ' CHAVENFE = ' || coalesce(quote_literal(old.chavenfe), 'null');
				first = false;
			end if;

			if (new.protocolonfe &lt;&gt; old.protocolonfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PROTOCOLONFE = ' || coalesce(quote_literal(new.protocolonfe), 'null');
				sql_rolback = sql_rolback || ' PROTOCOLONFE = ' || coalesce(quote_literal(old.protocolonfe), 'null');
				campos_new  = campos_new  || ' PROTOCOLONFE = ' || coalesce(quote_literal(new.protocolonfe), 'null');
				campos_old  = campos_old  || ' PROTOCOLONFE = ' || coalesce(quote_literal(old.protocolonfe), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfe), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO NFELETRONICA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFE, STATUSNFE, CHAVENFE, PROTOCOLONFE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusnfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.chavenfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.protocolonfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM NFELETRONICA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null') || ', ';
			campos_old  = campos_old || 'STATUSNFE = ' || coalesce(quote_literal(old.statusnfe), 'null') || ', ';
			campos_old  = campos_old || 'CHAVENFE = ' || coalesce(quote_literal(old.chavenfe), 'null') || ', ';
			campos_old  = campos_old || 'PROTOCOLONFE = ' || coalesce(quote_literal(old.protocolonfe), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfe), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'nfeletronica', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfeletronica', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfeletronica', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_nfentrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_nfentrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO NFENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, FORMAPAGAMENTONFENTRADA, OPERACAOTRIBUTACAO, CHAVENFEENTRADA, MODELONFENTRADA, DATAEMISSAONFENTRADA, DATAHORAENTRADANFENTRADA, MODALIDADEFRETENFENTRADA, CODIGOEMPRESATRANSPORTADORANFENTRADA, CODIGOLOJATRANSPORTADORANFENTRADA, CODIGOPESSOATRANSPORTADORANFENTRADA, CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA, QUANTIDADEVOLUMESTRANSPORTENFENTRADA, ESPECIEVOLUMETRANSPORTENFENTRADA, PESOBRUTOTRANSPORTENFENTRADA, PESOLIQUITOTRANSPORTENFENTRADA, PLACAVEICULOTRANSPORTENFENTRADA, UFPLACAVEICULOTRANSPORTENFENTRADA, INSCRICAOESTADUALSTNFENTRADA, MARCAVOLUMETRANSPORTENFENTRADA, NUMERACAOVOLUMESTRANSPORTENFENTRADA, VALORBASECALCULOICMSNFENTRADA, VALORICMSNFENTRADA, VALORBASECALCULOICMSSTNFENTRADA, VALORICMSSTNFENTRADA, VALORTOTALPRODUTOSNFENTRADA, VALORFRETENFENTRADA, VALORSEGURONFENTRADA, VALORTOTALDESCONTONFENTRADA, VALORTOTALIPINFENTRADA, VALORTOTALPISNFENTRADA, VALORTOTALCOFINSNFENTRADA, VALOROUTRASDESPESASNFENTRADA, VALORTOTALNFENTRADA, STATUSNFENTRADA, OBSERVACAONFENTRADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.formapagamentonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.chavenfeentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.modelonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraentradanfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.modalidadefretenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresatransportadoranfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojatransportadoranfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoatransportadoranfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadevolumestransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.especievolumetransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesobrutotransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesoliquitotransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placaveiculotransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ufplacaveiculotransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.inscricaoestadualstnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.marcavolumetransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeracaovolumestransportenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorbasecalculoicmsnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorbasecalculoicmsstnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsstnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalprodutosnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfretenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorseguronfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotaldescontonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalipinfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalpisnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalcofinsnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoroutrasdespesasnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusnfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM NFENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'FORMAPAGAMENTONFENTRADA = ' || coalesce(quote_literal(new.formapagamentonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			campos_new   = campos_new || 'CHAVENFEENTRADA = ' || coalesce(quote_literal(new.chavenfeentrada), 'null') || ', ';
			campos_new   = campos_new || 'MODELONFENTRADA = ' || coalesce(quote_literal(new.modelonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAONFENTRADA = ' || coalesce(quote_literal(new.dataemissaonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAENTRADANFENTRADA = ' || coalesce(quote_literal(new.datahoraentradanfentrada), 'null') || ', ';
			campos_new   = campos_new || 'MODALIDADEFRETENFENTRADA = ' || coalesce(quote_literal(new.modalidadefretenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigoempresatransportadoranfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigolojatransportadoranfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigopessoatransportadoranfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfentrada), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.quantidadevolumestransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'ESPECIEVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.especievolumetransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PESOBRUTOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.pesobrutotransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PESOLIQUITOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.pesoliquitotransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'PLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.placaveiculotransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'UFPLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.ufplacaveiculotransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'INSCRICAOESTADUALSTNFENTRADA = ' || coalesce(quote_literal(new.inscricaoestadualstnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'MARCAVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.marcavolumetransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'NUMERACAOVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.numeracaovolumestransportenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORBASECALCULOICMSNFENTRADA = ' || coalesce(quote_literal(new.valorbasecalculoicmsnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSNFENTRADA = ' || coalesce(quote_literal(new.valoricmsnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORBASECALCULOICMSSTNFENTRADA = ' || coalesce(quote_literal(new.valorbasecalculoicmsstnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSSTNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALPRODUTOSNFENTRADA = ' || coalesce(quote_literal(new.valortotalprodutosnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORFRETENFENTRADA = ' || coalesce(quote_literal(new.valorfretenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORSEGURONFENTRADA = ' || coalesce(quote_literal(new.valorseguronfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALDESCONTONFENTRADA = ' || coalesce(quote_literal(new.valortotaldescontonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALIPINFENTRADA = ' || coalesce(quote_literal(new.valortotalipinfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALPISNFENTRADA = ' || coalesce(quote_literal(new.valortotalpisnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALCOFINSNFENTRADA = ' || coalesce(quote_literal(new.valortotalcofinsnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALOROUTRASDESPESASNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALNFENTRADA = ' || coalesce(quote_literal(new.valortotalnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'STATUSNFENTRADA = ' || coalesce(quote_literal(new.statusnfentrada), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAONFENTRADA = ' || coalesce(quote_literal(new.observacaonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE NFENTRADA SET ';
			sql_rolback = 'UPDATE NFENTRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfentrada &lt;&gt; old.codigonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				campos_new  = campos_new  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				campos_old  = campos_old  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				first = false;
			end if;

			if (new.serienfentrada &lt;&gt; old.serienfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				sql_rolback = sql_rolback || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				campos_new  = campos_new  || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				campos_old  = campos_old  || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitentenfentrada &lt;&gt; old.codigoempresaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigolojaemitentenfentrada &lt;&gt; old.codigolojaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitentenfentrada &lt;&gt; old.codigopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitentenfentrada &lt;&gt; old.codigoenderecopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.formapagamentonfentrada &lt;&gt; old.formapagamentonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FORMAPAGAMENTONFENTRADA = ' || coalesce(quote_literal(new.formapagamentonfentrada), 'null');
				sql_rolback = sql_rolback || ' FORMAPAGAMENTONFENTRADA = ' || coalesce(quote_literal(old.formapagamentonfentrada), 'null');
				campos_new  = campos_new  || ' FORMAPAGAMENTONFENTRADA = ' || coalesce(quote_literal(new.formapagamentonfentrada), 'null');
				campos_old  = campos_old  || ' FORMAPAGAMENTONFENTRADA = ' || coalesce(quote_literal(old.formapagamentonfentrada), 'null');
				first = false;
			end if;

			if (new.operacaotributacao &lt;&gt; old.operacaotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				sql_rolback = sql_rolback || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				campos_new  = campos_new  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				campos_old  = campos_old  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				first = false;
			end if;

			if (new.chavenfeentrada &lt;&gt; old.chavenfeentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CHAVENFEENTRADA = ' || coalesce(quote_literal(new.chavenfeentrada), 'null');
				sql_rolback = sql_rolback || ' CHAVENFEENTRADA = ' || coalesce(quote_literal(old.chavenfeentrada), 'null');
				campos_new  = campos_new  || ' CHAVENFEENTRADA = ' || coalesce(quote_literal(new.chavenfeentrada), 'null');
				campos_old  = campos_old  || ' CHAVENFEENTRADA = ' || coalesce(quote_literal(old.chavenfeentrada), 'null');
				first = false;
			end if;

			if (new.modelonfentrada &lt;&gt; old.modelonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MODELONFENTRADA = ' || coalesce(quote_literal(new.modelonfentrada), 'null');
				sql_rolback = sql_rolback || ' MODELONFENTRADA = ' || coalesce(quote_literal(old.modelonfentrada), 'null');
				campos_new  = campos_new  || ' MODELONFENTRADA = ' || coalesce(quote_literal(new.modelonfentrada), 'null');
				campos_old  = campos_old  || ' MODELONFENTRADA = ' || coalesce(quote_literal(old.modelonfentrada), 'null');
				first = false;
			end if;

			if (new.dataemissaonfentrada &lt;&gt; old.dataemissaonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAONFENTRADA = ' || coalesce(quote_literal(new.dataemissaonfentrada), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAONFENTRADA = ' || coalesce(quote_literal(old.dataemissaonfentrada), 'null');
				campos_new  = campos_new  || ' DATAEMISSAONFENTRADA = ' || coalesce(quote_literal(new.dataemissaonfentrada), 'null');
				campos_old  = campos_old  || ' DATAEMISSAONFENTRADA = ' || coalesce(quote_literal(old.dataemissaonfentrada), 'null');
				first = false;
			end if;

			if (new.datahoraentradanfentrada &lt;&gt; old.datahoraentradanfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAENTRADANFENTRADA = ' || coalesce(quote_literal(new.datahoraentradanfentrada), 'null');
				sql_rolback = sql_rolback || ' DATAHORAENTRADANFENTRADA = ' || coalesce(quote_literal(old.datahoraentradanfentrada), 'null');
				campos_new  = campos_new  || ' DATAHORAENTRADANFENTRADA = ' || coalesce(quote_literal(new.datahoraentradanfentrada), 'null');
				campos_old  = campos_old  || ' DATAHORAENTRADANFENTRADA = ' || coalesce(quote_literal(old.datahoraentradanfentrada), 'null');
				first = false;
			end if;

			if (new.modalidadefretenfentrada &lt;&gt; old.modalidadefretenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MODALIDADEFRETENFENTRADA = ' || coalesce(quote_literal(new.modalidadefretenfentrada), 'null');
				sql_rolback = sql_rolback || ' MODALIDADEFRETENFENTRADA = ' || coalesce(quote_literal(old.modalidadefretenfentrada), 'null');
				campos_new  = campos_new  || ' MODALIDADEFRETENFENTRADA = ' || coalesce(quote_literal(new.modalidadefretenfentrada), 'null');
				campos_old  = campos_old  || ' MODALIDADEFRETENFENTRADA = ' || coalesce(quote_literal(old.modalidadefretenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresatransportadoranfentrada &lt;&gt; old.codigoempresatransportadoranfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigoempresatransportadoranfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigoempresatransportadoranfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigoempresatransportadoranfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigoempresatransportadoranfentrada), 'null');
				first = false;
			end if;

			if (new.codigolojatransportadoranfentrada &lt;&gt; old.codigolojatransportadoranfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigolojatransportadoranfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigolojatransportadoranfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigolojatransportadoranfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigolojatransportadoranfentrada), 'null');
				first = false;
			end if;

			if (new.codigopessoatransportadoranfentrada &lt;&gt; old.codigopessoatransportadoranfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigopessoatransportadoranfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigopessoatransportadoranfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigopessoatransportadoranfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigopessoatransportadoranfentrada), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoatransportadoranfentrada &lt;&gt; old.codigoenderecopessoatransportadoranfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfentrada), 'null');
				first = false;
			end if;

			if (new.quantidadevolumestransportenfentrada &lt;&gt; old.quantidadevolumestransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.quantidadevolumestransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.quantidadevolumestransportenfentrada), 'null');
				campos_new  = campos_new  || ' QUANTIDADEVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.quantidadevolumestransportenfentrada), 'null');
				campos_old  = campos_old  || ' QUANTIDADEVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.quantidadevolumestransportenfentrada), 'null');
				first = false;
			end if;

			if (new.especievolumetransportenfentrada &lt;&gt; old.especievolumetransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ESPECIEVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.especievolumetransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' ESPECIEVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.especievolumetransportenfentrada), 'null');
				campos_new  = campos_new  || ' ESPECIEVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.especievolumetransportenfentrada), 'null');
				campos_old  = campos_old  || ' ESPECIEVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.especievolumetransportenfentrada), 'null');
				first = false;
			end if;

			if (new.pesobrutotransportenfentrada &lt;&gt; old.pesobrutotransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOBRUTOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.pesobrutotransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' PESOBRUTOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.pesobrutotransportenfentrada), 'null');
				campos_new  = campos_new  || ' PESOBRUTOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.pesobrutotransportenfentrada), 'null');
				campos_old  = campos_old  || ' PESOBRUTOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.pesobrutotransportenfentrada), 'null');
				first = false;
			end if;

			if (new.pesoliquitotransportenfentrada &lt;&gt; old.pesoliquitotransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOLIQUITOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.pesoliquitotransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' PESOLIQUITOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.pesoliquitotransportenfentrada), 'null');
				campos_new  = campos_new  || ' PESOLIQUITOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.pesoliquitotransportenfentrada), 'null');
				campos_old  = campos_old  || ' PESOLIQUITOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.pesoliquitotransportenfentrada), 'null');
				first = false;
			end if;

			if (new.placaveiculotransportenfentrada &lt;&gt; old.placaveiculotransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.placaveiculotransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' PLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.placaveiculotransportenfentrada), 'null');
				campos_new  = campos_new  || ' PLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.placaveiculotransportenfentrada), 'null');
				campos_old  = campos_old  || ' PLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.placaveiculotransportenfentrada), 'null');
				first = false;
			end if;

			if (new.ufplacaveiculotransportenfentrada &lt;&gt; old.ufplacaveiculotransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFPLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.ufplacaveiculotransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' UFPLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.ufplacaveiculotransportenfentrada), 'null');
				campos_new  = campos_new  || ' UFPLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.ufplacaveiculotransportenfentrada), 'null');
				campos_old  = campos_old  || ' UFPLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.ufplacaveiculotransportenfentrada), 'null');
				first = false;
			end if;

			if (new.inscricaoestadualstnfentrada &lt;&gt; old.inscricaoestadualstnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INSCRICAOESTADUALSTNFENTRADA = ' || coalesce(quote_literal(new.inscricaoestadualstnfentrada), 'null');
				sql_rolback = sql_rolback || ' INSCRICAOESTADUALSTNFENTRADA = ' || coalesce(quote_literal(old.inscricaoestadualstnfentrada), 'null');
				campos_new  = campos_new  || ' INSCRICAOESTADUALSTNFENTRADA = ' || coalesce(quote_literal(new.inscricaoestadualstnfentrada), 'null');
				campos_old  = campos_old  || ' INSCRICAOESTADUALSTNFENTRADA = ' || coalesce(quote_literal(old.inscricaoestadualstnfentrada), 'null');
				first = false;
			end if;

			if (new.marcavolumetransportenfentrada &lt;&gt; old.marcavolumetransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MARCAVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.marcavolumetransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' MARCAVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.marcavolumetransportenfentrada), 'null');
				campos_new  = campos_new  || ' MARCAVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.marcavolumetransportenfentrada), 'null');
				campos_old  = campos_old  || ' MARCAVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.marcavolumetransportenfentrada), 'null');
				first = false;
			end if;

			if (new.numeracaovolumestransportenfentrada &lt;&gt; old.numeracaovolumestransportenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMERACAOVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.numeracaovolumestransportenfentrada), 'null');
				sql_rolback = sql_rolback || ' NUMERACAOVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.numeracaovolumestransportenfentrada), 'null');
				campos_new  = campos_new  || ' NUMERACAOVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(new.numeracaovolumestransportenfentrada), 'null');
				campos_old  = campos_old  || ' NUMERACAOVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.numeracaovolumestransportenfentrada), 'null');
				first = false;
			end if;

			if (new.valorbasecalculoicmsnfentrada &lt;&gt; old.valorbasecalculoicmsnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORBASECALCULOICMSNFENTRADA = ' || coalesce(quote_literal(new.valorbasecalculoicmsnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORBASECALCULOICMSNFENTRADA = ' || coalesce(quote_literal(old.valorbasecalculoicmsnfentrada), 'null');
				campos_new  = campos_new  || ' VALORBASECALCULOICMSNFENTRADA = ' || coalesce(quote_literal(new.valorbasecalculoicmsnfentrada), 'null');
				campos_old  = campos_old  || ' VALORBASECALCULOICMSNFENTRADA = ' || coalesce(quote_literal(old.valorbasecalculoicmsnfentrada), 'null');
				first = false;
			end if;

			if (new.valoricmsnfentrada &lt;&gt; old.valoricmsnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSNFENTRADA = ' || coalesce(quote_literal(new.valoricmsnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORICMSNFENTRADA = ' || coalesce(quote_literal(old.valoricmsnfentrada), 'null');
				campos_new  = campos_new  || ' VALORICMSNFENTRADA = ' || coalesce(quote_literal(new.valoricmsnfentrada), 'null');
				campos_old  = campos_old  || ' VALORICMSNFENTRADA = ' || coalesce(quote_literal(old.valoricmsnfentrada), 'null');
				first = false;
			end if;

			if (new.valorbasecalculoicmsstnfentrada &lt;&gt; old.valorbasecalculoicmsstnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORBASECALCULOICMSSTNFENTRADA = ' || coalesce(quote_literal(new.valorbasecalculoicmsstnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORBASECALCULOICMSSTNFENTRADA = ' || coalesce(quote_literal(old.valorbasecalculoicmsstnfentrada), 'null');
				campos_new  = campos_new  || ' VALORBASECALCULOICMSSTNFENTRADA = ' || coalesce(quote_literal(new.valorbasecalculoicmsstnfentrada), 'null');
				campos_old  = campos_old  || ' VALORBASECALCULOICMSSTNFENTRADA = ' || coalesce(quote_literal(old.valorbasecalculoicmsstnfentrada), 'null');
				first = false;
			end if;

			if (new.valoricmsstnfentrada &lt;&gt; old.valoricmsstnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSSTNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORICMSSTNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstnfentrada), 'null');
				campos_new  = campos_new  || ' VALORICMSSTNFENTRADA = ' || coalesce(quote_literal(new.valoricmsstnfentrada), 'null');
				campos_old  = campos_old  || ' VALORICMSSTNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalprodutosnfentrada &lt;&gt; old.valortotalprodutosnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALPRODUTOSNFENTRADA = ' || coalesce(quote_literal(new.valortotalprodutosnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALPRODUTOSNFENTRADA = ' || coalesce(quote_literal(old.valortotalprodutosnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALPRODUTOSNFENTRADA = ' || coalesce(quote_literal(new.valortotalprodutosnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALPRODUTOSNFENTRADA = ' || coalesce(quote_literal(old.valortotalprodutosnfentrada), 'null');
				first = false;
			end if;

			if (new.valorfretenfentrada &lt;&gt; old.valorfretenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFRETENFENTRADA = ' || coalesce(quote_literal(new.valorfretenfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORFRETENFENTRADA = ' || coalesce(quote_literal(old.valorfretenfentrada), 'null');
				campos_new  = campos_new  || ' VALORFRETENFENTRADA = ' || coalesce(quote_literal(new.valorfretenfentrada), 'null');
				campos_old  = campos_old  || ' VALORFRETENFENTRADA = ' || coalesce(quote_literal(old.valorfretenfentrada), 'null');
				first = false;
			end if;

			if (new.valorseguronfentrada &lt;&gt; old.valorseguronfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSEGURONFENTRADA = ' || coalesce(quote_literal(new.valorseguronfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORSEGURONFENTRADA = ' || coalesce(quote_literal(old.valorseguronfentrada), 'null');
				campos_new  = campos_new  || ' VALORSEGURONFENTRADA = ' || coalesce(quote_literal(new.valorseguronfentrada), 'null');
				campos_old  = campos_old  || ' VALORSEGURONFENTRADA = ' || coalesce(quote_literal(old.valorseguronfentrada), 'null');
				first = false;
			end if;

			if (new.valortotaldescontonfentrada &lt;&gt; old.valortotaldescontonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALDESCONTONFENTRADA = ' || coalesce(quote_literal(new.valortotaldescontonfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALDESCONTONFENTRADA = ' || coalesce(quote_literal(old.valortotaldescontonfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALDESCONTONFENTRADA = ' || coalesce(quote_literal(new.valortotaldescontonfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALDESCONTONFENTRADA = ' || coalesce(quote_literal(old.valortotaldescontonfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalipinfentrada &lt;&gt; old.valortotalipinfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALIPINFENTRADA = ' || coalesce(quote_literal(new.valortotalipinfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALIPINFENTRADA = ' || coalesce(quote_literal(old.valortotalipinfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALIPINFENTRADA = ' || coalesce(quote_literal(new.valortotalipinfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALIPINFENTRADA = ' || coalesce(quote_literal(old.valortotalipinfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalpisnfentrada &lt;&gt; old.valortotalpisnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALPISNFENTRADA = ' || coalesce(quote_literal(new.valortotalpisnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALPISNFENTRADA = ' || coalesce(quote_literal(old.valortotalpisnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALPISNFENTRADA = ' || coalesce(quote_literal(new.valortotalpisnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALPISNFENTRADA = ' || coalesce(quote_literal(old.valortotalpisnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalcofinsnfentrada &lt;&gt; old.valortotalcofinsnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALCOFINSNFENTRADA = ' || coalesce(quote_literal(new.valortotalcofinsnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALCOFINSNFENTRADA = ' || coalesce(quote_literal(old.valortotalcofinsnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALCOFINSNFENTRADA = ' || coalesce(quote_literal(new.valortotalcofinsnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALCOFINSNFENTRADA = ' || coalesce(quote_literal(old.valortotalcofinsnfentrada), 'null');
				first = false;
			end if;

			if (new.valoroutrasdespesasnfentrada &lt;&gt; old.valoroutrasdespesasnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALOROUTRASDESPESASNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALOROUTRASDESPESASNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasnfentrada), 'null');
				campos_new  = campos_new  || ' VALOROUTRASDESPESASNFENTRADA = ' || coalesce(quote_literal(new.valoroutrasdespesasnfentrada), 'null');
				campos_old  = campos_old  || ' VALOROUTRASDESPESASNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasnfentrada), 'null');
				first = false;
			end if;

			if (new.valortotalnfentrada &lt;&gt; old.valortotalnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALNFENTRADA = ' || coalesce(quote_literal(new.valortotalnfentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALNFENTRADA = ' || coalesce(quote_literal(old.valortotalnfentrada), 'null');
				campos_new  = campos_new  || ' VALORTOTALNFENTRADA = ' || coalesce(quote_literal(new.valortotalnfentrada), 'null');
				campos_old  = campos_old  || ' VALORTOTALNFENTRADA = ' || coalesce(quote_literal(old.valortotalnfentrada), 'null');
				first = false;
			end if;

			if (new.statusnfentrada &lt;&gt; old.statusnfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSNFENTRADA = ' || coalesce(quote_literal(new.statusnfentrada), 'null');
				sql_rolback = sql_rolback || ' STATUSNFENTRADA = ' || coalesce(quote_literal(old.statusnfentrada), 'null');
				campos_new  = campos_new  || ' STATUSNFENTRADA = ' || coalesce(quote_literal(new.statusnfentrada), 'null');
				campos_old  = campos_old  || ' STATUSNFENTRADA = ' || coalesce(quote_literal(old.statusnfentrada), 'null');
				first = false;
			end if;

			if (new.observacaonfentrada &lt;&gt; old.observacaonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAONFENTRADA = ' || coalesce(quote_literal(new.observacaonfentrada), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAONFENTRADA = ' || coalesce(quote_literal(old.observacaonfentrada), 'null');
				campos_new  = campos_new  || ' OBSERVACAONFENTRADA = ' || coalesce(quote_literal(new.observacaonfentrada), 'null');
				campos_old  = campos_old  || ' OBSERVACAONFENTRADA = ' || coalesce(quote_literal(old.observacaonfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO NFENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, FORMAPAGAMENTONFENTRADA, OPERACAOTRIBUTACAO, CHAVENFEENTRADA, MODELONFENTRADA, DATAEMISSAONFENTRADA, DATAHORAENTRADANFENTRADA, MODALIDADEFRETENFENTRADA, CODIGOEMPRESATRANSPORTADORANFENTRADA, CODIGOLOJATRANSPORTADORANFENTRADA, CODIGOPESSOATRANSPORTADORANFENTRADA, CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA, QUANTIDADEVOLUMESTRANSPORTENFENTRADA, ESPECIEVOLUMETRANSPORTENFENTRADA, PESOBRUTOTRANSPORTENFENTRADA, PESOLIQUITOTRANSPORTENFENTRADA, PLACAVEICULOTRANSPORTENFENTRADA, UFPLACAVEICULOTRANSPORTENFENTRADA, INSCRICAOESTADUALSTNFENTRADA, MARCAVOLUMETRANSPORTENFENTRADA, NUMERACAOVOLUMESTRANSPORTENFENTRADA, VALORBASECALCULOICMSNFENTRADA, VALORICMSNFENTRADA, VALORBASECALCULOICMSSTNFENTRADA, VALORICMSSTNFENTRADA, VALORTOTALPRODUTOSNFENTRADA, VALORFRETENFENTRADA, VALORSEGURONFENTRADA, VALORTOTALDESCONTONFENTRADA, VALORTOTALIPINFENTRADA, VALORTOTALPISNFENTRADA, VALORTOTALCOFINSNFENTRADA, VALOROUTRASDESPESASNFENTRADA, VALORTOTALNFENTRADA, STATUSNFENTRADA, OBSERVACAONFENTRADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.formapagamentonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.chavenfeentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.modelonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraentradanfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.modalidadefretenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresatransportadoranfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojatransportadoranfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoatransportadoranfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadevolumestransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.especievolumetransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesobrutotransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesoliquitotransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placaveiculotransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ufplacaveiculotransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.inscricaoestadualstnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.marcavolumetransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeracaovolumestransportenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorbasecalculoicmsnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorbasecalculoicmsstnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsstnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalprodutosnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfretenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorseguronfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotaldescontonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalipinfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalpisnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalcofinsnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoroutrasdespesasnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusnfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM NFENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'FORMAPAGAMENTONFENTRADA = ' || coalesce(quote_literal(old.formapagamentonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			campos_old  = campos_old || 'CHAVENFEENTRADA = ' || coalesce(quote_literal(old.chavenfeentrada), 'null') || ', ';
			campos_old  = campos_old || 'MODELONFENTRADA = ' || coalesce(quote_literal(old.modelonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAONFENTRADA = ' || coalesce(quote_literal(old.dataemissaonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAENTRADANFENTRADA = ' || coalesce(quote_literal(old.datahoraentradanfentrada), 'null') || ', ';
			campos_old  = campos_old || 'MODALIDADEFRETENFENTRADA = ' || coalesce(quote_literal(old.modalidadefretenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigoempresatransportadoranfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigolojatransportadoranfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigopessoatransportadoranfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOATRANSPORTADORANFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfentrada), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.quantidadevolumestransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'ESPECIEVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.especievolumetransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PESOBRUTOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.pesobrutotransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PESOLIQUITOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.pesoliquitotransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'PLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.placaveiculotransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'UFPLACAVEICULOTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.ufplacaveiculotransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'INSCRICAOESTADUALSTNFENTRADA = ' || coalesce(quote_literal(old.inscricaoestadualstnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'MARCAVOLUMETRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.marcavolumetransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'NUMERACAOVOLUMESTRANSPORTENFENTRADA = ' || coalesce(quote_literal(old.numeracaovolumestransportenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORBASECALCULOICMSNFENTRADA = ' || coalesce(quote_literal(old.valorbasecalculoicmsnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSNFENTRADA = ' || coalesce(quote_literal(old.valoricmsnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORBASECALCULOICMSSTNFENTRADA = ' || coalesce(quote_literal(old.valorbasecalculoicmsstnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSSTNFENTRADA = ' || coalesce(quote_literal(old.valoricmsstnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALPRODUTOSNFENTRADA = ' || coalesce(quote_literal(old.valortotalprodutosnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORFRETENFENTRADA = ' || coalesce(quote_literal(old.valorfretenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORSEGURONFENTRADA = ' || coalesce(quote_literal(old.valorseguronfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALDESCONTONFENTRADA = ' || coalesce(quote_literal(old.valortotaldescontonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALIPINFENTRADA = ' || coalesce(quote_literal(old.valortotalipinfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALPISNFENTRADA = ' || coalesce(quote_literal(old.valortotalpisnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALCOFINSNFENTRADA = ' || coalesce(quote_literal(old.valortotalcofinsnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALOROUTRASDESPESASNFENTRADA = ' || coalesce(quote_literal(old.valoroutrasdespesasnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALNFENTRADA = ' || coalesce(quote_literal(old.valortotalnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'STATUSNFENTRADA = ' || coalesce(quote_literal(old.statusnfentrada), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAONFENTRADA = ' || coalesce(quote_literal(old.observacaonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(old.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'nfentrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfentrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfentrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_nfentradacontapagar()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_nfentradacontapagar() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO NFENTRADACONTAPAGAR (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESACONTAPAGAR, CODIGOLOJACONTAPAGAR, CODIGOCONTAPAGAR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM NFENTRADACONTAPAGAR WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigocontapagar), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE NFENTRADACONTAPAGAR SET ';
			sql_rolback = 'UPDATE NFENTRADACONTAPAGAR SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfentrada &lt;&gt; old.codigonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				campos_new  = campos_new  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				campos_old  = campos_old  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				first = false;
			end if;

			if (new.serienfentrada &lt;&gt; old.serienfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				sql_rolback = sql_rolback || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				campos_new  = campos_new  || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				campos_old  = campos_old  || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitentenfentrada &lt;&gt; old.codigoempresaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigolojaemitentenfentrada &lt;&gt; old.codigolojaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitentenfentrada &lt;&gt; old.codigopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitentenfentrada &lt;&gt; old.codigoenderecopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresacontapagar &lt;&gt; old.codigoempresacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null');
				first = false;
			end if;

			if (new.codigolojacontapagar &lt;&gt; old.codigolojacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');
				first = false;
			end if;

			if (new.codigocontapagar &lt;&gt; old.codigocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigocontapagar), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO NFENTRADACONTAPAGAR (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESACONTAPAGAR, CODIGOLOJACONTAPAGAR, CODIGOCONTAPAGAR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM NFENTRADACONTAPAGAR WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ' AND CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(old.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null')  || ', ' || coalesce(quote_literal(old.codigolojacontapagar), 'null')  || ', ' || coalesce(quote_literal(old.codigocontapagar), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'nfentradacontapagar', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfentradacontapagar', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfentradacontapagar', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_nfentradaentradaestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_nfentradaentradaestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO NFENTRADAENTRADAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESAENTRADAESTOQUE, CODIGOLOJAENTRADAESTOQUE, CODIGOENTRADAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM NFENTRADAENTRADAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null') || ' AND CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE NFENTRADAENTRADAESTOQUE SET ';
			sql_rolback = 'UPDATE NFENTRADAENTRADAESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfentrada &lt;&gt; old.codigonfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				campos_new  = campos_new  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null');
				campos_old  = campos_old  || ' CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null');
				first = false;
			end if;

			if (new.serienfentrada &lt;&gt; old.serienfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				sql_rolback = sql_rolback || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				campos_new  = campos_new  || ' SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null');
				campos_old  = campos_old  || ' SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitentenfentrada &lt;&gt; old.codigoempresaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigolojaemitentenfentrada &lt;&gt; old.codigolojaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitentenfentrada &lt;&gt; old.codigopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitentenfentrada &lt;&gt; old.codigoenderecopessoaemitentenfentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaentradaestoque &lt;&gt; old.codigoempresaentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaentradaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaentradaestoque), 'null');
				first = false;
			end if;

			if (new.codigolojaentradaestoque &lt;&gt; old.codigolojaentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigolojaentradaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigolojaentradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoentradaestoque &lt;&gt; old.codigoentradaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null') || ' AND CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(new.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(new.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null') || ' AND CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(new.codigoentradaestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(new.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoenderecopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaentradaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaentradaestoque), 'null')  || ', ' || coalesce(quote_literal(new.codigoentradaestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO NFENTRADAENTRADAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGONFENTRADA, SERIENFENTRADA, CODIGOEMPRESAEMITENTENFENTRADA, CODIGOLOJAEMITENTENFENTRADA, CODIGOPESSOAEMITENTENFENTRADA, CODIGOENDERECOPESSOAEMITENTENFENTRADA, CODIGOEMPRESAENTRADAESTOQUE, CODIGOLOJAENTRADAESTOQUE, CODIGOENTRADAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM NFENTRADAENTRADAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ' AND SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ' AND CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ' AND CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ' AND CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ' AND CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ' AND CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaentradaestoque), 'null') || ' AND CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigolojaentradaestoque), 'null') || ' AND CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFENTRADA = ' || coalesce(quote_literal(old.codigonfentrada), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFENTRADA = ' || coalesce(quote_literal(old.serienfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTENFENTRADA = ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoempresaentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigolojaentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENTRADAESTOQUE = ' || coalesce(quote_literal(old.codigoentradaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfentrada), 'null')  || ', ' || coalesce(quote_literal(old.serienfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoenderecopessoaemitentenfentrada), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaentradaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaentradaestoque), 'null')  || ', ' || coalesce(quote_literal(old.codigoentradaestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'nfentradaentradaestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfentradaentradaestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfentradaentradaestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_nfsaida()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_nfsaida() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO NFSAIDA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFSAIDA, SERIENFSAIDA, CODIGONFE, FORMAPAGAMENTONFSAIDA, OPERACAOTRIBUTACAO, MODELONFSAIDA, DATAEMISSAONFSAIDA, DATAHORASAIDANFSAIDA, CODIGOEMPRESADESTINATARIONFSAIDA, CODIGOLOJADESTINATARIONFSAIDA, CODIGOPESSOADESTINATARIONFSAIDA, CODIGOENDERECOPESSOADESTINATARIONFSAIDA, MODALIDADEFRETENFSAIDA, CODIGOEMPRESATRANSPORTADORANFSAIDA, CODIGOLOJATRANSPORTADORANFSAIDA, CODIGOPESSOATRANSPORTADORANFSAIDA, CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA, QUANTIDADEVOLUMESTRANSPORTENFSAIDA, ESPECIEVOLUMETRANSPORTENFSAIDA, PESOBRUTOTRANSPORTENFSAIDA, PESOLIQUITOTRANSPORTENFSAIDA, PLACAVEICULOTRANSPORTENFSAIDA, UFPLACAVEICULOTRANSPORTENFSAIDA, INSCRICAOESTADUALSTNFSAIDA, MARCAVOLUMETRANSPORTENFSAIDA, NUMERACAOVOLUMESTRANSPORTENFSAIDA, VALORBASECALCULOICMSNFSAIDA, VALORICMSNFSAIDA, VALORBASECALCULOICMSSTNFSAIDA, VALORICMSSTNFSAIDA, VALORTOTALPRODUTOSNFSAIDA, VALORFRETENFSAIDA, VALORSEGURONFSAIDA, VALORTOTALDESCONTONFSAIDA, VALORTOTALIPINFSAIDA, VALORTOTALPISNFSAIDA, VALORTOTALCOFINSNFSAIDA, VALOROUTRASDESPESASNFSAIDA, VALORTOTALNFSAIDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, STATUSNFSAIDA, OBSERVACAONFSAIDA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.formapagamentonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.modelonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataemissaonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorasaidanfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresadestinatarionfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojadestinatarionfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoadestinatarionfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoadestinatarionfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.modalidadefretenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresatransportadoranfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojatransportadoranfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoatransportadoranfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadevolumestransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.especievolumetransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesobrutotransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesoliquitotransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placaveiculotransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ufplacaveiculotransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.inscricaoestadualstnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.marcavolumetransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeracaovolumestransportenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorbasecalculoicmsnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorbasecalculoicmsstnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoricmsstnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalprodutosnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfretenfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorseguronfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotaldescontonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalipinfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalpisnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalcofinsnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoroutrasdespesasnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusnfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaonfsaida), 'null') || ')';

			sql_rolback = 'DELETE FROM NFSAIDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null') || ', ';
			campos_new   = campos_new || 'FORMAPAGAMENTONFSAIDA = ' || coalesce(quote_literal(new.formapagamentonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			campos_new   = campos_new || 'MODELONFSAIDA = ' || coalesce(quote_literal(new.modelonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'DATAEMISSAONFSAIDA = ' || coalesce(quote_literal(new.dataemissaonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORASAIDANFSAIDA = ' || coalesce(quote_literal(new.datahorasaidanfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigoempresadestinatarionfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigolojadestinatarionfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigopessoadestinatarionfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigoenderecopessoadestinatarionfsaida), 'null') || ', ';
			campos_new   = campos_new || 'MODALIDADEFRETENFSAIDA = ' || coalesce(quote_literal(new.modalidadefretenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigoempresatransportadoranfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigolojatransportadoranfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigopessoatransportadoranfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfsaida), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.quantidadevolumestransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'ESPECIEVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.especievolumetransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'PESOBRUTOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.pesobrutotransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'PESOLIQUITOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.pesoliquitotransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'PLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.placaveiculotransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'UFPLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.ufplacaveiculotransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'INSCRICAOESTADUALSTNFSAIDA = ' || coalesce(quote_literal(new.inscricaoestadualstnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'MARCAVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.marcavolumetransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'NUMERACAOVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.numeracaovolumestransportenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORBASECALCULOICMSNFSAIDA = ' || coalesce(quote_literal(new.valorbasecalculoicmsnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSNFSAIDA = ' || coalesce(quote_literal(new.valoricmsnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORBASECALCULOICMSSTNFSAIDA = ' || coalesce(quote_literal(new.valorbasecalculoicmsstnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORICMSSTNFSAIDA = ' || coalesce(quote_literal(new.valoricmsstnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALPRODUTOSNFSAIDA = ' || coalesce(quote_literal(new.valortotalprodutosnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORFRETENFSAIDA = ' || coalesce(quote_literal(new.valorfretenfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORSEGURONFSAIDA = ' || coalesce(quote_literal(new.valorseguronfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALDESCONTONFSAIDA = ' || coalesce(quote_literal(new.valortotaldescontonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALIPINFSAIDA = ' || coalesce(quote_literal(new.valortotalipinfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALPISNFSAIDA = ' || coalesce(quote_literal(new.valortotalpisnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALCOFINSNFSAIDA = ' || coalesce(quote_literal(new.valortotalcofinsnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALOROUTRASDESPESASNFSAIDA = ' || coalesce(quote_literal(new.valoroutrasdespesasnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALNFSAIDA = ' || coalesce(quote_literal(new.valortotalnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'STATUSNFSAIDA = ' || coalesce(quote_literal(new.statusnfsaida), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAONFSAIDA = ' || coalesce(quote_literal(new.observacaonfsaida), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfsaida), 'null')  || ', ' || coalesce(quote_literal(new.serienfsaida), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE NFSAIDA SET ';
			sql_rolback = 'UPDATE NFSAIDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigonfsaida &lt;&gt; old.codigonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null');
				campos_new  = campos_new  || ' CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null');
				campos_old  = campos_old  || ' CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null');
				first = false;
			end if;

			if (new.serienfsaida &lt;&gt; old.serienfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
				sql_rolback = sql_rolback || ' SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');
				campos_new  = campos_new  || ' SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
				campos_old  = campos_old  || ' SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');
				first = false;
			end if;

			if (new.codigonfe &lt;&gt; old.codigonfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');
				sql_rolback = sql_rolback || ' CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null');
				campos_new  = campos_new  || ' CODIGONFE = ' || coalesce(quote_literal(new.codigonfe), 'null');
				campos_old  = campos_old  || ' CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null');
				first = false;
			end if;

			if (new.formapagamentonfsaida &lt;&gt; old.formapagamentonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FORMAPAGAMENTONFSAIDA = ' || coalesce(quote_literal(new.formapagamentonfsaida), 'null');
				sql_rolback = sql_rolback || ' FORMAPAGAMENTONFSAIDA = ' || coalesce(quote_literal(old.formapagamentonfsaida), 'null');
				campos_new  = campos_new  || ' FORMAPAGAMENTONFSAIDA = ' || coalesce(quote_literal(new.formapagamentonfsaida), 'null');
				campos_old  = campos_old  || ' FORMAPAGAMENTONFSAIDA = ' || coalesce(quote_literal(old.formapagamentonfsaida), 'null');
				first = false;
			end if;

			if (new.operacaotributacao &lt;&gt; old.operacaotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				sql_rolback = sql_rolback || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				campos_new  = campos_new  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				campos_old  = campos_old  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				first = false;
			end if;

			if (new.modelonfsaida &lt;&gt; old.modelonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MODELONFSAIDA = ' || coalesce(quote_literal(new.modelonfsaida), 'null');
				sql_rolback = sql_rolback || ' MODELONFSAIDA = ' || coalesce(quote_literal(old.modelonfsaida), 'null');
				campos_new  = campos_new  || ' MODELONFSAIDA = ' || coalesce(quote_literal(new.modelonfsaida), 'null');
				campos_old  = campos_old  || ' MODELONFSAIDA = ' || coalesce(quote_literal(old.modelonfsaida), 'null');
				first = false;
			end if;

			if (new.dataemissaonfsaida &lt;&gt; old.dataemissaonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAEMISSAONFSAIDA = ' || coalesce(quote_literal(new.dataemissaonfsaida), 'null');
				sql_rolback = sql_rolback || ' DATAEMISSAONFSAIDA = ' || coalesce(quote_literal(old.dataemissaonfsaida), 'null');
				campos_new  = campos_new  || ' DATAEMISSAONFSAIDA = ' || coalesce(quote_literal(new.dataemissaonfsaida), 'null');
				campos_old  = campos_old  || ' DATAEMISSAONFSAIDA = ' || coalesce(quote_literal(old.dataemissaonfsaida), 'null');
				first = false;
			end if;

			if (new.datahorasaidanfsaida &lt;&gt; old.datahorasaidanfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORASAIDANFSAIDA = ' || coalesce(quote_literal(new.datahorasaidanfsaida), 'null');
				sql_rolback = sql_rolback || ' DATAHORASAIDANFSAIDA = ' || coalesce(quote_literal(old.datahorasaidanfsaida), 'null');
				campos_new  = campos_new  || ' DATAHORASAIDANFSAIDA = ' || coalesce(quote_literal(new.datahorasaidanfsaida), 'null');
				campos_old  = campos_old  || ' DATAHORASAIDANFSAIDA = ' || coalesce(quote_literal(old.datahorasaidanfsaida), 'null');
				first = false;
			end if;

			if (new.codigoempresadestinatarionfsaida &lt;&gt; old.codigoempresadestinatarionfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigoempresadestinatarionfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigoempresadestinatarionfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigoempresadestinatarionfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigoempresadestinatarionfsaida), 'null');
				first = false;
			end if;

			if (new.codigolojadestinatarionfsaida &lt;&gt; old.codigolojadestinatarionfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigolojadestinatarionfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigolojadestinatarionfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOLOJADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigolojadestinatarionfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOLOJADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigolojadestinatarionfsaida), 'null');
				first = false;
			end if;

			if (new.codigopessoadestinatarionfsaida &lt;&gt; old.codigopessoadestinatarionfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigopessoadestinatarionfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigopessoadestinatarionfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigopessoadestinatarionfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigopessoadestinatarionfsaida), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoadestinatarionfsaida &lt;&gt; old.codigoenderecopessoadestinatarionfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigoenderecopessoadestinatarionfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigoenderecopessoadestinatarionfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(new.codigoenderecopessoadestinatarionfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigoenderecopessoadestinatarionfsaida), 'null');
				first = false;
			end if;

			if (new.modalidadefretenfsaida &lt;&gt; old.modalidadefretenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MODALIDADEFRETENFSAIDA = ' || coalesce(quote_literal(new.modalidadefretenfsaida), 'null');
				sql_rolback = sql_rolback || ' MODALIDADEFRETENFSAIDA = ' || coalesce(quote_literal(old.modalidadefretenfsaida), 'null');
				campos_new  = campos_new  || ' MODALIDADEFRETENFSAIDA = ' || coalesce(quote_literal(new.modalidadefretenfsaida), 'null');
				campos_old  = campos_old  || ' MODALIDADEFRETENFSAIDA = ' || coalesce(quote_literal(old.modalidadefretenfsaida), 'null');
				first = false;
			end if;

			if (new.codigoempresatransportadoranfsaida &lt;&gt; old.codigoempresatransportadoranfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigoempresatransportadoranfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigoempresatransportadoranfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigoempresatransportadoranfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigoempresatransportadoranfsaida), 'null');
				first = false;
			end if;

			if (new.codigolojatransportadoranfsaida &lt;&gt; old.codigolojatransportadoranfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigolojatransportadoranfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigolojatransportadoranfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOLOJATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigolojatransportadoranfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOLOJATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigolojatransportadoranfsaida), 'null');
				first = false;
			end if;

			if (new.codigopessoatransportadoranfsaida &lt;&gt; old.codigopessoatransportadoranfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigopessoatransportadoranfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigopessoatransportadoranfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigopessoatransportadoranfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigopessoatransportadoranfsaida), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoatransportadoranfsaida &lt;&gt; old.codigoenderecopessoatransportadoranfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadoranfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfsaida), 'null');
				first = false;
			end if;

			if (new.quantidadevolumestransportenfsaida &lt;&gt; old.quantidadevolumestransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.quantidadevolumestransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.quantidadevolumestransportenfsaida), 'null');
				campos_new  = campos_new  || ' QUANTIDADEVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.quantidadevolumestransportenfsaida), 'null');
				campos_old  = campos_old  || ' QUANTIDADEVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.quantidadevolumestransportenfsaida), 'null');
				first = false;
			end if;

			if (new.especievolumetransportenfsaida &lt;&gt; old.especievolumetransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ESPECIEVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.especievolumetransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' ESPECIEVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.especievolumetransportenfsaida), 'null');
				campos_new  = campos_new  || ' ESPECIEVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.especievolumetransportenfsaida), 'null');
				campos_old  = campos_old  || ' ESPECIEVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.especievolumetransportenfsaida), 'null');
				first = false;
			end if;

			if (new.pesobrutotransportenfsaida &lt;&gt; old.pesobrutotransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOBRUTOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.pesobrutotransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' PESOBRUTOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.pesobrutotransportenfsaida), 'null');
				campos_new  = campos_new  || ' PESOBRUTOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.pesobrutotransportenfsaida), 'null');
				campos_old  = campos_old  || ' PESOBRUTOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.pesobrutotransportenfsaida), 'null');
				first = false;
			end if;

			if (new.pesoliquitotransportenfsaida &lt;&gt; old.pesoliquitotransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESOLIQUITOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.pesoliquitotransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' PESOLIQUITOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.pesoliquitotransportenfsaida), 'null');
				campos_new  = campos_new  || ' PESOLIQUITOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.pesoliquitotransportenfsaida), 'null');
				campos_old  = campos_old  || ' PESOLIQUITOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.pesoliquitotransportenfsaida), 'null');
				first = false;
			end if;

			if (new.placaveiculotransportenfsaida &lt;&gt; old.placaveiculotransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.placaveiculotransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' PLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.placaveiculotransportenfsaida), 'null');
				campos_new  = campos_new  || ' PLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.placaveiculotransportenfsaida), 'null');
				campos_old  = campos_old  || ' PLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.placaveiculotransportenfsaida), 'null');
				first = false;
			end if;

			if (new.ufplacaveiculotransportenfsaida &lt;&gt; old.ufplacaveiculotransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFPLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.ufplacaveiculotransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' UFPLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.ufplacaveiculotransportenfsaida), 'null');
				campos_new  = campos_new  || ' UFPLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.ufplacaveiculotransportenfsaida), 'null');
				campos_old  = campos_old  || ' UFPLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.ufplacaveiculotransportenfsaida), 'null');
				first = false;
			end if;

			if (new.inscricaoestadualstnfsaida &lt;&gt; old.inscricaoestadualstnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' INSCRICAOESTADUALSTNFSAIDA = ' || coalesce(quote_literal(new.inscricaoestadualstnfsaida), 'null');
				sql_rolback = sql_rolback || ' INSCRICAOESTADUALSTNFSAIDA = ' || coalesce(quote_literal(old.inscricaoestadualstnfsaida), 'null');
				campos_new  = campos_new  || ' INSCRICAOESTADUALSTNFSAIDA = ' || coalesce(quote_literal(new.inscricaoestadualstnfsaida), 'null');
				campos_old  = campos_old  || ' INSCRICAOESTADUALSTNFSAIDA = ' || coalesce(quote_literal(old.inscricaoestadualstnfsaida), 'null');
				first = false;
			end if;

			if (new.marcavolumetransportenfsaida &lt;&gt; old.marcavolumetransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MARCAVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.marcavolumetransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' MARCAVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.marcavolumetransportenfsaida), 'null');
				campos_new  = campos_new  || ' MARCAVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.marcavolumetransportenfsaida), 'null');
				campos_old  = campos_old  || ' MARCAVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.marcavolumetransportenfsaida), 'null');
				first = false;
			end if;

			if (new.numeracaovolumestransportenfsaida &lt;&gt; old.numeracaovolumestransportenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMERACAOVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.numeracaovolumestransportenfsaida), 'null');
				sql_rolback = sql_rolback || ' NUMERACAOVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.numeracaovolumestransportenfsaida), 'null');
				campos_new  = campos_new  || ' NUMERACAOVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(new.numeracaovolumestransportenfsaida), 'null');
				campos_old  = campos_old  || ' NUMERACAOVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.numeracaovolumestransportenfsaida), 'null');
				first = false;
			end if;

			if (new.valorbasecalculoicmsnfsaida &lt;&gt; old.valorbasecalculoicmsnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORBASECALCULOICMSNFSAIDA = ' || coalesce(quote_literal(new.valorbasecalculoicmsnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORBASECALCULOICMSNFSAIDA = ' || coalesce(quote_literal(old.valorbasecalculoicmsnfsaida), 'null');
				campos_new  = campos_new  || ' VALORBASECALCULOICMSNFSAIDA = ' || coalesce(quote_literal(new.valorbasecalculoicmsnfsaida), 'null');
				campos_old  = campos_old  || ' VALORBASECALCULOICMSNFSAIDA = ' || coalesce(quote_literal(old.valorbasecalculoicmsnfsaida), 'null');
				first = false;
			end if;

			if (new.valoricmsnfsaida &lt;&gt; old.valoricmsnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSNFSAIDA = ' || coalesce(quote_literal(new.valoricmsnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORICMSNFSAIDA = ' || coalesce(quote_literal(old.valoricmsnfsaida), 'null');
				campos_new  = campos_new  || ' VALORICMSNFSAIDA = ' || coalesce(quote_literal(new.valoricmsnfsaida), 'null');
				campos_old  = campos_old  || ' VALORICMSNFSAIDA = ' || coalesce(quote_literal(old.valoricmsnfsaida), 'null');
				first = false;
			end if;

			if (new.valorbasecalculoicmsstnfsaida &lt;&gt; old.valorbasecalculoicmsstnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORBASECALCULOICMSSTNFSAIDA = ' || coalesce(quote_literal(new.valorbasecalculoicmsstnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORBASECALCULOICMSSTNFSAIDA = ' || coalesce(quote_literal(old.valorbasecalculoicmsstnfsaida), 'null');
				campos_new  = campos_new  || ' VALORBASECALCULOICMSSTNFSAIDA = ' || coalesce(quote_literal(new.valorbasecalculoicmsstnfsaida), 'null');
				campos_old  = campos_old  || ' VALORBASECALCULOICMSSTNFSAIDA = ' || coalesce(quote_literal(old.valorbasecalculoicmsstnfsaida), 'null');
				first = false;
			end if;

			if (new.valoricmsstnfsaida &lt;&gt; old.valoricmsstnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORICMSSTNFSAIDA = ' || coalesce(quote_literal(new.valoricmsstnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORICMSSTNFSAIDA = ' || coalesce(quote_literal(old.valoricmsstnfsaida), 'null');
				campos_new  = campos_new  || ' VALORICMSSTNFSAIDA = ' || coalesce(quote_literal(new.valoricmsstnfsaida), 'null');
				campos_old  = campos_old  || ' VALORICMSSTNFSAIDA = ' || coalesce(quote_literal(old.valoricmsstnfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalprodutosnfsaida &lt;&gt; old.valortotalprodutosnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALPRODUTOSNFSAIDA = ' || coalesce(quote_literal(new.valortotalprodutosnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALPRODUTOSNFSAIDA = ' || coalesce(quote_literal(old.valortotalprodutosnfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALPRODUTOSNFSAIDA = ' || coalesce(quote_literal(new.valortotalprodutosnfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALPRODUTOSNFSAIDA = ' || coalesce(quote_literal(old.valortotalprodutosnfsaida), 'null');
				first = false;
			end if;

			if (new.valorfretenfsaida &lt;&gt; old.valorfretenfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFRETENFSAIDA = ' || coalesce(quote_literal(new.valorfretenfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORFRETENFSAIDA = ' || coalesce(quote_literal(old.valorfretenfsaida), 'null');
				campos_new  = campos_new  || ' VALORFRETENFSAIDA = ' || coalesce(quote_literal(new.valorfretenfsaida), 'null');
				campos_old  = campos_old  || ' VALORFRETENFSAIDA = ' || coalesce(quote_literal(old.valorfretenfsaida), 'null');
				first = false;
			end if;

			if (new.valorseguronfsaida &lt;&gt; old.valorseguronfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSEGURONFSAIDA = ' || coalesce(quote_literal(new.valorseguronfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORSEGURONFSAIDA = ' || coalesce(quote_literal(old.valorseguronfsaida), 'null');
				campos_new  = campos_new  || ' VALORSEGURONFSAIDA = ' || coalesce(quote_literal(new.valorseguronfsaida), 'null');
				campos_old  = campos_old  || ' VALORSEGURONFSAIDA = ' || coalesce(quote_literal(old.valorseguronfsaida), 'null');
				first = false;
			end if;

			if (new.valortotaldescontonfsaida &lt;&gt; old.valortotaldescontonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALDESCONTONFSAIDA = ' || coalesce(quote_literal(new.valortotaldescontonfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALDESCONTONFSAIDA = ' || coalesce(quote_literal(old.valortotaldescontonfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALDESCONTONFSAIDA = ' || coalesce(quote_literal(new.valortotaldescontonfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALDESCONTONFSAIDA = ' || coalesce(quote_literal(old.valortotaldescontonfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalipinfsaida &lt;&gt; old.valortotalipinfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALIPINFSAIDA = ' || coalesce(quote_literal(new.valortotalipinfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALIPINFSAIDA = ' || coalesce(quote_literal(old.valortotalipinfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALIPINFSAIDA = ' || coalesce(quote_literal(new.valortotalipinfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALIPINFSAIDA = ' || coalesce(quote_literal(old.valortotalipinfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalpisnfsaida &lt;&gt; old.valortotalpisnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALPISNFSAIDA = ' || coalesce(quote_literal(new.valortotalpisnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALPISNFSAIDA = ' || coalesce(quote_literal(old.valortotalpisnfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALPISNFSAIDA = ' || coalesce(quote_literal(new.valortotalpisnfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALPISNFSAIDA = ' || coalesce(quote_literal(old.valortotalpisnfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalcofinsnfsaida &lt;&gt; old.valortotalcofinsnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALCOFINSNFSAIDA = ' || coalesce(quote_literal(new.valortotalcofinsnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALCOFINSNFSAIDA = ' || coalesce(quote_literal(old.valortotalcofinsnfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALCOFINSNFSAIDA = ' || coalesce(quote_literal(new.valortotalcofinsnfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALCOFINSNFSAIDA = ' || coalesce(quote_literal(old.valortotalcofinsnfsaida), 'null');
				first = false;
			end if;

			if (new.valoroutrasdespesasnfsaida &lt;&gt; old.valoroutrasdespesasnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALOROUTRASDESPESASNFSAIDA = ' || coalesce(quote_literal(new.valoroutrasdespesasnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALOROUTRASDESPESASNFSAIDA = ' || coalesce(quote_literal(old.valoroutrasdespesasnfsaida), 'null');
				campos_new  = campos_new  || ' VALOROUTRASDESPESASNFSAIDA = ' || coalesce(quote_literal(new.valoroutrasdespesasnfsaida), 'null');
				campos_old  = campos_old  || ' VALOROUTRASDESPESASNFSAIDA = ' || coalesce(quote_literal(old.valoroutrasdespesasnfsaida), 'null');
				first = false;
			end if;

			if (new.valortotalnfsaida &lt;&gt; old.valortotalnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALNFSAIDA = ' || coalesce(quote_literal(new.valortotalnfsaida), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALNFSAIDA = ' || coalesce(quote_literal(old.valortotalnfsaida), 'null');
				campos_new  = campos_new  || ' VALORTOTALNFSAIDA = ' || coalesce(quote_literal(new.valortotalnfsaida), 'null');
				campos_old  = campos_old  || ' VALORTOTALNFSAIDA = ' || coalesce(quote_literal(old.valortotalnfsaida), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.statusnfsaida &lt;&gt; old.statusnfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSNFSAIDA = ' || coalesce(quote_literal(new.statusnfsaida), 'null');
				sql_rolback = sql_rolback || ' STATUSNFSAIDA = ' || coalesce(quote_literal(old.statusnfsaida), 'null');
				campos_new  = campos_new  || ' STATUSNFSAIDA = ' || coalesce(quote_literal(new.statusnfsaida), 'null');
				campos_old  = campos_old  || ' STATUSNFSAIDA = ' || coalesce(quote_literal(old.statusnfsaida), 'null');
				first = false;
			end if;

			if (new.observacaonfsaida &lt;&gt; old.observacaonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAONFSAIDA = ' || coalesce(quote_literal(new.observacaonfsaida), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAONFSAIDA = ' || coalesce(quote_literal(old.observacaonfsaida), 'null');
				campos_new  = campos_new  || ' OBSERVACAONFSAIDA = ' || coalesce(quote_literal(new.observacaonfsaida), 'null');
				campos_old  = campos_old  || ' OBSERVACAONFSAIDA = ' || coalesce(quote_literal(old.observacaonfsaida), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigonfsaida), 'null')  || ', ' || coalesce(quote_literal(new.serienfsaida), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO NFSAIDA (CODIGOEMPRESA, CODIGOLOJA, CODIGONFSAIDA, SERIENFSAIDA, CODIGONFE, FORMAPAGAMENTONFSAIDA, OPERACAOTRIBUTACAO, MODELONFSAIDA, DATAEMISSAONFSAIDA, DATAHORASAIDANFSAIDA, CODIGOEMPRESADESTINATARIONFSAIDA, CODIGOLOJADESTINATARIONFSAIDA, CODIGOPESSOADESTINATARIONFSAIDA, CODIGOENDERECOPESSOADESTINATARIONFSAIDA, MODALIDADEFRETENFSAIDA, CODIGOEMPRESATRANSPORTADORANFSAIDA, CODIGOLOJATRANSPORTADORANFSAIDA, CODIGOPESSOATRANSPORTADORANFSAIDA, CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA, QUANTIDADEVOLUMESTRANSPORTENFSAIDA, ESPECIEVOLUMETRANSPORTENFSAIDA, PESOBRUTOTRANSPORTENFSAIDA, PESOLIQUITOTRANSPORTENFSAIDA, PLACAVEICULOTRANSPORTENFSAIDA, UFPLACAVEICULOTRANSPORTENFSAIDA, INSCRICAOESTADUALSTNFSAIDA, MARCAVOLUMETRANSPORTENFSAIDA, NUMERACAOVOLUMESTRANSPORTENFSAIDA, VALORBASECALCULOICMSNFSAIDA, VALORICMSNFSAIDA, VALORBASECALCULOICMSSTNFSAIDA, VALORICMSSTNFSAIDA, VALORTOTALPRODUTOSNFSAIDA, VALORFRETENFSAIDA, VALORSEGURONFSAIDA, VALORTOTALDESCONTONFSAIDA, VALORTOTALIPINFSAIDA, VALORTOTALPISNFSAIDA, VALORTOTALCOFINSNFSAIDA, VALOROUTRASDESPESASNFSAIDA, VALORTOTALNFSAIDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, STATUSNFSAIDA, OBSERVACAONFSAIDA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.formapagamentonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.modelonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataemissaonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorasaidanfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresadestinatarionfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojadestinatarionfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoadestinatarionfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoadestinatarionfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.modalidadefretenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresatransportadoranfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojatransportadoranfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoatransportadoranfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadevolumestransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.especievolumetransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesobrutotransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesoliquitotransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placaveiculotransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ufplacaveiculotransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.inscricaoestadualstnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.marcavolumetransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeracaovolumestransportenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorbasecalculoicmsnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorbasecalculoicmsstnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoricmsstnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalprodutosnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfretenfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorseguronfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotaldescontonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalipinfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalpisnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalcofinsnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoroutrasdespesasnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusnfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaonfsaida), 'null') || ')';

			sql_replica = 'DELETE FROM NFSAIDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null') || ' AND SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFE = ' || coalesce(quote_literal(old.codigonfe), 'null') || ', ';
			campos_old  = campos_old || 'FORMAPAGAMENTONFSAIDA = ' || coalesce(quote_literal(old.formapagamentonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			campos_old  = campos_old || 'MODELONFSAIDA = ' || coalesce(quote_literal(old.modelonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'DATAEMISSAONFSAIDA = ' || coalesce(quote_literal(old.dataemissaonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORASAIDANFSAIDA = ' || coalesce(quote_literal(old.datahorasaidanfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigoempresadestinatarionfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigolojadestinatarionfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigopessoadestinatarionfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOADESTINATARIONFSAIDA = ' || coalesce(quote_literal(old.codigoenderecopessoadestinatarionfsaida), 'null') || ', ';
			campos_old  = campos_old || 'MODALIDADEFRETENFSAIDA = ' || coalesce(quote_literal(old.modalidadefretenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigoempresatransportadoranfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigolojatransportadoranfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigopessoatransportadoranfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOATRANSPORTADORANFSAIDA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadoranfsaida), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.quantidadevolumestransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'ESPECIEVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.especievolumetransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'PESOBRUTOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.pesobrutotransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'PESOLIQUITOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.pesoliquitotransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'PLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.placaveiculotransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'UFPLACAVEICULOTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.ufplacaveiculotransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'INSCRICAOESTADUALSTNFSAIDA = ' || coalesce(quote_literal(old.inscricaoestadualstnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'MARCAVOLUMETRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.marcavolumetransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'NUMERACAOVOLUMESTRANSPORTENFSAIDA = ' || coalesce(quote_literal(old.numeracaovolumestransportenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORBASECALCULOICMSNFSAIDA = ' || coalesce(quote_literal(old.valorbasecalculoicmsnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSNFSAIDA = ' || coalesce(quote_literal(old.valoricmsnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORBASECALCULOICMSSTNFSAIDA = ' || coalesce(quote_literal(old.valorbasecalculoicmsstnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORICMSSTNFSAIDA = ' || coalesce(quote_literal(old.valoricmsstnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALPRODUTOSNFSAIDA = ' || coalesce(quote_literal(old.valortotalprodutosnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORFRETENFSAIDA = ' || coalesce(quote_literal(old.valorfretenfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORSEGURONFSAIDA = ' || coalesce(quote_literal(old.valorseguronfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALDESCONTONFSAIDA = ' || coalesce(quote_literal(old.valortotaldescontonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALIPINFSAIDA = ' || coalesce(quote_literal(old.valortotalipinfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALPISNFSAIDA = ' || coalesce(quote_literal(old.valortotalpisnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALCOFINSNFSAIDA = ' || coalesce(quote_literal(old.valortotalcofinsnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALOROUTRASDESPESASNFSAIDA = ' || coalesce(quote_literal(old.valoroutrasdespesasnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALNFSAIDA = ' || coalesce(quote_literal(old.valortotalnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'STATUSNFSAIDA = ' || coalesce(quote_literal(old.statusnfsaida), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAONFSAIDA = ' || coalesce(quote_literal(old.observacaonfsaida), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigonfsaida), 'null')  || ', ' || coalesce(quote_literal(old.serienfsaida), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'nfsaida', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfsaida', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nfsaida', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_nivelmetavenda()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_nivelmetavenda() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO NIVELMETAVENDA (CODIGONIVELMETAVENDA, NOMENIVELMETAVENDA, PESONIVELMETAVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonivelmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomenivelmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.pesonivelmetavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM NIVELMETAVENDA WHERE CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'NOMENIVELMETAVENDA = ' || coalesce(quote_literal(new.nomenivelmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'PESONIVELMETAVENDA = ' || coalesce(quote_literal(new.pesonivelmetavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigonivelmetavenda), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE NIVELMETAVENDA SET ';
			sql_rolback = 'UPDATE NIVELMETAVENDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigonivelmetavenda &lt;&gt; old.codigonivelmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');
				sql_rolback = sql_rolback || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null');
				campos_new  = campos_new  || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');
				campos_old  = campos_old  || ' CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null');
				first = false;
			end if;

			if (new.nomenivelmetavenda &lt;&gt; old.nomenivelmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMENIVELMETAVENDA = ' || coalesce(quote_literal(new.nomenivelmetavenda), 'null');
				sql_rolback = sql_rolback || ' NOMENIVELMETAVENDA = ' || coalesce(quote_literal(old.nomenivelmetavenda), 'null');
				campos_new  = campos_new  || ' NOMENIVELMETAVENDA = ' || coalesce(quote_literal(new.nomenivelmetavenda), 'null');
				campos_old  = campos_old  || ' NOMENIVELMETAVENDA = ' || coalesce(quote_literal(old.nomenivelmetavenda), 'null');
				first = false;
			end if;

			if (new.pesonivelmetavenda &lt;&gt; old.pesonivelmetavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PESONIVELMETAVENDA = ' || coalesce(quote_literal(new.pesonivelmetavenda), 'null');
				sql_rolback = sql_rolback || ' PESONIVELMETAVENDA = ' || coalesce(quote_literal(old.pesonivelmetavenda), 'null');
				campos_new  = campos_new  || ' PESONIVELMETAVENDA = ' || coalesce(quote_literal(new.pesonivelmetavenda), 'null');
				campos_old  = campos_old  || ' PESONIVELMETAVENDA = ' || coalesce(quote_literal(old.pesonivelmetavenda), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(new.codigonivelmetavenda), 'null');

			sql_chave = coalesce(quote_literal(new.codigonivelmetavenda), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO NIVELMETAVENDA (CODIGONIVELMETAVENDA, NOMENIVELMETAVENDA, PESONIVELMETAVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonivelmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomenivelmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.pesonivelmetavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM NIVELMETAVENDA WHERE CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGONIVELMETAVENDA = ' || coalesce(quote_literal(old.codigonivelmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'NOMENIVELMETAVENDA = ' || coalesce(quote_literal(old.nomenivelmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'PESONIVELMETAVENDA = ' || coalesce(quote_literal(old.pesonivelmetavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigonivelmetavenda), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'nivelmetavenda', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nivelmetavenda', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('nivelmetavenda', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_objeto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_objeto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO OBJETO (CODIGOOBJETO, NOMEOBJETO, DESCRICAOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM OBJETO WHERE CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'NOMEOBJETO = ' || coalesce(quote_literal(new.nomeobjeto), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOOBJETO = ' || coalesce(quote_literal(new.descricaoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoobjeto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE OBJETO SET ';
			sql_rolback = 'UPDATE OBJETO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoobjeto &lt;&gt; old.codigoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				first = false;
			end if;

			if (new.nomeobjeto &lt;&gt; old.nomeobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEOBJETO = ' || coalesce(quote_literal(new.nomeobjeto), 'null');
				sql_rolback = sql_rolback || ' NOMEOBJETO = ' || coalesce(quote_literal(old.nomeobjeto), 'null');
				campos_new  = campos_new  || ' NOMEOBJETO = ' || coalesce(quote_literal(new.nomeobjeto), 'null');
				campos_old  = campos_old  || ' NOMEOBJETO = ' || coalesce(quote_literal(old.nomeobjeto), 'null');
				first = false;
			end if;

			if (new.descricaoobjeto &lt;&gt; old.descricaoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOOBJETO = ' || coalesce(quote_literal(new.descricaoobjeto), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOOBJETO = ' || coalesce(quote_literal(old.descricaoobjeto), 'null');
				campos_new  = campos_new  || ' DESCRICAOOBJETO = ' || coalesce(quote_literal(new.descricaoobjeto), 'null');
				campos_old  = campos_old  || ' DESCRICAOOBJETO = ' || coalesce(quote_literal(old.descricaoobjeto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoobjeto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO OBJETO (CODIGOOBJETO, NOMEOBJETO, DESCRICAOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM OBJETO WHERE CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'NOMEOBJETO = ' || coalesce(quote_literal(old.nomeobjeto), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOOBJETO = ' || coalesce(quote_literal(old.descricaoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoobjeto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'objeto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('objeto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('objeto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_operacaotributacao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_operacaotributacao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO OPERACAOTRIBUTACAO (OPERACAOTRIBUTACAO, DESCRICAOOPERACAOTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaooperacaotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM OPERACAOTRIBUTACAO WHERE OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOOPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.descricaooperacaotributacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.operacaotributacao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE OPERACAOTRIBUTACAO SET ';
			sql_rolback = 'UPDATE OPERACAOTRIBUTACAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.operacaotributacao &lt;&gt; old.operacaotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				sql_rolback = sql_rolback || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				campos_new  = campos_new  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				campos_old  = campos_old  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				first = false;
			end if;

			if (new.descricaooperacaotributacao &lt;&gt; old.descricaooperacaotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOOPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.descricaooperacaotributacao), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOOPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.descricaooperacaotributacao), 'null');
				campos_new  = campos_new  || ' DESCRICAOOPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.descricaooperacaotributacao), 'null');
				campos_old  = campos_old  || ' DESCRICAOOPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.descricaooperacaotributacao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
			sql_rolback = sql_rolback  || ' WHERE OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');

			sql_chave = coalesce(quote_literal(new.operacaotributacao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO OPERACAOTRIBUTACAO (OPERACAOTRIBUTACAO, DESCRICAOOPERACAOTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaooperacaotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM OPERACAOTRIBUTACAO WHERE OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOOPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.descricaooperacaotributacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.operacaotributacao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'operacaotributacao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('operacaotributacao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('operacaotributacao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_operadoracartao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_operadoracartao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO OPERADORACARTAO (CODIGOOPERADORACARTAO, NOMEOPERADORACARTAO, STATUSOPERADORACARTAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOCONTABANCARIA, CODIGOEMPRESA, CODIGOLOJA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigooperadoracartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeoperadoracartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusoperadoracartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ')';

			sql_rolback = 'DELETE FROM OPERADORACARTAO WHERE CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null') || ', ';
			campos_new   = campos_new || 'NOMEOPERADORACARTAO = ' || coalesce(quote_literal(new.nomeoperadoracartao), 'null') || ', ';
			campos_new   = campos_new || 'STATUSOPERADORACARTAO = ' || coalesce(quote_literal(new.statusoperadoracartao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigooperadoracartao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE OPERADORACARTAO SET ';
			sql_rolback = 'UPDATE OPERADORACARTAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigooperadoracartao &lt;&gt; old.codigooperadoracartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');
				sql_rolback = sql_rolback || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null');
				campos_new  = campos_new  || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');
				campos_old  = campos_old  || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null');
				first = false;
			end if;

			if (new.nomeoperadoracartao &lt;&gt; old.nomeoperadoracartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEOPERADORACARTAO = ' || coalesce(quote_literal(new.nomeoperadoracartao), 'null');
				sql_rolback = sql_rolback || ' NOMEOPERADORACARTAO = ' || coalesce(quote_literal(old.nomeoperadoracartao), 'null');
				campos_new  = campos_new  || ' NOMEOPERADORACARTAO = ' || coalesce(quote_literal(new.nomeoperadoracartao), 'null');
				campos_old  = campos_old  || ' NOMEOPERADORACARTAO = ' || coalesce(quote_literal(old.nomeoperadoracartao), 'null');
				first = false;
			end if;

			if (new.statusoperadoracartao &lt;&gt; old.statusoperadoracartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSOPERADORACARTAO = ' || coalesce(quote_literal(new.statusoperadoracartao), 'null');
				sql_rolback = sql_rolback || ' STATUSOPERADORACARTAO = ' || coalesce(quote_literal(old.statusoperadoracartao), 'null');
				campos_new  = campos_new  || ' STATUSOPERADORACARTAO = ' || coalesce(quote_literal(new.statusoperadoracartao), 'null');
				campos_old  = campos_old  || ' STATUSOPERADORACARTAO = ' || coalesce(quote_literal(old.statusoperadoracartao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigocontabancaria &lt;&gt; old.codigocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');

			sql_chave = coalesce(quote_literal(new.codigooperadoracartao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO OPERADORACARTAO (CODIGOOPERADORACARTAO, NOMEOPERADORACARTAO, STATUSOPERADORACARTAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOCONTABANCARIA, CODIGOEMPRESA, CODIGOLOJA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigooperadoracartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeoperadoracartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusoperadoracartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ')';

			sql_replica = 'DELETE FROM OPERADORACARTAO WHERE CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null') || ', ';
			campos_old  = campos_old || 'NOMEOPERADORACARTAO = ' || coalesce(quote_literal(old.nomeoperadoracartao), 'null') || ', ';
			campos_old  = campos_old || 'STATUSOPERADORACARTAO = ' || coalesce(quote_literal(old.statusoperadoracartao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigooperadoracartao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'operadoracartao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('operadoracartao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('operadoracartao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pagamento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pagamento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PAGAMENTO (CODIGOPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, DATAHORABAIXAPAGAMENTO, VALORPAGAMENTO, CODIGOFORMAPAGAMENTO, OBSERVACAOPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorabaixapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorpagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoformapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PAGAMENTO WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORABAIXAPAGAMENTO = ' || coalesce(quote_literal(new.datahorabaixapagamento), 'null') || ', ';
			campos_new   = campos_new || 'VALORPAGAMENTO = ' || coalesce(quote_literal(new.valorpagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOPAGAMENTO = ' || coalesce(quote_literal(new.observacaopagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigopagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PAGAMENTO SET ';
			sql_rolback = 'UPDATE PAGAMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigopagamento &lt;&gt; old.codigopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datahorabaixapagamento &lt;&gt; old.datahorabaixapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORABAIXAPAGAMENTO = ' || coalesce(quote_literal(new.datahorabaixapagamento), 'null');
				sql_rolback = sql_rolback || ' DATAHORABAIXAPAGAMENTO = ' || coalesce(quote_literal(old.datahorabaixapagamento), 'null');
				campos_new  = campos_new  || ' DATAHORABAIXAPAGAMENTO = ' || coalesce(quote_literal(new.datahorabaixapagamento), 'null');
				campos_old  = campos_old  || ' DATAHORABAIXAPAGAMENTO = ' || coalesce(quote_literal(old.datahorabaixapagamento), 'null');
				first = false;
			end if;

			if (new.valorpagamento &lt;&gt; old.valorpagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPAGAMENTO = ' || coalesce(quote_literal(new.valorpagamento), 'null');
				sql_rolback = sql_rolback || ' VALORPAGAMENTO = ' || coalesce(quote_literal(old.valorpagamento), 'null');
				campos_new  = campos_new  || ' VALORPAGAMENTO = ' || coalesce(quote_literal(new.valorpagamento), 'null');
				campos_old  = campos_old  || ' VALORPAGAMENTO = ' || coalesce(quote_literal(old.valorpagamento), 'null');
				first = false;
			end if;

			if (new.codigoformapagamento &lt;&gt; old.codigoformapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(new.codigoformapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null');
				first = false;
			end if;

			if (new.observacaopagamento &lt;&gt; old.observacaopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOPAGAMENTO = ' || coalesce(quote_literal(new.observacaopagamento), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOPAGAMENTO = ' || coalesce(quote_literal(old.observacaopagamento), 'null');
				campos_new  = campos_new  || ' OBSERVACAOPAGAMENTO = ' || coalesce(quote_literal(new.observacaopagamento), 'null');
				campos_old  = campos_old  || ' OBSERVACAOPAGAMENTO = ' || coalesce(quote_literal(old.observacaopagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(new.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigopagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PAGAMENTO (CODIGOPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, DATAHORABAIXAPAGAMENTO, VALORPAGAMENTO, CODIGOFORMAPAGAMENTO, OBSERVACAOPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorabaixapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorpagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoformapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PAGAMENTO WHERE CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPAGAMENTO = ' || coalesce(quote_literal(old.codigopagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORABAIXAPAGAMENTO = ' || coalesce(quote_literal(old.datahorabaixapagamento), 'null') || ', ';
			campos_old  = campos_old || 'VALORPAGAMENTO = ' || coalesce(quote_literal(old.valorpagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFORMAPAGAMENTO = ' || coalesce(quote_literal(old.codigoformapagamento), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOPAGAMENTO = ' || coalesce(quote_literal(old.observacaopagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigopagamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pagamento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pagamento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pagamento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pais()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pais() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PAIS (CODIGOPAIS, NOMEPAIS, SIGLAPAIS, CODIGOIBGEPAIS, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopais), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomepais), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.siglapais), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoibgepais), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PAIS WHERE CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPAIS = ' || coalesce(quote_literal(new.nomepais), 'null') || ', ';
			campos_new   = campos_new || 'SIGLAPAIS = ' || coalesce(quote_literal(new.siglapais), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOIBGEPAIS = ' || coalesce(quote_literal(new.codigoibgepais), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigopais), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PAIS SET ';
			sql_rolback = 'UPDATE PAIS SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigopais &lt;&gt; old.codigopais) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');
				sql_rolback = sql_rolback || ' CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null');
				campos_new  = campos_new  || ' CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');
				campos_old  = campos_old  || ' CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null');
				first = false;
			end if;

			if (new.nomepais &lt;&gt; old.nomepais) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPAIS = ' || coalesce(quote_literal(new.nomepais), 'null');
				sql_rolback = sql_rolback || ' NOMEPAIS = ' || coalesce(quote_literal(old.nomepais), 'null');
				campos_new  = campos_new  || ' NOMEPAIS = ' || coalesce(quote_literal(new.nomepais), 'null');
				campos_old  = campos_old  || ' NOMEPAIS = ' || coalesce(quote_literal(old.nomepais), 'null');
				first = false;
			end if;

			if (new.siglapais &lt;&gt; old.siglapais) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SIGLAPAIS = ' || coalesce(quote_literal(new.siglapais), 'null');
				sql_rolback = sql_rolback || ' SIGLAPAIS = ' || coalesce(quote_literal(old.siglapais), 'null');
				campos_new  = campos_new  || ' SIGLAPAIS = ' || coalesce(quote_literal(new.siglapais), 'null');
				campos_old  = campos_old  || ' SIGLAPAIS = ' || coalesce(quote_literal(old.siglapais), 'null');
				first = false;
			end if;

			if (new.codigoibgepais &lt;&gt; old.codigoibgepais) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOIBGEPAIS = ' || coalesce(quote_literal(new.codigoibgepais), 'null');
				sql_rolback = sql_rolback || ' CODIGOIBGEPAIS = ' || coalesce(quote_literal(old.codigoibgepais), 'null');
				campos_new  = campos_new  || ' CODIGOIBGEPAIS = ' || coalesce(quote_literal(new.codigoibgepais), 'null');
				campos_old  = campos_old  || ' CODIGOIBGEPAIS = ' || coalesce(quote_literal(old.codigoibgepais), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPAIS = ' || coalesce(quote_literal(new.codigopais), 'null');

			sql_chave = coalesce(quote_literal(new.codigopais), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PAIS (CODIGOPAIS, NOMEPAIS, SIGLAPAIS, CODIGOIBGEPAIS, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopais), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomepais), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.siglapais), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoibgepais), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PAIS WHERE CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPAIS = ' || coalesce(quote_literal(old.codigopais), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPAIS = ' || coalesce(quote_literal(old.nomepais), 'null') || ', ';
			campos_old  = campos_old || 'SIGLAPAIS = ' || coalesce(quote_literal(old.siglapais), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOIBGEPAIS = ' || coalesce(quote_literal(old.codigoibgepais), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigopais), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pais', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pais', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pais', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_parametro()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_parametro() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PARAMETRO (CHAVEPARAMETRO, DESCRICAOPARAMETRO, TIPODADOPARAMETRO, DECIMAISPARAMETRO, VALORESPARAMETRO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.chaveparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipodadoparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.decimaisparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valoresparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PARAMETRO WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOPARAMETRO = ' || coalesce(quote_literal(new.descricaoparametro), 'null') || ', ';
			campos_new   = campos_new || 'TIPODADOPARAMETRO = ' || coalesce(quote_literal(new.tipodadoparametro), 'null') || ', ';
			campos_new   = campos_new || 'DECIMAISPARAMETRO = ' || coalesce(quote_literal(new.decimaisparametro), 'null') || ', ';
			campos_new   = campos_new || 'VALORESPARAMETRO = ' || coalesce(quote_literal(new.valoresparametro), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.chaveparametro), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PARAMETRO SET ';
			sql_rolback = 'UPDATE PARAMETRO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.chaveparametro &lt;&gt; old.chaveparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');
				sql_rolback = sql_rolback || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null');
				campos_new  = campos_new  || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');
				campos_old  = campos_old  || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null');
				first = false;
			end if;

			if (new.descricaoparametro &lt;&gt; old.descricaoparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOPARAMETRO = ' || coalesce(quote_literal(new.descricaoparametro), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOPARAMETRO = ' || coalesce(quote_literal(old.descricaoparametro), 'null');
				campos_new  = campos_new  || ' DESCRICAOPARAMETRO = ' || coalesce(quote_literal(new.descricaoparametro), 'null');
				campos_old  = campos_old  || ' DESCRICAOPARAMETRO = ' || coalesce(quote_literal(old.descricaoparametro), 'null');
				first = false;
			end if;

			if (new.tipodadoparametro &lt;&gt; old.tipodadoparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPODADOPARAMETRO = ' || coalesce(quote_literal(new.tipodadoparametro), 'null');
				sql_rolback = sql_rolback || ' TIPODADOPARAMETRO = ' || coalesce(quote_literal(old.tipodadoparametro), 'null');
				campos_new  = campos_new  || ' TIPODADOPARAMETRO = ' || coalesce(quote_literal(new.tipodadoparametro), 'null');
				campos_old  = campos_old  || ' TIPODADOPARAMETRO = ' || coalesce(quote_literal(old.tipodadoparametro), 'null');
				first = false;
			end if;

			if (new.decimaisparametro &lt;&gt; old.decimaisparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DECIMAISPARAMETRO = ' || coalesce(quote_literal(new.decimaisparametro), 'null');
				sql_rolback = sql_rolback || ' DECIMAISPARAMETRO = ' || coalesce(quote_literal(old.decimaisparametro), 'null');
				campos_new  = campos_new  || ' DECIMAISPARAMETRO = ' || coalesce(quote_literal(new.decimaisparametro), 'null');
				campos_old  = campos_old  || ' DECIMAISPARAMETRO = ' || coalesce(quote_literal(old.decimaisparametro), 'null');
				first = false;
			end if;

			if (new.valoresparametro &lt;&gt; old.valoresparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORESPARAMETRO = ' || coalesce(quote_literal(new.valoresparametro), 'null');
				sql_rolback = sql_rolback || ' VALORESPARAMETRO = ' || coalesce(quote_literal(old.valoresparametro), 'null');
				campos_new  = campos_new  || ' VALORESPARAMETRO = ' || coalesce(quote_literal(new.valoresparametro), 'null');
				campos_old  = campos_old  || ' VALORESPARAMETRO = ' || coalesce(quote_literal(old.valoresparametro), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');
			sql_rolback = sql_rolback  || ' WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');

			sql_chave = coalesce(quote_literal(new.chaveparametro), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PARAMETRO (CHAVEPARAMETRO, DESCRICAOPARAMETRO, TIPODADOPARAMETRO, DECIMAISPARAMETRO, VALORESPARAMETRO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.chaveparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipodadoparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.decimaisparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valoresparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PARAMETRO WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOPARAMETRO = ' || coalesce(quote_literal(old.descricaoparametro), 'null') || ', ';
			campos_old  = campos_old || 'TIPODADOPARAMETRO = ' || coalesce(quote_literal(old.tipodadoparametro), 'null') || ', ';
			campos_old  = campos_old || 'DECIMAISPARAMETRO = ' || coalesce(quote_literal(old.decimaisparametro), 'null') || ', ';
			campos_old  = campos_old || 'VALORESPARAMETRO = ' || coalesce(quote_literal(old.valoresparametro), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.chaveparametro), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'parametro', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('parametro', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('parametro', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_parametroloja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_parametroloja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PARAMETROLOJA (CHAVEPARAMETRO, CODIGOEMPRESA, CODIGOLOJA, VALORPARAMETRO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.chaveparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorparametro), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PARAMETROLOJA WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'VALORPARAMETRO = ' || coalesce(quote_literal(new.valorparametro), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.chaveparametro), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PARAMETROLOJA SET ';
			sql_rolback = 'UPDATE PARAMETROLOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.chaveparametro &lt;&gt; old.chaveparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');
				sql_rolback = sql_rolback || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null');
				campos_new  = campos_new  || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null');
				campos_old  = campos_old  || ' CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.valorparametro &lt;&gt; old.valorparametro) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPARAMETRO = ' || coalesce(quote_literal(new.valorparametro), 'null');
				sql_rolback = sql_rolback || ' VALORPARAMETRO = ' || coalesce(quote_literal(old.valorparametro), 'null');
				campos_new  = campos_new  || ' VALORPARAMETRO = ' || coalesce(quote_literal(new.valorparametro), 'null');
				campos_old  = campos_old  || ' VALORPARAMETRO = ' || coalesce(quote_literal(old.valorparametro), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(new.chaveparametro), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.chaveparametro), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PARAMETROLOJA (CHAVEPARAMETRO, CODIGOEMPRESA, CODIGOLOJA, VALORPARAMETRO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.chaveparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorparametro), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PARAMETROLOJA WHERE CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CHAVEPARAMETRO = ' || coalesce(quote_literal(old.chaveparametro), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'VALORPARAMETRO = ' || coalesce(quote_literal(old.valorparametro), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.chaveparametro), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'parametroloja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('parametroloja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('parametroloja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_parcelaplanopagamentovenda()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_parcelaplanopagamentovenda() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PARCELAPLANOPAGAMENTOVENDA (CODIGOPLANOPAGAMENTO, CODIGOPARCELAPLANOPAGAMENTO, DIASPAGAMENTOPARCELA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.diaspagamentoparcela), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PARCELAPLANOPAGAMENTOVENDA WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ' AND CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'DIASPAGAMENTOPARCELA = ' || coalesce(quote_literal(new.diaspagamentoparcela), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoplanopagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PARCELAPLANOPAGAMENTOVENDA SET ';
			sql_rolback = 'UPDATE PARCELAPLANOPAGAMENTOVENDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoplanopagamento &lt;&gt; old.codigoplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');
				first = false;
			end if;

			if (new.codigoparcelaplanopagamento &lt;&gt; old.codigoparcelaplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoparcelaplanopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoparcelaplanopagamento), 'null');
				first = false;
			end if;

			if (new.diaspagamentoparcela &lt;&gt; old.diaspagamentoparcela) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DIASPAGAMENTOPARCELA = ' || coalesce(quote_literal(new.diaspagamentoparcela), 'null');
				sql_rolback = sql_rolback || ' DIASPAGAMENTOPARCELA = ' || coalesce(quote_literal(old.diaspagamentoparcela), 'null');
				campos_new  = campos_new  || ' DIASPAGAMENTOPARCELA = ' || coalesce(quote_literal(new.diaspagamentoparcela), 'null');
				campos_old  = campos_old  || ' DIASPAGAMENTOPARCELA = ' || coalesce(quote_literal(old.diaspagamentoparcela), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ' AND CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ' AND CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null');

			sql_chave = coalesce(quote_literal(new.codigoplanopagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoparcelaplanopagamento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PARCELAPLANOPAGAMENTOVENDA (CODIGOPLANOPAGAMENTO, CODIGOPARCELAPLANOPAGAMENTO, DIASPAGAMENTOPARCELA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoparcelaplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.diaspagamentoparcela), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PARCELAPLANOPAGAMENTOVENDA WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ' AND CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoparcelaplanopagamento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPARCELAPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoparcelaplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'DIASPAGAMENTOPARCELA = ' || coalesce(quote_literal(old.diaspagamentoparcela), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoplanopagamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoparcelaplanopagamento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'parcelaplanopagamentovenda', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('parcelaplanopagamentovenda', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('parcelaplanopagamentovenda', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pdv()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pdv() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PDV (CODIGOEMPRESA, CODIGOLOJA, CODIGOPDV, NOMEPDV, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopdv), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomepdv), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PDV WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPDV = ' || coalesce(quote_literal(new.nomepdv), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PDV SET ';
			sql_rolback = 'UPDATE PDV SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigopdv &lt;&gt; old.codigopdv) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				sql_rolback = sql_rolback || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				campos_new  = campos_new  || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				campos_old  = campos_old  || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				first = false;
			end if;

			if (new.nomepdv &lt;&gt; old.nomepdv) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPDV = ' || coalesce(quote_literal(new.nomepdv), 'null');
				sql_rolback = sql_rolback || ' NOMEPDV = ' || coalesce(quote_literal(old.nomepdv), 'null');
				campos_new  = campos_new  || ' NOMEPDV = ' || coalesce(quote_literal(new.nomepdv), 'null');
				campos_old  = campos_old  || ' NOMEPDV = ' || coalesce(quote_literal(old.nomepdv), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PDV (CODIGOEMPRESA, CODIGOLOJA, CODIGOPDV, NOMEPDV, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopdv), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomepdv), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PDV WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPDV = ' || coalesce(quote_literal(old.nomepdv), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigopdv), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pdv', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pdv', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pdv', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pedido()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pedido() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PEDIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPDV, CODIGOPEDIDO, STATUSPEDIDO, DATAPEDIDO, CODIGOEMPRESAENDERECOPESSOA, CODIGOLOJAENDERECOPESSOA, CODIGOPESSOA, CODIGOENDERECOPESSOA, OBSERVACOESPEDIDO, VALORTOTALITENSPEDIDO, VALORDESCONTOPEDIDO, VALORFRETEPEDIDO, VALORTOTALPEDIDO, CODIGOEMPRESAFRETE, CODIGOLOJAFRETE, CODIGOPESSOAFRETE, CODIGOENDERECOPESSOAFRETE, CODIGOEMPRESAENTREGA, CODIGOLOJAENTREGA, CODIGOPESSOAENTREGA, CODIGOENDERECOPESSOAENTREGA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESANFSAIDA, CODIGOLOJANFSAIDA, CODIGONFSAIDA, SERIENFSAIDA, CODIGOPLANOPAGAMENTO, QUANTIDADEATENDIMENTOS) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopdv), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuspedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datapedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoespedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalitenspedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valordescontopedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfretepedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortotalpedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafrete), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafrete), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafrete), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoafrete), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaentrega), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaentrega), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaentrega), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaentrega), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresanfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojanfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigonfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.serienfsaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeatendimentos), 'null') || ')';

			sql_rolback = 'DELETE FROM PEDIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			campos_new   = campos_new || 'STATUSPEDIDO = ' || coalesce(quote_literal(new.statuspedido), 'null') || ', ';
			campos_new   = campos_new || 'DATAPEDIDO = ' || coalesce(quote_literal(new.datapedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOPESSOA = ' || coalesce(quote_literal(new.codigolojaenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESPEDIDO = ' || coalesce(quote_literal(new.observacoespedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALITENSPEDIDO = ' || coalesce(quote_literal(new.valortotalitenspedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORDESCONTOPEDIDO = ' || coalesce(quote_literal(new.valordescontopedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORFRETEPEDIDO = ' || coalesce(quote_literal(new.valorfretepedido), 'null') || ', ';
			campos_new   = campos_new || 'VALORTOTALPEDIDO = ' || coalesce(quote_literal(new.valortotalpedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFRETE = ' || coalesce(quote_literal(new.codigoempresafrete), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFRETE = ' || coalesce(quote_literal(new.codigolojafrete), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAFRETE = ' || coalesce(quote_literal(new.codigopessoafrete), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAFRETE = ' || coalesce(quote_literal(new.codigoenderecopessoafrete), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENTREGA = ' || coalesce(quote_literal(new.codigoempresaentrega), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENTREGA = ' || coalesce(quote_literal(new.codigolojaentrega), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAENTREGA = ' || coalesce(quote_literal(new.codigopessoaentrega), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAENTREGA = ' || coalesce(quote_literal(new.codigoenderecopessoaentrega), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESANFSAIDA = ' || coalesce(quote_literal(new.codigoempresanfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJANFSAIDA = ' || coalesce(quote_literal(new.codigolojanfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null') || ', ';
			campos_new   = campos_new || 'SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEATENDIMENTOS = ' || coalesce(quote_literal(new.quantidadeatendimentos), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null')  || ', ' || coalesce(quote_literal(new.codigopedido), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PEDIDO SET ';
			sql_rolback = 'UPDATE PEDIDO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigopdv &lt;&gt; old.codigopdv) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				sql_rolback = sql_rolback || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				campos_new  = campos_new  || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				campos_old  = campos_old  || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				first = false;
			end if;

			if (new.codigopedido &lt;&gt; old.codigopedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				campos_new  = campos_new  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				campos_old  = campos_old  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				first = false;
			end if;

			if (new.statuspedido &lt;&gt; old.statuspedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSPEDIDO = ' || coalesce(quote_literal(new.statuspedido), 'null');
				sql_rolback = sql_rolback || ' STATUSPEDIDO = ' || coalesce(quote_literal(old.statuspedido), 'null');
				campos_new  = campos_new  || ' STATUSPEDIDO = ' || coalesce(quote_literal(new.statuspedido), 'null');
				campos_old  = campos_old  || ' STATUSPEDIDO = ' || coalesce(quote_literal(old.statuspedido), 'null');
				first = false;
			end if;

			if (new.datapedido &lt;&gt; old.datapedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAPEDIDO = ' || coalesce(quote_literal(new.datapedido), 'null');
				sql_rolback = sql_rolback || ' DATAPEDIDO = ' || coalesce(quote_literal(old.datapedido), 'null');
				campos_new  = campos_new  || ' DATAPEDIDO = ' || coalesce(quote_literal(new.datapedido), 'null');
				campos_old  = campos_old  || ' DATAPEDIDO = ' || coalesce(quote_literal(old.datapedido), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecopessoa &lt;&gt; old.codigoempresaenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoa), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecopessoa &lt;&gt; old.codigolojaenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOPESSOA = ' || coalesce(quote_literal(new.codigolojaenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOPESSOA = ' || coalesce(quote_literal(old.codigolojaenderecopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOPESSOA = ' || coalesce(quote_literal(new.codigolojaenderecopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOPESSOA = ' || coalesce(quote_literal(old.codigolojaenderecopessoa), 'null');
				first = false;
			end if;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoa &lt;&gt; old.codigoenderecopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(new.codigoenderecopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null');
				first = false;
			end if;

			if (new.observacoespedido &lt;&gt; old.observacoespedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESPEDIDO = ' || coalesce(quote_literal(new.observacoespedido), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESPEDIDO = ' || coalesce(quote_literal(old.observacoespedido), 'null');
				campos_new  = campos_new  || ' OBSERVACOESPEDIDO = ' || coalesce(quote_literal(new.observacoespedido), 'null');
				campos_old  = campos_old  || ' OBSERVACOESPEDIDO = ' || coalesce(quote_literal(old.observacoespedido), 'null');
				first = false;
			end if;

			if (new.valortotalitenspedido &lt;&gt; old.valortotalitenspedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALITENSPEDIDO = ' || coalesce(quote_literal(new.valortotalitenspedido), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALITENSPEDIDO = ' || coalesce(quote_literal(old.valortotalitenspedido), 'null');
				campos_new  = campos_new  || ' VALORTOTALITENSPEDIDO = ' || coalesce(quote_literal(new.valortotalitenspedido), 'null');
				campos_old  = campos_old  || ' VALORTOTALITENSPEDIDO = ' || coalesce(quote_literal(old.valortotalitenspedido), 'null');
				first = false;
			end if;

			if (new.valordescontopedido &lt;&gt; old.valordescontopedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORDESCONTOPEDIDO = ' || coalesce(quote_literal(new.valordescontopedido), 'null');
				sql_rolback = sql_rolback || ' VALORDESCONTOPEDIDO = ' || coalesce(quote_literal(old.valordescontopedido), 'null');
				campos_new  = campos_new  || ' VALORDESCONTOPEDIDO = ' || coalesce(quote_literal(new.valordescontopedido), 'null');
				campos_old  = campos_old  || ' VALORDESCONTOPEDIDO = ' || coalesce(quote_literal(old.valordescontopedido), 'null');
				first = false;
			end if;

			if (new.valorfretepedido &lt;&gt; old.valorfretepedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFRETEPEDIDO = ' || coalesce(quote_literal(new.valorfretepedido), 'null');
				sql_rolback = sql_rolback || ' VALORFRETEPEDIDO = ' || coalesce(quote_literal(old.valorfretepedido), 'null');
				campos_new  = campos_new  || ' VALORFRETEPEDIDO = ' || coalesce(quote_literal(new.valorfretepedido), 'null');
				campos_old  = campos_old  || ' VALORFRETEPEDIDO = ' || coalesce(quote_literal(old.valorfretepedido), 'null');
				first = false;
			end if;

			if (new.valortotalpedido &lt;&gt; old.valortotalpedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTOTALPEDIDO = ' || coalesce(quote_literal(new.valortotalpedido), 'null');
				sql_rolback = sql_rolback || ' VALORTOTALPEDIDO = ' || coalesce(quote_literal(old.valortotalpedido), 'null');
				campos_new  = campos_new  || ' VALORTOTALPEDIDO = ' || coalesce(quote_literal(new.valortotalpedido), 'null');
				campos_old  = campos_old  || ' VALORTOTALPEDIDO = ' || coalesce(quote_literal(old.valortotalpedido), 'null');
				first = false;
			end if;

			if (new.codigoempresafrete &lt;&gt; old.codigoempresafrete) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFRETE = ' || coalesce(quote_literal(new.codigoempresafrete), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFRETE = ' || coalesce(quote_literal(old.codigoempresafrete), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFRETE = ' || coalesce(quote_literal(new.codigoempresafrete), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFRETE = ' || coalesce(quote_literal(old.codigoempresafrete), 'null');
				first = false;
			end if;

			if (new.codigolojafrete &lt;&gt; old.codigolojafrete) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFRETE = ' || coalesce(quote_literal(new.codigolojafrete), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFRETE = ' || coalesce(quote_literal(old.codigolojafrete), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFRETE = ' || coalesce(quote_literal(new.codigolojafrete), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFRETE = ' || coalesce(quote_literal(old.codigolojafrete), 'null');
				first = false;
			end if;

			if (new.codigopessoafrete &lt;&gt; old.codigopessoafrete) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFRETE = ' || coalesce(quote_literal(new.codigopessoafrete), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFRETE = ' || coalesce(quote_literal(old.codigopessoafrete), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFRETE = ' || coalesce(quote_literal(new.codigopessoafrete), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFRETE = ' || coalesce(quote_literal(old.codigopessoafrete), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoafrete &lt;&gt; old.codigoenderecopessoafrete) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAFRETE = ' || coalesce(quote_literal(new.codigoenderecopessoafrete), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAFRETE = ' || coalesce(quote_literal(old.codigoenderecopessoafrete), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAFRETE = ' || coalesce(quote_literal(new.codigoenderecopessoafrete), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAFRETE = ' || coalesce(quote_literal(old.codigoenderecopessoafrete), 'null');
				first = false;
			end if;

			if (new.codigoempresaentrega &lt;&gt; old.codigoempresaentrega) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENTREGA = ' || coalesce(quote_literal(new.codigoempresaentrega), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENTREGA = ' || coalesce(quote_literal(old.codigoempresaentrega), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENTREGA = ' || coalesce(quote_literal(new.codigoempresaentrega), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENTREGA = ' || coalesce(quote_literal(old.codigoempresaentrega), 'null');
				first = false;
			end if;

			if (new.codigolojaentrega &lt;&gt; old.codigolojaentrega) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENTREGA = ' || coalesce(quote_literal(new.codigolojaentrega), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENTREGA = ' || coalesce(quote_literal(old.codigolojaentrega), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENTREGA = ' || coalesce(quote_literal(new.codigolojaentrega), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENTREGA = ' || coalesce(quote_literal(old.codigolojaentrega), 'null');
				first = false;
			end if;

			if (new.codigopessoaentrega &lt;&gt; old.codigopessoaentrega) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAENTREGA = ' || coalesce(quote_literal(new.codigopessoaentrega), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAENTREGA = ' || coalesce(quote_literal(old.codigopessoaentrega), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAENTREGA = ' || coalesce(quote_literal(new.codigopessoaentrega), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAENTREGA = ' || coalesce(quote_literal(old.codigopessoaentrega), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaentrega &lt;&gt; old.codigoenderecopessoaentrega) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAENTREGA = ' || coalesce(quote_literal(new.codigoenderecopessoaentrega), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAENTREGA = ' || coalesce(quote_literal(old.codigoenderecopessoaentrega), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAENTREGA = ' || coalesce(quote_literal(new.codigoenderecopessoaentrega), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAENTREGA = ' || coalesce(quote_literal(old.codigoenderecopessoaentrega), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedor &lt;&gt; old.codigoempresavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				first = false;
			end if;

			if (new.codigolojavendedor &lt;&gt; old.codigolojavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				first = false;
			end if;

			if (new.codigovendedor &lt;&gt; old.codigovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresanfsaida &lt;&gt; old.codigoempresanfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESANFSAIDA = ' || coalesce(quote_literal(new.codigoempresanfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESANFSAIDA = ' || coalesce(quote_literal(old.codigoempresanfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESANFSAIDA = ' || coalesce(quote_literal(new.codigoempresanfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESANFSAIDA = ' || coalesce(quote_literal(old.codigoempresanfsaida), 'null');
				first = false;
			end if;

			if (new.codigolojanfsaida &lt;&gt; old.codigolojanfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJANFSAIDA = ' || coalesce(quote_literal(new.codigolojanfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJANFSAIDA = ' || coalesce(quote_literal(old.codigolojanfsaida), 'null');
				campos_new  = campos_new  || ' CODIGOLOJANFSAIDA = ' || coalesce(quote_literal(new.codigolojanfsaida), 'null');
				campos_old  = campos_old  || ' CODIGOLOJANFSAIDA = ' || coalesce(quote_literal(old.codigolojanfsaida), 'null');
				first = false;
			end if;

			if (new.codigonfsaida &lt;&gt; old.codigonfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null');
				sql_rolback = sql_rolback || ' CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null');
				campos_new  = campos_new  || ' CODIGONFSAIDA = ' || coalesce(quote_literal(new.codigonfsaida), 'null');
				campos_old  = campos_old  || ' CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null');
				first = false;
			end if;

			if (new.serienfsaida &lt;&gt; old.serienfsaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
				sql_rolback = sql_rolback || ' SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');
				campos_new  = campos_new  || ' SERIENFSAIDA = ' || coalesce(quote_literal(new.serienfsaida), 'null');
				campos_old  = campos_old  || ' SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null');
				first = false;
			end if;

			if (new.codigoplanopagamento &lt;&gt; old.codigoplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');
				first = false;
			end if;

			if (new.quantidadeatendimentos &lt;&gt; old.quantidadeatendimentos) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEATENDIMENTOS = ' || coalesce(quote_literal(new.quantidadeatendimentos), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEATENDIMENTOS = ' || coalesce(quote_literal(old.quantidadeatendimentos), 'null');
				campos_new  = campos_new  || ' QUANTIDADEATENDIMENTOS = ' || coalesce(quote_literal(new.quantidadeatendimentos), 'null');
				campos_old  = campos_old  || ' QUANTIDADEATENDIMENTOS = ' || coalesce(quote_literal(old.quantidadeatendimentos), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null')  || ', ' || coalesce(quote_literal(new.codigopedido), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PEDIDO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPDV, CODIGOPEDIDO, STATUSPEDIDO, DATAPEDIDO, CODIGOEMPRESAENDERECOPESSOA, CODIGOLOJAENDERECOPESSOA, CODIGOPESSOA, CODIGOENDERECOPESSOA, OBSERVACOESPEDIDO, VALORTOTALITENSPEDIDO, VALORDESCONTOPEDIDO, VALORFRETEPEDIDO, VALORTOTALPEDIDO, CODIGOEMPRESAFRETE, CODIGOLOJAFRETE, CODIGOPESSOAFRETE, CODIGOENDERECOPESSOAFRETE, CODIGOEMPRESAENTREGA, CODIGOLOJAENTREGA, CODIGOPESSOAENTREGA, CODIGOENDERECOPESSOAENTREGA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESANFSAIDA, CODIGOLOJANFSAIDA, CODIGONFSAIDA, SERIENFSAIDA, CODIGOPLANOPAGAMENTO, QUANTIDADEATENDIMENTOS) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopdv), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuspedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datapedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoespedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalitenspedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valordescontopedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfretepedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortotalpedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafrete), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafrete), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafrete), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoafrete), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaentrega), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaentrega), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaentrega), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaentrega), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresanfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojanfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigonfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.serienfsaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeatendimentos), 'null') || ')';

			sql_replica = 'DELETE FROM PEDIDO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			campos_old  = campos_old || 'STATUSPEDIDO = ' || coalesce(quote_literal(old.statuspedido), 'null') || ', ';
			campos_old  = campos_old || 'DATAPEDIDO = ' || coalesce(quote_literal(old.datapedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOPESSOA = ' || coalesce(quote_literal(old.codigolojaenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOA = ' || coalesce(quote_literal(old.codigoenderecopessoa), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESPEDIDO = ' || coalesce(quote_literal(old.observacoespedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALITENSPEDIDO = ' || coalesce(quote_literal(old.valortotalitenspedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORDESCONTOPEDIDO = ' || coalesce(quote_literal(old.valordescontopedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORFRETEPEDIDO = ' || coalesce(quote_literal(old.valorfretepedido), 'null') || ', ';
			campos_old  = campos_old || 'VALORTOTALPEDIDO = ' || coalesce(quote_literal(old.valortotalpedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFRETE = ' || coalesce(quote_literal(old.codigoempresafrete), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFRETE = ' || coalesce(quote_literal(old.codigolojafrete), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAFRETE = ' || coalesce(quote_literal(old.codigopessoafrete), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAFRETE = ' || coalesce(quote_literal(old.codigoenderecopessoafrete), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENTREGA = ' || coalesce(quote_literal(old.codigoempresaentrega), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENTREGA = ' || coalesce(quote_literal(old.codigolojaentrega), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAENTREGA = ' || coalesce(quote_literal(old.codigopessoaentrega), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAENTREGA = ' || coalesce(quote_literal(old.codigoenderecopessoaentrega), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESANFSAIDA = ' || coalesce(quote_literal(old.codigoempresanfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJANFSAIDA = ' || coalesce(quote_literal(old.codigolojanfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONFSAIDA = ' || coalesce(quote_literal(old.codigonfsaida), 'null') || ', ';
			campos_old  = campos_old || 'SERIENFSAIDA = ' || coalesce(quote_literal(old.serienfsaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEATENDIMENTOS = ' || coalesce(quote_literal(old.quantidadeatendimentos), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigopdv), 'null')  || ', ' || coalesce(quote_literal(old.codigopedido), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pedido', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pedido', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pedido', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pedidocontareceber()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pedidocontareceber() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PEDIDOCONTARECEBER (CODIGOEMPRESA, CODIGOLOJA, CODIGOPEDIDO, CODIGOEMPRESACONTARECEBER, CODIGOLOJACONTARECEBER, CODIGOCONTARECEBER, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOPDV) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontareceber), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopdv), 'null') || ')';

			sql_rolback = 'DELETE FROM PEDIDOCONTARECEBER WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ' AND CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopedido), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigocontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PEDIDOCONTARECEBER SET ';
			sql_rolback = 'UPDATE PEDIDOCONTARECEBER SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigopedido &lt;&gt; old.codigopedido) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				sql_rolback = sql_rolback || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				campos_new  = campos_new  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null');
				campos_old  = campos_old  || ' CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null');
				first = false;
			end if;

			if (new.codigoempresacontareceber &lt;&gt; old.codigoempresacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null');
				first = false;
			end if;

			if (new.codigolojacontareceber &lt;&gt; old.codigolojacontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null');
				first = false;
			end if;

			if (new.codigocontareceber &lt;&gt; old.codigocontareceber) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');
				campos_new  = campos_new  || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null');
				campos_old  = campos_old  || ' CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigopdv &lt;&gt; old.codigopdv) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				sql_rolback = sql_rolback || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				campos_new  = campos_new  || ' CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
				campos_old  = campos_old  || ' CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ' AND CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(new.codigopedido), 'null') || ' AND CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(new.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(new.codigocontareceber), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(new.codigopdv), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopedido), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigocontareceber), 'null')  || ', ' || coalesce(quote_literal(new.codigopdv), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PEDIDOCONTARECEBER (CODIGOEMPRESA, CODIGOLOJA, CODIGOPEDIDO, CODIGOEMPRESACONTARECEBER, CODIGOLOJACONTARECEBER, CODIGOCONTARECEBER, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOPDV) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontareceber), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopdv), 'null') || ')';

			sql_replica = 'DELETE FROM PEDIDOCONTARECEBER WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null') || ' AND CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null') || ' AND CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null') || ' AND CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null') || ' AND CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPEDIDO = ' || coalesce(quote_literal(old.codigopedido), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTARECEBER = ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTARECEBER = ' || coalesce(quote_literal(old.codigolojacontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTARECEBER = ' || coalesce(quote_literal(old.codigocontareceber), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPDV = ' || coalesce(quote_literal(old.codigopdv), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigopedido), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresacontareceber), 'null')  || ', ' || coalesce(quote_literal(old.codigolojacontareceber), 'null')  || ', ' || coalesce(quote_literal(old.codigocontareceber), 'null')  || ', ' || coalesce(quote_literal(old.codigopdv), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pedidocontareceber', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pedidocontareceber', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pedidocontareceber', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_perfil()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_perfil() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PERFIL (CODIGOPERFIL, CODIGOEMPRESA, CODIGOLOJA, NOMEPERFIL, DESCRICAOPERFIL, CODIGOMENU, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeperfil), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoperfil), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomenu), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PERFIL WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPERFIL = ' || coalesce(quote_literal(new.nomeperfil), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOPERFIL = ' || coalesce(quote_literal(new.descricaoperfil), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PERFIL SET ';
			sql_rolback = 'UPDATE PERFIL SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoperfil &lt;&gt; old.codigoperfil) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				sql_rolback = sql_rolback || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				campos_new  = campos_new  || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				campos_old  = campos_old  || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.nomeperfil &lt;&gt; old.nomeperfil) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPERFIL = ' || coalesce(quote_literal(new.nomeperfil), 'null');
				sql_rolback = sql_rolback || ' NOMEPERFIL = ' || coalesce(quote_literal(old.nomeperfil), 'null');
				campos_new  = campos_new  || ' NOMEPERFIL = ' || coalesce(quote_literal(new.nomeperfil), 'null');
				campos_old  = campos_old  || ' NOMEPERFIL = ' || coalesce(quote_literal(old.nomeperfil), 'null');
				first = false;
			end if;

			if (new.descricaoperfil &lt;&gt; old.descricaoperfil) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOPERFIL = ' || coalesce(quote_literal(new.descricaoperfil), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOPERFIL = ' || coalesce(quote_literal(old.descricaoperfil), 'null');
				campos_new  = campos_new  || ' DESCRICAOPERFIL = ' || coalesce(quote_literal(new.descricaoperfil), 'null');
				campos_old  = campos_old  || ' DESCRICAOPERFIL = ' || coalesce(quote_literal(old.descricaoperfil), 'null');
				first = false;
			end if;

			if (new.codigomenu &lt;&gt; old.codigomenu) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');
				sql_rolback = sql_rolback || ' CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null');
				campos_new  = campos_new  || ' CODIGOMENU = ' || coalesce(quote_literal(new.codigomenu), 'null');
				campos_old  = campos_old  || ' CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PERFIL (CODIGOPERFIL, CODIGOEMPRESA, CODIGOLOJA, NOMEPERFIL, DESCRICAOPERFIL, CODIGOMENU, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeperfil), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoperfil), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomenu), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PERFIL WHERE CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPERFIL = ' || coalesce(quote_literal(old.nomeperfil), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOPERFIL = ' || coalesce(quote_literal(old.descricaoperfil), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMENU = ' || coalesce(quote_literal(old.codigomenu), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'perfil', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('perfil', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('perfil', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_perfilusuario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_perfilusuario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PERFILUSUARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPERFIL, USUARIOCODIGOUSUARIO, USUARIOCODIGOEMPRESA, USUARIOCODIGOLOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.usuariocodigousuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.usuariocodigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.usuariocodigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PERFILUSUARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(new.usuariocodigousuario), 'null') || ' AND USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null') || ' AND USUARIOCODIGOLOJA = ' || coalesce(quote_literal(new.usuariocodigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			campos_new   = campos_new || 'USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(new.usuariocodigousuario), 'null') || ', ';
			campos_new   = campos_new || 'USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'USUARIOCODIGOLOJA = ' || coalesce(quote_literal(new.usuariocodigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.usuariocodigousuario), 'null')  || ', ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.usuariocodigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PERFILUSUARIO SET ';
			sql_rolback = 'UPDATE PERFILUSUARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoperfil &lt;&gt; old.codigoperfil) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				sql_rolback = sql_rolback || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				campos_new  = campos_new  || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				campos_old  = campos_old  || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				first = false;
			end if;

			if (new.usuariocodigousuario &lt;&gt; old.usuariocodigousuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(new.usuariocodigousuario), 'null');
				sql_rolback = sql_rolback || ' USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(old.usuariocodigousuario), 'null');
				campos_new  = campos_new  || ' USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(new.usuariocodigousuario), 'null');
				campos_old  = campos_old  || ' USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(old.usuariocodigousuario), 'null');
				first = false;
			end if;

			if (new.usuariocodigoempresa &lt;&gt; old.usuariocodigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null');
				sql_rolback = sql_rolback || ' USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(old.usuariocodigoempresa), 'null');
				campos_new  = campos_new  || ' USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null');
				campos_old  = campos_old  || ' USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(old.usuariocodigoempresa), 'null');
				first = false;
			end if;

			if (new.usuariocodigoloja &lt;&gt; old.usuariocodigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' USUARIOCODIGOLOJA = ' || coalesce(quote_literal(new.usuariocodigoloja), 'null');
				sql_rolback = sql_rolback || ' USUARIOCODIGOLOJA = ' || coalesce(quote_literal(old.usuariocodigoloja), 'null');
				campos_new  = campos_new  || ' USUARIOCODIGOLOJA = ' || coalesce(quote_literal(new.usuariocodigoloja), 'null');
				campos_old  = campos_old  || ' USUARIOCODIGOLOJA = ' || coalesce(quote_literal(old.usuariocodigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(new.usuariocodigousuario), 'null') || ' AND USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null') || ' AND USUARIOCODIGOLOJA = ' || coalesce(quote_literal(new.usuariocodigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(new.usuariocodigousuario), 'null') || ' AND USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null') || ' AND USUARIOCODIGOLOJA = ' || coalesce(quote_literal(new.usuariocodigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.usuariocodigousuario), 'null')  || ', ' || coalesce(quote_literal(new.usuariocodigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.usuariocodigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PERFILUSUARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPERFIL, USUARIOCODIGOUSUARIO, USUARIOCODIGOEMPRESA, USUARIOCODIGOLOJA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.usuariocodigousuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.usuariocodigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.usuariocodigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PERFILUSUARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ' AND USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(old.usuariocodigousuario), 'null') || ' AND USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(old.usuariocodigoempresa), 'null') || ' AND USUARIOCODIGOLOJA = ' || coalesce(quote_literal(old.usuariocodigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			campos_old  = campos_old || 'USUARIOCODIGOUSUARIO = ' || coalesce(quote_literal(old.usuariocodigousuario), 'null') || ', ';
			campos_old  = campos_old || 'USUARIOCODIGOEMPRESA = ' || coalesce(quote_literal(old.usuariocodigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'USUARIOCODIGOLOJA = ' || coalesce(quote_literal(old.usuariocodigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(old.usuariocodigousuario), 'null')  || ', ' || coalesce(quote_literal(old.usuariocodigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.usuariocodigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'perfilusuario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('perfilusuario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('perfilusuario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_permissaoespecial()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_permissaoespecial() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PERMISSAOESPECIAL (CODIGOOPERMISSAOESPECIAL, DESCRICAOPERMISSAOESPECIAL, VALORESPERMISSAOESPECIAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaopermissaoespecial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorespermissaoespecial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PERMISSAOESPECIAL WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.descricaopermissaoespecial), 'null') || ', ';
			campos_new   = campos_new || 'VALORESPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.valorespermissaoespecial), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoopermissaoespecial), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PERMISSAOESPECIAL SET ';
			sql_rolback = 'UPDATE PERMISSAOESPECIAL SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoopermissaoespecial &lt;&gt; old.codigoopermissaoespecial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');
				sql_rolback = sql_rolback || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null');
				campos_new  = campos_new  || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');
				campos_old  = campos_old  || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null');
				first = false;
			end if;

			if (new.descricaopermissaoespecial &lt;&gt; old.descricaopermissaoespecial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.descricaopermissaoespecial), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.descricaopermissaoespecial), 'null');
				campos_new  = campos_new  || ' DESCRICAOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.descricaopermissaoespecial), 'null');
				campos_old  = campos_old  || ' DESCRICAOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.descricaopermissaoespecial), 'null');
				first = false;
			end if;

			if (new.valorespermissaoespecial &lt;&gt; old.valorespermissaoespecial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORESPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.valorespermissaoespecial), 'null');
				sql_rolback = sql_rolback || ' VALORESPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.valorespermissaoespecial), 'null');
				campos_new  = campos_new  || ' VALORESPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.valorespermissaoespecial), 'null');
				campos_old  = campos_old  || ' VALORESPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.valorespermissaoespecial), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');

			sql_chave = coalesce(quote_literal(new.codigoopermissaoespecial), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PERMISSAOESPECIAL (CODIGOOPERMISSAOESPECIAL, DESCRICAOPERMISSAOESPECIAL, VALORESPERMISSAOESPECIAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoopermissaoespecial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaopermissaoespecial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorespermissaoespecial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PERMISSAOESPECIAL WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.descricaopermissaoespecial), 'null') || ', ';
			campos_old  = campos_old || 'VALORESPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.valorespermissaoespecial), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoopermissaoespecial), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'permissaoespecial', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoespecial', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoespecial', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_permissaoespecialusuario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_permissaoespecialusuario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PERMISSAOESPECIALUSUARIO (CODIGOOPERMISSAOESPECIAL, CODIGOEMPRESA, CODIGOLOJA, CODIGOUSUARIO, VALORPERMISSAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorpermissao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PERMISSAOESPECIALUSUARIO WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			campos_new   = campos_new || 'VALORPERMISSAO = ' || coalesce(quote_literal(new.valorpermissao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoopermissaoespecial), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigousuario), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PERMISSAOESPECIALUSUARIO SET ';
			sql_rolback = 'UPDATE PERMISSAOESPECIALUSUARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoopermissaoespecial &lt;&gt; old.codigoopermissaoespecial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');
				sql_rolback = sql_rolback || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null');
				campos_new  = campos_new  || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null');
				campos_old  = campos_old  || ' CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigousuario &lt;&gt; old.codigousuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				first = false;
			end if;

			if (new.valorpermissao &lt;&gt; old.valorpermissao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPERMISSAO = ' || coalesce(quote_literal(new.valorpermissao), 'null');
				sql_rolback = sql_rolback || ' VALORPERMISSAO = ' || coalesce(quote_literal(old.valorpermissao), 'null');
				campos_new  = campos_new  || ' VALORPERMISSAO = ' || coalesce(quote_literal(new.valorpermissao), 'null');
				campos_old  = campos_old  || ' VALORPERMISSAO = ' || coalesce(quote_literal(old.valorpermissao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(new.codigoopermissaoespecial), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');

			sql_chave = coalesce(quote_literal(new.codigoopermissaoespecial), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigousuario), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PERMISSAOESPECIALUSUARIO (CODIGOOPERMISSAOESPECIAL, CODIGOEMPRESA, CODIGOLOJA, CODIGOUSUARIO, VALORPERMISSAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoopermissaoespecial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorpermissao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PERMISSAOESPECIALUSUARIO WHERE CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOOPERMISSAOESPECIAL = ' || coalesce(quote_literal(old.codigoopermissaoespecial), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			campos_old  = campos_old || 'VALORPERMISSAO = ' || coalesce(quote_literal(old.valorpermissao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoopermissaoespecial), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigousuario), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'permissaoespecialusuario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoespecialusuario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoespecialusuario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_permissaoperfilacaoobjeto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_permissaoperfilacaoobjeto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PERMISSAOPERFILACAOOBJETO (CODIGOPERFIL, CODIGOEMPRESA, CODIGOLOJA, CODIGOOBJETO, CODIGOACAOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoacaoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PERMISSAOPERFILACAOOBJETO WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoobjeto), 'null')  || ', ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PERMISSAOPERFILACAOOBJETO SET ';
			sql_rolback = 'UPDATE PERMISSAOPERFILACAOOBJETO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoperfil &lt;&gt; old.codigoperfil) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				sql_rolback = sql_rolback || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				campos_new  = campos_new  || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				campos_old  = campos_old  || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoobjeto &lt;&gt; old.codigoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				first = false;
			end if;

			if (new.codigoacaoobjeto &lt;&gt; old.codigoacaoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoobjeto), 'null')  || ', ' || coalesce(quote_literal(new.codigoacaoobjeto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PERMISSAOPERFILACAOOBJETO (CODIGOPERFIL, CODIGOEMPRESA, CODIGOLOJA, CODIGOOBJETO, CODIGOACAOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoacaoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PERMISSAOPERFILACAOOBJETO WHERE CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ' AND CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOACAOOBJETO = ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoobjeto), 'null')  || ', ' || coalesce(quote_literal(old.codigoacaoobjeto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'permissaoperfilacaoobjeto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoperfilacaoobjeto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoperfilacaoobjeto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_permissaoperfilobjeto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_permissaoperfilobjeto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PERMISSAOPERFILOBJETO (CODIGOPERFIL, CODIGOEMPRESA, CODIGOLOJA, CODIGOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PERMISSAOPERFILOBJETO WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoobjeto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PERMISSAOPERFILOBJETO SET ';
			sql_rolback = 'UPDATE PERMISSAOPERFILOBJETO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoperfil &lt;&gt; old.codigoperfil) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				sql_rolback = sql_rolback || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				campos_new  = campos_new  || ' CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null');
				campos_old  = campos_old  || ' CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoobjeto &lt;&gt; old.codigoobjeto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				sql_rolback = sql_rolback || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				campos_new  = campos_new  || ' CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
				campos_old  = campos_old  || ' CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPERFIL = ' || coalesce(quote_literal(new.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(new.codigoobjeto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoobjeto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PERMISSAOPERFILOBJETO (CODIGOPERFIL, CODIGOEMPRESA, CODIGOLOJA, CODIGOOBJETO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PERMISSAOPERFILOBJETO WHERE CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPERFIL = ' || coalesce(quote_literal(old.codigoperfil), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOOBJETO = ' || coalesce(quote_literal(old.codigoobjeto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoperfil), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoobjeto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'permissaoperfilobjeto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoperfilobjeto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('permissaoperfilobjeto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pessoa()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pessoa() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PESSOA (CODIGOPESSOA, CODIGOEMPRESA, CODIGOLOJA, NOMERAZAOSOCIALPESSOA, EMAILPESSOA, OBSERVACOESPESSOA, NATUREZAPESSOA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomerazaosocialpessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.emailpessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoespessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.naturezapessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PESSOA WHERE CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NOMERAZAOSOCIALPESSOA = ' || coalesce(quote_literal(new.nomerazaosocialpessoa), 'null') || ', ';
			campos_new   = campos_new || 'EMAILPESSOA = ' || coalesce(quote_literal(new.emailpessoa), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESPESSOA = ' || coalesce(quote_literal(new.observacoespessoa), 'null') || ', ';
			campos_new   = campos_new || 'NATUREZAPESSOA = ' || coalesce(quote_literal(new.naturezapessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PESSOA SET ';
			sql_rolback = 'UPDATE PESSOA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.nomerazaosocialpessoa &lt;&gt; old.nomerazaosocialpessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMERAZAOSOCIALPESSOA = ' || coalesce(quote_literal(new.nomerazaosocialpessoa), 'null');
				sql_rolback = sql_rolback || ' NOMERAZAOSOCIALPESSOA = ' || coalesce(quote_literal(old.nomerazaosocialpessoa), 'null');
				campos_new  = campos_new  || ' NOMERAZAOSOCIALPESSOA = ' || coalesce(quote_literal(new.nomerazaosocialpessoa), 'null');
				campos_old  = campos_old  || ' NOMERAZAOSOCIALPESSOA = ' || coalesce(quote_literal(old.nomerazaosocialpessoa), 'null');
				first = false;
			end if;

			if (new.emailpessoa &lt;&gt; old.emailpessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EMAILPESSOA = ' || coalesce(quote_literal(new.emailpessoa), 'null');
				sql_rolback = sql_rolback || ' EMAILPESSOA = ' || coalesce(quote_literal(old.emailpessoa), 'null');
				campos_new  = campos_new  || ' EMAILPESSOA = ' || coalesce(quote_literal(new.emailpessoa), 'null');
				campos_old  = campos_old  || ' EMAILPESSOA = ' || coalesce(quote_literal(old.emailpessoa), 'null');
				first = false;
			end if;

			if (new.observacoespessoa &lt;&gt; old.observacoespessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESPESSOA = ' || coalesce(quote_literal(new.observacoespessoa), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESPESSOA = ' || coalesce(quote_literal(old.observacoespessoa), 'null');
				campos_new  = campos_new  || ' OBSERVACOESPESSOA = ' || coalesce(quote_literal(new.observacoespessoa), 'null');
				campos_old  = campos_old  || ' OBSERVACOESPESSOA = ' || coalesce(quote_literal(old.observacoespessoa), 'null');
				first = false;
			end if;

			if (new.naturezapessoa &lt;&gt; old.naturezapessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NATUREZAPESSOA = ' || coalesce(quote_literal(new.naturezapessoa), 'null');
				sql_rolback = sql_rolback || ' NATUREZAPESSOA = ' || coalesce(quote_literal(old.naturezapessoa), 'null');
				campos_new  = campos_new  || ' NATUREZAPESSOA = ' || coalesce(quote_literal(new.naturezapessoa), 'null');
				campos_old  = campos_old  || ' NATUREZAPESSOA = ' || coalesce(quote_literal(old.naturezapessoa), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PESSOA (CODIGOPESSOA, CODIGOEMPRESA, CODIGOLOJA, NOMERAZAOSOCIALPESSOA, EMAILPESSOA, OBSERVACOESPESSOA, NATUREZAPESSOA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomerazaosocialpessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.emailpessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoespessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.naturezapessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PESSOA WHERE CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NOMERAZAOSOCIALPESSOA = ' || coalesce(quote_literal(old.nomerazaosocialpessoa), 'null') || ', ';
			campos_old  = campos_old || 'EMAILPESSOA = ' || coalesce(quote_literal(old.emailpessoa), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESPESSOA = ' || coalesce(quote_literal(old.observacoespessoa), 'null') || ', ';
			campos_old  = campos_old || 'NATUREZAPESSOA = ' || coalesce(quote_literal(old.naturezapessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pessoa', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pessoa', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pessoa', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_pessoafisica()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_pessoafisica() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PESSOAFISICA (CODIGOPESSOAFISICA, CODIGOEMPRESA, CODIGOLOJA, DATANASCIMENTOPESSOAFISICA, RGPESSOAFISICA, NOMEMAEPESSOAFISICA, NOMEPAIPESSOAFISICA, NOMECONJUGUEPESSOAFISICA, SEXOPESSOAFISICA, LOCALTRABALHOPESSOAFISICA, DATAADMISSAOPESSOAFISICA, CARGOPESSOAFISICA, RENDIMENTOSPESSOAFISICA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datanascimentopessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.rgpessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomemaepessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomepaipessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeconjuguepessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sexopessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.localtrabalhopessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataadmissaopessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cargopessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.rendimentospessoafisica), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PESSOAFISICA WHERE CODIGOPESSOAFISICA = ' || coalesce(quote_literal(new.codigopessoafisica), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPESSOAFISICA = ' || coalesce(quote_literal(new.codigopessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATANASCIMENTOPESSOAFISICA = ' || coalesce(quote_literal(new.datanascimentopessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'RGPESSOAFISICA = ' || coalesce(quote_literal(new.rgpessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'NOMEMAEPESSOAFISICA = ' || coalesce(quote_literal(new.nomemaepessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPAIPESSOAFISICA = ' || coalesce(quote_literal(new.nomepaipessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'NOMECONJUGUEPESSOAFISICA = ' || coalesce(quote_literal(new.nomeconjuguepessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'SEXOPESSOAFISICA = ' || coalesce(quote_literal(new.sexopessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'LOCALTRABALHOPESSOAFISICA = ' || coalesce(quote_literal(new.localtrabalhopessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'DATAADMISSAOPESSOAFISICA = ' || coalesce(quote_literal(new.dataadmissaopessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'CARGOPESSOAFISICA = ' || coalesce(quote_literal(new.cargopessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'RENDIMENTOSPESSOAFISICA = ' || coalesce(quote_literal(new.rendimentospessoafisica), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigopessoafisica), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PESSOAFISICA SET ';
			sql_rolback = 'UPDATE PESSOAFISICA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigopessoafisica &lt;&gt; old.codigopessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFISICA = ' || coalesce(quote_literal(new.codigopessoafisica), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFISICA = ' || coalesce(quote_literal(old.codigopessoafisica), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFISICA = ' || coalesce(quote_literal(new.codigopessoafisica), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFISICA = ' || coalesce(quote_literal(old.codigopessoafisica), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datanascimentopessoafisica &lt;&gt; old.datanascimentopessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATANASCIMENTOPESSOAFISICA = ' || coalesce(quote_literal(new.datanascimentopessoafisica), 'null');
				sql_rolback = sql_rolback || ' DATANASCIMENTOPESSOAFISICA = ' || coalesce(quote_literal(old.datanascimentopessoafisica), 'null');
				campos_new  = campos_new  || ' DATANASCIMENTOPESSOAFISICA = ' || coalesce(quote_literal(new.datanascimentopessoafisica), 'null');
				campos_old  = campos_old  || ' DATANASCIMENTOPESSOAFISICA = ' || coalesce(quote_literal(old.datanascimentopessoafisica), 'null');
				first = false;
			end if;

			if (new.rgpessoafisica &lt;&gt; old.rgpessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' RGPESSOAFISICA = ' || coalesce(quote_literal(new.rgpessoafisica), 'null');
				sql_rolback = sql_rolback || ' RGPESSOAFISICA = ' || coalesce(quote_literal(old.rgpessoafisica), 'null');
				campos_new  = campos_new  || ' RGPESSOAFISICA = ' || coalesce(quote_literal(new.rgpessoafisica), 'null');
				campos_old  = campos_old  || ' RGPESSOAFISICA = ' || coalesce(quote_literal(old.rgpessoafisica), 'null');
				first = false;
			end if;

			if (new.nomemaepessoafisica &lt;&gt; old.nomemaepessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEMAEPESSOAFISICA = ' || coalesce(quote_literal(new.nomemaepessoafisica), 'null');
				sql_rolback = sql_rolback || ' NOMEMAEPESSOAFISICA = ' || coalesce(quote_literal(old.nomemaepessoafisica), 'null');
				campos_new  = campos_new  || ' NOMEMAEPESSOAFISICA = ' || coalesce(quote_literal(new.nomemaepessoafisica), 'null');
				campos_old  = campos_old  || ' NOMEMAEPESSOAFISICA = ' || coalesce(quote_literal(old.nomemaepessoafisica), 'null');
				first = false;
			end if;

			if (new.nomepaipessoafisica &lt;&gt; old.nomepaipessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPAIPESSOAFISICA = ' || coalesce(quote_literal(new.nomepaipessoafisica), 'null');
				sql_rolback = sql_rolback || ' NOMEPAIPESSOAFISICA = ' || coalesce(quote_literal(old.nomepaipessoafisica), 'null');
				campos_new  = campos_new  || ' NOMEPAIPESSOAFISICA = ' || coalesce(quote_literal(new.nomepaipessoafisica), 'null');
				campos_old  = campos_old  || ' NOMEPAIPESSOAFISICA = ' || coalesce(quote_literal(old.nomepaipessoafisica), 'null');
				first = false;
			end if;

			if (new.nomeconjuguepessoafisica &lt;&gt; old.nomeconjuguepessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMECONJUGUEPESSOAFISICA = ' || coalesce(quote_literal(new.nomeconjuguepessoafisica), 'null');
				sql_rolback = sql_rolback || ' NOMECONJUGUEPESSOAFISICA = ' || coalesce(quote_literal(old.nomeconjuguepessoafisica), 'null');
				campos_new  = campos_new  || ' NOMECONJUGUEPESSOAFISICA = ' || coalesce(quote_literal(new.nomeconjuguepessoafisica), 'null');
				campos_old  = campos_old  || ' NOMECONJUGUEPESSOAFISICA = ' || coalesce(quote_literal(old.nomeconjuguepessoafisica), 'null');
				first = false;
			end if;

			if (new.sexopessoafisica &lt;&gt; old.sexopessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEXOPESSOAFISICA = ' || coalesce(quote_literal(new.sexopessoafisica), 'null');
				sql_rolback = sql_rolback || ' SEXOPESSOAFISICA = ' || coalesce(quote_literal(old.sexopessoafisica), 'null');
				campos_new  = campos_new  || ' SEXOPESSOAFISICA = ' || coalesce(quote_literal(new.sexopessoafisica), 'null');
				campos_old  = campos_old  || ' SEXOPESSOAFISICA = ' || coalesce(quote_literal(old.sexopessoafisica), 'null');
				first = false;
			end if;

			if (new.localtrabalhopessoafisica &lt;&gt; old.localtrabalhopessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' LOCALTRABALHOPESSOAFISICA = ' || coalesce(quote_literal(new.localtrabalhopessoafisica), 'null');
				sql_rolback = sql_rolback || ' LOCALTRABALHOPESSOAFISICA = ' || coalesce(quote_literal(old.localtrabalhopessoafisica), 'null');
				campos_new  = campos_new  || ' LOCALTRABALHOPESSOAFISICA = ' || coalesce(quote_literal(new.localtrabalhopessoafisica), 'null');
				campos_old  = campos_old  || ' LOCALTRABALHOPESSOAFISICA = ' || coalesce(quote_literal(old.localtrabalhopessoafisica), 'null');
				first = false;
			end if;

			if (new.dataadmissaopessoafisica &lt;&gt; old.dataadmissaopessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAADMISSAOPESSOAFISICA = ' || coalesce(quote_literal(new.dataadmissaopessoafisica), 'null');
				sql_rolback = sql_rolback || ' DATAADMISSAOPESSOAFISICA = ' || coalesce(quote_literal(old.dataadmissaopessoafisica), 'null');
				campos_new  = campos_new  || ' DATAADMISSAOPESSOAFISICA = ' || coalesce(quote_literal(new.dataadmissaopessoafisica), 'null');
				campos_old  = campos_old  || ' DATAADMISSAOPESSOAFISICA = ' || coalesce(quote_literal(old.dataadmissaopessoafisica), 'null');
				first = false;
			end if;

			if (new.cargopessoafisica &lt;&gt; old.cargopessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CARGOPESSOAFISICA = ' || coalesce(quote_literal(new.cargopessoafisica), 'null');
				sql_rolback = sql_rolback || ' CARGOPESSOAFISICA = ' || coalesce(quote_literal(old.cargopessoafisica), 'null');
				campos_new  = campos_new  || ' CARGOPESSOAFISICA = ' || coalesce(quote_literal(new.cargopessoafisica), 'null');
				campos_old  = campos_old  || ' CARGOPESSOAFISICA = ' || coalesce(quote_literal(old.cargopessoafisica), 'null');
				first = false;
			end if;

			if (new.rendimentospessoafisica &lt;&gt; old.rendimentospessoafisica) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' RENDIMENTOSPESSOAFISICA = ' || coalesce(quote_literal(new.rendimentospessoafisica), 'null');
				sql_rolback = sql_rolback || ' RENDIMENTOSPESSOAFISICA = ' || coalesce(quote_literal(old.rendimentospessoafisica), 'null');
				campos_new  = campos_new  || ' RENDIMENTOSPESSOAFISICA = ' || coalesce(quote_literal(new.rendimentospessoafisica), 'null');
				campos_old  = campos_old  || ' RENDIMENTOSPESSOAFISICA = ' || coalesce(quote_literal(old.rendimentospessoafisica), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPESSOAFISICA = ' || coalesce(quote_literal(new.codigopessoafisica), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPESSOAFISICA = ' || coalesce(quote_literal(new.codigopessoafisica), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigopessoafisica), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PESSOAFISICA (CODIGOPESSOAFISICA, CODIGOEMPRESA, CODIGOLOJA, DATANASCIMENTOPESSOAFISICA, RGPESSOAFISICA, NOMEMAEPESSOAFISICA, NOMEPAIPESSOAFISICA, NOMECONJUGUEPESSOAFISICA, SEXOPESSOAFISICA, LOCALTRABALHOPESSOAFISICA, DATAADMISSAOPESSOAFISICA, CARGOPESSOAFISICA, RENDIMENTOSPESSOAFISICA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datanascimentopessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.rgpessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomemaepessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomepaipessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeconjuguepessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sexopessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.localtrabalhopessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataadmissaopessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cargopessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.rendimentospessoafisica), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PESSOAFISICA WHERE CODIGOPESSOAFISICA = ' || coalesce(quote_literal(old.codigopessoafisica), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPESSOAFISICA = ' || coalesce(quote_literal(old.codigopessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATANASCIMENTOPESSOAFISICA = ' || coalesce(quote_literal(old.datanascimentopessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'RGPESSOAFISICA = ' || coalesce(quote_literal(old.rgpessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'NOMEMAEPESSOAFISICA = ' || coalesce(quote_literal(old.nomemaepessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPAIPESSOAFISICA = ' || coalesce(quote_literal(old.nomepaipessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'NOMECONJUGUEPESSOAFISICA = ' || coalesce(quote_literal(old.nomeconjuguepessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'SEXOPESSOAFISICA = ' || coalesce(quote_literal(old.sexopessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'LOCALTRABALHOPESSOAFISICA = ' || coalesce(quote_literal(old.localtrabalhopessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'DATAADMISSAOPESSOAFISICA = ' || coalesce(quote_literal(old.dataadmissaopessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'CARGOPESSOAFISICA = ' || coalesce(quote_literal(old.cargopessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'RENDIMENTOSPESSOAFISICA = ' || coalesce(quote_literal(old.rendimentospessoafisica), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigopessoafisica), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'pessoafisica', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pessoafisica', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('pessoafisica', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_planoconta()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_planoconta() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PLANOCONTA (CODIGOPLANOCONTA, NUMEROPLANOCONTA, NOMEPLANOCONTA, CODIGOTIPOPLANOCONTA, CODIGOPLANOCONTAPAI, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanocontapai), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PLANOCONTA WHERE CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROPLANOCONTA = ' || coalesce(quote_literal(new.numeroplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPLANOCONTA = ' || coalesce(quote_literal(new.nomeplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPLANOCONTAPAI = ' || coalesce(quote_literal(new.codigoplanocontapai), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoplanoconta), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PLANOCONTA SET ';
			sql_rolback = 'UPDATE PLANOCONTA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoplanoconta &lt;&gt; old.codigoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');
				first = false;
			end if;

			if (new.numeroplanoconta &lt;&gt; old.numeroplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROPLANOCONTA = ' || coalesce(quote_literal(new.numeroplanoconta), 'null');
				sql_rolback = sql_rolback || ' NUMEROPLANOCONTA = ' || coalesce(quote_literal(old.numeroplanoconta), 'null');
				campos_new  = campos_new  || ' NUMEROPLANOCONTA = ' || coalesce(quote_literal(new.numeroplanoconta), 'null');
				campos_old  = campos_old  || ' NUMEROPLANOCONTA = ' || coalesce(quote_literal(old.numeroplanoconta), 'null');
				first = false;
			end if;

			if (new.nomeplanoconta &lt;&gt; old.nomeplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPLANOCONTA = ' || coalesce(quote_literal(new.nomeplanoconta), 'null');
				sql_rolback = sql_rolback || ' NOMEPLANOCONTA = ' || coalesce(quote_literal(old.nomeplanoconta), 'null');
				campos_new  = campos_new  || ' NOMEPLANOCONTA = ' || coalesce(quote_literal(new.nomeplanoconta), 'null');
				campos_old  = campos_old  || ' NOMEPLANOCONTA = ' || coalesce(quote_literal(old.nomeplanoconta), 'null');
				first = false;
			end if;

			if (new.codigotipoplanoconta &lt;&gt; old.codigotipoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null');
				first = false;
			end if;

			if (new.codigoplanocontapai &lt;&gt; old.codigoplanocontapai) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOCONTAPAI = ' || coalesce(quote_literal(new.codigoplanocontapai), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOCONTAPAI = ' || coalesce(quote_literal(old.codigoplanocontapai), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOCONTAPAI = ' || coalesce(quote_literal(new.codigoplanocontapai), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOCONTAPAI = ' || coalesce(quote_literal(old.codigoplanocontapai), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPLANOCONTA = ' || coalesce(quote_literal(new.codigoplanoconta), 'null');

			sql_chave = coalesce(quote_literal(new.codigoplanoconta), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PLANOCONTA (CODIGOPLANOCONTA, NUMEROPLANOCONTA, NOMEPLANOCONTA, CODIGOTIPOPLANOCONTA, CODIGOPLANOCONTAPAI, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanocontapai), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PLANOCONTA WHERE CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPLANOCONTA = ' || coalesce(quote_literal(old.codigoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROPLANOCONTA = ' || coalesce(quote_literal(old.numeroplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPLANOCONTA = ' || coalesce(quote_literal(old.nomeplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPLANOCONTAPAI = ' || coalesce(quote_literal(old.codigoplanocontapai), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoplanoconta), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'planoconta', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('planoconta', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('planoconta', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_planopagamentovenda()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_planopagamentovenda() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PLANOPAGAMENTOVENDA (CODIGOPLANOPAGAMENTO, NOMEPLANOPAGAMENTO, PERCENTUALJUROSPLANOPAGAMENTO, FLAGATIVOPLANOPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.percentualjurosplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagativoplanopagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PLANOPAGAMENTOVENDA WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPLANOPAGAMENTO = ' || coalesce(quote_literal(new.nomeplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'PERCENTUALJUROSPLANOPAGAMENTO = ' || coalesce(quote_literal(new.percentualjurosplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'FLAGATIVOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.flagativoplanopagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoplanopagamento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PLANOPAGAMENTOVENDA SET ';
			sql_rolback = 'UPDATE PLANOPAGAMENTOVENDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoplanopagamento &lt;&gt; old.codigoplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');
				campos_new  = campos_new  || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
				campos_old  = campos_old  || ' CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');
				first = false;
			end if;

			if (new.nomeplanopagamento &lt;&gt; old.nomeplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPLANOPAGAMENTO = ' || coalesce(quote_literal(new.nomeplanopagamento), 'null');
				sql_rolback = sql_rolback || ' NOMEPLANOPAGAMENTO = ' || coalesce(quote_literal(old.nomeplanopagamento), 'null');
				campos_new  = campos_new  || ' NOMEPLANOPAGAMENTO = ' || coalesce(quote_literal(new.nomeplanopagamento), 'null');
				campos_old  = campos_old  || ' NOMEPLANOPAGAMENTO = ' || coalesce(quote_literal(old.nomeplanopagamento), 'null');
				first = false;
			end if;

			if (new.percentualjurosplanopagamento &lt;&gt; old.percentualjurosplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCENTUALJUROSPLANOPAGAMENTO = ' || coalesce(quote_literal(new.percentualjurosplanopagamento), 'null');
				sql_rolback = sql_rolback || ' PERCENTUALJUROSPLANOPAGAMENTO = ' || coalesce(quote_literal(old.percentualjurosplanopagamento), 'null');
				campos_new  = campos_new  || ' PERCENTUALJUROSPLANOPAGAMENTO = ' || coalesce(quote_literal(new.percentualjurosplanopagamento), 'null');
				campos_old  = campos_old  || ' PERCENTUALJUROSPLANOPAGAMENTO = ' || coalesce(quote_literal(old.percentualjurosplanopagamento), 'null');
				first = false;
			end if;

			if (new.flagativoplanopagamento &lt;&gt; old.flagativoplanopagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGATIVOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.flagativoplanopagamento), 'null');
				sql_rolback = sql_rolback || ' FLAGATIVOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.flagativoplanopagamento), 'null');
				campos_new  = campos_new  || ' FLAGATIVOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.flagativoplanopagamento), 'null');
				campos_old  = campos_old  || ' FLAGATIVOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.flagativoplanopagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(new.codigoplanopagamento), 'null');

			sql_chave = coalesce(quote_literal(new.codigoplanopagamento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PLANOPAGAMENTOVENDA (CODIGOPLANOPAGAMENTO, NOMEPLANOPAGAMENTO, PERCENTUALJUROSPLANOPAGAMENTO, FLAGATIVOPLANOPAGAMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.percentualjurosplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagativoplanopagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PLANOPAGAMENTOVENDA WHERE CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.codigoplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPLANOPAGAMENTO = ' || coalesce(quote_literal(old.nomeplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'PERCENTUALJUROSPLANOPAGAMENTO = ' || coalesce(quote_literal(old.percentualjurosplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'FLAGATIVOPLANOPAGAMENTO = ' || coalesce(quote_literal(old.flagativoplanopagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoplanopagamento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'planopagamentovenda', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('planopagamentovenda', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('planopagamentovenda', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_portador()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_portador() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PORTADOR (CODIGOPORTADOR, NOMEPORTADOR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoportador), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeportador), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM PORTADOR WHERE CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null') || ', ';
			campos_new   = campos_new || 'NOMEPORTADOR = ' || coalesce(quote_literal(new.nomeportador), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoportador), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PORTADOR SET ';
			sql_rolback = 'UPDATE PORTADOR SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoportador &lt;&gt; old.codigoportador) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
				sql_rolback = sql_rolback || ' CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');
				campos_new  = campos_new  || ' CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
				campos_old  = campos_old  || ' CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');
				first = false;
			end if;

			if (new.nomeportador &lt;&gt; old.nomeportador) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEPORTADOR = ' || coalesce(quote_literal(new.nomeportador), 'null');
				sql_rolback = sql_rolback || ' NOMEPORTADOR = ' || coalesce(quote_literal(old.nomeportador), 'null');
				campos_new  = campos_new  || ' NOMEPORTADOR = ' || coalesce(quote_literal(new.nomeportador), 'null');
				campos_old  = campos_old  || ' NOMEPORTADOR = ' || coalesce(quote_literal(old.nomeportador), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOPORTADOR = ' || coalesce(quote_literal(new.codigoportador), 'null');

			sql_chave = coalesce(quote_literal(new.codigoportador), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PORTADOR (CODIGOPORTADOR, NOMEPORTADOR, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoportador), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeportador), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM PORTADOR WHERE CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOPORTADOR = ' || coalesce(quote_literal(old.codigoportador), 'null') || ', ';
			campos_old  = campos_old || 'NOMEPORTADOR = ' || coalesce(quote_literal(old.nomeportador), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoportador), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'portador', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('portador', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('portador', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_produto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_produto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, DESCRICAOPRODUTO, CODIGOREFERENCIAPRODUTO, TIPOESTOQUEPRODUTO, CODIGOGRUPO, CODIGOSUBGRUPO, CODIGOFABRICANTE, SIGLAUNIDADE, COMPRIMENTOPRODUTO, LARGURAPRODUTO, PERMITEVENDAFRACIONADAPRODUTO, MARGEMLUCROVAREJOPRODUTO, MARGEMLUCROATACADOPRODUTO, CODIGOEMPRESAFORNECEDOR, CODIGOLOJAFORNECEDOR, CODIGOPESSOAFORNECEDOR, ESTOQUEMINIMOPRODUTO, SITUACAOPRODUTO, OBSERVACOESPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOESSENCIA, VOLUMEPRODUTO, ALTURAPRODUTO, CODIGOTIPOMADEIRABENEFICIADA, CODIGOTIPOTRIBUTACAO, CODIGONCMPRODUTO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoreferenciaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipoestoqueproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosubgrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofabricante), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.siglaunidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.comprimentoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.larguraproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.permitevendafracionadaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.margemlucrovarejoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.margemlucroatacadoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.estoqueminimoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.situacaoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.volumeproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.alturaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoncmproduto), 'null') || ')';

			sql_rolback = 'DELETE FROM PRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOPRODUTO = ' || coalesce(quote_literal(new.descricaoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOREFERENCIAPRODUTO = ' || coalesce(quote_literal(new.codigoreferenciaproduto), 'null') || ', ';
			campos_new   = campos_new || 'TIPOESTOQUEPRODUTO = ' || coalesce(quote_literal(new.tipoestoqueproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null') || ', ';
			campos_new   = campos_new || 'SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null') || ', ';
			campos_new   = campos_new || 'COMPRIMENTOPRODUTO = ' || coalesce(quote_literal(new.comprimentoproduto), 'null') || ', ';
			campos_new   = campos_new || 'LARGURAPRODUTO = ' || coalesce(quote_literal(new.larguraproduto), 'null') || ', ';
			campos_new   = campos_new || 'PERMITEVENDAFRACIONADAPRODUTO = ' || coalesce(quote_literal(new.permitevendafracionadaproduto), 'null') || ', ';
			campos_new   = campos_new || 'MARGEMLUCROVAREJOPRODUTO = ' || coalesce(quote_literal(new.margemlucrovarejoproduto), 'null') || ', ';
			campos_new   = campos_new || 'MARGEMLUCROATACADOPRODUTO = ' || coalesce(quote_literal(new.margemlucroatacadoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'ESTOQUEMINIMOPRODUTO = ' || coalesce(quote_literal(new.estoqueminimoproduto), 'null') || ', ';
			campos_new   = campos_new || 'SITUACAOPRODUTO = ' || coalesce(quote_literal(new.situacaoproduto), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESPRODUTO = ' || coalesce(quote_literal(new.observacoesproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null') || ', ';
			campos_new   = campos_new || 'VOLUMEPRODUTO = ' || coalesce(quote_literal(new.volumeproduto), 'null') || ', ';
			campos_new   = campos_new || 'ALTURAPRODUTO = ' || coalesce(quote_literal(new.alturaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGONCMPRODUTO = ' || coalesce(quote_literal(new.codigoncmproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PRODUTO SET ';
			sql_rolback = 'UPDATE PRODUTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.descricaoproduto &lt;&gt; old.descricaoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOPRODUTO = ' || coalesce(quote_literal(new.descricaoproduto), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOPRODUTO = ' || coalesce(quote_literal(old.descricaoproduto), 'null');
				campos_new  = campos_new  || ' DESCRICAOPRODUTO = ' || coalesce(quote_literal(new.descricaoproduto), 'null');
				campos_old  = campos_old  || ' DESCRICAOPRODUTO = ' || coalesce(quote_literal(old.descricaoproduto), 'null');
				first = false;
			end if;

			if (new.codigoreferenciaproduto &lt;&gt; old.codigoreferenciaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOREFERENCIAPRODUTO = ' || coalesce(quote_literal(new.codigoreferenciaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOREFERENCIAPRODUTO = ' || coalesce(quote_literal(old.codigoreferenciaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOREFERENCIAPRODUTO = ' || coalesce(quote_literal(new.codigoreferenciaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOREFERENCIAPRODUTO = ' || coalesce(quote_literal(old.codigoreferenciaproduto), 'null');
				first = false;
			end if;

			if (new.tipoestoqueproduto &lt;&gt; old.tipoestoqueproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOESTOQUEPRODUTO = ' || coalesce(quote_literal(new.tipoestoqueproduto), 'null');
				sql_rolback = sql_rolback || ' TIPOESTOQUEPRODUTO = ' || coalesce(quote_literal(old.tipoestoqueproduto), 'null');
				campos_new  = campos_new  || ' TIPOESTOQUEPRODUTO = ' || coalesce(quote_literal(new.tipoestoqueproduto), 'null');
				campos_old  = campos_old  || ' TIPOESTOQUEPRODUTO = ' || coalesce(quote_literal(old.tipoestoqueproduto), 'null');
				first = false;
			end if;

			if (new.codigogrupo &lt;&gt; old.codigogrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');
				sql_rolback = sql_rolback || ' CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null');
				campos_new  = campos_new  || ' CODIGOGRUPO = ' || coalesce(quote_literal(new.codigogrupo), 'null');
				campos_old  = campos_old  || ' CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null');
				first = false;
			end if;

			if (new.codigosubgrupo &lt;&gt; old.codigosubgrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');
				sql_rolback = sql_rolback || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null');
				campos_new  = campos_new  || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');
				campos_old  = campos_old  || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null');
				first = false;
			end if;

			if (new.codigofabricante &lt;&gt; old.codigofabricante) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');
				sql_rolback = sql_rolback || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null');
				campos_new  = campos_new  || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(new.codigofabricante), 'null');
				campos_old  = campos_old  || ' CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null');
				first = false;
			end if;

			if (new.siglaunidade &lt;&gt; old.siglaunidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');
				sql_rolback = sql_rolback || ' SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null');
				campos_new  = campos_new  || ' SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');
				campos_old  = campos_old  || ' SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null');
				first = false;
			end if;

			if (new.comprimentoproduto &lt;&gt; old.comprimentoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' COMPRIMENTOPRODUTO = ' || coalesce(quote_literal(new.comprimentoproduto), 'null');
				sql_rolback = sql_rolback || ' COMPRIMENTOPRODUTO = ' || coalesce(quote_literal(old.comprimentoproduto), 'null');
				campos_new  = campos_new  || ' COMPRIMENTOPRODUTO = ' || coalesce(quote_literal(new.comprimentoproduto), 'null');
				campos_old  = campos_old  || ' COMPRIMENTOPRODUTO = ' || coalesce(quote_literal(old.comprimentoproduto), 'null');
				first = false;
			end if;

			if (new.larguraproduto &lt;&gt; old.larguraproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' LARGURAPRODUTO = ' || coalesce(quote_literal(new.larguraproduto), 'null');
				sql_rolback = sql_rolback || ' LARGURAPRODUTO = ' || coalesce(quote_literal(old.larguraproduto), 'null');
				campos_new  = campos_new  || ' LARGURAPRODUTO = ' || coalesce(quote_literal(new.larguraproduto), 'null');
				campos_old  = campos_old  || ' LARGURAPRODUTO = ' || coalesce(quote_literal(old.larguraproduto), 'null');
				first = false;
			end if;

			if (new.permitevendafracionadaproduto &lt;&gt; old.permitevendafracionadaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERMITEVENDAFRACIONADAPRODUTO = ' || coalesce(quote_literal(new.permitevendafracionadaproduto), 'null');
				sql_rolback = sql_rolback || ' PERMITEVENDAFRACIONADAPRODUTO = ' || coalesce(quote_literal(old.permitevendafracionadaproduto), 'null');
				campos_new  = campos_new  || ' PERMITEVENDAFRACIONADAPRODUTO = ' || coalesce(quote_literal(new.permitevendafracionadaproduto), 'null');
				campos_old  = campos_old  || ' PERMITEVENDAFRACIONADAPRODUTO = ' || coalesce(quote_literal(old.permitevendafracionadaproduto), 'null');
				first = false;
			end if;

			if (new.margemlucrovarejoproduto &lt;&gt; old.margemlucrovarejoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MARGEMLUCROVAREJOPRODUTO = ' || coalesce(quote_literal(new.margemlucrovarejoproduto), 'null');
				sql_rolback = sql_rolback || ' MARGEMLUCROVAREJOPRODUTO = ' || coalesce(quote_literal(old.margemlucrovarejoproduto), 'null');
				campos_new  = campos_new  || ' MARGEMLUCROVAREJOPRODUTO = ' || coalesce(quote_literal(new.margemlucrovarejoproduto), 'null');
				campos_old  = campos_old  || ' MARGEMLUCROVAREJOPRODUTO = ' || coalesce(quote_literal(old.margemlucrovarejoproduto), 'null');
				first = false;
			end if;

			if (new.margemlucroatacadoproduto &lt;&gt; old.margemlucroatacadoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MARGEMLUCROATACADOPRODUTO = ' || coalesce(quote_literal(new.margemlucroatacadoproduto), 'null');
				sql_rolback = sql_rolback || ' MARGEMLUCROATACADOPRODUTO = ' || coalesce(quote_literal(old.margemlucroatacadoproduto), 'null');
				campos_new  = campos_new  || ' MARGEMLUCROATACADOPRODUTO = ' || coalesce(quote_literal(new.margemlucroatacadoproduto), 'null');
				campos_old  = campos_old  || ' MARGEMLUCROATACADOPRODUTO = ' || coalesce(quote_literal(old.margemlucroatacadoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresafornecedor &lt;&gt; old.codigoempresafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresafornecedor), 'null');
				first = false;
			end if;

			if (new.codigolojafornecedor &lt;&gt; old.codigolojafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojafornecedor), 'null');
				first = false;
			end if;

			if (new.codigopessoafornecedor &lt;&gt; old.codigopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.estoqueminimoproduto &lt;&gt; old.estoqueminimoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ESTOQUEMINIMOPRODUTO = ' || coalesce(quote_literal(new.estoqueminimoproduto), 'null');
				sql_rolback = sql_rolback || ' ESTOQUEMINIMOPRODUTO = ' || coalesce(quote_literal(old.estoqueminimoproduto), 'null');
				campos_new  = campos_new  || ' ESTOQUEMINIMOPRODUTO = ' || coalesce(quote_literal(new.estoqueminimoproduto), 'null');
				campos_old  = campos_old  || ' ESTOQUEMINIMOPRODUTO = ' || coalesce(quote_literal(old.estoqueminimoproduto), 'null');
				first = false;
			end if;

			if (new.situacaoproduto &lt;&gt; old.situacaoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SITUACAOPRODUTO = ' || coalesce(quote_literal(new.situacaoproduto), 'null');
				sql_rolback = sql_rolback || ' SITUACAOPRODUTO = ' || coalesce(quote_literal(old.situacaoproduto), 'null');
				campos_new  = campos_new  || ' SITUACAOPRODUTO = ' || coalesce(quote_literal(new.situacaoproduto), 'null');
				campos_old  = campos_old  || ' SITUACAOPRODUTO = ' || coalesce(quote_literal(old.situacaoproduto), 'null');
				first = false;
			end if;

			if (new.observacoesproduto &lt;&gt; old.observacoesproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESPRODUTO = ' || coalesce(quote_literal(new.observacoesproduto), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESPRODUTO = ' || coalesce(quote_literal(old.observacoesproduto), 'null');
				campos_new  = campos_new  || ' OBSERVACOESPRODUTO = ' || coalesce(quote_literal(new.observacoesproduto), 'null');
				campos_old  = campos_old  || ' OBSERVACOESPRODUTO = ' || coalesce(quote_literal(old.observacoesproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoessencia &lt;&gt; old.codigoessencia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				sql_rolback = sql_rolback || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				campos_new  = campos_new  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(new.codigoessencia), 'null');
				campos_old  = campos_old  || ' CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null');
				first = false;
			end if;

			if (new.volumeproduto &lt;&gt; old.volumeproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VOLUMEPRODUTO = ' || coalesce(quote_literal(new.volumeproduto), 'null');
				sql_rolback = sql_rolback || ' VOLUMEPRODUTO = ' || coalesce(quote_literal(old.volumeproduto), 'null');
				campos_new  = campos_new  || ' VOLUMEPRODUTO = ' || coalesce(quote_literal(new.volumeproduto), 'null');
				campos_old  = campos_old  || ' VOLUMEPRODUTO = ' || coalesce(quote_literal(old.volumeproduto), 'null');
				first = false;
			end if;

			if (new.alturaproduto &lt;&gt; old.alturaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALTURAPRODUTO = ' || coalesce(quote_literal(new.alturaproduto), 'null');
				sql_rolback = sql_rolback || ' ALTURAPRODUTO = ' || coalesce(quote_literal(old.alturaproduto), 'null');
				campos_new  = campos_new  || ' ALTURAPRODUTO = ' || coalesce(quote_literal(new.alturaproduto), 'null');
				campos_old  = campos_old  || ' ALTURAPRODUTO = ' || coalesce(quote_literal(old.alturaproduto), 'null');
				first = false;
			end if;

			if (new.codigotipomadeirabeneficiada &lt;&gt; old.codigotipomadeirabeneficiada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null');
				first = false;
			end if;

			if (new.codigotipotributacao &lt;&gt; old.codigotipotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				first = false;
			end if;

			if (new.codigoncmproduto &lt;&gt; old.codigoncmproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGONCMPRODUTO = ' || coalesce(quote_literal(new.codigoncmproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGONCMPRODUTO = ' || coalesce(quote_literal(old.codigoncmproduto), 'null');
				campos_new  = campos_new  || ' CODIGONCMPRODUTO = ' || coalesce(quote_literal(new.codigoncmproduto), 'null');
				campos_old  = campos_old  || ' CODIGONCMPRODUTO = ' || coalesce(quote_literal(old.codigoncmproduto), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, DESCRICAOPRODUTO, CODIGOREFERENCIAPRODUTO, TIPOESTOQUEPRODUTO, CODIGOGRUPO, CODIGOSUBGRUPO, CODIGOFABRICANTE, SIGLAUNIDADE, COMPRIMENTOPRODUTO, LARGURAPRODUTO, PERMITEVENDAFRACIONADAPRODUTO, MARGEMLUCROVAREJOPRODUTO, MARGEMLUCROATACADOPRODUTO, CODIGOEMPRESAFORNECEDOR, CODIGOLOJAFORNECEDOR, CODIGOPESSOAFORNECEDOR, ESTOQUEMINIMOPRODUTO, SITUACAOPRODUTO, OBSERVACOESPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOESSENCIA, VOLUMEPRODUTO, ALTURAPRODUTO, CODIGOTIPOMADEIRABENEFICIADA, CODIGOTIPOTRIBUTACAO, CODIGONCMPRODUTO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoreferenciaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipoestoqueproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosubgrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofabricante), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.siglaunidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.comprimentoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.larguraproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.permitevendafracionadaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.margemlucrovarejoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.margemlucroatacadoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.estoqueminimoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.situacaoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.volumeproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.alturaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoncmproduto), 'null') || ')';

			sql_replica = 'DELETE FROM PRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOPRODUTO = ' || coalesce(quote_literal(old.descricaoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOREFERENCIAPRODUTO = ' || coalesce(quote_literal(old.codigoreferenciaproduto), 'null') || ', ';
			campos_old  = campos_old || 'TIPOESTOQUEPRODUTO = ' || coalesce(quote_literal(old.tipoestoqueproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOGRUPO = ' || coalesce(quote_literal(old.codigogrupo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFABRICANTE = ' || coalesce(quote_literal(old.codigofabricante), 'null') || ', ';
			campos_old  = campos_old || 'SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null') || ', ';
			campos_old  = campos_old || 'COMPRIMENTOPRODUTO = ' || coalesce(quote_literal(old.comprimentoproduto), 'null') || ', ';
			campos_old  = campos_old || 'LARGURAPRODUTO = ' || coalesce(quote_literal(old.larguraproduto), 'null') || ', ';
			campos_old  = campos_old || 'PERMITEVENDAFRACIONADAPRODUTO = ' || coalesce(quote_literal(old.permitevendafracionadaproduto), 'null') || ', ';
			campos_old  = campos_old || 'MARGEMLUCROVAREJOPRODUTO = ' || coalesce(quote_literal(old.margemlucrovarejoproduto), 'null') || ', ';
			campos_old  = campos_old || 'MARGEMLUCROATACADOPRODUTO = ' || coalesce(quote_literal(old.margemlucroatacadoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'ESTOQUEMINIMOPRODUTO = ' || coalesce(quote_literal(old.estoqueminimoproduto), 'null') || ', ';
			campos_old  = campos_old || 'SITUACAOPRODUTO = ' || coalesce(quote_literal(old.situacaoproduto), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESPRODUTO = ' || coalesce(quote_literal(old.observacoesproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOESSENCIA = ' || coalesce(quote_literal(old.codigoessencia), 'null') || ', ';
			campos_old  = campos_old || 'VOLUMEPRODUTO = ' || coalesce(quote_literal(old.volumeproduto), 'null') || ', ';
			campos_old  = campos_old || 'ALTURAPRODUTO = ' || coalesce(quote_literal(old.alturaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGONCMPRODUTO = ' || coalesce(quote_literal(old.codigoncmproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'produto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('produto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('produto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_produtovendadiaria()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_produtovendadiaria() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO PRODUTOVENDADIARIA (CODIGOEMPRESA, CODIGOLOJA, DATAVENDA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEPRODUTO, VALORPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEGAVETAPRODUTO, QUANTIDADEDISPLAYPRODUTO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadegavetaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadedisplayproduto), 'null') || ')';

			sql_rolback = 'DELETE FROM PRODUTOVENDADIARIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEPRODUTO = ' || coalesce(quote_literal(new.quantidadeproduto), 'null') || ', ';
			campos_new   = campos_new || 'VALORPRODUTO = ' || coalesce(quote_literal(new.valorproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEGAVETAPRODUTO = ' || coalesce(quote_literal(new.quantidadegavetaproduto), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEDISPLAYPRODUTO = ' || coalesce(quote_literal(new.quantidadedisplayproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.datavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE PRODUTOVENDADIARIA SET ';
			sql_rolback = 'UPDATE PRODUTOVENDADIARIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datavenda &lt;&gt; old.datavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');
				sql_rolback = sql_rolback || ' DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null');
				campos_new  = campos_new  || ' DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');
				campos_old  = campos_old  || ' DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.quantidadeproduto &lt;&gt; old.quantidadeproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEPRODUTO = ' || coalesce(quote_literal(new.quantidadeproduto), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEPRODUTO = ' || coalesce(quote_literal(old.quantidadeproduto), 'null');
				campos_new  = campos_new  || ' QUANTIDADEPRODUTO = ' || coalesce(quote_literal(new.quantidadeproduto), 'null');
				campos_old  = campos_old  || ' QUANTIDADEPRODUTO = ' || coalesce(quote_literal(old.quantidadeproduto), 'null');
				first = false;
			end if;

			if (new.valorproduto &lt;&gt; old.valorproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPRODUTO = ' || coalesce(quote_literal(new.valorproduto), 'null');
				sql_rolback = sql_rolback || ' VALORPRODUTO = ' || coalesce(quote_literal(old.valorproduto), 'null');
				campos_new  = campos_new  || ' VALORPRODUTO = ' || coalesce(quote_literal(new.valorproduto), 'null');
				campos_old  = campos_old  || ' VALORPRODUTO = ' || coalesce(quote_literal(old.valorproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.quantidadegavetaproduto &lt;&gt; old.quantidadegavetaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEGAVETAPRODUTO = ' || coalesce(quote_literal(new.quantidadegavetaproduto), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEGAVETAPRODUTO = ' || coalesce(quote_literal(old.quantidadegavetaproduto), 'null');
				campos_new  = campos_new  || ' QUANTIDADEGAVETAPRODUTO = ' || coalesce(quote_literal(new.quantidadegavetaproduto), 'null');
				campos_old  = campos_old  || ' QUANTIDADEGAVETAPRODUTO = ' || coalesce(quote_literal(old.quantidadegavetaproduto), 'null');
				first = false;
			end if;

			if (new.quantidadedisplayproduto &lt;&gt; old.quantidadedisplayproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEDISPLAYPRODUTO = ' || coalesce(quote_literal(new.quantidadedisplayproduto), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEDISPLAYPRODUTO = ' || coalesce(quote_literal(old.quantidadedisplayproduto), 'null');
				campos_new  = campos_new  || ' QUANTIDADEDISPLAYPRODUTO = ' || coalesce(quote_literal(new.quantidadedisplayproduto), 'null');
				campos_old  = campos_old  || ' QUANTIDADEDISPLAYPRODUTO = ' || coalesce(quote_literal(old.quantidadedisplayproduto), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.datavenda), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO PRODUTOVENDADIARIA (CODIGOEMPRESA, CODIGOLOJA, DATAVENDA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, QUANTIDADEPRODUTO, VALORPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADEGAVETAPRODUTO, QUANTIDADEDISPLAYPRODUTO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadegavetaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadedisplayproduto), 'null') || ')';

			sql_replica = 'DELETE FROM PRODUTOVENDADIARIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEPRODUTO = ' || coalesce(quote_literal(old.quantidadeproduto), 'null') || ', ';
			campos_old  = campos_old || 'VALORPRODUTO = ' || coalesce(quote_literal(old.valorproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEGAVETAPRODUTO = ' || coalesce(quote_literal(old.quantidadegavetaproduto), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEDISPLAYPRODUTO = ' || coalesce(quote_literal(old.quantidadedisplayproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.datavenda), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'produtovendadiaria', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('produtovendadiaria', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('produtovendadiaria', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_rateiocontapagar()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_rateiocontapagar() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO RATEIOCONTAPAGAR (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTAPAGAR, CODIGOEMPRESARATEIO, CODIGOLOJARATEIO, VALORRATEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresarateio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojarateio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorrateio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM RATEIOCONTAPAGAR WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(new.codigoempresarateio), 'null') || ' AND CODIGOLOJARATEIO = ' || coalesce(quote_literal(new.codigolojarateio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(new.codigoempresarateio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJARATEIO = ' || coalesce(quote_literal(new.codigolojarateio), 'null') || ', ';
			campos_new   = campos_new || 'VALORRATEIO = ' || coalesce(quote_literal(new.valorrateio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresarateio), 'null')  || ', ' || coalesce(quote_literal(new.codigolojarateio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE RATEIOCONTAPAGAR SET ';
			sql_rolback = 'UPDATE RATEIOCONTAPAGAR SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocontapagar &lt;&gt; old.codigocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				first = false;
			end if;

			if (new.codigoempresarateio &lt;&gt; old.codigoempresarateio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(new.codigoempresarateio), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(old.codigoempresarateio), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(new.codigoempresarateio), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(old.codigoempresarateio), 'null');
				first = false;
			end if;

			if (new.codigolojarateio &lt;&gt; old.codigolojarateio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJARATEIO = ' || coalesce(quote_literal(new.codigolojarateio), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJARATEIO = ' || coalesce(quote_literal(old.codigolojarateio), 'null');
				campos_new  = campos_new  || ' CODIGOLOJARATEIO = ' || coalesce(quote_literal(new.codigolojarateio), 'null');
				campos_old  = campos_old  || ' CODIGOLOJARATEIO = ' || coalesce(quote_literal(old.codigolojarateio), 'null');
				first = false;
			end if;

			if (new.valorrateio &lt;&gt; old.valorrateio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORRATEIO = ' || coalesce(quote_literal(new.valorrateio), 'null');
				sql_rolback = sql_rolback || ' VALORRATEIO = ' || coalesce(quote_literal(old.valorrateio), 'null');
				campos_new  = campos_new  || ' VALORRATEIO = ' || coalesce(quote_literal(new.valorrateio), 'null');
				campos_old  = campos_old  || ' VALORRATEIO = ' || coalesce(quote_literal(old.valorrateio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(new.codigoempresarateio), 'null') || ' AND CODIGOLOJARATEIO = ' || coalesce(quote_literal(new.codigolojarateio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || ' AND CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(new.codigoempresarateio), 'null') || ' AND CODIGOLOJARATEIO = ' || coalesce(quote_literal(new.codigolojarateio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresarateio), 'null')  || ', ' || coalesce(quote_literal(new.codigolojarateio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO RATEIOCONTAPAGAR (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTAPAGAR, CODIGOEMPRESARATEIO, CODIGOLOJARATEIO, VALORRATEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresarateio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojarateio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorrateio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM RATEIOCONTAPAGAR WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ' AND CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(old.codigoempresarateio), 'null') || ' AND CODIGOLOJARATEIO = ' || coalesce(quote_literal(old.codigolojarateio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESARATEIO = ' || coalesce(quote_literal(old.codigoempresarateio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJARATEIO = ' || coalesce(quote_literal(old.codigolojarateio), 'null') || ', ';
			campos_old  = campos_old || 'VALORRATEIO = ' || coalesce(quote_literal(old.valorrateio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocontapagar), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresarateio), 'null')  || ', ' || coalesce(quote_literal(old.codigolojarateio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'rateiocontapagar', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('rateiocontapagar', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('rateiocontapagar', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_recebimento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_recebimento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO RECEBIMENTO (CODIGOEMPRESA, CODIGOLOJA, CODIGORECEBIMENTO, DATAHORARECEBIMENTO, VALORRECEBIMENTO, OBSERVACAORECEBIMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOFORMARECEBIMENTO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorrecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaorecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoformarecebimento), 'null') || ')';

			sql_rolback = 'DELETE FROM RECEBIMENTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORARECEBIMENTO = ' || coalesce(quote_literal(new.datahorarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'VALORRECEBIMENTO = ' || coalesce(quote_literal(new.valorrecebimento), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAORECEBIMENTO = ' || coalesce(quote_literal(new.observacaorecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigorecebimento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE RECEBIMENTO SET ';
			sql_rolback = 'UPDATE RECEBIMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigorecebimento &lt;&gt; old.codigorecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				campos_new  = campos_new  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				campos_old  = campos_old  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				first = false;
			end if;

			if (new.datahorarecebimento &lt;&gt; old.datahorarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORARECEBIMENTO = ' || coalesce(quote_literal(new.datahorarecebimento), 'null');
				sql_rolback = sql_rolback || ' DATAHORARECEBIMENTO = ' || coalesce(quote_literal(old.datahorarecebimento), 'null');
				campos_new  = campos_new  || ' DATAHORARECEBIMENTO = ' || coalesce(quote_literal(new.datahorarecebimento), 'null');
				campos_old  = campos_old  || ' DATAHORARECEBIMENTO = ' || coalesce(quote_literal(old.datahorarecebimento), 'null');
				first = false;
			end if;

			if (new.valorrecebimento &lt;&gt; old.valorrecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(new.valorrecebimento), 'null');
				sql_rolback = sql_rolback || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(old.valorrecebimento), 'null');
				campos_new  = campos_new  || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(new.valorrecebimento), 'null');
				campos_old  = campos_old  || ' VALORRECEBIMENTO = ' || coalesce(quote_literal(old.valorrecebimento), 'null');
				first = false;
			end if;

			if (new.observacaorecebimento &lt;&gt; old.observacaorecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAORECEBIMENTO = ' || coalesce(quote_literal(new.observacaorecebimento), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAORECEBIMENTO = ' || coalesce(quote_literal(old.observacaorecebimento), 'null');
				campos_new  = campos_new  || ' OBSERVACAORECEBIMENTO = ' || coalesce(quote_literal(new.observacaorecebimento), 'null');
				campos_old  = campos_old  || ' OBSERVACAORECEBIMENTO = ' || coalesce(quote_literal(old.observacaorecebimento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoformarecebimento &lt;&gt; old.codigoformarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(new.codigoformarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigorecebimento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO RECEBIMENTO (CODIGOEMPRESA, CODIGOLOJA, CODIGORECEBIMENTO, DATAHORARECEBIMENTO, VALORRECEBIMENTO, OBSERVACAORECEBIMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOFORMARECEBIMENTO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorrecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaorecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoformarecebimento), 'null') || ')';

			sql_replica = 'DELETE FROM RECEBIMENTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORARECEBIMENTO = ' || coalesce(quote_literal(old.datahorarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'VALORRECEBIMENTO = ' || coalesce(quote_literal(old.valorrecebimento), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAORECEBIMENTO = ' || coalesce(quote_literal(old.observacaorecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFORMARECEBIMENTO = ' || coalesce(quote_literal(old.codigoformarecebimento), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigorecebimento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'recebimento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('recebimento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('recebimento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_recebimentocartao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_recebimentocartao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO RECEBIMENTOCARTAO (CODIGOEMPRESA, CODIGOLOJA, CODIGORECEBIMENTOCARTAO, DATAHORARECEBIMENTOCARTAO, RECIBORECEBIMENTOCARTAO, VALORRECEBIMENTOCARTAO, TIPORECEBIMENTOCARTAO, CODIGOBANDEIRA, CODIGOOPERADORACARTAO, PARCELASRECEBIMENTOCARTAO, CODIGOEMPRESARECEBIMENTO, CODIGOLOJARECEBIMENTO, CODIGORECEBIMENTO, CODIGOEMPRESAEMITENTE, CODIGOLOJAEMITENTE, CODIGOPESSOAEMITENTE, CODIGOENDERECOPESSOAEMITENTE, STATUSRECEBIMENTOCARTAO, MENSAGEMRECEBIMENTOCARTAO, CODIGOCONTABANCARIA, CODIGOEMPRESACONTABANCARIA, CODIGOLOJACONTABANCARIA, SEQUENCIALMOVIMENTACAOCONTABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigorecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorarecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.reciborecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorrecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tiporecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigobandeira), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigooperadoracartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.parcelasrecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojarecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusrecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.mensagemrecebimentocartao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM RECEBIMENTOCARTAO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORARECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.datahorarecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'RECIBORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.reciborecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'VALORRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.valorrecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'TIPORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.tiporecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null') || ', ';
			campos_new   = campos_new || 'PARCELASRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.parcelasrecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(new.codigoempresaemitente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(new.codigolojaemitente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigopessoaemitente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null') || ', ';
			campos_new   = campos_new || 'STATUSRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.statusrecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'MENSAGEMRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.mensagemrecebimentocartao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE RECEBIMENTOCARTAO SET ';
			sql_rolback = 'UPDATE RECEBIMENTOCARTAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigorecebimentocartao &lt;&gt; old.codigorecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.codigorecebimentocartao), 'null');
				campos_new  = campos_new  || ' CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null');
				campos_old  = campos_old  || ' CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.codigorecebimentocartao), 'null');
				first = false;
			end if;

			if (new.datahorarecebimentocartao &lt;&gt; old.datahorarecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORARECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.datahorarecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' DATAHORARECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.datahorarecebimentocartao), 'null');
				campos_new  = campos_new  || ' DATAHORARECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.datahorarecebimentocartao), 'null');
				campos_old  = campos_old  || ' DATAHORARECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.datahorarecebimentocartao), 'null');
				first = false;
			end if;

			if (new.reciborecebimentocartao &lt;&gt; old.reciborecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' RECIBORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.reciborecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' RECIBORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.reciborecebimentocartao), 'null');
				campos_new  = campos_new  || ' RECIBORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.reciborecebimentocartao), 'null');
				campos_old  = campos_old  || ' RECIBORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.reciborecebimentocartao), 'null');
				first = false;
			end if;

			if (new.valorrecebimentocartao &lt;&gt; old.valorrecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.valorrecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' VALORRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.valorrecebimentocartao), 'null');
				campos_new  = campos_new  || ' VALORRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.valorrecebimentocartao), 'null');
				campos_old  = campos_old  || ' VALORRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.valorrecebimentocartao), 'null');
				first = false;
			end if;

			if (new.tiporecebimentocartao &lt;&gt; old.tiporecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.tiporecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' TIPORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.tiporecebimentocartao), 'null');
				campos_new  = campos_new  || ' TIPORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.tiporecebimentocartao), 'null');
				campos_old  = campos_old  || ' TIPORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.tiporecebimentocartao), 'null');
				first = false;
			end if;

			if (new.codigobandeira &lt;&gt; old.codigobandeira) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');
				sql_rolback = sql_rolback || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null');
				campos_new  = campos_new  || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(new.codigobandeira), 'null');
				campos_old  = campos_old  || ' CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null');
				first = false;
			end if;

			if (new.codigooperadoracartao &lt;&gt; old.codigooperadoracartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');
				sql_rolback = sql_rolback || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null');
				campos_new  = campos_new  || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(new.codigooperadoracartao), 'null');
				campos_old  = campos_old  || ' CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null');
				first = false;
			end if;

			if (new.parcelasrecebimentocartao &lt;&gt; old.parcelasrecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PARCELASRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.parcelasrecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' PARCELASRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.parcelasrecebimentocartao), 'null');
				campos_new  = campos_new  || ' PARCELASRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.parcelasrecebimentocartao), 'null');
				campos_old  = campos_old  || ' PARCELASRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.parcelasrecebimentocartao), 'null');
				first = false;
			end if;

			if (new.codigoempresarecebimento &lt;&gt; old.codigoempresarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(new.codigoempresarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null');
				first = false;
			end if;

			if (new.codigolojarecebimento &lt;&gt; old.codigolojarecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null');
				campos_new  = campos_new  || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(new.codigolojarecebimento), 'null');
				campos_old  = campos_old  || ' CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null');
				first = false;
			end if;

			if (new.codigorecebimento &lt;&gt; old.codigorecebimento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				sql_rolback = sql_rolback || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				campos_new  = campos_new  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(new.codigorecebimento), 'null');
				campos_old  = campos_old  || ' CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null');
				first = false;
			end if;

			if (new.codigoempresaemitente &lt;&gt; old.codigoempresaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(new.codigoempresaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(old.codigoempresaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(new.codigoempresaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(old.codigoempresaemitente), 'null');
				first = false;
			end if;

			if (new.codigolojaemitente &lt;&gt; old.codigolojaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(new.codigolojaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(old.codigolojaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(new.codigolojaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(old.codigolojaemitente), 'null');
				first = false;
			end if;

			if (new.codigopessoaemitente &lt;&gt; old.codigopessoaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigopessoaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigopessoaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigopessoaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigopessoaemitente), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoaemitente &lt;&gt; old.codigoenderecopessoaemitente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(new.codigoenderecopessoaemitente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null');
				first = false;
			end if;

			if (new.statusrecebimentocartao &lt;&gt; old.statusrecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.statusrecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' STATUSRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.statusrecebimentocartao), 'null');
				campos_new  = campos_new  || ' STATUSRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.statusrecebimentocartao), 'null');
				campos_old  = campos_old  || ' STATUSRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.statusrecebimentocartao), 'null');
				first = false;
			end if;

			if (new.mensagemrecebimentocartao &lt;&gt; old.mensagemrecebimentocartao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MENSAGEMRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.mensagemrecebimentocartao), 'null');
				sql_rolback = sql_rolback || ' MENSAGEMRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.mensagemrecebimentocartao), 'null');
				campos_new  = campos_new  || ' MENSAGEMRECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.mensagemrecebimentocartao), 'null');
				campos_old  = campos_old  || ' MENSAGEMRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.mensagemrecebimentocartao), 'null');
				first = false;
			end if;

			if (new.codigocontabancaria &lt;&gt; old.codigocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(new.codigocontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresacontabancaria &lt;&gt; old.codigoempresacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(new.codigoempresacontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null');
				first = false;
			end if;

			if (new.codigolojacontabancaria &lt;&gt; old.codigolojacontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(new.codigolojacontabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null');
				first = false;
			end if;

			if (new.sequencialmovimentacaocontabancaria &lt;&gt; old.sequencialmovimentacaocontabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				sql_rolback = sql_rolback || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				campos_new  = campos_new  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(new.sequencialmovimentacaocontabancaria), 'null');
				campos_old  = campos_old  || ' SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigorecebimentocartao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO RECEBIMENTOCARTAO (CODIGOEMPRESA, CODIGOLOJA, CODIGORECEBIMENTOCARTAO, DATAHORARECEBIMENTOCARTAO, RECIBORECEBIMENTOCARTAO, VALORRECEBIMENTOCARTAO, TIPORECEBIMENTOCARTAO, CODIGOBANDEIRA, CODIGOOPERADORACARTAO, PARCELASRECEBIMENTOCARTAO, CODIGOEMPRESARECEBIMENTO, CODIGOLOJARECEBIMENTO, CODIGORECEBIMENTO, CODIGOEMPRESAEMITENTE, CODIGOLOJAEMITENTE, CODIGOPESSOAEMITENTE, CODIGOENDERECOPESSOAEMITENTE, STATUSRECEBIMENTOCARTAO, MENSAGEMRECEBIMENTOCARTAO, CODIGOCONTABANCARIA, CODIGOEMPRESACONTABANCARIA, CODIGOLOJACONTABANCARIA, SEQUENCIALMOVIMENTACAOCONTABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigorecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorarecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.reciborecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorrecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tiporecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigobandeira), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigooperadoracartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.parcelasrecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojarecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusrecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.mensagemrecebimentocartao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM RECEBIMENTOCARTAO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.codigorecebimentocartao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.codigorecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORARECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.datahorarecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'RECIBORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.reciborecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'VALORRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.valorrecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'TIPORECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.tiporecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOBANDEIRA = ' || coalesce(quote_literal(old.codigobandeira), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOOPERADORACARTAO = ' || coalesce(quote_literal(old.codigooperadoracartao), 'null') || ', ';
			campos_old  = campos_old || 'PARCELASRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.parcelasrecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESARECEBIMENTO = ' || coalesce(quote_literal(old.codigoempresarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJARECEBIMENTO = ' || coalesce(quote_literal(old.codigolojarecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGORECEBIMENTO = ' || coalesce(quote_literal(old.codigorecebimento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAEMITENTE = ' || coalesce(quote_literal(old.codigoempresaemitente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAEMITENTE = ' || coalesce(quote_literal(old.codigolojaemitente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigopessoaemitente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAEMITENTE = ' || coalesce(quote_literal(old.codigoenderecopessoaemitente), 'null') || ', ';
			campos_old  = campos_old || 'STATUSRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.statusrecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'MENSAGEMRECEBIMENTOCARTAO = ' || coalesce(quote_literal(old.mensagemrecebimentocartao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTABANCARIA = ' || coalesce(quote_literal(old.codigocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTABANCARIA = ' || coalesce(quote_literal(old.codigoempresacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTABANCARIA = ' || coalesce(quote_literal(old.codigolojacontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'SEQUENCIALMOVIMENTACAOCONTABANCARIA = ' || coalesce(quote_literal(old.sequencialmovimentacaocontabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigorecebimentocartao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'recebimentocartao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('recebimentocartao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('recebimentocartao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_referenciabancaria()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_referenciabancaria() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO REFERENCIABANCARIA (CODIGOEMPRESA, CODIGOLOJA, CODIGOPESSOA, CODIGOREFERENCIABANCARIA, CODIGOBANCOREFERENCIABANCARIA, CODIGOCIDADEREFERENCIABANCARIA, AGENCIAREFERENCIABANCARIA, CONTAREFERENCIABANCARIA, FONE1REFERENCIABANCARIA, FONE2REFERENCIABANCARIA, DATAREFERENCIABANCARIA, DATAINCLUSAOREFERENCIABANCARIA, EXPERIENCIAFINANCEIRAREFERENCIABANCARIA, POSSUIRESTRICAOREFERENCIABANCARIA, CONCEITOREFERENCIABANCARIA, OBSERVACOESREFERENCIABANCARIA, CONTATOREFERENCIABANCARIA, CARGOREFERENCIABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigobancoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocidadereferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.agenciareferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.contareferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone1referenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone2referenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datareferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainclusaoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.experienciafinanceirareferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.possuirestricaoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.conceitoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.contatoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cargoreferenciabancaria), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM REFERENCIABANCARIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOBANCOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigobancoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCIDADEREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigocidadereferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'AGENCIAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.agenciareferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CONTAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.contareferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'FONE1REFERENCIABANCARIA = ' || coalesce(quote_literal(new.fone1referenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'FONE2REFERENCIABANCARIA = ' || coalesce(quote_literal(new.fone2referenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'DATAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.datareferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'DATAINCLUSAOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.datainclusaoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'EXPERIENCIAFINANCEIRAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.experienciafinanceirareferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'POSSUIRESTRICAOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.possuirestricaoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CONCEITOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.conceitoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESREFERENCIABANCARIA = ' || coalesce(quote_literal(new.observacoesreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CONTATOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.contatoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CARGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.cargoreferenciabancaria), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE REFERENCIABANCARIA SET ';
			sql_rolback = 'UPDATE REFERENCIABANCARIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoreferenciabancaria &lt;&gt; old.codigoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.codigobancoreferenciabancaria &lt;&gt; old.codigobancoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOBANCOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigobancoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOBANCOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigobancoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOBANCOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigobancoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOBANCOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigobancoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.codigocidadereferenciabancaria &lt;&gt; old.codigocidadereferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCIDADEREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigocidadereferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CODIGOCIDADEREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigocidadereferenciabancaria), 'null');
				campos_new  = campos_new  || ' CODIGOCIDADEREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigocidadereferenciabancaria), 'null');
				campos_old  = campos_old  || ' CODIGOCIDADEREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigocidadereferenciabancaria), 'null');
				first = false;
			end if;

			if (new.agenciareferenciabancaria &lt;&gt; old.agenciareferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' AGENCIAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.agenciareferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' AGENCIAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.agenciareferenciabancaria), 'null');
				campos_new  = campos_new  || ' AGENCIAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.agenciareferenciabancaria), 'null');
				campos_old  = campos_old  || ' AGENCIAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.agenciareferenciabancaria), 'null');
				first = false;
			end if;

			if (new.contareferenciabancaria &lt;&gt; old.contareferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CONTAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.contareferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CONTAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.contareferenciabancaria), 'null');
				campos_new  = campos_new  || ' CONTAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.contareferenciabancaria), 'null');
				campos_old  = campos_old  || ' CONTAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.contareferenciabancaria), 'null');
				first = false;
			end if;

			if (new.fone1referenciabancaria &lt;&gt; old.fone1referenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE1REFERENCIABANCARIA = ' || coalesce(quote_literal(new.fone1referenciabancaria), 'null');
				sql_rolback = sql_rolback || ' FONE1REFERENCIABANCARIA = ' || coalesce(quote_literal(old.fone1referenciabancaria), 'null');
				campos_new  = campos_new  || ' FONE1REFERENCIABANCARIA = ' || coalesce(quote_literal(new.fone1referenciabancaria), 'null');
				campos_old  = campos_old  || ' FONE1REFERENCIABANCARIA = ' || coalesce(quote_literal(old.fone1referenciabancaria), 'null');
				first = false;
			end if;

			if (new.fone2referenciabancaria &lt;&gt; old.fone2referenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE2REFERENCIABANCARIA = ' || coalesce(quote_literal(new.fone2referenciabancaria), 'null');
				sql_rolback = sql_rolback || ' FONE2REFERENCIABANCARIA = ' || coalesce(quote_literal(old.fone2referenciabancaria), 'null');
				campos_new  = campos_new  || ' FONE2REFERENCIABANCARIA = ' || coalesce(quote_literal(new.fone2referenciabancaria), 'null');
				campos_old  = campos_old  || ' FONE2REFERENCIABANCARIA = ' || coalesce(quote_literal(old.fone2referenciabancaria), 'null');
				first = false;
			end if;

			if (new.datareferenciabancaria &lt;&gt; old.datareferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.datareferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' DATAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.datareferenciabancaria), 'null');
				campos_new  = campos_new  || ' DATAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.datareferenciabancaria), 'null');
				campos_old  = campos_old  || ' DATAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.datareferenciabancaria), 'null');
				first = false;
			end if;

			if (new.datainclusaoreferenciabancaria &lt;&gt; old.datainclusaoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINCLUSAOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.datainclusaoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' DATAINCLUSAOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.datainclusaoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' DATAINCLUSAOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.datainclusaoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' DATAINCLUSAOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.datainclusaoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.experienciafinanceirareferenciabancaria &lt;&gt; old.experienciafinanceirareferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EXPERIENCIAFINANCEIRAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.experienciafinanceirareferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' EXPERIENCIAFINANCEIRAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.experienciafinanceirareferenciabancaria), 'null');
				campos_new  = campos_new  || ' EXPERIENCIAFINANCEIRAREFERENCIABANCARIA = ' || coalesce(quote_literal(new.experienciafinanceirareferenciabancaria), 'null');
				campos_old  = campos_old  || ' EXPERIENCIAFINANCEIRAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.experienciafinanceirareferenciabancaria), 'null');
				first = false;
			end if;

			if (new.possuirestricaoreferenciabancaria &lt;&gt; old.possuirestricaoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' POSSUIRESTRICAOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.possuirestricaoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' POSSUIRESTRICAOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.possuirestricaoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' POSSUIRESTRICAOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.possuirestricaoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' POSSUIRESTRICAOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.possuirestricaoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.conceitoreferenciabancaria &lt;&gt; old.conceitoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CONCEITOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.conceitoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CONCEITOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.conceitoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' CONCEITOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.conceitoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' CONCEITOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.conceitoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.observacoesreferenciabancaria &lt;&gt; old.observacoesreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESREFERENCIABANCARIA = ' || coalesce(quote_literal(new.observacoesreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESREFERENCIABANCARIA = ' || coalesce(quote_literal(old.observacoesreferenciabancaria), 'null');
				campos_new  = campos_new  || ' OBSERVACOESREFERENCIABANCARIA = ' || coalesce(quote_literal(new.observacoesreferenciabancaria), 'null');
				campos_old  = campos_old  || ' OBSERVACOESREFERENCIABANCARIA = ' || coalesce(quote_literal(old.observacoesreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.contatoreferenciabancaria &lt;&gt; old.contatoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CONTATOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.contatoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CONTATOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.contatoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' CONTATOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.contatoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' CONTATOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.contatoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.cargoreferenciabancaria &lt;&gt; old.cargoreferenciabancaria) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CARGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.cargoreferenciabancaria), 'null');
				sql_rolback = sql_rolback || ' CARGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.cargoreferenciabancaria), 'null');
				campos_new  = campos_new  || ' CARGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.cargoreferenciabancaria), 'null');
				campos_old  = campos_old  || ' CARGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.cargoreferenciabancaria), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoreferenciabancaria), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO REFERENCIABANCARIA (CODIGOEMPRESA, CODIGOLOJA, CODIGOPESSOA, CODIGOREFERENCIABANCARIA, CODIGOBANCOREFERENCIABANCARIA, CODIGOCIDADEREFERENCIABANCARIA, AGENCIAREFERENCIABANCARIA, CONTAREFERENCIABANCARIA, FONE1REFERENCIABANCARIA, FONE2REFERENCIABANCARIA, DATAREFERENCIABANCARIA, DATAINCLUSAOREFERENCIABANCARIA, EXPERIENCIAFINANCEIRAREFERENCIABANCARIA, POSSUIRESTRICAOREFERENCIABANCARIA, CONCEITOREFERENCIABANCARIA, OBSERVACOESREFERENCIABANCARIA, CONTATOREFERENCIABANCARIA, CARGOREFERENCIABANCARIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigobancoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocidadereferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.agenciareferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.contareferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone1referenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone2referenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datareferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainclusaoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.experienciafinanceirareferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.possuirestricaoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.conceitoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.contatoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cargoreferenciabancaria), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM REFERENCIABANCARIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ' AND CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigoreferenciabancaria), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOBANCOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigobancoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCIDADEREFERENCIABANCARIA = ' || coalesce(quote_literal(old.codigocidadereferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'AGENCIAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.agenciareferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CONTAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.contareferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'FONE1REFERENCIABANCARIA = ' || coalesce(quote_literal(old.fone1referenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'FONE2REFERENCIABANCARIA = ' || coalesce(quote_literal(old.fone2referenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'DATAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.datareferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'DATAINCLUSAOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.datainclusaoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'EXPERIENCIAFINANCEIRAREFERENCIABANCARIA = ' || coalesce(quote_literal(old.experienciafinanceirareferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'POSSUIRESTRICAOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.possuirestricaoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CONCEITOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.conceitoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESREFERENCIABANCARIA = ' || coalesce(quote_literal(old.observacoesreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CONTATOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.contatoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CARGOREFERENCIABANCARIA = ' || coalesce(quote_literal(old.cargoreferenciabancaria), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(old.codigoreferenciabancaria), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'referenciabancaria', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('referenciabancaria', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('referenciabancaria', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_referenciacomercial()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_referenciacomercial() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO REFERENCIACOMERCIAL (CODIGOEMPRESA, CODIGOLOJA, CODIGOPESSOA, CODIGOREFERENCIACOMERCIAL, LOCALREFERENCIACOMERCIAL, FONEREFERENCIACOMERCIAL, CONTATOREFERENCIACOMERCIAL, DATAREFERENCIACOMERCIAL, FORMAPAGAMENTOREFERENCIACOMERCIAL, MEDIAMENSALREFERENCIACOMERCIAL, MEDIADIASATRAZOREFERENCIACOMERCIAL, MAIORCOMPRAREFERENCIACOMERCIAL, DATAMAIORCOMPRAREFERENCIACOMERCIAL, ULTIMACOMPRAREFERENCIACOMERCIAL, DATAULTIMACOMPRAREFERENCIACOMERCIAL, CONCEITOREFERENCIACOMERCIAL, DATACADASTROREFERENCIACOMERCIAL, OBSERVACOESREFERENCIACOMERCIAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.localreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fonereferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.contatoreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datareferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.formapagamentoreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.mediamensalreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.mediadiasatrazoreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.maiorcomprareferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datamaiorcomprareferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ultimacomprareferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataultimacomprareferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.conceitoreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datacadastroreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacoesreferenciacomercial), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM REFERENCIACOMERCIAL WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'LOCALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.localreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'FONEREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.fonereferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'CONTATOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.contatoreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'DATAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datareferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'FORMAPAGAMENTOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.formapagamentoreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'MEDIAMENSALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.mediamensalreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'MEDIADIASATRAZOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.mediadiasatrazoreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'MAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.maiorcomprareferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'DATAMAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datamaiorcomprareferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'ULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.ultimacomprareferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'DATAULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.dataultimacomprareferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'CONCEITOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.conceitoreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'DATACADASTROREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datacadastroreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACOESREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.observacoesreferenciacomercial), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE REFERENCIACOMERCIAL SET ';
			sql_rolback = 'UPDATE REFERENCIACOMERCIAL SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigopessoa &lt;&gt; old.codigopessoa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null');
				first = false;
			end if;

			if (new.codigoreferenciacomercial &lt;&gt; old.codigoreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.codigoreferenciacomercial), 'null');
				campos_new  = campos_new  || ' CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null');
				campos_old  = campos_old  || ' CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.codigoreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.localreferenciacomercial &lt;&gt; old.localreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' LOCALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.localreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' LOCALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.localreferenciacomercial), 'null');
				campos_new  = campos_new  || ' LOCALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.localreferenciacomercial), 'null');
				campos_old  = campos_old  || ' LOCALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.localreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.fonereferenciacomercial &lt;&gt; old.fonereferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONEREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.fonereferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' FONEREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.fonereferenciacomercial), 'null');
				campos_new  = campos_new  || ' FONEREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.fonereferenciacomercial), 'null');
				campos_old  = campos_old  || ' FONEREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.fonereferenciacomercial), 'null');
				first = false;
			end if;

			if (new.contatoreferenciacomercial &lt;&gt; old.contatoreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CONTATOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.contatoreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' CONTATOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.contatoreferenciacomercial), 'null');
				campos_new  = campos_new  || ' CONTATOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.contatoreferenciacomercial), 'null');
				campos_old  = campos_old  || ' CONTATOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.contatoreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.datareferenciacomercial &lt;&gt; old.datareferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datareferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' DATAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datareferenciacomercial), 'null');
				campos_new  = campos_new  || ' DATAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datareferenciacomercial), 'null');
				campos_old  = campos_old  || ' DATAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datareferenciacomercial), 'null');
				first = false;
			end if;

			if (new.formapagamentoreferenciacomercial &lt;&gt; old.formapagamentoreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FORMAPAGAMENTOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.formapagamentoreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' FORMAPAGAMENTOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.formapagamentoreferenciacomercial), 'null');
				campos_new  = campos_new  || ' FORMAPAGAMENTOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.formapagamentoreferenciacomercial), 'null');
				campos_old  = campos_old  || ' FORMAPAGAMENTOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.formapagamentoreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.mediamensalreferenciacomercial &lt;&gt; old.mediamensalreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MEDIAMENSALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.mediamensalreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' MEDIAMENSALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.mediamensalreferenciacomercial), 'null');
				campos_new  = campos_new  || ' MEDIAMENSALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.mediamensalreferenciacomercial), 'null');
				campos_old  = campos_old  || ' MEDIAMENSALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.mediamensalreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.mediadiasatrazoreferenciacomercial &lt;&gt; old.mediadiasatrazoreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MEDIADIASATRAZOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.mediadiasatrazoreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' MEDIADIASATRAZOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.mediadiasatrazoreferenciacomercial), 'null');
				campos_new  = campos_new  || ' MEDIADIASATRAZOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.mediadiasatrazoreferenciacomercial), 'null');
				campos_old  = campos_old  || ' MEDIADIASATRAZOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.mediadiasatrazoreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.maiorcomprareferenciacomercial &lt;&gt; old.maiorcomprareferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.maiorcomprareferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' MAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.maiorcomprareferenciacomercial), 'null');
				campos_new  = campos_new  || ' MAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.maiorcomprareferenciacomercial), 'null');
				campos_old  = campos_old  || ' MAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.maiorcomprareferenciacomercial), 'null');
				first = false;
			end if;

			if (new.datamaiorcomprareferenciacomercial &lt;&gt; old.datamaiorcomprareferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAMAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datamaiorcomprareferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' DATAMAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datamaiorcomprareferenciacomercial), 'null');
				campos_new  = campos_new  || ' DATAMAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datamaiorcomprareferenciacomercial), 'null');
				campos_old  = campos_old  || ' DATAMAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datamaiorcomprareferenciacomercial), 'null');
				first = false;
			end if;

			if (new.ultimacomprareferenciacomercial &lt;&gt; old.ultimacomprareferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.ultimacomprareferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' ULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.ultimacomprareferenciacomercial), 'null');
				campos_new  = campos_new  || ' ULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.ultimacomprareferenciacomercial), 'null');
				campos_old  = campos_old  || ' ULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.ultimacomprareferenciacomercial), 'null');
				first = false;
			end if;

			if (new.dataultimacomprareferenciacomercial &lt;&gt; old.dataultimacomprareferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.dataultimacomprareferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' DATAULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.dataultimacomprareferenciacomercial), 'null');
				campos_new  = campos_new  || ' DATAULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.dataultimacomprareferenciacomercial), 'null');
				campos_old  = campos_old  || ' DATAULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.dataultimacomprareferenciacomercial), 'null');
				first = false;
			end if;

			if (new.conceitoreferenciacomercial &lt;&gt; old.conceitoreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CONCEITOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.conceitoreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' CONCEITOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.conceitoreferenciacomercial), 'null');
				campos_new  = campos_new  || ' CONCEITOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.conceitoreferenciacomercial), 'null');
				campos_old  = campos_old  || ' CONCEITOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.conceitoreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.datacadastroreferenciacomercial &lt;&gt; old.datacadastroreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATACADASTROREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datacadastroreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' DATACADASTROREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datacadastroreferenciacomercial), 'null');
				campos_new  = campos_new  || ' DATACADASTROREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.datacadastroreferenciacomercial), 'null');
				campos_old  = campos_old  || ' DATACADASTROREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datacadastroreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.observacoesreferenciacomercial &lt;&gt; old.observacoesreferenciacomercial) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACOESREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.observacoesreferenciacomercial), 'null');
				sql_rolback = sql_rolback || ' OBSERVACOESREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.observacoesreferenciacomercial), 'null');
				campos_new  = campos_new  || ' OBSERVACOESREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.observacoesreferenciacomercial), 'null');
				campos_old  = campos_old  || ' OBSERVACOESREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.observacoesreferenciacomercial), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(new.codigopessoa), 'null') || ' AND CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(new.codigoreferenciacomercial), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO REFERENCIACOMERCIAL (CODIGOEMPRESA, CODIGOLOJA, CODIGOPESSOA, CODIGOREFERENCIACOMERCIAL, LOCALREFERENCIACOMERCIAL, FONEREFERENCIACOMERCIAL, CONTATOREFERENCIACOMERCIAL, DATAREFERENCIACOMERCIAL, FORMAPAGAMENTOREFERENCIACOMERCIAL, MEDIAMENSALREFERENCIACOMERCIAL, MEDIADIASATRAZOREFERENCIACOMERCIAL, MAIORCOMPRAREFERENCIACOMERCIAL, DATAMAIORCOMPRAREFERENCIACOMERCIAL, ULTIMACOMPRAREFERENCIACOMERCIAL, DATAULTIMACOMPRAREFERENCIACOMERCIAL, CONCEITOREFERENCIACOMERCIAL, DATACADASTROREFERENCIACOMERCIAL, OBSERVACOESREFERENCIACOMERCIAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.localreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fonereferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.contatoreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datareferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.formapagamentoreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.mediamensalreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.mediadiasatrazoreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.maiorcomprareferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datamaiorcomprareferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ultimacomprareferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataultimacomprareferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.conceitoreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datacadastroreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacoesreferenciacomercial), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM REFERENCIACOMERCIAL WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ' AND CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.codigoreferenciacomercial), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOA = ' || coalesce(quote_literal(old.codigopessoa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.codigoreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'LOCALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.localreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'FONEREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.fonereferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'CONTATOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.contatoreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'DATAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datareferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'FORMAPAGAMENTOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.formapagamentoreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'MEDIAMENSALREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.mediamensalreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'MEDIADIASATRAZOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.mediadiasatrazoreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'MAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.maiorcomprareferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'DATAMAIORCOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datamaiorcomprareferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'ULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.ultimacomprareferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'DATAULTIMACOMPRAREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.dataultimacomprareferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'CONCEITOREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.conceitoreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'DATACADASTROREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.datacadastroreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACOESREFERENCIACOMERCIAL = ' || coalesce(quote_literal(old.observacoesreferenciacomercial), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigopessoa), 'null')  || ', ' || coalesce(quote_literal(old.codigoreferenciacomercial), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'referenciacomercial', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('referenciacomercial', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('referenciacomercial', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneioabate()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneioabate() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOABATE (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOEMPRESAPESSOAFORNECEDOR, CODIGOLOJAPESSOAFORNECEDOR, CODIGOPESSOAFORNECEDOR, CODIGOENDERECOPESSOAFORNECEDOR, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, STATUSROMANEIO, STATUSNOTAROMANEIO, STATUSPAGAMENTOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESACONTAPAGAR, CODIGOLOJACONTAPAGAR, CODIGOCONTAPAGAR) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusnotaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuspagamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontapagar), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOABATE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSNOTAROMANEIO = ' || coalesce(quote_literal(new.statusnotaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(new.statuspagamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOABATE SET ';
			sql_rolback = 'UPDATE ROMANEIOABATE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresapessoafornecedor &lt;&gt; old.codigoempresapessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigolojapessoafornecedor &lt;&gt; old.codigolojapessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigopessoafornecedor &lt;&gt; old.codigopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoafornecedor &lt;&gt; old.codigoenderecopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.statusromaneio &lt;&gt; old.statusromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				campos_new  = campos_new  || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				campos_old  = campos_old  || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				first = false;
			end if;

			if (new.statusnotaromaneio &lt;&gt; old.statusnotaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(new.statusnotaromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(old.statusnotaromaneio), 'null');
				campos_new  = campos_new  || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(new.statusnotaromaneio), 'null');
				campos_old  = campos_old  || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(old.statusnotaromaneio), 'null');
				first = false;
			end if;

			if (new.statuspagamentoromaneio &lt;&gt; old.statuspagamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(new.statuspagamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(old.statuspagamentoromaneio), 'null');
				campos_new  = campos_new  || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(new.statuspagamentoromaneio), 'null');
				campos_old  = campos_old  || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(old.statuspagamentoromaneio), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresacontapagar &lt;&gt; old.codigoempresacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(new.codigoempresacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null');
				first = false;
			end if;

			if (new.codigolojacontapagar &lt;&gt; old.codigolojacontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(new.codigolojacontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null');
				first = false;
			end if;

			if (new.codigocontapagar &lt;&gt; old.codigocontapagar) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				campos_new  = campos_new  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(new.codigocontapagar), 'null');
				campos_old  = campos_old  || ' CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOABATE (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, CODIGOEMPRESAPESSOAFORNECEDOR, CODIGOLOJAPESSOAFORNECEDOR, CODIGOPESSOAFORNECEDOR, CODIGOENDERECOPESSOAFORNECEDOR, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, STATUSROMANEIO, STATUSNOTAROMANEIO, STATUSPAGAMENTOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESACONTAPAGAR, CODIGOLOJACONTAPAGAR, CODIGOCONTAPAGAR) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusnotaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuspagamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontapagar), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOABATE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSNOTAROMANEIO = ' || coalesce(quote_literal(old.statusnotaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(old.statuspagamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTAPAGAR = ' || coalesce(quote_literal(old.codigoempresacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTAPAGAR = ' || coalesce(quote_literal(old.codigolojacontapagar), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTAPAGAR = ' || coalesce(quote_literal(old.codigocontapagar), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneioabate', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneioabate', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneioabate', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiofrigorifico()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiofrigorifico() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; 'DF4F6BB1504E1522F9C8E46E3517D48F') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOFRIGORIFICO (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAPESSOAFORNECEDOR, CODIGOLOJAPESSOAFORNECEDOR, CODIGOPESSOAFORNECEDOR, CODIGOENDERECOPESSOAFORNECEDOR, TIPOROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, STATUSROMANEIO, STATUSNOTAROMANEIO, STATUSPAGAMENTOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tiporomaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusnotaromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statuspagamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOFRIGORIFICO WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSNOTAROMANEIO = ' || coalesce(quote_literal(new.statusnotaromaneio), 'null') || ', ';
			campos_new   = campos_new || 'STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(new.statuspagamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOFRIGORIFICO SET ';
			sql_rolback = 'UPDATE ROMANEIOFRIGORIFICO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresapessoafornecedor &lt;&gt; old.codigoempresapessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresapessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigolojapessoafornecedor &lt;&gt; old.codigolojapessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojapessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigopessoafornecedor &lt;&gt; old.codigopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoafornecedor &lt;&gt; old.codigoenderecopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigoenderecopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.tiporomaneio &lt;&gt; old.tiporomaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null');
				sql_rolback = sql_rolback || ' TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null');
				campos_new  = campos_new  || ' TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null');
				campos_old  = campos_old  || ' TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.statusromaneio &lt;&gt; old.statusromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				campos_new  = campos_new  || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				campos_old  = campos_old  || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				first = false;
			end if;

			if (new.statusnotaromaneio &lt;&gt; old.statusnotaromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(new.statusnotaromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(old.statusnotaromaneio), 'null');
				campos_new  = campos_new  || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(new.statusnotaromaneio), 'null');
				campos_old  = campos_old  || ' STATUSNOTAROMANEIO = ' || coalesce(quote_literal(old.statusnotaromaneio), 'null');
				first = false;
			end if;

			if (new.statuspagamentoromaneio &lt;&gt; old.statuspagamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(new.statuspagamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(old.statuspagamentoromaneio), 'null');
				campos_new  = campos_new  || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(new.statuspagamentoromaneio), 'null');
				campos_old  = campos_old  || ' STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(old.statuspagamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOFRIGORIFICO (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAPESSOAFORNECEDOR, CODIGOLOJAPESSOAFORNECEDOR, CODIGOPESSOAFORNECEDOR, CODIGOENDERECOPESSOAFORNECEDOR, TIPOROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, STATUSROMANEIO, STATUSNOTAROMANEIO, STATUSPAGAMENTOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tiporomaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusnotaromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statuspagamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOFRIGORIFICO WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresapessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojapessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigoenderecopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSNOTAROMANEIO = ' || coalesce(quote_literal(old.statusnotaromaneio), 'null') || ', ';
			campos_old  = campos_old || 'STATUSPAGAMENTOROMANEIO = ' || coalesce(quote_literal(old.statuspagamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiofrigorifico', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiofrigorifico', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiofrigorifico', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiogado()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiogado() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOGADO (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, CODIGOEMPRESAENDERECOFORNECEDOR, CODIGOLOJAENDERECOFORNECEDOR, CODIGOPESSOAFORNECEDOR, CODIGOPESSOAENDERECOFORNECEDOR, STATUSROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, OBSERVACAOROMANEIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecofornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecofornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoaenderecofornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOGADO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresaenderecofornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigolojaenderecofornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoaenderecofornecedor), 'null') || ', ';
			campos_new   = campos_new || 'STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOGADO SET ';
			sql_rolback = 'UPDATE ROMANEIOGADO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecofornecedor &lt;&gt; old.codigoempresaenderecofornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresaenderecofornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresaenderecofornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresaenderecofornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresaenderecofornecedor), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecofornecedor &lt;&gt; old.codigolojaenderecofornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigolojaenderecofornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigolojaenderecofornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigolojaenderecofornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigolojaenderecofornecedor), 'null');
				first = false;
			end if;

			if (new.codigopessoafornecedor &lt;&gt; old.codigopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.codigopessoaenderecofornecedor &lt;&gt; old.codigopessoaenderecofornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoaenderecofornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoaenderecofornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAENDERECOFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoaenderecofornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoaenderecofornecedor), 'null');
				first = false;
			end if;

			if (new.statusromaneio &lt;&gt; old.statusromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				campos_new  = campos_new  || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				campos_old  = campos_old  || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOGADO (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, CODIGOEMPRESAENDERECOFORNECEDOR, CODIGOLOJAENDERECOFORNECEDOR, CODIGOPESSOAFORNECEDOR, CODIGOPESSOAENDERECOFORNECEDOR, STATUSROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, OBSERVACAOROMANEIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecofornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecofornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoaenderecofornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOGADO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresaenderecofornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigolojaenderecofornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAENDERECOFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoaenderecofornecedor), 'null') || ', ';
			campos_old  = campos_old || 'STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiogado', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiogado', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiogado', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiomadeirabeneficiada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiomadeirabeneficiada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOMADEIRABENEFICIADA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, DATAHORAPROCESSAMENTOROMANEIO, TIPOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO, CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO, CODIGOUSUARIOPROCESSAMENTOROMANEIO, CODIGOEMPRESAGERENTE, CODIGOLOJAGERENTE, CODIGOGERENTE, CODIGOEMPRESAENDERECOPESSOACLIENTE, CODIGOLOJAENDERECOPESSOACLIENTE, CODIGOPESSOACLIENTE, CODIGOENDERECOPESSOACLIENTE, CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA, CODIGOLOJAENDERECOPESSOATRANSPORTADORA, CODIGOPESSOATRANSPORTADORA, CODIGOENDERECOPESSOATRANSPORTADORA, CODIGOEMPRESAMOTORISTA, CODIGOLOJAMOTORISTA, CODIGOMOTORISTA, PLACAPRINCIPALROMANEIO, UFPLACAPRINCIPALROMANEIO, PLACASREBOQUEROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, STATUSROMANEIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tiporomaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresagerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojagerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placaprincipalromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placasreboqueromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusromaneio), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOMADEIRABENEFICIADA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			campos_new   = campos_new || 'PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.placaprincipalromaneio), 'null') || ', ';
			campos_new   = campos_new || 'UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null') || ', ';
			campos_new   = campos_new || 'PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(new.placasreboqueromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOMADEIRABENEFICIADA SET ';
			sql_rolback = 'UPDATE ROMANEIOMADEIRABENEFICIADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.datahoraprocessamentoromaneio &lt;&gt; old.datahoraprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.tiporomaneio &lt;&gt; old.tiporomaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null');
				sql_rolback = sql_rolback || ' TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null');
				campos_new  = campos_new  || ' TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null');
				campos_old  = campos_old  || ' TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuarioprocessamentoromaneio &lt;&gt; old.codigoempresausuarioprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigolojausuarioprocessamentoromaneio &lt;&gt; old.codigolojausuarioprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigousuarioprocessamentoromaneio &lt;&gt; old.codigousuarioprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresagerente &lt;&gt; old.codigoempresagerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null');
				first = false;
			end if;

			if (new.codigolojagerente &lt;&gt; old.codigolojagerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null');
				first = false;
			end if;

			if (new.codigogerente &lt;&gt; old.codigogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				campos_new  = campos_new  || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				campos_old  = campos_old  || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecopessoacliente &lt;&gt; old.codigoempresaenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecopessoacliente &lt;&gt; old.codigolojaenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigopessoacliente &lt;&gt; old.codigopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoacliente &lt;&gt; old.codigoenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecopessoatransportadora &lt;&gt; old.codigoempresaenderecopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecopessoatransportadora &lt;&gt; old.codigolojaenderecopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigopessoatransportadora &lt;&gt; old.codigopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoatransportadora &lt;&gt; old.codigoenderecopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigoempresamotorista &lt;&gt; old.codigoempresamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				first = false;
			end if;

			if (new.codigolojamotorista &lt;&gt; old.codigolojamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				first = false;
			end if;

			if (new.codigomotorista &lt;&gt; old.codigomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				campos_new  = campos_new  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				campos_old  = campos_old  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				first = false;
			end if;

			if (new.placaprincipalromaneio &lt;&gt; old.placaprincipalromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.placaprincipalromaneio), 'null');
				sql_rolback = sql_rolback || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.placaprincipalromaneio), 'null');
				campos_new  = campos_new  || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.placaprincipalromaneio), 'null');
				campos_old  = campos_old  || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.placaprincipalromaneio), 'null');
				first = false;
			end if;

			if (new.ufplacaprincipalromaneio &lt;&gt; old.ufplacaprincipalromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null');
				sql_rolback = sql_rolback || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null');
				campos_new  = campos_new  || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null');
				campos_old  = campos_old  || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null');
				first = false;
			end if;

			if (new.placasreboqueromaneio &lt;&gt; old.placasreboqueromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(new.placasreboqueromaneio), 'null');
				sql_rolback = sql_rolback || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(old.placasreboqueromaneio), 'null');
				campos_new  = campos_new  || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(new.placasreboqueromaneio), 'null');
				campos_old  = campos_old  || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(old.placasreboqueromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.statusromaneio &lt;&gt; old.statusromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				campos_new  = campos_new  || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				campos_old  = campos_old  || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOMADEIRABENEFICIADA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, DATAHORAPROCESSAMENTOROMANEIO, TIPOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO, CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO, CODIGOUSUARIOPROCESSAMENTOROMANEIO, CODIGOEMPRESAGERENTE, CODIGOLOJAGERENTE, CODIGOGERENTE, CODIGOEMPRESAENDERECOPESSOACLIENTE, CODIGOLOJAENDERECOPESSOACLIENTE, CODIGOPESSOACLIENTE, CODIGOENDERECOPESSOACLIENTE, CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA, CODIGOLOJAENDERECOPESSOATRANSPORTADORA, CODIGOPESSOATRANSPORTADORA, CODIGOENDERECOPESSOATRANSPORTADORA, CODIGOEMPRESAMOTORISTA, CODIGOLOJAMOTORISTA, CODIGOMOTORISTA, PLACAPRINCIPALROMANEIO, UFPLACAPRINCIPALROMANEIO, PLACASREBOQUEROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, STATUSROMANEIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tiporomaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresagerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojagerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placaprincipalromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placasreboqueromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusromaneio), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOMADEIRABENEFICIADA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			campos_old  = campos_old || 'PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.placaprincipalromaneio), 'null') || ', ';
			campos_old  = campos_old || 'UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null') || ', ';
			campos_old  = campos_old || 'PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(old.placasreboqueromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiomadeirabeneficiada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiomadeirabeneficiada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiomadeirabeneficiada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiomadeiraserrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiomadeiraserrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOMADEIRASERRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, TIPOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, STATUSROMANEIO, DATAHORAPROCESSAMENTOROMANEIO, CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO, CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO, CODIGOUSUARIOPROCESSAMENTOROMANEIO, CODIGOEMPRESAGERENTE, CODIGOGERENTE, CODIGOLOJAGERENTE, CODIGOEMPRESAENDERECOPESSOACLIENTE, CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA, CODIGOEMPRESAMOTORISTA, CODIGOENDERECOPESSOACLIENTE, CODIGOENDERECOPESSOATRANSPORTADORA, CODIGOLOJAENDERECOPESSOACLIENTE, CODIGOLOJAENDERECOPESSOATRANSPORTADORA, CODIGOLOJAMOTORISTA, CODIGOMOTORISTA, CODIGOPESSOACLIENTE, CODIGOPESSOATRANSPORTADORA, PLACAPRINCIPALROMANEIO, UFPLACAPRINCIPALROMANEIO, PLACASREBOQUEROMANEIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tiporomaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresagerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojagerente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoatransportadora), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placaprincipalromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.placasreboqueromaneio), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOMADEIRASERRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigopessoatransportadora), 'null') || ', ';
			campos_new   = campos_new || 'PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.placaprincipalromaneio), 'null') || ', ';
			campos_new   = campos_new || 'UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null') || ', ';
			campos_new   = campos_new || 'PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(new.placasreboqueromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOMADEIRASERRADA SET ';
			sql_rolback = 'UPDATE ROMANEIOMADEIRASERRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.tiporomaneio &lt;&gt; old.tiporomaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null');
				sql_rolback = sql_rolback || ' TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null');
				campos_new  = campos_new  || ' TIPOROMANEIO = ' || coalesce(quote_literal(new.tiporomaneio), 'null');
				campos_old  = campos_old  || ' TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.statusromaneio &lt;&gt; old.statusromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				sql_rolback = sql_rolback || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				campos_new  = campos_new  || ' STATUSROMANEIO = ' || coalesce(quote_literal(new.statusromaneio), 'null');
				campos_old  = campos_old  || ' STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null');
				first = false;
			end if;

			if (new.datahoraprocessamentoromaneio &lt;&gt; old.datahoraprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoraprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuarioprocessamentoromaneio &lt;&gt; old.codigoempresausuarioprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigoempresausuarioprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigolojausuarioprocessamentoromaneio &lt;&gt; old.codigolojausuarioprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigolojausuarioprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigousuarioprocessamentoromaneio &lt;&gt; old.codigousuarioprocessamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(new.codigousuarioprocessamentoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresagerente &lt;&gt; old.codigoempresagerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(new.codigoempresagerente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null');
				first = false;
			end if;

			if (new.codigogerente &lt;&gt; old.codigogerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				campos_new  = campos_new  || ' CODIGOGERENTE = ' || coalesce(quote_literal(new.codigogerente), 'null');
				campos_old  = campos_old  || ' CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null');
				first = false;
			end if;

			if (new.codigolojagerente &lt;&gt; old.codigolojagerente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(new.codigolojagerente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecopessoacliente &lt;&gt; old.codigoempresaenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecopessoatransportadora &lt;&gt; old.codigoempresaenderecopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoempresaenderecopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigoempresamotorista &lt;&gt; old.codigoempresamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoacliente &lt;&gt; old.codigoenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoatransportadora &lt;&gt; old.codigoenderecopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigoenderecopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecopessoacliente &lt;&gt; old.codigolojaenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecopessoatransportadora &lt;&gt; old.codigolojaenderecopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigolojaenderecopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.codigolojamotorista &lt;&gt; old.codigolojamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				first = false;
			end if;

			if (new.codigomotorista &lt;&gt; old.codigomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				campos_new  = campos_new  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				campos_old  = campos_old  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				first = false;
			end if;

			if (new.codigopessoacliente &lt;&gt; old.codigopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigopessoatransportadora &lt;&gt; old.codigopessoatransportadora) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigopessoatransportadora), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigopessoatransportadora), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(new.codigopessoatransportadora), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigopessoatransportadora), 'null');
				first = false;
			end if;

			if (new.placaprincipalromaneio &lt;&gt; old.placaprincipalromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.placaprincipalromaneio), 'null');
				sql_rolback = sql_rolback || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.placaprincipalromaneio), 'null');
				campos_new  = campos_new  || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.placaprincipalromaneio), 'null');
				campos_old  = campos_old  || ' PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.placaprincipalromaneio), 'null');
				first = false;
			end if;

			if (new.ufplacaprincipalromaneio &lt;&gt; old.ufplacaprincipalromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null');
				sql_rolback = sql_rolback || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null');
				campos_new  = campos_new  || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(new.ufplacaprincipalromaneio), 'null');
				campos_old  = campos_old  || ' UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null');
				first = false;
			end if;

			if (new.placasreboqueromaneio &lt;&gt; old.placasreboqueromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(new.placasreboqueromaneio), 'null');
				sql_rolback = sql_rolback || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(old.placasreboqueromaneio), 'null');
				campos_new  = campos_new  || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(new.placasreboqueromaneio), 'null');
				campos_old  = campos_old  || ' PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(old.placasreboqueromaneio), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOMADEIRASERRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, TIPOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, STATUSROMANEIO, DATAHORAPROCESSAMENTOROMANEIO, CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO, CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO, CODIGOUSUARIOPROCESSAMENTOROMANEIO, CODIGOEMPRESAGERENTE, CODIGOGERENTE, CODIGOLOJAGERENTE, CODIGOEMPRESAENDERECOPESSOACLIENTE, CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA, CODIGOEMPRESAMOTORISTA, CODIGOENDERECOPESSOACLIENTE, CODIGOENDERECOPESSOATRANSPORTADORA, CODIGOLOJAENDERECOPESSOACLIENTE, CODIGOLOJAENDERECOPESSOATRANSPORTADORA, CODIGOLOJAMOTORISTA, CODIGOMOTORISTA, CODIGOPESSOACLIENTE, CODIGOPESSOATRANSPORTADORA, PLACAPRINCIPALROMANEIO, UFPLACAPRINCIPALROMANEIO, PLACASREBOQUEROMANEIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tiporomaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresagerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojagerente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoatransportadora), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placaprincipalromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.placasreboqueromaneio), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOMADEIRASERRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'TIPOROMANEIO = ' || coalesce(quote_literal(old.tiporomaneio), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'STATUSROMANEIO = ' || coalesce(quote_literal(old.statusromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoraprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigoempresausuarioprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigolojausuarioprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOPROCESSAMENTOROMANEIO = ' || coalesce(quote_literal(old.codigousuarioprocessamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAGERENTE = ' || coalesce(quote_literal(old.codigoempresagerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOGERENTE = ' || coalesce(quote_literal(old.codigogerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAGERENTE = ' || coalesce(quote_literal(old.codigolojagerente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoempresaenderecopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigoenderecopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigolojaenderecopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOATRANSPORTADORA = ' || coalesce(quote_literal(old.codigopessoatransportadora), 'null') || ', ';
			campos_old  = campos_old || 'PLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.placaprincipalromaneio), 'null') || ', ';
			campos_old  = campos_old || 'UFPLACAPRINCIPALROMANEIO = ' || coalesce(quote_literal(old.ufplacaprincipalromaneio), 'null') || ', ';
			campos_old  = campos_old || 'PLACASREBOQUEROMANEIO = ' || coalesce(quote_literal(old.placasreboqueromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiomadeiraserrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiomadeiraserrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiomadeiraserrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiomanejotora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiomanejotora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOMANEJOTORA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, NUMEROROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAMOTORISTA, CODIGOLOJAMOTORISTA, CODIGOMOTORISTA, CODIGOEMPRESAVEICULO, CODIGOLOJAVEICULO, CODIGOVEICULO, CODIGOEMPRESAENDERECOCLIENTE, CODIGOLOJAENDERECOCLIENTE, CODIGOENDERECOCLIENTE, CODIGOEMPRESAESPLANADA, CODIGOLOJAESPLANADA, CODIGOESPLANADA, CODIGOEMPRESAMANEJO, CODIGOLOJAMANEJO, CODIGOMANEJO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOPESSOACLIENTE) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaenderecocliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaenderecocliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecocliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaesplanada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaesplanada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoesplanada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamanejo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamanejo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomanejo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoacliente), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOMANEJOTORA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROROMANEIO = ' || coalesce(quote_literal(new.numeroromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVEICULO = ' || coalesce(quote_literal(new.codigoempresaveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVEICULO = ' || coalesce(quote_literal(new.codigolojaveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecocliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecocliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigoenderecocliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAESPLANADA = ' || coalesce(quote_literal(new.codigoempresaesplanada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAESPLANADA = ' || coalesce(quote_literal(new.codigolojaesplanada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMANEJO = ' || coalesce(quote_literal(new.codigoempresamanejo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMANEJO = ' || coalesce(quote_literal(new.codigolojamanejo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOMANEJOTORA SET ';
			sql_rolback = 'UPDATE ROMANEIOMANEJOTORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.numeroromaneio &lt;&gt; old.numeroromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROROMANEIO = ' || coalesce(quote_literal(new.numeroromaneio), 'null');
				sql_rolback = sql_rolback || ' NUMEROROMANEIO = ' || coalesce(quote_literal(old.numeroromaneio), 'null');
				campos_new  = campos_new  || ' NUMEROROMANEIO = ' || coalesce(quote_literal(new.numeroromaneio), 'null');
				campos_old  = campos_old  || ' NUMEROROMANEIO = ' || coalesce(quote_literal(old.numeroromaneio), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresamotorista &lt;&gt; old.codigoempresamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				first = false;
			end if;

			if (new.codigolojamotorista &lt;&gt; old.codigolojamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				first = false;
			end if;

			if (new.codigomotorista &lt;&gt; old.codigomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				campos_new  = campos_new  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				campos_old  = campos_old  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				first = false;
			end if;

			if (new.codigoempresaveiculo &lt;&gt; old.codigoempresaveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVEICULO = ' || coalesce(quote_literal(new.codigoempresaveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVEICULO = ' || coalesce(quote_literal(old.codigoempresaveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVEICULO = ' || coalesce(quote_literal(new.codigoempresaveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVEICULO = ' || coalesce(quote_literal(old.codigoempresaveiculo), 'null');
				first = false;
			end if;

			if (new.codigolojaveiculo &lt;&gt; old.codigolojaveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVEICULO = ' || coalesce(quote_literal(new.codigolojaveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVEICULO = ' || coalesce(quote_literal(old.codigolojaveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVEICULO = ' || coalesce(quote_literal(new.codigolojaveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVEICULO = ' || coalesce(quote_literal(old.codigolojaveiculo), 'null');
				first = false;
			end if;

			if (new.codigoveiculo &lt;&gt; old.codigoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null');
				first = false;
			end if;

			if (new.codigoempresaenderecocliente &lt;&gt; old.codigoempresaenderecocliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecocliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecocliente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigoempresaenderecocliente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecocliente), 'null');
				first = false;
			end if;

			if (new.codigolojaenderecocliente &lt;&gt; old.codigolojaenderecocliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecocliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecocliente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigolojaenderecocliente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecocliente), 'null');
				first = false;
			end if;

			if (new.codigoenderecocliente &lt;&gt; old.codigoenderecocliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigoenderecocliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigoenderecocliente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOCLIENTE = ' || coalesce(quote_literal(new.codigoenderecocliente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigoenderecocliente), 'null');
				first = false;
			end if;

			if (new.codigoempresaesplanada &lt;&gt; old.codigoempresaesplanada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAESPLANADA = ' || coalesce(quote_literal(new.codigoempresaesplanada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAESPLANADA = ' || coalesce(quote_literal(old.codigoempresaesplanada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAESPLANADA = ' || coalesce(quote_literal(new.codigoempresaesplanada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAESPLANADA = ' || coalesce(quote_literal(old.codigoempresaesplanada), 'null');
				first = false;
			end if;

			if (new.codigolojaesplanada &lt;&gt; old.codigolojaesplanada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAESPLANADA = ' || coalesce(quote_literal(new.codigolojaesplanada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAESPLANADA = ' || coalesce(quote_literal(old.codigolojaesplanada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAESPLANADA = ' || coalesce(quote_literal(new.codigolojaesplanada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAESPLANADA = ' || coalesce(quote_literal(old.codigolojaesplanada), 'null');
				first = false;
			end if;

			if (new.codigoesplanada &lt;&gt; old.codigoesplanada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');
				sql_rolback = sql_rolback || ' CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null');
				campos_new  = campos_new  || ' CODIGOESPLANADA = ' || coalesce(quote_literal(new.codigoesplanada), 'null');
				campos_old  = campos_old  || ' CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null');
				first = false;
			end if;

			if (new.codigoempresamanejo &lt;&gt; old.codigoempresamanejo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMANEJO = ' || coalesce(quote_literal(new.codigoempresamanejo), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMANEJO = ' || coalesce(quote_literal(old.codigoempresamanejo), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMANEJO = ' || coalesce(quote_literal(new.codigoempresamanejo), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMANEJO = ' || coalesce(quote_literal(old.codigoempresamanejo), 'null');
				first = false;
			end if;

			if (new.codigolojamanejo &lt;&gt; old.codigolojamanejo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMANEJO = ' || coalesce(quote_literal(new.codigolojamanejo), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMANEJO = ' || coalesce(quote_literal(old.codigolojamanejo), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMANEJO = ' || coalesce(quote_literal(new.codigolojamanejo), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMANEJO = ' || coalesce(quote_literal(old.codigolojamanejo), 'null');
				first = false;
			end if;

			if (new.codigomanejo &lt;&gt; old.codigomanejo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');
				sql_rolback = sql_rolback || ' CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null');
				campos_new  = campos_new  || ' CODIGOMANEJO = ' || coalesce(quote_literal(new.codigomanejo), 'null');
				campos_old  = campos_old  || ' CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigopessoacliente &lt;&gt; old.codigopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoromaneio), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOMANEJOTORA (CODIGOEMPRESA, CODIGOLOJA, CODIGOROMANEIO, NUMEROROMANEIO, DATAROMANEIO, DATAHORALANCAMENTOROMANEIO, OBSERVACAOROMANEIO, CODIGOEMPRESAMOTORISTA, CODIGOLOJAMOTORISTA, CODIGOMOTORISTA, CODIGOEMPRESAVEICULO, CODIGOLOJAVEICULO, CODIGOVEICULO, CODIGOEMPRESAENDERECOCLIENTE, CODIGOLOJAENDERECOCLIENTE, CODIGOENDERECOCLIENTE, CODIGOEMPRESAESPLANADA, CODIGOLOJAESPLANADA, CODIGOESPLANADA, CODIGOEMPRESAMANEJO, CODIGOLOJAMANEJO, CODIGOMANEJO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOPESSOACLIENTE) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaenderecocliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaenderecocliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecocliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaesplanada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaesplanada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoesplanada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamanejo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamanejo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomanejo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoacliente), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOMANEJOTORA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROROMANEIO = ' || coalesce(quote_literal(old.numeroromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVEICULO = ' || coalesce(quote_literal(old.codigoempresaveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVEICULO = ' || coalesce(quote_literal(old.codigolojaveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigoempresaenderecocliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigolojaenderecocliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOCLIENTE = ' || coalesce(quote_literal(old.codigoenderecocliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAESPLANADA = ' || coalesce(quote_literal(old.codigoempresaesplanada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAESPLANADA = ' || coalesce(quote_literal(old.codigolojaesplanada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOESPLANADA = ' || coalesce(quote_literal(old.codigoesplanada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMANEJO = ' || coalesce(quote_literal(old.codigoempresamanejo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMANEJO = ' || coalesce(quote_literal(old.codigolojamanejo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMANEJO = ' || coalesce(quote_literal(old.codigomanejo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoromaneio), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiomanejotora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiomanejotora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiomanejotora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiosaidatora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiosaidatora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOSAIDATORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, DATAHORALANCAMENTOROMANEIO, DATAROMANEIO, OBSERVACAOROMANEIO, CODIGOPESSOACLIENTE, CODIGOEMPRESACLIENTE, CODIGOLOJACLIENTE, CODIGOENDERECOPESSOACLIENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOSAIDATORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(new.codigoempresacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACLIENTE = ' || coalesce(quote_literal(new.codigolojacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOSAIDATORA SET ';
			sql_rolback = 'UPDATE ROMANEIOSAIDATORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			if (new.codigopessoacliente &lt;&gt; old.codigopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoempresacliente &lt;&gt; old.codigoempresacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(new.codigoempresacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(old.codigoempresacliente), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(new.codigoempresacliente), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(old.codigoempresacliente), 'null');
				first = false;
			end if;

			if (new.codigolojacliente &lt;&gt; old.codigolojacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(new.codigolojacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(old.codigolojacliente), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(new.codigolojacliente), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACLIENTE = ' || coalesce(quote_literal(old.codigolojacliente), 'null');
				first = false;
			end if;

			if (new.codigoenderecopessoacliente &lt;&gt; old.codigoenderecopessoacliente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				sql_rolback = sql_rolback || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				campos_new  = campos_new  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(new.codigoenderecopessoacliente), 'null');
				campos_old  = campos_old  || ' CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOSAIDATORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, DATAHORALANCAMENTOROMANEIO, DATAROMANEIO, OBSERVACAOROMANEIO, CODIGOPESSOACLIENTE, CODIGOEMPRESACLIENTE, CODIGOLOJACLIENTE, CODIGOENDERECOPESSOACLIENTE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOSAIDATORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACLIENTE = ' || coalesce(quote_literal(old.codigoempresacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACLIENTE = ' || coalesce(quote_literal(old.codigolojacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOENDERECOPESSOACLIENTE = ' || coalesce(quote_literal(old.codigoenderecopessoacliente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiosaidatora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiosaidatora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiosaidatora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_romaneiotora()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_romaneiotora() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO ROMANEIOTORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, NUMEROROMANEIO, DATAHORALANCAMENTOROMANEIO, CODIGOEMPRESAFORNECEDOR, CODIGOLOJAFORNECEDOR, CODIGOPESSOAFORNECEDOR, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOMOTORISTA, CODIGOEMPRESAMOTORISTA, CODIGOLOJAMOTORISTA, DATAROMANEIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataromaneio), 'null') || ')';

			sql_rolback = 'DELETE FROM ROMANEIOTORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROROMANEIO = ' || coalesce(quote_literal(new.numeroromaneio), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null') || ', ';
			campos_new   = campos_new || 'DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE ROMANEIOTORA SET ';
			sql_rolback = 'UPDATE ROMANEIOTORA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoromaneio &lt;&gt; old.codigoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				sql_rolback = sql_rolback || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				campos_new  = campos_new  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null');
				campos_old  = campos_old  || ' CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.numeroromaneio &lt;&gt; old.numeroromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROROMANEIO = ' || coalesce(quote_literal(new.numeroromaneio), 'null');
				sql_rolback = sql_rolback || ' NUMEROROMANEIO = ' || coalesce(quote_literal(old.numeroromaneio), 'null');
				campos_new  = campos_new  || ' NUMEROROMANEIO = ' || coalesce(quote_literal(new.numeroromaneio), 'null');
				campos_old  = campos_old  || ' NUMEROROMANEIO = ' || coalesce(quote_literal(old.numeroromaneio), 'null');
				first = false;
			end if;

			if (new.datahoralancamentoromaneio &lt;&gt; old.datahoralancamentoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				campos_new  = campos_new  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(new.datahoralancamentoromaneio), 'null');
				campos_old  = campos_old  || ' DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresafornecedor &lt;&gt; old.codigoempresafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(new.codigoempresafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresafornecedor), 'null');
				first = false;
			end if;

			if (new.codigolojafornecedor &lt;&gt; old.codigolojafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(new.codigolojafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojafornecedor), 'null');
				first = false;
			end if;

			if (new.codigopessoafornecedor &lt;&gt; old.codigopessoafornecedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				campos_new  = campos_new  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(new.codigopessoafornecedor), 'null');
				campos_old  = campos_old  || ' CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null');
				first = false;
			end if;

			if (new.observacaoromaneio &lt;&gt; old.observacaoromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				campos_new  = campos_new  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(new.observacaoromaneio), 'null');
				campos_old  = campos_old  || ' OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigomotorista &lt;&gt; old.codigomotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				campos_new  = campos_new  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(new.codigomotorista), 'null');
				campos_old  = campos_old  || ' CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null');
				first = false;
			end if;

			if (new.codigoempresamotorista &lt;&gt; old.codigoempresamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(new.codigoempresamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null');
				first = false;
			end if;

			if (new.codigolojamotorista &lt;&gt; old.codigolojamotorista) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(new.codigolojamotorista), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null');
				first = false;
			end if;

			if (new.dataromaneio &lt;&gt; old.dataromaneio) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				sql_rolback = sql_rolback || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				campos_new  = campos_new  || ' DATAROMANEIO = ' || coalesce(quote_literal(new.dataromaneio), 'null');
				campos_old  = campos_old  || ' DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(new.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO ROMANEIOTORA (CODIGOROMANEIO, CODIGOEMPRESA, CODIGOLOJA, NUMEROROMANEIO, DATAHORALANCAMENTOROMANEIO, CODIGOEMPRESAFORNECEDOR, CODIGOLOJAFORNECEDOR, CODIGOPESSOAFORNECEDOR, OBSERVACAOROMANEIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOMOTORISTA, CODIGOEMPRESAMOTORISTA, CODIGOLOJAMOTORISTA, DATAROMANEIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataromaneio), 'null') || ')';

			sql_replica = 'DELETE FROM ROMANEIOTORA WHERE CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOROMANEIO = ' || coalesce(quote_literal(old.codigoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROROMANEIO = ' || coalesce(quote_literal(old.numeroromaneio), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORALANCAMENTOROMANEIO = ' || coalesce(quote_literal(old.datahoralancamentoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFORNECEDOR = ' || coalesce(quote_literal(old.codigoempresafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFORNECEDOR = ' || coalesce(quote_literal(old.codigolojafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPESSOAFORNECEDOR = ' || coalesce(quote_literal(old.codigopessoafornecedor), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOROMANEIO = ' || coalesce(quote_literal(old.observacaoromaneio), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOMOTORISTA = ' || coalesce(quote_literal(old.codigomotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAMOTORISTA = ' || coalesce(quote_literal(old.codigoempresamotorista), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAMOTORISTA = ' || coalesce(quote_literal(old.codigolojamotorista), 'null') || ', ';
			campos_old  = campos_old || 'DATAROMANEIO = ' || coalesce(quote_literal(old.dataromaneio), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoromaneio), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'romaneiotora', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiotora', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('romaneiotora', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_situacaotrocamanutencao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_situacaotrocamanutencao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO SITUACAOTROCAMANUTENCAO (CODIGOSITUACAOTROCAMANUTENCAO, DESCRICAOSITUACAOTROCAMANUTENCAO, FLAGFINALSITUACAOTROCAMANUTENCAO, FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaosituacaotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagfinalsituacaotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagenviaemailsituacaotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM SITUACAOTROCAMANUTENCAO WHERE CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaosituacaotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'FLAGFINALSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagfinalsituacaotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagenviaemailsituacaotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE SITUACAOTROCAMANUTENCAO SET ';
			sql_rolback = 'UPDATE SITUACAOTROCAMANUTENCAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigosituacaotrocamanutencao &lt;&gt; old.codigosituacaotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.descricaosituacaotrocamanutencao &lt;&gt; old.descricaosituacaotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaosituacaotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaosituacaotrocamanutencao), 'null');
				campos_new  = campos_new  || ' DESCRICAOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaosituacaotrocamanutencao), 'null');
				campos_old  = campos_old  || ' DESCRICAOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaosituacaotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.flagfinalsituacaotrocamanutencao &lt;&gt; old.flagfinalsituacaotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGFINALSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagfinalsituacaotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' FLAGFINALSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagfinalsituacaotrocamanutencao), 'null');
				campos_new  = campos_new  || ' FLAGFINALSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagfinalsituacaotrocamanutencao), 'null');
				campos_old  = campos_old  || ' FLAGFINALSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagfinalsituacaotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.flagenviaemailsituacaotrocamanutencao &lt;&gt; old.flagenviaemailsituacaotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagenviaemailsituacaotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagenviaemailsituacaotrocamanutencao), 'null');
				campos_new  = campos_new  || ' FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.flagenviaemailsituacaotrocamanutencao), 'null');
				campos_old  = campos_old  || ' FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagenviaemailsituacaotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null');

			sql_chave = coalesce(quote_literal(new.codigosituacaotrocamanutencao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO SITUACAOTROCAMANUTENCAO (CODIGOSITUACAOTROCAMANUTENCAO, DESCRICAOSITUACAOTROCAMANUTENCAO, FLAGFINALSITUACAOTROCAMANUTENCAO, FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaosituacaotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagfinalsituacaotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagenviaemailsituacaotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM SITUACAOTROCAMANUTENCAO WHERE CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaosituacaotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'FLAGFINALSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagfinalsituacaotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'FLAGENVIAEMAILSITUACAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.flagenviaemailsituacaotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigosituacaotrocamanutencao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'situacaotrocamanutencao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('situacaotrocamanutencao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('situacaotrocamanutencao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_subgrupo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_subgrupo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO SUBGRUPO (CODIGOSUBGRUPO, NOMESUBGRUPO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosubgrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomesubgrupo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM SUBGRUPO WHERE CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null') || ', ';
			campos_new   = campos_new || 'NOMESUBGRUPO = ' || coalesce(quote_literal(new.nomesubgrupo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigosubgrupo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE SUBGRUPO SET ';
			sql_rolback = 'UPDATE SUBGRUPO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigosubgrupo &lt;&gt; old.codigosubgrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');
				sql_rolback = sql_rolback || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null');
				campos_new  = campos_new  || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');
				campos_old  = campos_old  || ' CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null');
				first = false;
			end if;

			if (new.nomesubgrupo &lt;&gt; old.nomesubgrupo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMESUBGRUPO = ' || coalesce(quote_literal(new.nomesubgrupo), 'null');
				sql_rolback = sql_rolback || ' NOMESUBGRUPO = ' || coalesce(quote_literal(old.nomesubgrupo), 'null');
				campos_new  = campos_new  || ' NOMESUBGRUPO = ' || coalesce(quote_literal(new.nomesubgrupo), 'null');
				campos_old  = campos_old  || ' NOMESUBGRUPO = ' || coalesce(quote_literal(old.nomesubgrupo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOSUBGRUPO = ' || coalesce(quote_literal(new.codigosubgrupo), 'null');

			sql_chave = coalesce(quote_literal(new.codigosubgrupo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO SUBGRUPO (CODIGOSUBGRUPO, NOMESUBGRUPO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosubgrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomesubgrupo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM SUBGRUPO WHERE CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOSUBGRUPO = ' || coalesce(quote_literal(old.codigosubgrupo), 'null') || ', ';
			campos_old  = campos_old || 'NOMESUBGRUPO = ' || coalesce(quote_literal(old.nomesubgrupo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigosubgrupo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'subgrupo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('subgrupo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('subgrupo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_subproduto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_subproduto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO SUBPRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, CODIGOEMPRESASUBPRODUTO, CODIGOLOJASUBPRODUTO, CODIGOSUBPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADESUBPRODUTO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosubproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadesubproduto), 'null') || ')';

			sql_rolback = 'DELETE FROM SUBPRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADESUBPRODUTO = ' || coalesce(quote_literal(new.quantidadesubproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigosubproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE SUBPRODUTO SET ';
			sql_rolback = 'UPDATE SUBPRODUTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresasubproduto &lt;&gt; old.codigoempresasubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null');
				first = false;
			end if;

			if (new.codigolojasubproduto &lt;&gt; old.codigolojasubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null');
				first = false;
			end if;

			if (new.codigosubproduto &lt;&gt; old.codigosubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null');
				campos_new  = campos_new  || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
				campos_old  = campos_old  || ' CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.quantidadesubproduto &lt;&gt; old.quantidadesubproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADESUBPRODUTO = ' || coalesce(quote_literal(new.quantidadesubproduto), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADESUBPRODUTO = ' || coalesce(quote_literal(old.quantidadesubproduto), 'null');
				campos_new  = campos_new  || ' QUANTIDADESUBPRODUTO = ' || coalesce(quote_literal(new.quantidadesubproduto), 'null');
				campos_old  = campos_old  || ' QUANTIDADESUBPRODUTO = ' || coalesce(quote_literal(old.quantidadesubproduto), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(new.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(new.codigosubproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojasubproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigosubproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO SUBPRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOPRODUTO, CODIGOEMPRESASUBPRODUTO, CODIGOLOJASUBPRODUTO, CODIGOSUBPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, QUANTIDADESUBPRODUTO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresasubproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojasubproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosubproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadesubproduto), 'null') || ')';

			sql_replica = 'DELETE FROM SUBPRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ' AND CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null') || ' AND CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null') || ' AND CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESASUBPRODUTO = ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJASUBPRODUTO = ' || coalesce(quote_literal(old.codigolojasubproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOSUBPRODUTO = ' || coalesce(quote_literal(old.codigosubproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADESUBPRODUTO = ' || coalesce(quote_literal(old.quantidadesubproduto), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresasubproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigolojasubproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigosubproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'subproduto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('subproduto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('subproduto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelainss()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelainss() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELAINSS (CODIGOEMPRESA, CODIGOLOJA, CODIGOTABELAINSS, DATAINICIALVIGENCIATABELAINSS, DATAFINALVIGENCIATABELAINSS, VALORINICIALTABELAINSS, VALORFINALTABELAINSS, ALIQUOTATABELAINSS, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, ALIQUOTAPATRONALTABELAINSS) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotabelainss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialvigenciatabelainss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinalvigenciatabelainss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorinicialtabelainss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfinaltabelainss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotatabelainss), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotapatronaltabelainss), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELAINSS WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTABELAINSS = ' || coalesce(quote_literal(new.codigotabelainss), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTABELAINSS = ' || coalesce(quote_literal(new.codigotabelainss), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALVIGENCIATABELAINSS = ' || coalesce(quote_literal(new.datainicialvigenciatabelainss), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALVIGENCIATABELAINSS = ' || coalesce(quote_literal(new.datafinalvigenciatabelainss), 'null') || ', ';
			campos_new   = campos_new || 'VALORINICIALTABELAINSS = ' || coalesce(quote_literal(new.valorinicialtabelainss), 'null') || ', ';
			campos_new   = campos_new || 'VALORFINALTABELAINSS = ' || coalesce(quote_literal(new.valorfinaltabelainss), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTATABELAINSS = ' || coalesce(quote_literal(new.aliquotatabelainss), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAPATRONALTABELAINSS = ' || coalesce(quote_literal(new.aliquotapatronaltabelainss), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotabelainss), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELAINSS SET ';
			sql_rolback = 'UPDATE TABELAINSS SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotabelainss &lt;&gt; old.codigotabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTABELAINSS = ' || coalesce(quote_literal(new.codigotabelainss), 'null');
				sql_rolback = sql_rolback || ' CODIGOTABELAINSS = ' || coalesce(quote_literal(old.codigotabelainss), 'null');
				campos_new  = campos_new  || ' CODIGOTABELAINSS = ' || coalesce(quote_literal(new.codigotabelainss), 'null');
				campos_old  = campos_old  || ' CODIGOTABELAINSS = ' || coalesce(quote_literal(old.codigotabelainss), 'null');
				first = false;
			end if;

			if (new.datainicialvigenciatabelainss &lt;&gt; old.datainicialvigenciatabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALVIGENCIATABELAINSS = ' || coalesce(quote_literal(new.datainicialvigenciatabelainss), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALVIGENCIATABELAINSS = ' || coalesce(quote_literal(old.datainicialvigenciatabelainss), 'null');
				campos_new  = campos_new  || ' DATAINICIALVIGENCIATABELAINSS = ' || coalesce(quote_literal(new.datainicialvigenciatabelainss), 'null');
				campos_old  = campos_old  || ' DATAINICIALVIGENCIATABELAINSS = ' || coalesce(quote_literal(old.datainicialvigenciatabelainss), 'null');
				first = false;
			end if;

			if (new.datafinalvigenciatabelainss &lt;&gt; old.datafinalvigenciatabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALVIGENCIATABELAINSS = ' || coalesce(quote_literal(new.datafinalvigenciatabelainss), 'null');
				sql_rolback = sql_rolback || ' DATAFINALVIGENCIATABELAINSS = ' || coalesce(quote_literal(old.datafinalvigenciatabelainss), 'null');
				campos_new  = campos_new  || ' DATAFINALVIGENCIATABELAINSS = ' || coalesce(quote_literal(new.datafinalvigenciatabelainss), 'null');
				campos_old  = campos_old  || ' DATAFINALVIGENCIATABELAINSS = ' || coalesce(quote_literal(old.datafinalvigenciatabelainss), 'null');
				first = false;
			end if;

			if (new.valorinicialtabelainss &lt;&gt; old.valorinicialtabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORINICIALTABELAINSS = ' || coalesce(quote_literal(new.valorinicialtabelainss), 'null');
				sql_rolback = sql_rolback || ' VALORINICIALTABELAINSS = ' || coalesce(quote_literal(old.valorinicialtabelainss), 'null');
				campos_new  = campos_new  || ' VALORINICIALTABELAINSS = ' || coalesce(quote_literal(new.valorinicialtabelainss), 'null');
				campos_old  = campos_old  || ' VALORINICIALTABELAINSS = ' || coalesce(quote_literal(old.valorinicialtabelainss), 'null');
				first = false;
			end if;

			if (new.valorfinaltabelainss &lt;&gt; old.valorfinaltabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFINALTABELAINSS = ' || coalesce(quote_literal(new.valorfinaltabelainss), 'null');
				sql_rolback = sql_rolback || ' VALORFINALTABELAINSS = ' || coalesce(quote_literal(old.valorfinaltabelainss), 'null');
				campos_new  = campos_new  || ' VALORFINALTABELAINSS = ' || coalesce(quote_literal(new.valorfinaltabelainss), 'null');
				campos_old  = campos_old  || ' VALORFINALTABELAINSS = ' || coalesce(quote_literal(old.valorfinaltabelainss), 'null');
				first = false;
			end if;

			if (new.aliquotatabelainss &lt;&gt; old.aliquotatabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTATABELAINSS = ' || coalesce(quote_literal(new.aliquotatabelainss), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTATABELAINSS = ' || coalesce(quote_literal(old.aliquotatabelainss), 'null');
				campos_new  = campos_new  || ' ALIQUOTATABELAINSS = ' || coalesce(quote_literal(new.aliquotatabelainss), 'null');
				campos_old  = campos_old  || ' ALIQUOTATABELAINSS = ' || coalesce(quote_literal(old.aliquotatabelainss), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.aliquotapatronaltabelainss &lt;&gt; old.aliquotapatronaltabelainss) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAPATRONALTABELAINSS = ' || coalesce(quote_literal(new.aliquotapatronaltabelainss), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAPATRONALTABELAINSS = ' || coalesce(quote_literal(old.aliquotapatronaltabelainss), 'null');
				campos_new  = campos_new  || ' ALIQUOTAPATRONALTABELAINSS = ' || coalesce(quote_literal(new.aliquotapatronaltabelainss), 'null');
				campos_old  = campos_old  || ' ALIQUOTAPATRONALTABELAINSS = ' || coalesce(quote_literal(old.aliquotapatronaltabelainss), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTABELAINSS = ' || coalesce(quote_literal(new.codigotabelainss), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTABELAINSS = ' || coalesce(quote_literal(new.codigotabelainss), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotabelainss), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELAINSS (CODIGOEMPRESA, CODIGOLOJA, CODIGOTABELAINSS, DATAINICIALVIGENCIATABELAINSS, DATAFINALVIGENCIATABELAINSS, VALORINICIALTABELAINSS, VALORFINALTABELAINSS, ALIQUOTATABELAINSS, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, ALIQUOTAPATRONALTABELAINSS) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotabelainss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialvigenciatabelainss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinalvigenciatabelainss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorinicialtabelainss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfinaltabelainss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotatabelainss), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotapatronaltabelainss), 'null') || ')';

			sql_replica = 'DELETE FROM TABELAINSS WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTABELAINSS = ' || coalesce(quote_literal(old.codigotabelainss), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTABELAINSS = ' || coalesce(quote_literal(old.codigotabelainss), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALVIGENCIATABELAINSS = ' || coalesce(quote_literal(old.datainicialvigenciatabelainss), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALVIGENCIATABELAINSS = ' || coalesce(quote_literal(old.datafinalvigenciatabelainss), 'null') || ', ';
			campos_old  = campos_old || 'VALORINICIALTABELAINSS = ' || coalesce(quote_literal(old.valorinicialtabelainss), 'null') || ', ';
			campos_old  = campos_old || 'VALORFINALTABELAINSS = ' || coalesce(quote_literal(old.valorfinaltabelainss), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTATABELAINSS = ' || coalesce(quote_literal(old.aliquotatabelainss), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAPATRONALTABELAINSS = ' || coalesce(quote_literal(old.aliquotapatronaltabelainss), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotabelainss), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelainss', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelainss', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelainss', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelairrf()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelairrf() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELAIRRF (CODIGOTABELAIRRF, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIATABELAIRRF, DATAFINALVIGENCIATABELAIRRF, VALORINICIALTABELAIRRF, VALORFINALTABELAIRRF, ALIQUOTATABELAIRRF, VALORPARCELADEDUCAOTABELAIRRF, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorinicialtabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfinaltabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotatabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorparceladeducaotabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELAIRRF WHERE CODIGOTABELAIRRF = ' || coalesce(quote_literal(new.codigotabelairrf), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTABELAIRRF = ' || coalesce(quote_literal(new.codigotabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'VALORINICIALTABELAIRRF = ' || coalesce(quote_literal(new.valorinicialtabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'VALORFINALTABELAIRRF = ' || coalesce(quote_literal(new.valorfinaltabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTATABELAIRRF = ' || coalesce(quote_literal(new.aliquotatabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'VALORPARCELADEDUCAOTABELAIRRF = ' || coalesce(quote_literal(new.valorparceladeducaotabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotabelairrf), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELAIRRF SET ';
			sql_rolback = 'UPDATE TABELAIRRF SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotabelairrf &lt;&gt; old.codigotabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTABELAIRRF = ' || coalesce(quote_literal(new.codigotabelairrf), 'null');
				sql_rolback = sql_rolback || ' CODIGOTABELAIRRF = ' || coalesce(quote_literal(old.codigotabelairrf), 'null');
				campos_new  = campos_new  || ' CODIGOTABELAIRRF = ' || coalesce(quote_literal(new.codigotabelairrf), 'null');
				campos_old  = campos_old  || ' CODIGOTABELAIRRF = ' || coalesce(quote_literal(old.codigotabelairrf), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datainicialvigenciatabelairrf &lt;&gt; old.datainicialvigenciatabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null');
				campos_new  = campos_new  || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null');
				campos_old  = campos_old  || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null');
				first = false;
			end if;

			if (new.datafinalvigenciatabelairrf &lt;&gt; old.datafinalvigenciatabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null');
				sql_rolback = sql_rolback || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null');
				campos_new  = campos_new  || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null');
				campos_old  = campos_old  || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null');
				first = false;
			end if;

			if (new.valorinicialtabelairrf &lt;&gt; old.valorinicialtabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORINICIALTABELAIRRF = ' || coalesce(quote_literal(new.valorinicialtabelairrf), 'null');
				sql_rolback = sql_rolback || ' VALORINICIALTABELAIRRF = ' || coalesce(quote_literal(old.valorinicialtabelairrf), 'null');
				campos_new  = campos_new  || ' VALORINICIALTABELAIRRF = ' || coalesce(quote_literal(new.valorinicialtabelairrf), 'null');
				campos_old  = campos_old  || ' VALORINICIALTABELAIRRF = ' || coalesce(quote_literal(old.valorinicialtabelairrf), 'null');
				first = false;
			end if;

			if (new.valorfinaltabelairrf &lt;&gt; old.valorfinaltabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFINALTABELAIRRF = ' || coalesce(quote_literal(new.valorfinaltabelairrf), 'null');
				sql_rolback = sql_rolback || ' VALORFINALTABELAIRRF = ' || coalesce(quote_literal(old.valorfinaltabelairrf), 'null');
				campos_new  = campos_new  || ' VALORFINALTABELAIRRF = ' || coalesce(quote_literal(new.valorfinaltabelairrf), 'null');
				campos_old  = campos_old  || ' VALORFINALTABELAIRRF = ' || coalesce(quote_literal(old.valorfinaltabelairrf), 'null');
				first = false;
			end if;

			if (new.aliquotatabelairrf &lt;&gt; old.aliquotatabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTATABELAIRRF = ' || coalesce(quote_literal(new.aliquotatabelairrf), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTATABELAIRRF = ' || coalesce(quote_literal(old.aliquotatabelairrf), 'null');
				campos_new  = campos_new  || ' ALIQUOTATABELAIRRF = ' || coalesce(quote_literal(new.aliquotatabelairrf), 'null');
				campos_old  = campos_old  || ' ALIQUOTATABELAIRRF = ' || coalesce(quote_literal(old.aliquotatabelairrf), 'null');
				first = false;
			end if;

			if (new.valorparceladeducaotabelairrf &lt;&gt; old.valorparceladeducaotabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORPARCELADEDUCAOTABELAIRRF = ' || coalesce(quote_literal(new.valorparceladeducaotabelairrf), 'null');
				sql_rolback = sql_rolback || ' VALORPARCELADEDUCAOTABELAIRRF = ' || coalesce(quote_literal(old.valorparceladeducaotabelairrf), 'null');
				campos_new  = campos_new  || ' VALORPARCELADEDUCAOTABELAIRRF = ' || coalesce(quote_literal(new.valorparceladeducaotabelairrf), 'null');
				campos_old  = campos_old  || ' VALORPARCELADEDUCAOTABELAIRRF = ' || coalesce(quote_literal(old.valorparceladeducaotabelairrf), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTABELAIRRF = ' || coalesce(quote_literal(new.codigotabelairrf), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTABELAIRRF = ' || coalesce(quote_literal(new.codigotabelairrf), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigotabelairrf), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELAIRRF (CODIGOTABELAIRRF, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIATABELAIRRF, DATAFINALVIGENCIATABELAIRRF, VALORINICIALTABELAIRRF, VALORFINALTABELAIRRF, ALIQUOTATABELAIRRF, VALORPARCELADEDUCAOTABELAIRRF, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorinicialtabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfinaltabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotatabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorparceladeducaotabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TABELAIRRF WHERE CODIGOTABELAIRRF = ' || coalesce(quote_literal(old.codigotabelairrf), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTABELAIRRF = ' || coalesce(quote_literal(old.codigotabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'VALORINICIALTABELAIRRF = ' || coalesce(quote_literal(old.valorinicialtabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'VALORFINALTABELAIRRF = ' || coalesce(quote_literal(old.valorfinaltabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTATABELAIRRF = ' || coalesce(quote_literal(old.aliquotatabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'VALORPARCELADEDUCAOTABELAIRRF = ' || coalesce(quote_literal(old.valorparceladeducaotabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotabelairrf), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelairrf', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelairrf', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelairrf', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelairrfdeducaodependente()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelairrfdeducaodependente() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELAIRRFDEDUCAODEPENDENTE (CODIGOTABELAIRRFDEPENDENTE, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIATABELAIRRF, DATAFINALVIGENCIATABELAIRRF, VALORDEDUCAOTABELAIRRF, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotabelairrfdependente), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valordeducaotabelairrf), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELAIRRFDEDUCAODEPENDENTE WHERE CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(new.codigotabelairrfdependente), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(new.codigotabelairrfdependente), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'VALORDEDUCAOTABELAIRRF = ' || coalesce(quote_literal(new.valordeducaotabelairrf), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotabelairrfdependente), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELAIRRFDEDUCAODEPENDENTE SET ';
			sql_rolback = 'UPDATE TABELAIRRFDEDUCAODEPENDENTE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotabelairrfdependente &lt;&gt; old.codigotabelairrfdependente) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(new.codigotabelairrfdependente), 'null');
				sql_rolback = sql_rolback || ' CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(old.codigotabelairrfdependente), 'null');
				campos_new  = campos_new  || ' CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(new.codigotabelairrfdependente), 'null');
				campos_old  = campos_old  || ' CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(old.codigotabelairrfdependente), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datainicialvigenciatabelairrf &lt;&gt; old.datainicialvigenciatabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null');
				campos_new  = campos_new  || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datainicialvigenciatabelairrf), 'null');
				campos_old  = campos_old  || ' DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null');
				first = false;
			end if;

			if (new.datafinalvigenciatabelairrf &lt;&gt; old.datafinalvigenciatabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null');
				sql_rolback = sql_rolback || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null');
				campos_new  = campos_new  || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(new.datafinalvigenciatabelairrf), 'null');
				campos_old  = campos_old  || ' DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null');
				first = false;
			end if;

			if (new.valordeducaotabelairrf &lt;&gt; old.valordeducaotabelairrf) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORDEDUCAOTABELAIRRF = ' || coalesce(quote_literal(new.valordeducaotabelairrf), 'null');
				sql_rolback = sql_rolback || ' VALORDEDUCAOTABELAIRRF = ' || coalesce(quote_literal(old.valordeducaotabelairrf), 'null');
				campos_new  = campos_new  || ' VALORDEDUCAOTABELAIRRF = ' || coalesce(quote_literal(new.valordeducaotabelairrf), 'null');
				campos_old  = campos_old  || ' VALORDEDUCAOTABELAIRRF = ' || coalesce(quote_literal(old.valordeducaotabelairrf), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(new.codigotabelairrfdependente), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(new.codigotabelairrfdependente), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigotabelairrfdependente), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELAIRRFDEDUCAODEPENDENTE (CODIGOTABELAIRRFDEPENDENTE, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIATABELAIRRF, DATAFINALVIGENCIATABELAIRRF, VALORDEDUCAOTABELAIRRF, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotabelairrfdependente), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valordeducaotabelairrf), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TABELAIRRFDEDUCAODEPENDENTE WHERE CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(old.codigotabelairrfdependente), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTABELAIRRFDEPENDENTE = ' || coalesce(quote_literal(old.codigotabelairrfdependente), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datainicialvigenciatabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALVIGENCIATABELAIRRF = ' || coalesce(quote_literal(old.datafinalvigenciatabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'VALORDEDUCAOTABELAIRRF = ' || coalesce(quote_literal(old.valordeducaotabelairrf), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotabelairrfdependente), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelairrfdeducaodependente', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelairrfdeducaodependente', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelairrfdeducaodependente', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelapreco()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelapreco() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELAPRECO (CODIGOTABELAPRECO, NOMETABELAPRECO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotabelapreco), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nometabelapreco), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELAPRECO WHERE CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null') || ', ';
			campos_new   = campos_new || 'NOMETABELAPRECO = ' || coalesce(quote_literal(new.nometabelapreco), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotabelapreco), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELAPRECO SET ';
			sql_rolback = 'UPDATE TABELAPRECO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotabelapreco &lt;&gt; old.codigotabelapreco) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');
				sql_rolback = sql_rolback || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null');
				campos_new  = campos_new  || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');
				campos_old  = campos_old  || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null');
				first = false;
			end if;

			if (new.nometabelapreco &lt;&gt; old.nometabelapreco) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMETABELAPRECO = ' || coalesce(quote_literal(new.nometabelapreco), 'null');
				sql_rolback = sql_rolback || ' NOMETABELAPRECO = ' || coalesce(quote_literal(old.nometabelapreco), 'null');
				campos_new  = campos_new  || ' NOMETABELAPRECO = ' || coalesce(quote_literal(new.nometabelapreco), 'null');
				campos_old  = campos_old  || ' NOMETABELAPRECO = ' || coalesce(quote_literal(old.nometabelapreco), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');

			sql_chave = coalesce(quote_literal(new.codigotabelapreco), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELAPRECO (CODIGOTABELAPRECO, NOMETABELAPRECO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotabelapreco), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nometabelapreco), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TABELAPRECO WHERE CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null') || ', ';
			campos_old  = campos_old || 'NOMETABELAPRECO = ' || coalesce(quote_literal(old.nometabelapreco), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotabelapreco), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelapreco', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelapreco', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelapreco', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelaprecoproduto()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelaprecoproduto() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELAPRECOPRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTABELAPRECO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, PRECOVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotabelapreco), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.precovenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELAPRECOPRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'PRECOVENDA = ' || coalesce(quote_literal(new.precovenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotabelapreco), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELAPRECOPRODUTO SET ';
			sql_rolback = 'UPDATE TABELAPRECOPRODUTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotabelapreco &lt;&gt; old.codigotabelapreco) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');
				sql_rolback = sql_rolback || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null');
				campos_new  = campos_new  || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null');
				campos_old  = campos_old  || ' CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.precovenda &lt;&gt; old.precovenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRECOVENDA = ' || coalesce(quote_literal(new.precovenda), 'null');
				sql_rolback = sql_rolback || ' PRECOVENDA = ' || coalesce(quote_literal(old.precovenda), 'null');
				campos_new  = campos_new  || ' PRECOVENDA = ' || coalesce(quote_literal(new.precovenda), 'null');
				campos_old  = campos_old  || ' PRECOVENDA = ' || coalesce(quote_literal(old.precovenda), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTABELAPRECO = ' || coalesce(quote_literal(new.codigotabelapreco), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotabelapreco), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(new.codigoproduto), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELAPRECOPRODUTO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTABELAPRECO, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, PRECOVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotabelapreco), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.precovenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TABELAPRECOPRODUTO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null') || ' AND CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ' AND CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ' AND CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTABELAPRECO = ' || coalesce(quote_literal(old.codigotabelapreco), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'PRECOVENDA = ' || coalesce(quote_literal(old.precovenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotabelapreco), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaproduto), 'null')  || ', ' || coalesce(quote_literal(old.codigoproduto), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelaprecoproduto', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelaprecoproduto', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelaprecoproduto', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelasalariofamilia()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelasalariofamilia() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELASALARIOFAMILIA (CODIGOTABELASALARIOFAMILIA, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIASALARIOFAMILIA, DATAFINALVIGENCIASALARIOFAMILIA, VALORINICIALSALARIOFAMILIA, VALORFINALSALARIOFAMILIA, VALORSALARIOFAMILIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialvigenciasalariofamilia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinalvigenciasalariofamilia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorinicialsalariofamilia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorfinalsalariofamilia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorsalariofamilia), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELASALARIOFAMILIA WHERE CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(new.datainicialvigenciasalariofamilia), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(new.datafinalvigenciasalariofamilia), 'null') || ', ';
			campos_new   = campos_new || 'VALORINICIALSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorinicialsalariofamilia), 'null') || ', ';
			campos_new   = campos_new || 'VALORFINALSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorfinalsalariofamilia), 'null') || ', ';
			campos_new   = campos_new || 'VALORSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorsalariofamilia), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotabelasalariofamilia), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELASALARIOFAMILIA SET ';
			sql_rolback = 'UPDATE TABELASALARIOFAMILIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotabelasalariofamilia &lt;&gt; old.codigotabelasalariofamilia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null');
				sql_rolback = sql_rolback || ' CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(old.codigotabelasalariofamilia), 'null');
				campos_new  = campos_new  || ' CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null');
				campos_old  = campos_old  || ' CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(old.codigotabelasalariofamilia), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datainicialvigenciasalariofamilia &lt;&gt; old.datainicialvigenciasalariofamilia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(new.datainicialvigenciasalariofamilia), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(old.datainicialvigenciasalariofamilia), 'null');
				campos_new  = campos_new  || ' DATAINICIALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(new.datainicialvigenciasalariofamilia), 'null');
				campos_old  = campos_old  || ' DATAINICIALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(old.datainicialvigenciasalariofamilia), 'null');
				first = false;
			end if;

			if (new.datafinalvigenciasalariofamilia &lt;&gt; old.datafinalvigenciasalariofamilia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(new.datafinalvigenciasalariofamilia), 'null');
				sql_rolback = sql_rolback || ' DATAFINALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(old.datafinalvigenciasalariofamilia), 'null');
				campos_new  = campos_new  || ' DATAFINALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(new.datafinalvigenciasalariofamilia), 'null');
				campos_old  = campos_old  || ' DATAFINALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(old.datafinalvigenciasalariofamilia), 'null');
				first = false;
			end if;

			if (new.valorinicialsalariofamilia &lt;&gt; old.valorinicialsalariofamilia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORINICIALSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorinicialsalariofamilia), 'null');
				sql_rolback = sql_rolback || ' VALORINICIALSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorinicialsalariofamilia), 'null');
				campos_new  = campos_new  || ' VALORINICIALSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorinicialsalariofamilia), 'null');
				campos_old  = campos_old  || ' VALORINICIALSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorinicialsalariofamilia), 'null');
				first = false;
			end if;

			if (new.valorfinalsalariofamilia &lt;&gt; old.valorfinalsalariofamilia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORFINALSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorfinalsalariofamilia), 'null');
				sql_rolback = sql_rolback || ' VALORFINALSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorfinalsalariofamilia), 'null');
				campos_new  = campos_new  || ' VALORFINALSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorfinalsalariofamilia), 'null');
				campos_old  = campos_old  || ' VALORFINALSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorfinalsalariofamilia), 'null');
				first = false;
			end if;

			if (new.valorsalariofamilia &lt;&gt; old.valorsalariofamilia) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorsalariofamilia), 'null');
				sql_rolback = sql_rolback || ' VALORSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorsalariofamilia), 'null');
				campos_new  = campos_new  || ' VALORSALARIOFAMILIA = ' || coalesce(quote_literal(new.valorsalariofamilia), 'null');
				campos_old  = campos_old  || ' VALORSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorsalariofamilia), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(new.codigotabelasalariofamilia), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigotabelasalariofamilia), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELASALARIOFAMILIA (CODIGOTABELASALARIOFAMILIA, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIASALARIOFAMILIA, DATAFINALVIGENCIASALARIOFAMILIA, VALORINICIALSALARIOFAMILIA, VALORFINALSALARIOFAMILIA, VALORSALARIOFAMILIA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotabelasalariofamilia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialvigenciasalariofamilia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinalvigenciasalariofamilia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorinicialsalariofamilia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorfinalsalariofamilia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorsalariofamilia), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TABELASALARIOFAMILIA WHERE CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(old.codigotabelasalariofamilia), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTABELASALARIOFAMILIA = ' || coalesce(quote_literal(old.codigotabelasalariofamilia), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(old.datainicialvigenciasalariofamilia), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALVIGENCIASALARIOFAMILIA = ' || coalesce(quote_literal(old.datafinalvigenciasalariofamilia), 'null') || ', ';
			campos_old  = campos_old || 'VALORINICIALSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorinicialsalariofamilia), 'null') || ', ';
			campos_old  = campos_old || 'VALORFINALSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorfinalsalariofamilia), 'null') || ', ';
			campos_old  = campos_old || 'VALORSALARIOFAMILIA = ' || coalesce(quote_literal(old.valorsalariofamilia), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotabelasalariofamilia), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelasalariofamilia', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelasalariofamilia', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelasalariofamilia', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tabelasalariominimo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tabelasalariominimo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TABELASALARIOMINIMO (CODIGOSALARIOMINIMO, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIASALARIOMINIMO, DATAFINALVIGENCIASALARIOMINIMO, VALORSALARIOMINIMO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigosalariominimo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datainicialvigenciasalariominimo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datafinalvigenciasalariominimo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorsalariominimo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TABELASALARIOMINIMO WHERE CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(new.codigosalariominimo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(new.codigosalariominimo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAINICIALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(new.datainicialvigenciasalariominimo), 'null') || ', ';
			campos_new   = campos_new || 'DATAFINALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(new.datafinalvigenciasalariominimo), 'null') || ', ';
			campos_new   = campos_new || 'VALORSALARIOMINIMO = ' || coalesce(quote_literal(new.valorsalariominimo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigosalariominimo), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TABELASALARIOMINIMO SET ';
			sql_rolback = 'UPDATE TABELASALARIOMINIMO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigosalariominimo &lt;&gt; old.codigosalariominimo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(new.codigosalariominimo), 'null');
				sql_rolback = sql_rolback || ' CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(old.codigosalariominimo), 'null');
				campos_new  = campos_new  || ' CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(new.codigosalariominimo), 'null');
				campos_old  = campos_old  || ' CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(old.codigosalariominimo), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datainicialvigenciasalariominimo &lt;&gt; old.datainicialvigenciasalariominimo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAINICIALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(new.datainicialvigenciasalariominimo), 'null');
				sql_rolback = sql_rolback || ' DATAINICIALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(old.datainicialvigenciasalariominimo), 'null');
				campos_new  = campos_new  || ' DATAINICIALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(new.datainicialvigenciasalariominimo), 'null');
				campos_old  = campos_old  || ' DATAINICIALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(old.datainicialvigenciasalariominimo), 'null');
				first = false;
			end if;

			if (new.datafinalvigenciasalariominimo &lt;&gt; old.datafinalvigenciasalariominimo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAFINALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(new.datafinalvigenciasalariominimo), 'null');
				sql_rolback = sql_rolback || ' DATAFINALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(old.datafinalvigenciasalariominimo), 'null');
				campos_new  = campos_new  || ' DATAFINALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(new.datafinalvigenciasalariominimo), 'null');
				campos_old  = campos_old  || ' DATAFINALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(old.datafinalvigenciasalariominimo), 'null');
				first = false;
			end if;

			if (new.valorsalariominimo &lt;&gt; old.valorsalariominimo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORSALARIOMINIMO = ' || coalesce(quote_literal(new.valorsalariominimo), 'null');
				sql_rolback = sql_rolback || ' VALORSALARIOMINIMO = ' || coalesce(quote_literal(old.valorsalariominimo), 'null');
				campos_new  = campos_new  || ' VALORSALARIOMINIMO = ' || coalesce(quote_literal(new.valorsalariominimo), 'null');
				campos_old  = campos_old  || ' VALORSALARIOMINIMO = ' || coalesce(quote_literal(old.valorsalariominimo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(new.codigosalariominimo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(new.codigosalariominimo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigosalariominimo), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TABELASALARIOMINIMO (CODIGOSALARIOMINIMO, CODIGOEMPRESA, CODIGOLOJA, DATAINICIALVIGENCIASALARIOMINIMO, DATAFINALVIGENCIASALARIOMINIMO, VALORSALARIOMINIMO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigosalariominimo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datainicialvigenciasalariominimo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datafinalvigenciasalariominimo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorsalariominimo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TABELASALARIOMINIMO WHERE CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(old.codigosalariominimo), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOSALARIOMINIMO = ' || coalesce(quote_literal(old.codigosalariominimo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAINICIALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(old.datainicialvigenciasalariominimo), 'null') || ', ';
			campos_old  = campos_old || 'DATAFINALVIGENCIASALARIOMINIMO = ' || coalesce(quote_literal(old.datafinalvigenciasalariominimo), 'null') || ', ';
			campos_old  = campos_old || 'VALORSALARIOMINIMO = ' || coalesce(quote_literal(old.valorsalariominimo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigosalariominimo), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tabelasalariominimo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelasalariominimo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tabelasalariominimo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipocontaresumo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipocontaresumo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOCONTARESUMO (CODIGOTIPOCONTARESUMO, DESCRICAOTIPOCONTARESUMO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaotipocontaresumo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOCONTARESUMO WHERE CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.descricaotipocontaresumo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipocontaresumo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOCONTARESUMO SET ';
			sql_rolback = 'UPDATE TIPOCONTARESUMO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipocontaresumo &lt;&gt; old.codigotipocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null');
				first = false;
			end if;

			if (new.descricaotipocontaresumo &lt;&gt; old.descricaotipocontaresumo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.descricaotipocontaresumo), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.descricaotipocontaresumo), 'null');
				campos_new  = campos_new  || ' DESCRICAOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.descricaotipocontaresumo), 'null');
				campos_old  = campos_old  || ' DESCRICAOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.descricaotipocontaresumo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(new.codigotipocontaresumo), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipocontaresumo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOCONTARESUMO (CODIGOTIPOCONTARESUMO, DESCRICAOTIPOCONTARESUMO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaotipocontaresumo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOCONTARESUMO WHERE CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.codigotipocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOTIPOCONTARESUMO = ' || coalesce(quote_literal(old.descricaotipocontaresumo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipocontaresumo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipocontaresumo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipocontaresumo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipocontaresumo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipodocumento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipodocumento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPODOCUMENTO (CODIGOTIPODOCUMENTO, NOMETIPODOCUMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipodocumento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nometipodocumento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPODOCUMENTO WHERE CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null') || ', ';
			campos_new   = campos_new || 'NOMETIPODOCUMENTO = ' || coalesce(quote_literal(new.nometipodocumento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipodocumento), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPODOCUMENTO SET ';
			sql_rolback = 'UPDATE TIPODOCUMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipodocumento &lt;&gt; old.codigotipodocumento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');
				campos_new  = campos_new  || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
				campos_old  = campos_old  || ' CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');
				first = false;
			end if;

			if (new.nometipodocumento &lt;&gt; old.nometipodocumento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMETIPODOCUMENTO = ' || coalesce(quote_literal(new.nometipodocumento), 'null');
				sql_rolback = sql_rolback || ' NOMETIPODOCUMENTO = ' || coalesce(quote_literal(old.nometipodocumento), 'null');
				campos_new  = campos_new  || ' NOMETIPODOCUMENTO = ' || coalesce(quote_literal(new.nometipodocumento), 'null');
				campos_old  = campos_old  || ' NOMETIPODOCUMENTO = ' || coalesce(quote_literal(old.nometipodocumento), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(new.codigotipodocumento), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipodocumento), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPODOCUMENTO (CODIGOTIPODOCUMENTO, NOMETIPODOCUMENTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipodocumento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nometipodocumento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPODOCUMENTO WHERE CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPODOCUMENTO = ' || coalesce(quote_literal(old.codigotipodocumento), 'null') || ', ';
			campos_old  = campos_old || 'NOMETIPODOCUMENTO = ' || coalesce(quote_literal(old.nometipodocumento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipodocumento), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipodocumento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipodocumento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipodocumento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipoflagtrocamanutencao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipoflagtrocamanutencao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOFLAGTROCAMANUTENCAO (CODIGOTIPOFLAGTROCAMANUTENCAO, NOMETIPOFLAGTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nometipoflagtrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOFLAGTROCAMANUTENCAO WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'NOMETIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.nometipoflagtrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOFLAGTROCAMANUTENCAO SET ';
			sql_rolback = 'UPDATE TIPOFLAGTROCAMANUTENCAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipoflagtrocamanutencao &lt;&gt; old.codigotipoflagtrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null');
				first = false;
			end if;

			if (new.nometipoflagtrocamanutencao &lt;&gt; old.nometipoflagtrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMETIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.nometipoflagtrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' NOMETIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.nometipoflagtrocamanutencao), 'null');
				campos_new  = campos_new  || ' NOMETIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.nometipoflagtrocamanutencao), 'null');
				campos_old  = campos_old  || ' NOMETIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.nometipoflagtrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipoflagtrocamanutencao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOFLAGTROCAMANUTENCAO (CODIGOTIPOFLAGTROCAMANUTENCAO, NOMETIPOFLAGTROCAMANUTENCAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nometipoflagtrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOFLAGTROCAMANUTENCAO WHERE CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'NOMETIPOFLAGTROCAMANUTENCAO = ' || coalesce(quote_literal(old.nometipoflagtrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipoflagtrocamanutencao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipoflagtrocamanutencao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipoflagtrocamanutencao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipoflagtrocamanutencao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipomadeirabeneficiada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipomadeirabeneficiada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOMADEIRABENEFICIADA (CODIGOTIPOMADEIRABENEFICIADA, NOMETIPOMADEIRABENEFICIADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nometipomadeirabeneficiada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOMADEIRABENEFICIADA WHERE CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null') || ', ';
			campos_new   = campos_new || 'NOMETIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.nometipomadeirabeneficiada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOMADEIRABENEFICIADA SET ';
			sql_rolback = 'UPDATE TIPOMADEIRABENEFICIADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipomadeirabeneficiada &lt;&gt; old.codigotipomadeirabeneficiada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null');
				first = false;
			end if;

			if (new.nometipomadeirabeneficiada &lt;&gt; old.nometipomadeirabeneficiada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMETIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.nometipomadeirabeneficiada), 'null');
				sql_rolback = sql_rolback || ' NOMETIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.nometipomadeirabeneficiada), 'null');
				campos_new  = campos_new  || ' NOMETIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.nometipomadeirabeneficiada), 'null');
				campos_old  = campos_old  || ' NOMETIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.nometipomadeirabeneficiada), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipomadeirabeneficiada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOMADEIRABENEFICIADA (CODIGOTIPOMADEIRABENEFICIADA, NOMETIPOMADEIRABENEFICIADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nometipomadeirabeneficiada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOMADEIRABENEFICIADA WHERE CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null') || ', ';
			campos_old  = campos_old || 'NOMETIPOMADEIRABENEFICIADA = ' || coalesce(quote_literal(old.nometipomadeirabeneficiada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipomadeirabeneficiada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipomadeirabeneficiada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipomadeirabeneficiada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipomadeirabeneficiada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipoplanoconta()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipoplanoconta() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOPLANOCONTA (CODIGOTIPOPLANOCONTA, NOMETIPOPLANOCONTA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nometipoplanoconta), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOPLANOCONTA WHERE CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'NOMETIPOPLANOCONTA = ' || coalesce(quote_literal(new.nometipoplanoconta), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipoplanoconta), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOPLANOCONTA SET ';
			sql_rolback = 'UPDATE TIPOPLANOCONTA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipoplanoconta &lt;&gt; old.codigotipoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null');
				first = false;
			end if;

			if (new.nometipoplanoconta &lt;&gt; old.nometipoplanoconta) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMETIPOPLANOCONTA = ' || coalesce(quote_literal(new.nometipoplanoconta), 'null');
				sql_rolback = sql_rolback || ' NOMETIPOPLANOCONTA = ' || coalesce(quote_literal(old.nometipoplanoconta), 'null');
				campos_new  = campos_new  || ' NOMETIPOPLANOCONTA = ' || coalesce(quote_literal(new.nometipoplanoconta), 'null');
				campos_old  = campos_old  || ' NOMETIPOPLANOCONTA = ' || coalesce(quote_literal(old.nometipoplanoconta), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(new.codigotipoplanoconta), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipoplanoconta), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOPLANOCONTA (CODIGOTIPOPLANOCONTA, NOMETIPOPLANOCONTA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nometipoplanoconta), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOPLANOCONTA WHERE CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOPLANOCONTA = ' || coalesce(quote_literal(old.codigotipoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'NOMETIPOPLANOCONTA = ' || coalesce(quote_literal(old.nometipoplanoconta), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipoplanoconta), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipoplanoconta', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipoplanoconta', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipoplanoconta', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tiporegistronfeletronica()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tiporegistronfeletronica() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOREGISTRONFELETRONICA (CODIGOTIPOREGISTRONFE, DESCRICAOTIPOREGISTRONFE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotiporegistronfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaotiporegistronfe), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOREGISTRONFELETRONICA WHERE CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.codigotiporegistronfe), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.codigotiporegistronfe), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.descricaotiporegistronfe), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotiporegistronfe), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOREGISTRONFELETRONICA SET ';
			sql_rolback = 'UPDATE TIPOREGISTRONFELETRONICA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotiporegistronfe &lt;&gt; old.codigotiporegistronfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.codigotiporegistronfe), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.codigotiporegistronfe), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.codigotiporegistronfe), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.codigotiporegistronfe), 'null');
				first = false;
			end if;

			if (new.descricaotiporegistronfe &lt;&gt; old.descricaotiporegistronfe) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.descricaotiporegistronfe), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.descricaotiporegistronfe), 'null');
				campos_new  = campos_new  || ' DESCRICAOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.descricaotiporegistronfe), 'null');
				campos_old  = campos_old  || ' DESCRICAOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.descricaotiporegistronfe), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.codigotiporegistronfe), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(new.codigotiporegistronfe), 'null');

			sql_chave = coalesce(quote_literal(new.codigotiporegistronfe), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOREGISTRONFELETRONICA (CODIGOTIPOREGISTRONFE, DESCRICAOTIPOREGISTRONFE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotiporegistronfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaotiporegistronfe), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOREGISTRONFELETRONICA WHERE CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.codigotiporegistronfe), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.codigotiporegistronfe), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOTIPOREGISTRONFE = ' || coalesce(quote_literal(old.descricaotiporegistronfe), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotiporegistronfe), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tiporegistronfeletronica', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tiporegistronfeletronica', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tiporegistronfeletronica', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipotributacao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipotributacao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOTRIBUTACAO (CODIGOTIPOTRIBUTACAO, IDENTIFICACAOTIPOTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.identificacaotipotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOTRIBUTACAO WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			campos_new   = campos_new || 'IDENTIFICACAOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.identificacaotipotributacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipotributacao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOTRIBUTACAO SET ';
			sql_rolback = 'UPDATE TIPOTRIBUTACAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipotributacao &lt;&gt; old.codigotipotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				first = false;
			end if;

			if (new.identificacaotipotributacao &lt;&gt; old.identificacaotipotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' IDENTIFICACAOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.identificacaotipotributacao), 'null');
				sql_rolback = sql_rolback || ' IDENTIFICACAOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.identificacaotipotributacao), 'null');
				campos_new  = campos_new  || ' IDENTIFICACAOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.identificacaotipotributacao), 'null');
				campos_old  = campos_old  || ' IDENTIFICACAOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.identificacaotipotributacao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipotributacao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOTRIBUTACAO (CODIGOTIPOTRIBUTACAO, IDENTIFICACAOTIPOTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.identificacaotipotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOTRIBUTACAO WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			campos_old  = campos_old || 'IDENTIFICACAOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.identificacaotipotributacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipotributacao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipotributacao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipotributacao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipotributacao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tipoveiculo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tipoveiculo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TIPOVEICULO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTIPOVEICULO, DESCRICAOTIPOVEICULO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaotipoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TIPOVEICULO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOTIPOVEICULO = ' || coalesce(quote_literal(new.descricaotipoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotipoveiculo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TIPOVEICULO SET ';
			sql_rolback = 'UPDATE TIPOVEICULO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotipoveiculo &lt;&gt; old.codigotipoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null');
				first = false;
			end if;

			if (new.descricaotipoveiculo &lt;&gt; old.descricaotipoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOTIPOVEICULO = ' || coalesce(quote_literal(new.descricaotipoveiculo), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOTIPOVEICULO = ' || coalesce(quote_literal(old.descricaotipoveiculo), 'null');
				campos_new  = campos_new  || ' DESCRICAOTIPOVEICULO = ' || coalesce(quote_literal(new.descricaotipoveiculo), 'null');
				campos_old  = campos_old  || ' DESCRICAOTIPOVEICULO = ' || coalesce(quote_literal(old.descricaotipoveiculo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotipoveiculo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TIPOVEICULO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTIPOVEICULO, DESCRICAOTIPOVEICULO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaotipoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TIPOVEICULO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOTIPOVEICULO = ' || coalesce(quote_literal(old.descricaotipoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotipoveiculo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tipoveiculo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipoveiculo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tipoveiculo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_transferenciaestoque()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_transferenciaestoque() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TRANSFERENCIAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOTRANSFERENCIAESTOQUE, DATAHORASAIDATRANSFERENCIAESTOQUE, DATAHORAENTRADATRANSFERENCIAESTOQUE, CODIGOEMPRESADESTINO, CODIGOLOJADESTINO, STATUSTRANSFERENCIAESTOQUE, OBSERVACAOTRANSFERENCIAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahorasaidatransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoraentradatransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresadestino), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojadestino), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statustransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaotransferenciaestoque), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TRANSFERENCIAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORASAIDATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.datahorasaidatransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORAENTRADATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.datahoraentradatransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESADESTINO = ' || coalesce(quote_literal(new.codigoempresadestino), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJADESTINO = ' || coalesce(quote_literal(new.codigolojadestino), 'null') || ', ';
			campos_new   = campos_new || 'STATUSTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.statustransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.observacaotransferenciaestoque), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TRANSFERENCIAESTOQUE SET ';
			sql_rolback = 'UPDATE TRANSFERENCIAESTOQUE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotransferenciaestoque &lt;&gt; old.codigotransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null');
				campos_new  = campos_new  || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');
				campos_old  = campos_old  || ' CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.datahorasaidatransferenciaestoque &lt;&gt; old.datahorasaidatransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORASAIDATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.datahorasaidatransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORASAIDATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.datahorasaidatransferenciaestoque), 'null');
				campos_new  = campos_new  || ' DATAHORASAIDATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.datahorasaidatransferenciaestoque), 'null');
				campos_old  = campos_old  || ' DATAHORASAIDATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.datahorasaidatransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.datahoraentradatransferenciaestoque &lt;&gt; old.datahoraentradatransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORAENTRADATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.datahoraentradatransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' DATAHORAENTRADATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.datahoraentradatransferenciaestoque), 'null');
				campos_new  = campos_new  || ' DATAHORAENTRADATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.datahoraentradatransferenciaestoque), 'null');
				campos_old  = campos_old  || ' DATAHORAENTRADATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.datahoraentradatransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresadestino &lt;&gt; old.codigoempresadestino) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESADESTINO = ' || coalesce(quote_literal(new.codigoempresadestino), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESADESTINO = ' || coalesce(quote_literal(old.codigoempresadestino), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESADESTINO = ' || coalesce(quote_literal(new.codigoempresadestino), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESADESTINO = ' || coalesce(quote_literal(old.codigoempresadestino), 'null');
				first = false;
			end if;

			if (new.codigolojadestino &lt;&gt; old.codigolojadestino) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJADESTINO = ' || coalesce(quote_literal(new.codigolojadestino), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJADESTINO = ' || coalesce(quote_literal(old.codigolojadestino), 'null');
				campos_new  = campos_new  || ' CODIGOLOJADESTINO = ' || coalesce(quote_literal(new.codigolojadestino), 'null');
				campos_old  = campos_old  || ' CODIGOLOJADESTINO = ' || coalesce(quote_literal(old.codigolojadestino), 'null');
				first = false;
			end if;

			if (new.statustransferenciaestoque &lt;&gt; old.statustransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.statustransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' STATUSTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.statustransferenciaestoque), 'null');
				campos_new  = campos_new  || ' STATUSTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.statustransferenciaestoque), 'null');
				campos_old  = campos_old  || ' STATUSTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.statustransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.observacaotransferenciaestoque &lt;&gt; old.observacaotransferenciaestoque) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.observacaotransferenciaestoque), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.observacaotransferenciaestoque), 'null');
				campos_new  = campos_new  || ' OBSERVACAOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.observacaotransferenciaestoque), 'null');
				campos_old  = campos_old  || ' OBSERVACAOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.observacaotransferenciaestoque), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotransferenciaestoque), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TRANSFERENCIAESTOQUE (CODIGOEMPRESA, CODIGOLOJA, CODIGOTRANSFERENCIAESTOQUE, DATAHORASAIDATRANSFERENCIAESTOQUE, DATAHORAENTRADATRANSFERENCIAESTOQUE, CODIGOEMPRESADESTINO, CODIGOLOJADESTINO, STATUSTRANSFERENCIAESTOQUE, OBSERVACAOTRANSFERENCIAESTOQUE, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahorasaidatransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoraentradatransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresadestino), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojadestino), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statustransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaotransferenciaestoque), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TRANSFERENCIAESTOQUE WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORASAIDATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.datahorasaidatransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORAENTRADATRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.datahoraentradatransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESADESTINO = ' || coalesce(quote_literal(old.codigoempresadestino), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJADESTINO = ' || coalesce(quote_literal(old.codigolojadestino), 'null') || ', ';
			campos_old  = campos_old || 'STATUSTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.statustransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOTRANSFERENCIAESTOQUE = ' || coalesce(quote_literal(old.observacaotransferenciaestoque), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotransferenciaestoque), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'transferenciaestoque', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('transferenciaestoque', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('transferenciaestoque', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_tributacao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_tributacao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TRIBUTACAO (CODIGOTIPOTRIBUTACAO, UFORIGEMTRIBUTACAO, OPERACAOTRIBUTACAO, UFDESTINOTRIBUTACAO, COMPLEMENTOTRIBUTACAO, CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO, CFOPTRIBUTACAO, FORMACALCULOICMSTRIBUTACAO, ALIQUOTAICMSTRIBUTACAO, REDUCAOBASECALCULOICMSTRIBUTACAO, MARGEMVALORAGREGADOTRIBUTACAO, IPIBASEICMSTRIBUTACAO, OUTRASDESPESASBASEICMSTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CSTIPITRIBUTACAO, ALIQUOTAIPITRIBUTACAO, CSTPISTRIBUTACAO, ALIQUOTAPISTRIBUTACAO, CSTCOFINSTRIBUTACAO, ALIQUOTACOFINSTRIBUTACAO, ALIQUOTAICMSSTTRIBUTACAO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.uforigemtributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ufdestinotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.complementotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.classificacaotributariaicmstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cfoptributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.formacalculoicmstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.reducaobasecalculoicmstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.margemvaloragregadotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ipibaseicmstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.outrasdespesasbaseicmstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstipitributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaipitributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstpistributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotapistributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.cstcofinstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotacofinstributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.aliquotaicmssttributacao), 'null') || ')';

			sql_rolback = 'DELETE FROM TRIBUTACAO WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null') || ' AND OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ' AND UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(new.ufdestinotributacao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			campos_new   = campos_new || 'UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null') || ', ';
			campos_new   = campos_new || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ', ';
			campos_new   = campos_new || 'UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(new.ufdestinotributacao), 'null') || ', ';
			campos_new   = campos_new || 'COMPLEMENTOTRIBUTACAO = ' || coalesce(quote_literal(new.complementotributacao), 'null') || ', ';
			campos_new   = campos_new || 'CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO = ' || coalesce(quote_literal(new.classificacaotributariaicmstributacao), 'null') || ', ';
			campos_new   = campos_new || 'CFOPTRIBUTACAO = ' || coalesce(quote_literal(new.cfoptributacao), 'null') || ', ';
			campos_new   = campos_new || 'FORMACALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(new.formacalculoicmstributacao), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaicmstributacao), 'null') || ', ';
			campos_new   = campos_new || 'REDUCAOBASECALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(new.reducaobasecalculoicmstributacao), 'null') || ', ';
			campos_new   = campos_new || 'MARGEMVALORAGREGADOTRIBUTACAO = ' || coalesce(quote_literal(new.margemvaloragregadotributacao), 'null') || ', ';
			campos_new   = campos_new || 'IPIBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(new.ipibaseicmstributacao), 'null') || ', ';
			campos_new   = campos_new || 'OUTRASDESPESASBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(new.outrasdespesasbaseicmstributacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CSTIPITRIBUTACAO = ' || coalesce(quote_literal(new.cstipitributacao), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAIPITRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaipitributacao), 'null') || ', ';
			campos_new   = campos_new || 'CSTPISTRIBUTACAO = ' || coalesce(quote_literal(new.cstpistributacao), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAPISTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotapistributacao), 'null') || ', ';
			campos_new   = campos_new || 'CSTCOFINSTRIBUTACAO = ' || coalesce(quote_literal(new.cstcofinstributacao), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTACOFINSTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotacofinstributacao), 'null') || ', ';
			campos_new   = campos_new || 'ALIQUOTAICMSSTTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaicmssttributacao), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipotributacao), 'null')  || ', ' || coalesce(quote_literal(new.uforigemtributacao), 'null')  || ', ' || coalesce(quote_literal(new.operacaotributacao), 'null')  || ', ' || coalesce(quote_literal(new.ufdestinotributacao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TRIBUTACAO SET ';
			sql_rolback = 'UPDATE TRIBUTACAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipotributacao &lt;&gt; old.codigotipotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				first = false;
			end if;

			if (new.uforigemtributacao &lt;&gt; old.uforigemtributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');
				sql_rolback = sql_rolback || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null');
				campos_new  = campos_new  || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');
				campos_old  = campos_old  || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null');
				first = false;
			end if;

			if (new.operacaotributacao &lt;&gt; old.operacaotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				sql_rolback = sql_rolback || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				campos_new  = campos_new  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null');
				campos_old  = campos_old  || ' OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null');
				first = false;
			end if;

			if (new.ufdestinotributacao &lt;&gt; old.ufdestinotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(new.ufdestinotributacao), 'null');
				sql_rolback = sql_rolback || ' UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(old.ufdestinotributacao), 'null');
				campos_new  = campos_new  || ' UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(new.ufdestinotributacao), 'null');
				campos_old  = campos_old  || ' UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(old.ufdestinotributacao), 'null');
				first = false;
			end if;

			if (new.complementotributacao &lt;&gt; old.complementotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' COMPLEMENTOTRIBUTACAO = ' || coalesce(quote_literal(new.complementotributacao), 'null');
				sql_rolback = sql_rolback || ' COMPLEMENTOTRIBUTACAO = ' || coalesce(quote_literal(old.complementotributacao), 'null');
				campos_new  = campos_new  || ' COMPLEMENTOTRIBUTACAO = ' || coalesce(quote_literal(new.complementotributacao), 'null');
				campos_old  = campos_old  || ' COMPLEMENTOTRIBUTACAO = ' || coalesce(quote_literal(old.complementotributacao), 'null');
				first = false;
			end if;

			if (new.classificacaotributariaicmstributacao &lt;&gt; old.classificacaotributariaicmstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO = ' || coalesce(quote_literal(new.classificacaotributariaicmstributacao), 'null');
				sql_rolback = sql_rolback || ' CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO = ' || coalesce(quote_literal(old.classificacaotributariaicmstributacao), 'null');
				campos_new  = campos_new  || ' CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO = ' || coalesce(quote_literal(new.classificacaotributariaicmstributacao), 'null');
				campos_old  = campos_old  || ' CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO = ' || coalesce(quote_literal(old.classificacaotributariaicmstributacao), 'null');
				first = false;
			end if;

			if (new.cfoptributacao &lt;&gt; old.cfoptributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CFOPTRIBUTACAO = ' || coalesce(quote_literal(new.cfoptributacao), 'null');
				sql_rolback = sql_rolback || ' CFOPTRIBUTACAO = ' || coalesce(quote_literal(old.cfoptributacao), 'null');
				campos_new  = campos_new  || ' CFOPTRIBUTACAO = ' || coalesce(quote_literal(new.cfoptributacao), 'null');
				campos_old  = campos_old  || ' CFOPTRIBUTACAO = ' || coalesce(quote_literal(old.cfoptributacao), 'null');
				first = false;
			end if;

			if (new.formacalculoicmstributacao &lt;&gt; old.formacalculoicmstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FORMACALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(new.formacalculoicmstributacao), 'null');
				sql_rolback = sql_rolback || ' FORMACALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(old.formacalculoicmstributacao), 'null');
				campos_new  = campos_new  || ' FORMACALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(new.formacalculoicmstributacao), 'null');
				campos_old  = campos_old  || ' FORMACALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(old.formacalculoicmstributacao), 'null');
				first = false;
			end if;

			if (new.aliquotaicmstributacao &lt;&gt; old.aliquotaicmstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaicmstributacao), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaicmstributacao), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaicmstributacao), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaicmstributacao), 'null');
				first = false;
			end if;

			if (new.reducaobasecalculoicmstributacao &lt;&gt; old.reducaobasecalculoicmstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' REDUCAOBASECALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(new.reducaobasecalculoicmstributacao), 'null');
				sql_rolback = sql_rolback || ' REDUCAOBASECALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(old.reducaobasecalculoicmstributacao), 'null');
				campos_new  = campos_new  || ' REDUCAOBASECALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(new.reducaobasecalculoicmstributacao), 'null');
				campos_old  = campos_old  || ' REDUCAOBASECALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(old.reducaobasecalculoicmstributacao), 'null');
				first = false;
			end if;

			if (new.margemvaloragregadotributacao &lt;&gt; old.margemvaloragregadotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MARGEMVALORAGREGADOTRIBUTACAO = ' || coalesce(quote_literal(new.margemvaloragregadotributacao), 'null');
				sql_rolback = sql_rolback || ' MARGEMVALORAGREGADOTRIBUTACAO = ' || coalesce(quote_literal(old.margemvaloragregadotributacao), 'null');
				campos_new  = campos_new  || ' MARGEMVALORAGREGADOTRIBUTACAO = ' || coalesce(quote_literal(new.margemvaloragregadotributacao), 'null');
				campos_old  = campos_old  || ' MARGEMVALORAGREGADOTRIBUTACAO = ' || coalesce(quote_literal(old.margemvaloragregadotributacao), 'null');
				first = false;
			end if;

			if (new.ipibaseicmstributacao &lt;&gt; old.ipibaseicmstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' IPIBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(new.ipibaseicmstributacao), 'null');
				sql_rolback = sql_rolback || ' IPIBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(old.ipibaseicmstributacao), 'null');
				campos_new  = campos_new  || ' IPIBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(new.ipibaseicmstributacao), 'null');
				campos_old  = campos_old  || ' IPIBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(old.ipibaseicmstributacao), 'null');
				first = false;
			end if;

			if (new.outrasdespesasbaseicmstributacao &lt;&gt; old.outrasdespesasbaseicmstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OUTRASDESPESASBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(new.outrasdespesasbaseicmstributacao), 'null');
				sql_rolback = sql_rolback || ' OUTRASDESPESASBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(old.outrasdespesasbaseicmstributacao), 'null');
				campos_new  = campos_new  || ' OUTRASDESPESASBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(new.outrasdespesasbaseicmstributacao), 'null');
				campos_old  = campos_old  || ' OUTRASDESPESASBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(old.outrasdespesasbaseicmstributacao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.cstipitributacao &lt;&gt; old.cstipitributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTIPITRIBUTACAO = ' || coalesce(quote_literal(new.cstipitributacao), 'null');
				sql_rolback = sql_rolback || ' CSTIPITRIBUTACAO = ' || coalesce(quote_literal(old.cstipitributacao), 'null');
				campos_new  = campos_new  || ' CSTIPITRIBUTACAO = ' || coalesce(quote_literal(new.cstipitributacao), 'null');
				campos_old  = campos_old  || ' CSTIPITRIBUTACAO = ' || coalesce(quote_literal(old.cstipitributacao), 'null');
				first = false;
			end if;

			if (new.aliquotaipitributacao &lt;&gt; old.aliquotaipitributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAIPITRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaipitributacao), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAIPITRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaipitributacao), 'null');
				campos_new  = campos_new  || ' ALIQUOTAIPITRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaipitributacao), 'null');
				campos_old  = campos_old  || ' ALIQUOTAIPITRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaipitributacao), 'null');
				first = false;
			end if;

			if (new.cstpistributacao &lt;&gt; old.cstpistributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTPISTRIBUTACAO = ' || coalesce(quote_literal(new.cstpistributacao), 'null');
				sql_rolback = sql_rolback || ' CSTPISTRIBUTACAO = ' || coalesce(quote_literal(old.cstpistributacao), 'null');
				campos_new  = campos_new  || ' CSTPISTRIBUTACAO = ' || coalesce(quote_literal(new.cstpistributacao), 'null');
				campos_old  = campos_old  || ' CSTPISTRIBUTACAO = ' || coalesce(quote_literal(old.cstpistributacao), 'null');
				first = false;
			end if;

			if (new.aliquotapistributacao &lt;&gt; old.aliquotapistributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAPISTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotapistributacao), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAPISTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotapistributacao), 'null');
				campos_new  = campos_new  || ' ALIQUOTAPISTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotapistributacao), 'null');
				campos_old  = campos_old  || ' ALIQUOTAPISTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotapistributacao), 'null');
				first = false;
			end if;

			if (new.cstcofinstributacao &lt;&gt; old.cstcofinstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CSTCOFINSTRIBUTACAO = ' || coalesce(quote_literal(new.cstcofinstributacao), 'null');
				sql_rolback = sql_rolback || ' CSTCOFINSTRIBUTACAO = ' || coalesce(quote_literal(old.cstcofinstributacao), 'null');
				campos_new  = campos_new  || ' CSTCOFINSTRIBUTACAO = ' || coalesce(quote_literal(new.cstcofinstributacao), 'null');
				campos_old  = campos_old  || ' CSTCOFINSTRIBUTACAO = ' || coalesce(quote_literal(old.cstcofinstributacao), 'null');
				first = false;
			end if;

			if (new.aliquotacofinstributacao &lt;&gt; old.aliquotacofinstributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTACOFINSTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotacofinstributacao), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTACOFINSTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotacofinstributacao), 'null');
				campos_new  = campos_new  || ' ALIQUOTACOFINSTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotacofinstributacao), 'null');
				campos_old  = campos_old  || ' ALIQUOTACOFINSTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotacofinstributacao), 'null');
				first = false;
			end if;

			if (new.aliquotaicmssttributacao &lt;&gt; old.aliquotaicmssttributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ALIQUOTAICMSSTTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaicmssttributacao), 'null');
				sql_rolback = sql_rolback || ' ALIQUOTAICMSSTTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaicmssttributacao), 'null');
				campos_new  = campos_new  || ' ALIQUOTAICMSSTTRIBUTACAO = ' || coalesce(quote_literal(new.aliquotaicmssttributacao), 'null');
				campos_old  = campos_old  || ' ALIQUOTAICMSSTTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaicmssttributacao), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null') || ' AND OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ' AND UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(new.ufdestinotributacao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null') || ' AND OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(new.operacaotributacao), 'null') || ' AND UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(new.ufdestinotributacao), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipotributacao), 'null')  || ', ' || coalesce(quote_literal(new.uforigemtributacao), 'null')  || ', ' || coalesce(quote_literal(new.operacaotributacao), 'null')  || ', ' || coalesce(quote_literal(new.ufdestinotributacao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TRIBUTACAO (CODIGOTIPOTRIBUTACAO, UFORIGEMTRIBUTACAO, OPERACAOTRIBUTACAO, UFDESTINOTRIBUTACAO, COMPLEMENTOTRIBUTACAO, CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO, CFOPTRIBUTACAO, FORMACALCULOICMSTRIBUTACAO, ALIQUOTAICMSTRIBUTACAO, REDUCAOBASECALCULOICMSTRIBUTACAO, MARGEMVALORAGREGADOTRIBUTACAO, IPIBASEICMSTRIBUTACAO, OUTRASDESPESASBASEICMSTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CSTIPITRIBUTACAO, ALIQUOTAIPITRIBUTACAO, CSTPISTRIBUTACAO, ALIQUOTAPISTRIBUTACAO, CSTCOFINSTRIBUTACAO, ALIQUOTACOFINSTRIBUTACAO, ALIQUOTAICMSSTTRIBUTACAO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.uforigemtributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ufdestinotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.complementotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.classificacaotributariaicmstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cfoptributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.formacalculoicmstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.reducaobasecalculoicmstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.margemvaloragregadotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ipibaseicmstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.outrasdespesasbaseicmstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstipitributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaipitributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstpistributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotapistributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.cstcofinstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotacofinstributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.aliquotaicmssttributacao), 'null') || ')';

			sql_replica = 'DELETE FROM TRIBUTACAO WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null') || ' AND OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null') || ' AND UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(old.ufdestinotributacao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			campos_old  = campos_old || 'UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null') || ', ';
			campos_old  = campos_old || 'OPERACAOTRIBUTACAO = ' || coalesce(quote_literal(old.operacaotributacao), 'null') || ', ';
			campos_old  = campos_old || 'UFDESTINOTRIBUTACAO = ' || coalesce(quote_literal(old.ufdestinotributacao), 'null') || ', ';
			campos_old  = campos_old || 'COMPLEMENTOTRIBUTACAO = ' || coalesce(quote_literal(old.complementotributacao), 'null') || ', ';
			campos_old  = campos_old || 'CLASSIFICACAOTRIBUTARIAICMSTRIBUTACAO = ' || coalesce(quote_literal(old.classificacaotributariaicmstributacao), 'null') || ', ';
			campos_old  = campos_old || 'CFOPTRIBUTACAO = ' || coalesce(quote_literal(old.cfoptributacao), 'null') || ', ';
			campos_old  = campos_old || 'FORMACALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(old.formacalculoicmstributacao), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaicmstributacao), 'null') || ', ';
			campos_old  = campos_old || 'REDUCAOBASECALCULOICMSTRIBUTACAO = ' || coalesce(quote_literal(old.reducaobasecalculoicmstributacao), 'null') || ', ';
			campos_old  = campos_old || 'MARGEMVALORAGREGADOTRIBUTACAO = ' || coalesce(quote_literal(old.margemvaloragregadotributacao), 'null') || ', ';
			campos_old  = campos_old || 'IPIBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(old.ipibaseicmstributacao), 'null') || ', ';
			campos_old  = campos_old || 'OUTRASDESPESASBASEICMSTRIBUTACAO = ' || coalesce(quote_literal(old.outrasdespesasbaseicmstributacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CSTIPITRIBUTACAO = ' || coalesce(quote_literal(old.cstipitributacao), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAIPITRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaipitributacao), 'null') || ', ';
			campos_old  = campos_old || 'CSTPISTRIBUTACAO = ' || coalesce(quote_literal(old.cstpistributacao), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAPISTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotapistributacao), 'null') || ', ';
			campos_old  = campos_old || 'CSTCOFINSTRIBUTACAO = ' || coalesce(quote_literal(old.cstcofinstributacao), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTACOFINSTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotacofinstributacao), 'null') || ', ';
			campos_old  = campos_old || 'ALIQUOTAICMSSTTRIBUTACAO = ' || coalesce(quote_literal(old.aliquotaicmssttributacao), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipotributacao), 'null')  || ', ' || coalesce(quote_literal(old.uforigemtributacao), 'null')  || ', ' || coalesce(quote_literal(old.operacaotributacao), 'null')  || ', ' || coalesce(quote_literal(old.ufdestinotributacao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'tributacao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tributacao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('tributacao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_trocamanutencao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_trocamanutencao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TROCAMANUTENCAO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCAMANUTENCAO, NUMEROTROCAMANUTENCAO, DATAENTRADATROCAMANUTENCAO, NOMECLIENTETROCAMANUTENCAO, FONE1CLIENTETROCAMANUTENCAO, FONE2CLIENTETROCAMANUTENCAO, FONE3CLIENTETROCAMANUTENCAO, TIPOFONE1CLIENTETROCAMANUTENCAO, TIPOFONE2CLIENTETROCAMANUTENCAO, TIPOFONE3CLIENTETROCAMANUTENCAO, EMAILCLIENTETROCAMANUTENCAO, REFERENCIATROCAMANUTENCAO, NUMEROGARANTICATROCAMANUTENCAO, DESCRICAOTROCAMANUTENCAO, PRAZOTROCAMANUTENCAO, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, EMAIL2TROCAMANUTENCAO, EMAIL3TROCAMANUTENCAO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.dataentradatrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeclientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone1clientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone2clientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.fone3clientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipofone1clientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipofone2clientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipofone3clientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.emailclientetrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.referenciatrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numerogaranticatrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.prazotrocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.email2trocamanutencao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.email3trocamanutencao), 'null') || ')';

			sql_rolback = 'DELETE FROM TROCAMANUTENCAO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROTROCAMANUTENCAO = ' || coalesce(quote_literal(new.numerotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'DATAENTRADATROCAMANUTENCAO = ' || coalesce(quote_literal(new.dataentradatrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'NOMECLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.nomeclientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'FONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone1clientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'FONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone2clientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'FONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone3clientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'TIPOFONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone1clientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'TIPOFONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone2clientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'TIPOFONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone3clientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'EMAILCLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.emailclientetrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'REFERENCIATROCAMANUTENCAO = ' || coalesce(quote_literal(new.referenciatrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROGARANTICATROCAMANUTENCAO = ' || coalesce(quote_literal(new.numerogaranticatrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'PRAZOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.prazotrocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'EMAIL2TROCAMANUTENCAO = ' || coalesce(quote_literal(new.email2trocamanutencao), 'null') || ', ';
			campos_new   = campos_new || 'EMAIL3TROCAMANUTENCAO = ' || coalesce(quote_literal(new.email3trocamanutencao), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TROCAMANUTENCAO SET ';
			sql_rolback = 'UPDATE TROCAMANUTENCAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotrocamanutencao &lt;&gt; old.codigotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');
				campos_new  = campos_new  || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
				campos_old  = campos_old  || ' CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.numerotrocamanutencao &lt;&gt; old.numerotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROTROCAMANUTENCAO = ' || coalesce(quote_literal(new.numerotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' NUMEROTROCAMANUTENCAO = ' || coalesce(quote_literal(old.numerotrocamanutencao), 'null');
				campos_new  = campos_new  || ' NUMEROTROCAMANUTENCAO = ' || coalesce(quote_literal(new.numerotrocamanutencao), 'null');
				campos_old  = campos_old  || ' NUMEROTROCAMANUTENCAO = ' || coalesce(quote_literal(old.numerotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.dataentradatrocamanutencao &lt;&gt; old.dataentradatrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAENTRADATROCAMANUTENCAO = ' || coalesce(quote_literal(new.dataentradatrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' DATAENTRADATROCAMANUTENCAO = ' || coalesce(quote_literal(old.dataentradatrocamanutencao), 'null');
				campos_new  = campos_new  || ' DATAENTRADATROCAMANUTENCAO = ' || coalesce(quote_literal(new.dataentradatrocamanutencao), 'null');
				campos_old  = campos_old  || ' DATAENTRADATROCAMANUTENCAO = ' || coalesce(quote_literal(old.dataentradatrocamanutencao), 'null');
				first = false;
			end if;

			if (new.nomeclientetrocamanutencao &lt;&gt; old.nomeclientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMECLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.nomeclientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' NOMECLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.nomeclientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' NOMECLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.nomeclientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' NOMECLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.nomeclientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.fone1clientetrocamanutencao &lt;&gt; old.fone1clientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone1clientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' FONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone1clientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' FONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone1clientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' FONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone1clientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.fone2clientetrocamanutencao &lt;&gt; old.fone2clientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone2clientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' FONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone2clientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' FONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone2clientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' FONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone2clientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.fone3clientetrocamanutencao &lt;&gt; old.fone3clientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone3clientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' FONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone3clientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' FONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.fone3clientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' FONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone3clientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.tipofone1clientetrocamanutencao &lt;&gt; old.tipofone1clientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOFONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone1clientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' TIPOFONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone1clientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' TIPOFONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone1clientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' TIPOFONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone1clientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.tipofone2clientetrocamanutencao &lt;&gt; old.tipofone2clientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOFONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone2clientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' TIPOFONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone2clientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' TIPOFONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone2clientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' TIPOFONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone2clientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.tipofone3clientetrocamanutencao &lt;&gt; old.tipofone3clientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOFONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone3clientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' TIPOFONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone3clientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' TIPOFONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.tipofone3clientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' TIPOFONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone3clientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.emailclientetrocamanutencao &lt;&gt; old.emailclientetrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EMAILCLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.emailclientetrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' EMAILCLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.emailclientetrocamanutencao), 'null');
				campos_new  = campos_new  || ' EMAILCLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(new.emailclientetrocamanutencao), 'null');
				campos_old  = campos_old  || ' EMAILCLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.emailclientetrocamanutencao), 'null');
				first = false;
			end if;

			if (new.referenciatrocamanutencao &lt;&gt; old.referenciatrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' REFERENCIATROCAMANUTENCAO = ' || coalesce(quote_literal(new.referenciatrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' REFERENCIATROCAMANUTENCAO = ' || coalesce(quote_literal(old.referenciatrocamanutencao), 'null');
				campos_new  = campos_new  || ' REFERENCIATROCAMANUTENCAO = ' || coalesce(quote_literal(new.referenciatrocamanutencao), 'null');
				campos_old  = campos_old  || ' REFERENCIATROCAMANUTENCAO = ' || coalesce(quote_literal(old.referenciatrocamanutencao), 'null');
				first = false;
			end if;

			if (new.numerogaranticatrocamanutencao &lt;&gt; old.numerogaranticatrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROGARANTICATROCAMANUTENCAO = ' || coalesce(quote_literal(new.numerogaranticatrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' NUMEROGARANTICATROCAMANUTENCAO = ' || coalesce(quote_literal(old.numerogaranticatrocamanutencao), 'null');
				campos_new  = campos_new  || ' NUMEROGARANTICATROCAMANUTENCAO = ' || coalesce(quote_literal(new.numerogaranticatrocamanutencao), 'null');
				campos_old  = campos_old  || ' NUMEROGARANTICATROCAMANUTENCAO = ' || coalesce(quote_literal(old.numerogaranticatrocamanutencao), 'null');
				first = false;
			end if;

			if (new.descricaotrocamanutencao &lt;&gt; old.descricaotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaotrocamanutencao), 'null');
				campos_new  = campos_new  || ' DESCRICAOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.descricaotrocamanutencao), 'null');
				campos_old  = campos_old  || ' DESCRICAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.prazotrocamanutencao &lt;&gt; old.prazotrocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PRAZOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.prazotrocamanutencao), 'null');
				sql_rolback = sql_rolback || ' PRAZOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.prazotrocamanutencao), 'null');
				campos_new  = campos_new  || ' PRAZOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.prazotrocamanutencao), 'null');
				campos_old  = campos_old  || ' PRAZOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.prazotrocamanutencao), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedor &lt;&gt; old.codigoempresavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				first = false;
			end if;

			if (new.codigolojavendedor &lt;&gt; old.codigolojavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				first = false;
			end if;

			if (new.codigovendedor &lt;&gt; old.codigovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.email2trocamanutencao &lt;&gt; old.email2trocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EMAIL2TROCAMANUTENCAO = ' || coalesce(quote_literal(new.email2trocamanutencao), 'null');
				sql_rolback = sql_rolback || ' EMAIL2TROCAMANUTENCAO = ' || coalesce(quote_literal(old.email2trocamanutencao), 'null');
				campos_new  = campos_new  || ' EMAIL2TROCAMANUTENCAO = ' || coalesce(quote_literal(new.email2trocamanutencao), 'null');
				campos_old  = campos_old  || ' EMAIL2TROCAMANUTENCAO = ' || coalesce(quote_literal(old.email2trocamanutencao), 'null');
				first = false;
			end if;

			if (new.email3trocamanutencao &lt;&gt; old.email3trocamanutencao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EMAIL3TROCAMANUTENCAO = ' || coalesce(quote_literal(new.email3trocamanutencao), 'null');
				sql_rolback = sql_rolback || ' EMAIL3TROCAMANUTENCAO = ' || coalesce(quote_literal(old.email3trocamanutencao), 'null');
				campos_new  = campos_new  || ' EMAIL3TROCAMANUTENCAO = ' || coalesce(quote_literal(new.email3trocamanutencao), 'null');
				campos_old  = campos_old  || ' EMAIL3TROCAMANUTENCAO = ' || coalesce(quote_literal(old.email3trocamanutencao), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocamanutencao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TROCAMANUTENCAO (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCAMANUTENCAO, NUMEROTROCAMANUTENCAO, DATAENTRADATROCAMANUTENCAO, NOMECLIENTETROCAMANUTENCAO, FONE1CLIENTETROCAMANUTENCAO, FONE2CLIENTETROCAMANUTENCAO, FONE3CLIENTETROCAMANUTENCAO, TIPOFONE1CLIENTETROCAMANUTENCAO, TIPOFONE2CLIENTETROCAMANUTENCAO, TIPOFONE3CLIENTETROCAMANUTENCAO, EMAILCLIENTETROCAMANUTENCAO, REFERENCIATROCAMANUTENCAO, NUMEROGARANTICATROCAMANUTENCAO, DESCRICAOTROCAMANUTENCAO, PRAZOTROCAMANUTENCAO, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, EMAIL2TROCAMANUTENCAO, EMAIL3TROCAMANUTENCAO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.dataentradatrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeclientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone1clientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone2clientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.fone3clientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipofone1clientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipofone2clientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipofone3clientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.emailclientetrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.referenciatrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numerogaranticatrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.prazotrocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.email2trocamanutencao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.email3trocamanutencao), 'null') || ')';

			sql_replica = 'DELETE FROM TROCAMANUTENCAO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROTROCAMANUTENCAO = ' || coalesce(quote_literal(old.numerotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'DATAENTRADATROCAMANUTENCAO = ' || coalesce(quote_literal(old.dataentradatrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'NOMECLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.nomeclientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'FONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone1clientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'FONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone2clientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'FONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.fone3clientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'TIPOFONE1CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone1clientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'TIPOFONE2CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone2clientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'TIPOFONE3CLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.tipofone3clientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'EMAILCLIENTETROCAMANUTENCAO = ' || coalesce(quote_literal(old.emailclientetrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'REFERENCIATROCAMANUTENCAO = ' || coalesce(quote_literal(old.referenciatrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROGARANTICATROCAMANUTENCAO = ' || coalesce(quote_literal(old.numerogaranticatrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.descricaotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'PRAZOTROCAMANUTENCAO = ' || coalesce(quote_literal(old.prazotrocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'EMAIL2TROCAMANUTENCAO = ' || coalesce(quote_literal(old.email2trocamanutencao), 'null') || ', ';
			campos_old  = campos_old || 'EMAIL3TROCAMANUTENCAO = ' || coalesce(quote_literal(old.email3trocamanutencao), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotrocamanutencao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'trocamanutencao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamanutencao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamanutencao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_trocamercadoria()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_trocamercadoria() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TROCAMERCADORIA (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCA, DATAHORATROCA, STATUSTROCA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, MOTIVOTROCA, OBSERVACAOTROCA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datahoratroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.statustroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.motivotroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.observacaotroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TROCAMERCADORIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ', ';
			campos_new   = campos_new || 'DATAHORATROCA = ' || coalesce(quote_literal(new.datahoratroca), 'null') || ', ';
			campos_new   = campos_new || 'STATUSTROCA = ' || coalesce(quote_literal(new.statustroca), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			campos_new   = campos_new || 'MOTIVOTROCA = ' || coalesce(quote_literal(new.motivotroca), 'null') || ', ';
			campos_new   = campos_new || 'OBSERVACAOTROCA = ' || coalesce(quote_literal(new.observacaotroca), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotroca), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TROCAMERCADORIA SET ';
			sql_rolback = 'UPDATE TROCAMERCADORIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotroca &lt;&gt; old.codigotroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');
				campos_new  = campos_new  || ' CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
				campos_old  = campos_old  || ' CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');
				first = false;
			end if;

			if (new.datahoratroca &lt;&gt; old.datahoratroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAHORATROCA = ' || coalesce(quote_literal(new.datahoratroca), 'null');
				sql_rolback = sql_rolback || ' DATAHORATROCA = ' || coalesce(quote_literal(old.datahoratroca), 'null');
				campos_new  = campos_new  || ' DATAHORATROCA = ' || coalesce(quote_literal(new.datahoratroca), 'null');
				campos_old  = campos_old  || ' DATAHORATROCA = ' || coalesce(quote_literal(old.datahoratroca), 'null');
				first = false;
			end if;

			if (new.statustroca &lt;&gt; old.statustroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' STATUSTROCA = ' || coalesce(quote_literal(new.statustroca), 'null');
				sql_rolback = sql_rolback || ' STATUSTROCA = ' || coalesce(quote_literal(old.statustroca), 'null');
				campos_new  = campos_new  || ' STATUSTROCA = ' || coalesce(quote_literal(new.statustroca), 'null');
				campos_old  = campos_old  || ' STATUSTROCA = ' || coalesce(quote_literal(old.statustroca), 'null');
				first = false;
			end if;

			if (new.codigoempresavendedor &lt;&gt; old.codigoempresavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(new.codigoempresavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null');
				first = false;
			end if;

			if (new.codigolojavendedor &lt;&gt; old.codigolojavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(new.codigolojavendedor), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null');
				first = false;
			end if;

			if (new.codigovendedor &lt;&gt; old.codigovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				first = false;
			end if;

			if (new.motivotroca &lt;&gt; old.motivotroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' MOTIVOTROCA = ' || coalesce(quote_literal(new.motivotroca), 'null');
				sql_rolback = sql_rolback || ' MOTIVOTROCA = ' || coalesce(quote_literal(old.motivotroca), 'null');
				campos_new  = campos_new  || ' MOTIVOTROCA = ' || coalesce(quote_literal(new.motivotroca), 'null');
				campos_old  = campos_old  || ' MOTIVOTROCA = ' || coalesce(quote_literal(old.motivotroca), 'null');
				first = false;
			end if;

			if (new.observacaotroca &lt;&gt; old.observacaotroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' OBSERVACAOTROCA = ' || coalesce(quote_literal(new.observacaotroca), 'null');
				sql_rolback = sql_rolback || ' OBSERVACAOTROCA = ' || coalesce(quote_literal(old.observacaotroca), 'null');
				campos_new  = campos_new  || ' OBSERVACAOTROCA = ' || coalesce(quote_literal(new.observacaotroca), 'null');
				campos_old  = campos_old  || ' OBSERVACAOTROCA = ' || coalesce(quote_literal(old.observacaotroca), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotroca), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TROCAMERCADORIA (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCA, DATAHORATROCA, STATUSTROCA, CODIGOEMPRESAVENDEDOR, CODIGOLOJAVENDEDOR, CODIGOVENDEDOR, MOTIVOTROCA, OBSERVACAOTROCA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datahoratroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.statustroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.motivotroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.observacaotroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TROCAMERCADORIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null') || ', ';
			campos_old  = campos_old || 'DATAHORATROCA = ' || coalesce(quote_literal(old.datahoratroca), 'null') || ', ';
			campos_old  = campos_old || 'STATUSTROCA = ' || coalesce(quote_literal(old.statustroca), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVENDEDOR = ' || coalesce(quote_literal(old.codigoempresavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVENDEDOR = ' || coalesce(quote_literal(old.codigolojavendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			campos_old  = campos_old || 'MOTIVOTROCA = ' || coalesce(quote_literal(old.motivotroca), 'null') || ', ';
			campos_old  = campos_old || 'OBSERVACAOTROCA = ' || coalesce(quote_literal(old.observacaotroca), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotroca), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'trocamercadoria', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamercadoria', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamercadoria', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_trocamercadoriaentrada()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_trocamercadoriaentrada() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TROCAMERCADORIAENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCA, CODIGOTROCAENTRADA, QUANTIDADETROCAENTRADA, VALORTROCAENTRADA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotrocaentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadetrocaentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortrocaentrada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TROCAMERCADORIAENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ' AND CODIGOTROCAENTRADA = ' || coalesce(quote_literal(new.codigotrocaentrada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCAENTRADA = ' || coalesce(quote_literal(new.codigotrocaentrada), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADETROCAENTRADA = ' || coalesce(quote_literal(new.quantidadetrocaentrada), 'null') || ', ';
			campos_new   = campos_new || 'VALORTROCAENTRADA = ' || coalesce(quote_literal(new.valortrocaentrada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotroca), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocaentrada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TROCAMERCADORIAENTRADA SET ';
			sql_rolback = 'UPDATE TROCAMERCADORIAENTRADA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotroca &lt;&gt; old.codigotroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');
				campos_new  = campos_new  || ' CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
				campos_old  = campos_old  || ' CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');
				first = false;
			end if;

			if (new.codigotrocaentrada &lt;&gt; old.codigotrocaentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCAENTRADA = ' || coalesce(quote_literal(new.codigotrocaentrada), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCAENTRADA = ' || coalesce(quote_literal(old.codigotrocaentrada), 'null');
				campos_new  = campos_new  || ' CODIGOTROCAENTRADA = ' || coalesce(quote_literal(new.codigotrocaentrada), 'null');
				campos_old  = campos_old  || ' CODIGOTROCAENTRADA = ' || coalesce(quote_literal(old.codigotrocaentrada), 'null');
				first = false;
			end if;

			if (new.quantidadetrocaentrada &lt;&gt; old.quantidadetrocaentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADETROCAENTRADA = ' || coalesce(quote_literal(new.quantidadetrocaentrada), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADETROCAENTRADA = ' || coalesce(quote_literal(old.quantidadetrocaentrada), 'null');
				campos_new  = campos_new  || ' QUANTIDADETROCAENTRADA = ' || coalesce(quote_literal(new.quantidadetrocaentrada), 'null');
				campos_old  = campos_old  || ' QUANTIDADETROCAENTRADA = ' || coalesce(quote_literal(old.quantidadetrocaentrada), 'null');
				first = false;
			end if;

			if (new.valortrocaentrada &lt;&gt; old.valortrocaentrada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTROCAENTRADA = ' || coalesce(quote_literal(new.valortrocaentrada), 'null');
				sql_rolback = sql_rolback || ' VALORTROCAENTRADA = ' || coalesce(quote_literal(old.valortrocaentrada), 'null');
				campos_new  = campos_new  || ' VALORTROCAENTRADA = ' || coalesce(quote_literal(new.valortrocaentrada), 'null');
				campos_old  = campos_old  || ' VALORTROCAENTRADA = ' || coalesce(quote_literal(old.valortrocaentrada), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ' AND CODIGOTROCAENTRADA = ' || coalesce(quote_literal(new.codigotrocaentrada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ' AND CODIGOTROCAENTRADA = ' || coalesce(quote_literal(new.codigotrocaentrada), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotroca), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocaentrada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TROCAMERCADORIAENTRADA (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCA, CODIGOTROCAENTRADA, QUANTIDADETROCAENTRADA, VALORTROCAENTRADA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotrocaentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadetrocaentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortrocaentrada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TROCAMERCADORIAENTRADA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null') || ' AND CODIGOTROCAENTRADA = ' || coalesce(quote_literal(old.codigotrocaentrada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCAENTRADA = ' || coalesce(quote_literal(old.codigotrocaentrada), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADETROCAENTRADA = ' || coalesce(quote_literal(old.quantidadetrocaentrada), 'null') || ', ';
			campos_old  = campos_old || 'VALORTROCAENTRADA = ' || coalesce(quote_literal(old.valortrocaentrada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotroca), 'null')  || ', ' || coalesce(quote_literal(old.codigotrocaentrada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'trocamercadoriaentrada', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamercadoriaentrada', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamercadoriaentrada', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_trocamercadoriasaida()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_trocamercadoriasaida() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO TROCAMERCADORIASAIDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCA, CODIGOTROCASAIDA, QUANTIDADETROCASAIDA, VALORTROCASAIDA, FLAGCOMISSAOVENDEDORTROCASAIDA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotroca), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotrocasaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadetrocasaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valortrocasaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagcomissaovendedortrocasaida), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM TROCAMERCADORIASAIDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ' AND CODIGOTROCASAIDA = ' || coalesce(quote_literal(new.codigotrocasaida), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTROCASAIDA = ' || coalesce(quote_literal(new.codigotrocasaida), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADETROCASAIDA = ' || coalesce(quote_literal(new.quantidadetrocasaida), 'null') || ', ';
			campos_new   = campos_new || 'VALORTROCASAIDA = ' || coalesce(quote_literal(new.valortrocasaida), 'null') || ', ';
			campos_new   = campos_new || 'FLAGCOMISSAOVENDEDORTROCASAIDA = ' || coalesce(quote_literal(new.flagcomissaovendedortrocasaida), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotroca), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocasaida), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE TROCAMERCADORIASAIDA SET ';
			sql_rolback = 'UPDATE TROCAMERCADORIASAIDA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigotroca &lt;&gt; old.codigotroca) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');
				campos_new  = campos_new  || ' CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null');
				campos_old  = campos_old  || ' CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null');
				first = false;
			end if;

			if (new.codigotrocasaida &lt;&gt; old.codigotrocasaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTROCASAIDA = ' || coalesce(quote_literal(new.codigotrocasaida), 'null');
				sql_rolback = sql_rolback || ' CODIGOTROCASAIDA = ' || coalesce(quote_literal(old.codigotrocasaida), 'null');
				campos_new  = campos_new  || ' CODIGOTROCASAIDA = ' || coalesce(quote_literal(new.codigotrocasaida), 'null');
				campos_old  = campos_old  || ' CODIGOTROCASAIDA = ' || coalesce(quote_literal(old.codigotrocasaida), 'null');
				first = false;
			end if;

			if (new.quantidadetrocasaida &lt;&gt; old.quantidadetrocasaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADETROCASAIDA = ' || coalesce(quote_literal(new.quantidadetrocasaida), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADETROCASAIDA = ' || coalesce(quote_literal(old.quantidadetrocasaida), 'null');
				campos_new  = campos_new  || ' QUANTIDADETROCASAIDA = ' || coalesce(quote_literal(new.quantidadetrocasaida), 'null');
				campos_old  = campos_old  || ' QUANTIDADETROCASAIDA = ' || coalesce(quote_literal(old.quantidadetrocasaida), 'null');
				first = false;
			end if;

			if (new.valortrocasaida &lt;&gt; old.valortrocasaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORTROCASAIDA = ' || coalesce(quote_literal(new.valortrocasaida), 'null');
				sql_rolback = sql_rolback || ' VALORTROCASAIDA = ' || coalesce(quote_literal(old.valortrocasaida), 'null');
				campos_new  = campos_new  || ' VALORTROCASAIDA = ' || coalesce(quote_literal(new.valortrocasaida), 'null');
				campos_old  = campos_old  || ' VALORTROCASAIDA = ' || coalesce(quote_literal(old.valortrocasaida), 'null');
				first = false;
			end if;

			if (new.flagcomissaovendedortrocasaida &lt;&gt; old.flagcomissaovendedortrocasaida) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGCOMISSAOVENDEDORTROCASAIDA = ' || coalesce(quote_literal(new.flagcomissaovendedortrocasaida), 'null');
				sql_rolback = sql_rolback || ' FLAGCOMISSAOVENDEDORTROCASAIDA = ' || coalesce(quote_literal(old.flagcomissaovendedortrocasaida), 'null');
				campos_new  = campos_new  || ' FLAGCOMISSAOVENDEDORTROCASAIDA = ' || coalesce(quote_literal(new.flagcomissaovendedortrocasaida), 'null');
				campos_old  = campos_old  || ' FLAGCOMISSAOVENDEDORTROCASAIDA = ' || coalesce(quote_literal(old.flagcomissaovendedortrocasaida), 'null');
				first = false;
			end if;

			if (new.codigoempresaproduto &lt;&gt; old.codigoempresaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(new.codigoempresaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null');
				first = false;
			end if;

			if (new.codigolojaproduto &lt;&gt; old.codigolojaproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(new.codigolojaproduto), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null');
				first = false;
			end if;

			if (new.codigoproduto &lt;&gt; old.codigoproduto) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				sql_rolback = sql_rolback || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				campos_new  = campos_new  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(new.codigoproduto), 'null');
				campos_old  = campos_old  || ' CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ' AND CODIGOTROCASAIDA = ' || coalesce(quote_literal(new.codigotrocasaida), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(new.codigotroca), 'null') || ' AND CODIGOTROCASAIDA = ' || coalesce(quote_literal(new.codigotrocasaida), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigotroca), 'null')  || ', ' || coalesce(quote_literal(new.codigotrocasaida), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO TROCAMERCADORIASAIDA (CODIGOEMPRESA, CODIGOLOJA, CODIGOTROCA, CODIGOTROCASAIDA, QUANTIDADETROCASAIDA, VALORTROCASAIDA, FLAGCOMISSAOVENDEDORTROCASAIDA, CODIGOEMPRESAPRODUTO, CODIGOLOJAPRODUTO, CODIGOPRODUTO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotroca), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotrocasaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadetrocasaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valortrocasaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagcomissaovendedortrocasaida), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM TROCAMERCADORIASAIDA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null') || ' AND CODIGOTROCASAIDA = ' || coalesce(quote_literal(old.codigotrocasaida), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCA = ' || coalesce(quote_literal(old.codigotroca), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTROCASAIDA = ' || coalesce(quote_literal(old.codigotrocasaida), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADETROCASAIDA = ' || coalesce(quote_literal(old.quantidadetrocasaida), 'null') || ', ';
			campos_old  = campos_old || 'VALORTROCASAIDA = ' || coalesce(quote_literal(old.valortrocasaida), 'null') || ', ';
			campos_old  = campos_old || 'FLAGCOMISSAOVENDEDORTROCASAIDA = ' || coalesce(quote_literal(old.flagcomissaovendedortrocasaida), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAPRODUTO = ' || coalesce(quote_literal(old.codigoempresaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAPRODUTO = ' || coalesce(quote_literal(old.codigolojaproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOPRODUTO = ' || coalesce(quote_literal(old.codigoproduto), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigotroca), 'null')  || ', ' || coalesce(quote_literal(old.codigotrocasaida), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'trocamercadoriasaida', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamercadoriasaida', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('trocamercadoriasaida', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_uftipotributacao()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_uftipotributacao() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO UFTIPOTRIBUTACAO (CODIGOTIPOTRIBUTACAO, UFORIGEMTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.uforigemtributacao), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM UFTIPOTRIBUTACAO WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ', ';
			campos_new   = campos_new || 'UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigotipotributacao), 'null')  || ', ' || coalesce(quote_literal(new.uforigemtributacao), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE UFTIPOTRIBUTACAO SET ';
			sql_rolback = 'UPDATE UFTIPOTRIBUTACAO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigotipotributacao &lt;&gt; old.codigotipotributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null');
				first = false;
			end if;

			if (new.uforigemtributacao &lt;&gt; old.uforigemtributacao) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');
				sql_rolback = sql_rolback || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null');
				campos_new  = campos_new  || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');
				campos_old  = campos_old  || ' UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(new.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(new.uforigemtributacao), 'null');

			sql_chave = coalesce(quote_literal(new.codigotipotributacao), 'null')  || ', ' || coalesce(quote_literal(new.uforigemtributacao), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO UFTIPOTRIBUTACAO (CODIGOTIPOTRIBUTACAO, UFORIGEMTRIBUTACAO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.uforigemtributacao), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM UFTIPOTRIBUTACAO WHERE CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null') || ' AND UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOTIPOTRIBUTACAO = ' || coalesce(quote_literal(old.codigotipotributacao), 'null') || ', ';
			campos_old  = campos_old || 'UFORIGEMTRIBUTACAO = ' || coalesce(quote_literal(old.uforigemtributacao), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigotipotributacao), 'null')  || ', ' || coalesce(quote_literal(old.uforigemtributacao), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'uftipotributacao', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('uftipotributacao', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('uftipotributacao', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_unidade()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_unidade() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO UNIDADE (SIGLAUNIDADE, NOMEUNIDADESINGULAR, NOMEUNIDADEPLURAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.siglaunidade), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeunidadesingular), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeunidadeplural), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM UNIDADE WHERE SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');
			campos_new = '';
			campos_new   = campos_new || 'SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null') || ', ';
			campos_new   = campos_new || 'NOMEUNIDADESINGULAR = ' || coalesce(quote_literal(new.nomeunidadesingular), 'null') || ', ';
			campos_new   = campos_new || 'NOMEUNIDADEPLURAL = ' || coalesce(quote_literal(new.nomeunidadeplural), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.siglaunidade), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE UNIDADE SET ';
			sql_rolback = 'UPDATE UNIDADE SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.siglaunidade &lt;&gt; old.siglaunidade) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');
				sql_rolback = sql_rolback || ' SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null');
				campos_new  = campos_new  || ' SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');
				campos_old  = campos_old  || ' SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null');
				first = false;
			end if;

			if (new.nomeunidadesingular &lt;&gt; old.nomeunidadesingular) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEUNIDADESINGULAR = ' || coalesce(quote_literal(new.nomeunidadesingular), 'null');
				sql_rolback = sql_rolback || ' NOMEUNIDADESINGULAR = ' || coalesce(quote_literal(old.nomeunidadesingular), 'null');
				campos_new  = campos_new  || ' NOMEUNIDADESINGULAR = ' || coalesce(quote_literal(new.nomeunidadesingular), 'null');
				campos_old  = campos_old  || ' NOMEUNIDADESINGULAR = ' || coalesce(quote_literal(old.nomeunidadesingular), 'null');
				first = false;
			end if;

			if (new.nomeunidadeplural &lt;&gt; old.nomeunidadeplural) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEUNIDADEPLURAL = ' || coalesce(quote_literal(new.nomeunidadeplural), 'null');
				sql_rolback = sql_rolback || ' NOMEUNIDADEPLURAL = ' || coalesce(quote_literal(old.nomeunidadeplural), 'null');
				campos_new  = campos_new  || ' NOMEUNIDADEPLURAL = ' || coalesce(quote_literal(new.nomeunidadeplural), 'null');
				campos_old  = campos_old  || ' NOMEUNIDADEPLURAL = ' || coalesce(quote_literal(old.nomeunidadeplural), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');
			sql_rolback = sql_rolback  || ' WHERE SIGLAUNIDADE = ' || coalesce(quote_literal(new.siglaunidade), 'null');

			sql_chave = coalesce(quote_literal(new.siglaunidade), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO UNIDADE (SIGLAUNIDADE, NOMEUNIDADESINGULAR, NOMEUNIDADEPLURAL, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.siglaunidade), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeunidadesingular), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeunidadeplural), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM UNIDADE WHERE SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'SIGLAUNIDADE = ' || coalesce(quote_literal(old.siglaunidade), 'null') || ', ';
			campos_old  = campos_old || 'NOMEUNIDADESINGULAR = ' || coalesce(quote_literal(old.nomeunidadesingular), 'null') || ', ';
			campos_old  = campos_old || 'NOMEUNIDADEPLURAL = ' || coalesce(quote_literal(old.nomeunidadeplural), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.siglaunidade), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'unidade', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('unidade', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('unidade', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_usuario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_usuario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO USUARIO (CODIGOUSUARIO, CODIGOEMPRESA, CODIGOLOJA, NOMEUSUARIO, LOGINUSUARIO, SENHAUSUARIO, ATIVO, SUPERUSUARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomeusuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.loginusuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.senhausuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.ativo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.superusuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM USUARIO WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'NOMEUSUARIO = ' || coalesce(quote_literal(new.nomeusuario), 'null') || ', ';
			campos_new   = campos_new || 'LOGINUSUARIO = ' || coalesce(quote_literal(new.loginusuario), 'null') || ', ';
			campos_new   = campos_new || 'SENHAUSUARIO = ' || coalesce(quote_literal(new.senhausuario), 'null') || ', ';
			campos_new   = campos_new || 'ATIVO = ' || coalesce(quote_literal(new.ativo), 'null') || ', ';
			campos_new   = campos_new || 'SUPERUSUARIO = ' || coalesce(quote_literal(new.superusuario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigousuario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE USUARIO SET ';
			sql_rolback = 'UPDATE USUARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigousuario &lt;&gt; old.codigousuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.nomeusuario &lt;&gt; old.nomeusuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEUSUARIO = ' || coalesce(quote_literal(new.nomeusuario), 'null');
				sql_rolback = sql_rolback || ' NOMEUSUARIO = ' || coalesce(quote_literal(old.nomeusuario), 'null');
				campos_new  = campos_new  || ' NOMEUSUARIO = ' || coalesce(quote_literal(new.nomeusuario), 'null');
				campos_old  = campos_old  || ' NOMEUSUARIO = ' || coalesce(quote_literal(old.nomeusuario), 'null');
				first = false;
			end if;

			if (new.loginusuario &lt;&gt; old.loginusuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' LOGINUSUARIO = ' || coalesce(quote_literal(new.loginusuario), 'null');
				sql_rolback = sql_rolback || ' LOGINUSUARIO = ' || coalesce(quote_literal(old.loginusuario), 'null');
				campos_new  = campos_new  || ' LOGINUSUARIO = ' || coalesce(quote_literal(new.loginusuario), 'null');
				campos_old  = campos_old  || ' LOGINUSUARIO = ' || coalesce(quote_literal(old.loginusuario), 'null');
				first = false;
			end if;

			if (new.senhausuario &lt;&gt; old.senhausuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SENHAUSUARIO = ' || coalesce(quote_literal(new.senhausuario), 'null');
				sql_rolback = sql_rolback || ' SENHAUSUARIO = ' || coalesce(quote_literal(old.senhausuario), 'null');
				campos_new  = campos_new  || ' SENHAUSUARIO = ' || coalesce(quote_literal(new.senhausuario), 'null');
				campos_old  = campos_old  || ' SENHAUSUARIO = ' || coalesce(quote_literal(old.senhausuario), 'null');
				first = false;
			end if;

			if (new.ativo &lt;&gt; old.ativo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' ATIVO = ' || coalesce(quote_literal(new.ativo), 'null');
				sql_rolback = sql_rolback || ' ATIVO = ' || coalesce(quote_literal(old.ativo), 'null');
				campos_new  = campos_new  || ' ATIVO = ' || coalesce(quote_literal(new.ativo), 'null');
				campos_old  = campos_old  || ' ATIVO = ' || coalesce(quote_literal(old.ativo), 'null');
				first = false;
			end if;

			if (new.superusuario &lt;&gt; old.superusuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SUPERUSUARIO = ' || coalesce(quote_literal(new.superusuario), 'null');
				sql_rolback = sql_rolback || ' SUPERUSUARIO = ' || coalesce(quote_literal(old.superusuario), 'null');
				campos_new  = campos_new  || ' SUPERUSUARIO = ' || coalesce(quote_literal(new.superusuario), 'null');
				campos_old  = campos_old  || ' SUPERUSUARIO = ' || coalesce(quote_literal(old.superusuario), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');

			sql_chave = coalesce(quote_literal(new.codigousuario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO USUARIO (CODIGOUSUARIO, CODIGOEMPRESA, CODIGOLOJA, NOMEUSUARIO, LOGINUSUARIO, SENHAUSUARIO, ATIVO, SUPERUSUARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomeusuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.loginusuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.senhausuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.ativo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.superusuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM USUARIO WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'NOMEUSUARIO = ' || coalesce(quote_literal(old.nomeusuario), 'null') || ', ';
			campos_old  = campos_old || 'LOGINUSUARIO = ' || coalesce(quote_literal(old.loginusuario), 'null') || ', ';
			campos_old  = campos_old || 'SENHAUSUARIO = ' || coalesce(quote_literal(old.senhausuario), 'null') || ', ';
			campos_old  = campos_old || 'ATIVO = ' || coalesce(quote_literal(old.ativo), 'null') || ', ';
			campos_old  = campos_old || 'SUPERUSUARIO = ' || coalesce(quote_literal(old.superusuario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigousuario), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'usuario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('usuario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('usuario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_usuarioloja()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_usuarioloja() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO USUARIOLOJA (CODIGOUSUARIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAVINCULADA, CODIGOLOJAVINCULADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresavinculada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojavinculada), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM USUARIOLOJA WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(new.codigoempresavinculada), 'null') || ' AND CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(new.codigolojavinculada), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(new.codigoempresavinculada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(new.codigolojavinculada), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigousuario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresavinculada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojavinculada), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE USUARIOLOJA SET ';
			sql_rolback = 'UPDATE USUARIOLOJA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigousuario &lt;&gt; old.codigousuario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresavinculada &lt;&gt; old.codigoempresavinculada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(new.codigoempresavinculada), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(old.codigoempresavinculada), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(new.codigoempresavinculada), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(old.codigoempresavinculada), 'null');
				first = false;
			end if;

			if (new.codigolojavinculada &lt;&gt; old.codigolojavinculada) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(new.codigolojavinculada), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(old.codigolojavinculada), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(new.codigolojavinculada), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(old.codigolojavinculada), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(new.codigoempresavinculada), 'null') || ' AND CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(new.codigolojavinculada), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(new.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(new.codigoempresavinculada), 'null') || ' AND CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(new.codigolojavinculada), 'null');

			sql_chave = coalesce(quote_literal(new.codigousuario), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresavinculada), 'null')  || ', ' || coalesce(quote_literal(new.codigolojavinculada), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO USUARIOLOJA (CODIGOUSUARIO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESAVINCULADA, CODIGOLOJAVINCULADA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresavinculada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojavinculada), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM USUARIOLOJA WHERE CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(old.codigoempresavinculada), 'null') || ' AND CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(old.codigolojavinculada), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOUSUARIO = ' || coalesce(quote_literal(old.codigousuario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVINCULADA = ' || coalesce(quote_literal(old.codigoempresavinculada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVINCULADA = ' || coalesce(quote_literal(old.codigolojavinculada), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigousuario), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresavinculada), 'null')  || ', ' || coalesce(quote_literal(old.codigolojavinculada), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'usuarioloja', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('usuarioloja', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('usuarioloja', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_valefuncionario()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_valefuncionario() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VALEFUNCIONARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOVALEFUNCIONARIO, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO, CODIGOCONTRATOTRABALHO, DATAVALEFUNCIONARIO, VALORVALEFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESAVERBA, CODIGOLOJAVERBA, CODIGOVERBA, DESCRICAOVALEFUNCIONARIO, NUMEROPARCELAVALEFUNCIONARIO, QUANTIDADEPARCELASVALEFUNCIONARIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovalefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datavalefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorvalefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaovalefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.numeroparcelavalefuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.quantidadeparcelasvalefuncionario), 'null') || ')';

			sql_rolback = 'DELETE FROM VALEFUNCIONARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.codigovalefuncionario), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.codigovalefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'DATAVALEFUNCIONARIO = ' || coalesce(quote_literal(new.datavalefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'VALORVALEFUNCIONARIO = ' || coalesce(quote_literal(new.valorvalefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.descricaovalefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'NUMEROPARCELAVALEFUNCIONARIO = ' || coalesce(quote_literal(new.numeroparcelavalefuncionario), 'null') || ', ';
			campos_new   = campos_new || 'QUANTIDADEPARCELASVALEFUNCIONARIO = ' || coalesce(quote_literal(new.quantidadeparcelasvalefuncionario), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigovalefuncionario), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VALEFUNCIONARIO SET ';
			sql_rolback = 'UPDATE VALEFUNCIONARIO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigovalefuncionario &lt;&gt; old.codigovalefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.codigovalefuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.codigovalefuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.codigovalefuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.codigovalefuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresacontratotrabalho &lt;&gt; old.codigoempresacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigolojacontratotrabalho &lt;&gt; old.codigolojacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.datavalefuncionario &lt;&gt; old.datavalefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAVALEFUNCIONARIO = ' || coalesce(quote_literal(new.datavalefuncionario), 'null');
				sql_rolback = sql_rolback || ' DATAVALEFUNCIONARIO = ' || coalesce(quote_literal(old.datavalefuncionario), 'null');
				campos_new  = campos_new  || ' DATAVALEFUNCIONARIO = ' || coalesce(quote_literal(new.datavalefuncionario), 'null');
				campos_old  = campos_old  || ' DATAVALEFUNCIONARIO = ' || coalesce(quote_literal(old.datavalefuncionario), 'null');
				first = false;
			end if;

			if (new.valorvalefuncionario &lt;&gt; old.valorvalefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORVALEFUNCIONARIO = ' || coalesce(quote_literal(new.valorvalefuncionario), 'null');
				sql_rolback = sql_rolback || ' VALORVALEFUNCIONARIO = ' || coalesce(quote_literal(old.valorvalefuncionario), 'null');
				campos_new  = campos_new  || ' VALORVALEFUNCIONARIO = ' || coalesce(quote_literal(new.valorvalefuncionario), 'null');
				campos_old  = campos_old  || ' VALORVALEFUNCIONARIO = ' || coalesce(quote_literal(old.valorvalefuncionario), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresaverba &lt;&gt; old.codigoempresaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null');
				first = false;
			end if;

			if (new.codigolojaverba &lt;&gt; old.codigolojaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null');
				first = false;
			end if;

			if (new.codigoverba &lt;&gt; old.codigoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				campos_new  = campos_new  || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				campos_old  = campos_old  || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				first = false;
			end if;

			if (new.descricaovalefuncionario &lt;&gt; old.descricaovalefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.descricaovalefuncionario), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.descricaovalefuncionario), 'null');
				campos_new  = campos_new  || ' DESCRICAOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.descricaovalefuncionario), 'null');
				campos_old  = campos_old  || ' DESCRICAOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.descricaovalefuncionario), 'null');
				first = false;
			end if;

			if (new.numeroparcelavalefuncionario &lt;&gt; old.numeroparcelavalefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NUMEROPARCELAVALEFUNCIONARIO = ' || coalesce(quote_literal(new.numeroparcelavalefuncionario), 'null');
				sql_rolback = sql_rolback || ' NUMEROPARCELAVALEFUNCIONARIO = ' || coalesce(quote_literal(old.numeroparcelavalefuncionario), 'null');
				campos_new  = campos_new  || ' NUMEROPARCELAVALEFUNCIONARIO = ' || coalesce(quote_literal(new.numeroparcelavalefuncionario), 'null');
				campos_old  = campos_old  || ' NUMEROPARCELAVALEFUNCIONARIO = ' || coalesce(quote_literal(old.numeroparcelavalefuncionario), 'null');
				first = false;
			end if;

			if (new.quantidadeparcelasvalefuncionario &lt;&gt; old.quantidadeparcelasvalefuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' QUANTIDADEPARCELASVALEFUNCIONARIO = ' || coalesce(quote_literal(new.quantidadeparcelasvalefuncionario), 'null');
				sql_rolback = sql_rolback || ' QUANTIDADEPARCELASVALEFUNCIONARIO = ' || coalesce(quote_literal(old.quantidadeparcelasvalefuncionario), 'null');
				campos_new  = campos_new  || ' QUANTIDADEPARCELASVALEFUNCIONARIO = ' || coalesce(quote_literal(new.quantidadeparcelasvalefuncionario), 'null');
				campos_old  = campos_old  || ' QUANTIDADEPARCELASVALEFUNCIONARIO = ' || coalesce(quote_literal(old.quantidadeparcelasvalefuncionario), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.codigovalefuncionario), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(new.codigovalefuncionario), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigovalefuncionario), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VALEFUNCIONARIO (CODIGOEMPRESA, CODIGOLOJA, CODIGOVALEFUNCIONARIO, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO, CODIGOCONTRATOTRABALHO, DATAVALEFUNCIONARIO, VALORVALEFUNCIONARIO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, CODIGOEMPRESAVERBA, CODIGOLOJAVERBA, CODIGOVERBA, DESCRICAOVALEFUNCIONARIO, NUMEROPARCELAVALEFUNCIONARIO, QUANTIDADEPARCELASVALEFUNCIONARIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovalefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datavalefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorvalefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaovalefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.numeroparcelavalefuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.quantidadeparcelasvalefuncionario), 'null') || ')';

			sql_replica = 'DELETE FROM VALEFUNCIONARIO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.codigovalefuncionario), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.codigovalefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'DATAVALEFUNCIONARIO = ' || coalesce(quote_literal(old.datavalefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'VALORVALEFUNCIONARIO = ' || coalesce(quote_literal(old.valorvalefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOVALEFUNCIONARIO = ' || coalesce(quote_literal(old.descricaovalefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'NUMEROPARCELAVALEFUNCIONARIO = ' || coalesce(quote_literal(old.numeroparcelavalefuncionario), 'null') || ', ';
			campos_old  = campos_old || 'QUANTIDADEPARCELASVALEFUNCIONARIO = ' || coalesce(quote_literal(old.quantidadeparcelasvalefuncionario), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigovalefuncionario), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'valefuncionario', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('valefuncionario', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('valefuncionario', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_veiculo()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_veiculo() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VEICULO (CODIGOEMPRESA, CODIGOLOJA, CODIGOVEICULO, DESCRICAOVEICULO, CODIGOEMPRESATIPOVEICULO, CODIGOLOJATIPOVEICULO, CODIGOTIPOVEICULO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresatipoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojatipoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigotipoveiculo), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM VEICULO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOVEICULO = ' || coalesce(quote_literal(new.descricaoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESATIPOVEICULO = ' || coalesce(quote_literal(new.codigoempresatipoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJATIPOVEICULO = ' || coalesce(quote_literal(new.codigolojatipoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoveiculo), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VEICULO SET ';
			sql_rolback = 'UPDATE VEICULO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoveiculo &lt;&gt; old.codigoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null');
				first = false;
			end if;

			if (new.descricaoveiculo &lt;&gt; old.descricaoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOVEICULO = ' || coalesce(quote_literal(new.descricaoveiculo), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOVEICULO = ' || coalesce(quote_literal(old.descricaoveiculo), 'null');
				campos_new  = campos_new  || ' DESCRICAOVEICULO = ' || coalesce(quote_literal(new.descricaoveiculo), 'null');
				campos_old  = campos_old  || ' DESCRICAOVEICULO = ' || coalesce(quote_literal(old.descricaoveiculo), 'null');
				first = false;
			end if;

			if (new.codigoempresatipoveiculo &lt;&gt; old.codigoempresatipoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESATIPOVEICULO = ' || coalesce(quote_literal(new.codigoempresatipoveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESATIPOVEICULO = ' || coalesce(quote_literal(old.codigoempresatipoveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESATIPOVEICULO = ' || coalesce(quote_literal(new.codigoempresatipoveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESATIPOVEICULO = ' || coalesce(quote_literal(old.codigoempresatipoveiculo), 'null');
				first = false;
			end if;

			if (new.codigolojatipoveiculo &lt;&gt; old.codigolojatipoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJATIPOVEICULO = ' || coalesce(quote_literal(new.codigolojatipoveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJATIPOVEICULO = ' || coalesce(quote_literal(old.codigolojatipoveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOLOJATIPOVEICULO = ' || coalesce(quote_literal(new.codigolojatipoveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOLOJATIPOVEICULO = ' || coalesce(quote_literal(old.codigolojatipoveiculo), 'null');
				first = false;
			end if;

			if (new.codigotipoveiculo &lt;&gt; old.codigotipoveiculo) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');
				sql_rolback = sql_rolback || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null');
				campos_new  = campos_new  || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(new.codigotipoveiculo), 'null');
				campos_old  = campos_old  || ' CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVEICULO = ' || coalesce(quote_literal(new.codigoveiculo), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoveiculo), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VEICULO (CODIGOEMPRESA, CODIGOLOJA, CODIGOVEICULO, DESCRICAOVEICULO, CODIGOEMPRESATIPOVEICULO, CODIGOLOJATIPOVEICULO, CODIGOTIPOVEICULO, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresatipoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojatipoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigotipoveiculo), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM VEICULO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVEICULO = ' || coalesce(quote_literal(old.codigoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOVEICULO = ' || coalesce(quote_literal(old.descricaoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESATIPOVEICULO = ' || coalesce(quote_literal(old.codigoempresatipoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJATIPOVEICULO = ' || coalesce(quote_literal(old.codigolojatipoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOTIPOVEICULO = ' || coalesce(quote_literal(old.codigotipoveiculo), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoveiculo), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'veiculo', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('veiculo', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('veiculo', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_vendadiaria()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_vendadiaria() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VENDADIARIA (CODIGOEMPRESA, CODIGOLOJA, DATAVENDA, VALORVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.datavenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorvenda), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM VENDADIARIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null') || ', ';
			campos_new   = campos_new || 'VALORVENDA = ' || coalesce(quote_literal(new.valorvenda), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.datavenda), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VENDADIARIA SET ';
			sql_rolback = 'UPDATE VENDADIARIA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.datavenda &lt;&gt; old.datavenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');
				sql_rolback = sql_rolback || ' DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null');
				campos_new  = campos_new  || ' DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');
				campos_old  = campos_old  || ' DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null');
				first = false;
			end if;

			if (new.valorvenda &lt;&gt; old.valorvenda) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORVENDA = ' || coalesce(quote_literal(new.valorvenda), 'null');
				sql_rolback = sql_rolback || ' VALORVENDA = ' || coalesce(quote_literal(old.valorvenda), 'null');
				campos_new  = campos_new  || ' VALORVENDA = ' || coalesce(quote_literal(new.valorvenda), 'null');
				campos_old  = campos_old  || ' VALORVENDA = ' || coalesce(quote_literal(old.valorvenda), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(new.datavenda), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.datavenda), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VENDADIARIA (CODIGOEMPRESA, CODIGOLOJA, DATAVENDA, VALORVENDA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.datavenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorvenda), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM VENDADIARIA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'DATAVENDA = ' || coalesce(quote_literal(old.datavenda), 'null') || ', ';
			campos_old  = campos_old || 'VALORVENDA = ' || coalesce(quote_literal(old.valorvenda), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.datavenda), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'vendadiaria', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('vendadiaria', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('vendadiaria', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_vendedor()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_vendedor() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VENDEDOR (CODIGOEMPRESA, CODIGOLOJA, CODIGOVENDEDOR, NOMEVENDEDOR, EMAILVENDEDOR, TIPOVENDEDOR, CATEGORIAVENDEDOR, PERCCOMISSAOCLIENTEVENDEDOR, PERCCOMISSAOCLIENTEEMPRESA, SITUACAOVENDEDOR, CODIGOUSUARIOLOG, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOEMPRESAFUNCIONARIO, CODIGOLOJAFUNCIONARIO, CODIGOFUNCIONARIO) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.nomevendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.emailvendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.categoriavendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.perccomissaoclientevendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.perccomissaoclienteempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.situacaovendedor), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojafuncionario), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofuncionario), 'null') || ')';

			sql_rolback = 'DELETE FROM VENDEDOR WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null') || ', ';
			campos_new   = campos_new || 'NOMEVENDEDOR = ' || coalesce(quote_literal(new.nomevendedor), 'null') || ', ';
			campos_new   = campos_new || 'EMAILVENDEDOR = ' || coalesce(quote_literal(new.emailvendedor), 'null') || ', ';
			campos_new   = campos_new || 'TIPOVENDEDOR = ' || coalesce(quote_literal(new.tipovendedor), 'null') || ', ';
			campos_new   = campos_new || 'CATEGORIAVENDEDOR = ' || coalesce(quote_literal(new.categoriavendedor), 'null') || ', ';
			campos_new   = campos_new || 'PERCCOMISSAOCLIENTEVENDEDOR = ' || coalesce(quote_literal(new.perccomissaoclientevendedor), 'null') || ', ';
			campos_new   = campos_new || 'PERCCOMISSAOCLIENTEEMPRESA = ' || coalesce(quote_literal(new.perccomissaoclienteempresa), 'null') || ', ';
			campos_new   = campos_new || 'SITUACAOVENDEDOR = ' || coalesce(quote_literal(new.situacaovendedor), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojafuncionario), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigovendedor), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VENDEDOR SET ';
			sql_rolback = 'UPDATE VENDEDOR SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigovendedor &lt;&gt; old.codigovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				sql_rolback = sql_rolback || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				campos_new  = campos_new  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
				campos_old  = campos_old  || ' CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');
				first = false;
			end if;

			if (new.nomevendedor &lt;&gt; old.nomevendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' NOMEVENDEDOR = ' || coalesce(quote_literal(new.nomevendedor), 'null');
				sql_rolback = sql_rolback || ' NOMEVENDEDOR = ' || coalesce(quote_literal(old.nomevendedor), 'null');
				campos_new  = campos_new  || ' NOMEVENDEDOR = ' || coalesce(quote_literal(new.nomevendedor), 'null');
				campos_old  = campos_old  || ' NOMEVENDEDOR = ' || coalesce(quote_literal(old.nomevendedor), 'null');
				first = false;
			end if;

			if (new.emailvendedor &lt;&gt; old.emailvendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' EMAILVENDEDOR = ' || coalesce(quote_literal(new.emailvendedor), 'null');
				sql_rolback = sql_rolback || ' EMAILVENDEDOR = ' || coalesce(quote_literal(old.emailvendedor), 'null');
				campos_new  = campos_new  || ' EMAILVENDEDOR = ' || coalesce(quote_literal(new.emailvendedor), 'null');
				campos_old  = campos_old  || ' EMAILVENDEDOR = ' || coalesce(quote_literal(old.emailvendedor), 'null');
				first = false;
			end if;

			if (new.tipovendedor &lt;&gt; old.tipovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOVENDEDOR = ' || coalesce(quote_literal(new.tipovendedor), 'null');
				sql_rolback = sql_rolback || ' TIPOVENDEDOR = ' || coalesce(quote_literal(old.tipovendedor), 'null');
				campos_new  = campos_new  || ' TIPOVENDEDOR = ' || coalesce(quote_literal(new.tipovendedor), 'null');
				campos_old  = campos_old  || ' TIPOVENDEDOR = ' || coalesce(quote_literal(old.tipovendedor), 'null');
				first = false;
			end if;

			if (new.categoriavendedor &lt;&gt; old.categoriavendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CATEGORIAVENDEDOR = ' || coalesce(quote_literal(new.categoriavendedor), 'null');
				sql_rolback = sql_rolback || ' CATEGORIAVENDEDOR = ' || coalesce(quote_literal(old.categoriavendedor), 'null');
				campos_new  = campos_new  || ' CATEGORIAVENDEDOR = ' || coalesce(quote_literal(new.categoriavendedor), 'null');
				campos_old  = campos_old  || ' CATEGORIAVENDEDOR = ' || coalesce(quote_literal(old.categoriavendedor), 'null');
				first = false;
			end if;

			if (new.perccomissaoclientevendedor &lt;&gt; old.perccomissaoclientevendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCCOMISSAOCLIENTEVENDEDOR = ' || coalesce(quote_literal(new.perccomissaoclientevendedor), 'null');
				sql_rolback = sql_rolback || ' PERCCOMISSAOCLIENTEVENDEDOR = ' || coalesce(quote_literal(old.perccomissaoclientevendedor), 'null');
				campos_new  = campos_new  || ' PERCCOMISSAOCLIENTEVENDEDOR = ' || coalesce(quote_literal(new.perccomissaoclientevendedor), 'null');
				campos_old  = campos_old  || ' PERCCOMISSAOCLIENTEVENDEDOR = ' || coalesce(quote_literal(old.perccomissaoclientevendedor), 'null');
				first = false;
			end if;

			if (new.perccomissaoclienteempresa &lt;&gt; old.perccomissaoclienteempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' PERCCOMISSAOCLIENTEEMPRESA = ' || coalesce(quote_literal(new.perccomissaoclienteempresa), 'null');
				sql_rolback = sql_rolback || ' PERCCOMISSAOCLIENTEEMPRESA = ' || coalesce(quote_literal(old.perccomissaoclienteempresa), 'null');
				campos_new  = campos_new  || ' PERCCOMISSAOCLIENTEEMPRESA = ' || coalesce(quote_literal(new.perccomissaoclienteempresa), 'null');
				campos_old  = campos_old  || ' PERCCOMISSAOCLIENTEEMPRESA = ' || coalesce(quote_literal(old.perccomissaoclienteempresa), 'null');
				first = false;
			end if;

			if (new.situacaovendedor &lt;&gt; old.situacaovendedor) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' SITUACAOVENDEDOR = ' || coalesce(quote_literal(new.situacaovendedor), 'null');
				sql_rolback = sql_rolback || ' SITUACAOVENDEDOR = ' || coalesce(quote_literal(old.situacaovendedor), 'null');
				campos_new  = campos_new  || ' SITUACAOVENDEDOR = ' || coalesce(quote_literal(new.situacaovendedor), 'null');
				campos_old  = campos_old  || ' SITUACAOVENDEDOR = ' || coalesce(quote_literal(old.situacaovendedor), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigoempresafuncionario &lt;&gt; old.codigoempresafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(new.codigoempresafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresafuncionario), 'null');
				first = false;
			end if;

			if (new.codigolojafuncionario &lt;&gt; old.codigolojafuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojafuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojafuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(new.codigolojafuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojafuncionario), 'null');
				first = false;
			end if;

			if (new.codigofuncionario &lt;&gt; old.codigofuncionario) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				sql_rolback = sql_rolback || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				campos_new  = campos_new  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(new.codigofuncionario), 'null');
				campos_old  = campos_old  || ' CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(new.codigovendedor), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigovendedor), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VENDEDOR (CODIGOEMPRESA, CODIGOLOJA, CODIGOVENDEDOR, NOMEVENDEDOR, EMAILVENDEDOR, TIPOVENDEDOR, CATEGORIAVENDEDOR, PERCCOMISSAOCLIENTEVENDEDOR, PERCCOMISSAOCLIENTEEMPRESA, SITUACAOVENDEDOR, CODIGOUSUARIOLOG, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOEMPRESAFUNCIONARIO, CODIGOLOJAFUNCIONARIO, CODIGOFUNCIONARIO) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.nomevendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.emailvendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.categoriavendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.perccomissaoclientevendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.perccomissaoclienteempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.situacaovendedor), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojafuncionario), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofuncionario), 'null') || ')';

			sql_replica = 'DELETE FROM VENDEDOR WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVENDEDOR = ' || coalesce(quote_literal(old.codigovendedor), 'null') || ', ';
			campos_old  = campos_old || 'NOMEVENDEDOR = ' || coalesce(quote_literal(old.nomevendedor), 'null') || ', ';
			campos_old  = campos_old || 'EMAILVENDEDOR = ' || coalesce(quote_literal(old.emailvendedor), 'null') || ', ';
			campos_old  = campos_old || 'TIPOVENDEDOR = ' || coalesce(quote_literal(old.tipovendedor), 'null') || ', ';
			campos_old  = campos_old || 'CATEGORIAVENDEDOR = ' || coalesce(quote_literal(old.categoriavendedor), 'null') || ', ';
			campos_old  = campos_old || 'PERCCOMISSAOCLIENTEVENDEDOR = ' || coalesce(quote_literal(old.perccomissaoclientevendedor), 'null') || ', ';
			campos_old  = campos_old || 'PERCCOMISSAOCLIENTEEMPRESA = ' || coalesce(quote_literal(old.perccomissaoclienteempresa), 'null') || ', ';
			campos_old  = campos_old || 'SITUACAOVENDEDOR = ' || coalesce(quote_literal(old.situacaovendedor), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAFUNCIONARIO = ' || coalesce(quote_literal(old.codigoempresafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAFUNCIONARIO = ' || coalesce(quote_literal(old.codigolojafuncionario), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOFUNCIONARIO = ' || coalesce(quote_literal(old.codigofuncionario), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigovendedor), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'vendedor', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('vendedor', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('vendedor', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_verba()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_verba() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VERBA (CODIGOEMPRESA, CODIGOLOJA, CODIGOVERBA, DESCRICAOVERBA, DESCRICAOCURTAVERBA, TIPOVERBA, FLAGSALARIOBASEVERBA, FLAGADIANTAMENTOVERBA, FLAGBASEINSSVERBA, FLAGBASEIRRFVERBA, TIPOCALCULOVERBA, CLASSESISTEMAVERBA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, FLAGFOLHAVERBA) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.descricaocurtaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagsalariobaseverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagadiantamentoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagbaseinssverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagbaseirrfverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.tipocalculoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.classesistemaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.flagfolhaverba), 'null') || ')';

			sql_rolback = 'DELETE FROM VERBA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOVERBA = ' || coalesce(quote_literal(new.descricaoverba), 'null') || ', ';
			campos_new   = campos_new || 'DESCRICAOCURTAVERBA = ' || coalesce(quote_literal(new.descricaocurtaverba), 'null') || ', ';
			campos_new   = campos_new || 'TIPOVERBA = ' || coalesce(quote_literal(new.tipoverba), 'null') || ', ';
			campos_new   = campos_new || 'FLAGSALARIOBASEVERBA = ' || coalesce(quote_literal(new.flagsalariobaseverba), 'null') || ', ';
			campos_new   = campos_new || 'FLAGADIANTAMENTOVERBA = ' || coalesce(quote_literal(new.flagadiantamentoverba), 'null') || ', ';
			campos_new   = campos_new || 'FLAGBASEINSSVERBA = ' || coalesce(quote_literal(new.flagbaseinssverba), 'null') || ', ';
			campos_new   = campos_new || 'FLAGBASEIRRFVERBA = ' || coalesce(quote_literal(new.flagbaseirrfverba), 'null') || ', ';
			campos_new   = campos_new || 'TIPOCALCULOVERBA = ' || coalesce(quote_literal(new.tipocalculoverba), 'null') || ', ';
			campos_new   = campos_new || 'CLASSESISTEMAVERBA = ' || coalesce(quote_literal(new.classesistemaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || ', ';
			campos_new   = campos_new || 'FLAGFOLHAVERBA = ' || coalesce(quote_literal(new.flagfolhaverba), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VERBA SET ';
			sql_rolback = 'UPDATE VERBA SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoverba &lt;&gt; old.codigoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				campos_new  = campos_new  || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				campos_old  = campos_old  || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				first = false;
			end if;

			if (new.descricaoverba &lt;&gt; old.descricaoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOVERBA = ' || coalesce(quote_literal(new.descricaoverba), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOVERBA = ' || coalesce(quote_literal(old.descricaoverba), 'null');
				campos_new  = campos_new  || ' DESCRICAOVERBA = ' || coalesce(quote_literal(new.descricaoverba), 'null');
				campos_old  = campos_old  || ' DESCRICAOVERBA = ' || coalesce(quote_literal(old.descricaoverba), 'null');
				first = false;
			end if;

			if (new.descricaocurtaverba &lt;&gt; old.descricaocurtaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' DESCRICAOCURTAVERBA = ' || coalesce(quote_literal(new.descricaocurtaverba), 'null');
				sql_rolback = sql_rolback || ' DESCRICAOCURTAVERBA = ' || coalesce(quote_literal(old.descricaocurtaverba), 'null');
				campos_new  = campos_new  || ' DESCRICAOCURTAVERBA = ' || coalesce(quote_literal(new.descricaocurtaverba), 'null');
				campos_old  = campos_old  || ' DESCRICAOCURTAVERBA = ' || coalesce(quote_literal(old.descricaocurtaverba), 'null');
				first = false;
			end if;

			if (new.tipoverba &lt;&gt; old.tipoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOVERBA = ' || coalesce(quote_literal(new.tipoverba), 'null');
				sql_rolback = sql_rolback || ' TIPOVERBA = ' || coalesce(quote_literal(old.tipoverba), 'null');
				campos_new  = campos_new  || ' TIPOVERBA = ' || coalesce(quote_literal(new.tipoverba), 'null');
				campos_old  = campos_old  || ' TIPOVERBA = ' || coalesce(quote_literal(old.tipoverba), 'null');
				first = false;
			end if;

			if (new.flagsalariobaseverba &lt;&gt; old.flagsalariobaseverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGSALARIOBASEVERBA = ' || coalesce(quote_literal(new.flagsalariobaseverba), 'null');
				sql_rolback = sql_rolback || ' FLAGSALARIOBASEVERBA = ' || coalesce(quote_literal(old.flagsalariobaseverba), 'null');
				campos_new  = campos_new  || ' FLAGSALARIOBASEVERBA = ' || coalesce(quote_literal(new.flagsalariobaseverba), 'null');
				campos_old  = campos_old  || ' FLAGSALARIOBASEVERBA = ' || coalesce(quote_literal(old.flagsalariobaseverba), 'null');
				first = false;
			end if;

			if (new.flagadiantamentoverba &lt;&gt; old.flagadiantamentoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGADIANTAMENTOVERBA = ' || coalesce(quote_literal(new.flagadiantamentoverba), 'null');
				sql_rolback = sql_rolback || ' FLAGADIANTAMENTOVERBA = ' || coalesce(quote_literal(old.flagadiantamentoverba), 'null');
				campos_new  = campos_new  || ' FLAGADIANTAMENTOVERBA = ' || coalesce(quote_literal(new.flagadiantamentoverba), 'null');
				campos_old  = campos_old  || ' FLAGADIANTAMENTOVERBA = ' || coalesce(quote_literal(old.flagadiantamentoverba), 'null');
				first = false;
			end if;

			if (new.flagbaseinssverba &lt;&gt; old.flagbaseinssverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGBASEINSSVERBA = ' || coalesce(quote_literal(new.flagbaseinssverba), 'null');
				sql_rolback = sql_rolback || ' FLAGBASEINSSVERBA = ' || coalesce(quote_literal(old.flagbaseinssverba), 'null');
				campos_new  = campos_new  || ' FLAGBASEINSSVERBA = ' || coalesce(quote_literal(new.flagbaseinssverba), 'null');
				campos_old  = campos_old  || ' FLAGBASEINSSVERBA = ' || coalesce(quote_literal(old.flagbaseinssverba), 'null');
				first = false;
			end if;

			if (new.flagbaseirrfverba &lt;&gt; old.flagbaseirrfverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGBASEIRRFVERBA = ' || coalesce(quote_literal(new.flagbaseirrfverba), 'null');
				sql_rolback = sql_rolback || ' FLAGBASEIRRFVERBA = ' || coalesce(quote_literal(old.flagbaseirrfverba), 'null');
				campos_new  = campos_new  || ' FLAGBASEIRRFVERBA = ' || coalesce(quote_literal(new.flagbaseirrfverba), 'null');
				campos_old  = campos_old  || ' FLAGBASEIRRFVERBA = ' || coalesce(quote_literal(old.flagbaseirrfverba), 'null');
				first = false;
			end if;

			if (new.tipocalculoverba &lt;&gt; old.tipocalculoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' TIPOCALCULOVERBA = ' || coalesce(quote_literal(new.tipocalculoverba), 'null');
				sql_rolback = sql_rolback || ' TIPOCALCULOVERBA = ' || coalesce(quote_literal(old.tipocalculoverba), 'null');
				campos_new  = campos_new  || ' TIPOCALCULOVERBA = ' || coalesce(quote_literal(new.tipocalculoverba), 'null');
				campos_old  = campos_old  || ' TIPOCALCULOVERBA = ' || coalesce(quote_literal(old.tipocalculoverba), 'null');
				first = false;
			end if;

			if (new.classesistemaverba &lt;&gt; old.classesistemaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CLASSESISTEMAVERBA = ' || coalesce(quote_literal(new.classesistemaverba), 'null');
				sql_rolback = sql_rolback || ' CLASSESISTEMAVERBA = ' || coalesce(quote_literal(old.classesistemaverba), 'null');
				campos_new  = campos_new  || ' CLASSESISTEMAVERBA = ' || coalesce(quote_literal(new.classesistemaverba), 'null');
				campos_old  = campos_old  || ' CLASSESISTEMAVERBA = ' || coalesce(quote_literal(old.classesistemaverba), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			if (new.flagfolhaverba &lt;&gt; old.flagfolhaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' FLAGFOLHAVERBA = ' || coalesce(quote_literal(new.flagfolhaverba), 'null');
				sql_rolback = sql_rolback || ' FLAGFOLHAVERBA = ' || coalesce(quote_literal(old.flagfolhaverba), 'null');
				campos_new  = campos_new  || ' FLAGFOLHAVERBA = ' || coalesce(quote_literal(new.flagfolhaverba), 'null');
				campos_old  = campos_old  || ' FLAGFOLHAVERBA = ' || coalesce(quote_literal(old.flagfolhaverba), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VERBA (CODIGOEMPRESA, CODIGOLOJA, CODIGOVERBA, DESCRICAOVERBA, DESCRICAOCURTAVERBA, TIPOVERBA, FLAGSALARIOBASEVERBA, FLAGADIANTAMENTOVERBA, FLAGBASEINSSVERBA, FLAGBASEIRRFVERBA, TIPOCALCULOVERBA, CLASSESISTEMAVERBA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG, FLAGFOLHAVERBA) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.descricaocurtaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagsalariobaseverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagadiantamentoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagbaseinssverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagbaseirrfverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.tipocalculoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.classesistemaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.flagfolhaverba), 'null') || ')';

			sql_replica = 'DELETE FROM VERBA WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOVERBA = ' || coalesce(quote_literal(old.descricaoverba), 'null') || ', ';
			campos_old  = campos_old || 'DESCRICAOCURTAVERBA = ' || coalesce(quote_literal(old.descricaocurtaverba), 'null') || ', ';
			campos_old  = campos_old || 'TIPOVERBA = ' || coalesce(quote_literal(old.tipoverba), 'null') || ', ';
			campos_old  = campos_old || 'FLAGSALARIOBASEVERBA = ' || coalesce(quote_literal(old.flagsalariobaseverba), 'null') || ', ';
			campos_old  = campos_old || 'FLAGADIANTAMENTOVERBA = ' || coalesce(quote_literal(old.flagadiantamentoverba), 'null') || ', ';
			campos_old  = campos_old || 'FLAGBASEINSSVERBA = ' || coalesce(quote_literal(old.flagbaseinssverba), 'null') || ', ';
			campos_old  = campos_old || 'FLAGBASEIRRFVERBA = ' || coalesce(quote_literal(old.flagbaseirrfverba), 'null') || ', ';
			campos_old  = campos_old || 'TIPOCALCULOVERBA = ' || coalesce(quote_literal(old.tipocalculoverba), 'null') || ', ';
			campos_old  = campos_old || 'CLASSESISTEMAVERBA = ' || coalesce(quote_literal(old.classesistemaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || ', ';
			campos_old  = campos_old || 'FLAGFOLHAVERBA = ' || coalesce(quote_literal(old.flagfolhaverba), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoverba), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'verba', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('verba', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('verba', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_verbacontratotrabalho()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_verbacontratotrabalho() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VERBACONTRATOTRABALHO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTRATOTRABALHO, CODIGOEMPRESAVERBA, CODIGOLOJAVERBA, CODIGOVERBA, VALORVERBA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM VERBACONTRATOTRABALHO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			campos_new   = campos_new || 'VALORVERBA = ' || coalesce(quote_literal(new.valorverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VERBACONTRATOTRABALHO SET ';
			sql_rolback = 'UPDATE VERBACONTRATOTRABALHO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresaverba &lt;&gt; old.codigoempresaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null');
				first = false;
			end if;

			if (new.codigolojaverba &lt;&gt; old.codigolojaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null');
				first = false;
			end if;

			if (new.codigoverba &lt;&gt; old.codigoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				campos_new  = campos_new  || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				campos_old  = campos_old  || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				first = false;
			end if;

			if (new.valorverba &lt;&gt; old.valorverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORVERBA = ' || coalesce(quote_literal(new.valorverba), 'null');
				sql_rolback = sql_rolback || ' VALORVERBA = ' || coalesce(quote_literal(old.valorverba), 'null');
				campos_new  = campos_new  || ' VALORVERBA = ' || coalesce(quote_literal(new.valorverba), 'null');
				campos_old  = campos_old  || ' VALORVERBA = ' || coalesce(quote_literal(old.valorverba), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');

			sql_chave = coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VERBACONTRATOTRABALHO (CODIGOEMPRESA, CODIGOLOJA, CODIGOCONTRATOTRABALHO, CODIGOEMPRESAVERBA, CODIGOLOJAVERBA, CODIGOVERBA, VALORVERBA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM VERBACONTRATOTRABALHO WHERE CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			campos_old  = campos_old || 'VALORVERBA = ' || coalesce(quote_literal(old.valorverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaverba), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaverba), 'null')  || ', ' || coalesce(quote_literal(old.codigoverba), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'verbacontratotrabalho', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('verbacontratotrabalho', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('verbacontratotrabalho', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.fn_replica_verbafolhapagamento()">
      <src>CREATE OR REPLACE FUNCTION personalerp.fn_replica_verbafolhapagamento() 
  RETURNS trigger AS 
$$
declare
		first boolean;
		sql_replica text;
		sql_rolback text;
		campos_new  text;
		campos_old  text;
		sql_chave   text;
begin
  	if (personalerp.fn_hash_database() &lt;&gt; '9B0E901A47AA7DE087C76C3F7FD08BD9') then
  		RAISE EXCEPTION 'O hash code do banco de dados está diferente da trigger! Recompile todas as triggers.';
  	end if;

		if (CURRENT_USER = 'replicacao') then
			if (tg_op = 'DELETE') then
              	return old;
          	else
              	return new;
          	end if;
        end if;
		if (tg_op = 'INSERT') then
			sql_replica = 'INSERT INTO VERBAFOLHAPAGAMENTO (CODIGOFOLHAPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO, CODIGOCONTRATOTRABALHO, CODIGOEMPRESAVERBA, CODIGOLOJAVERBA, CODIGOVERBA, VALORVERBA, REFERENCIAVERBA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.valorverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.referenciaverba), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			sql_replica = sql_replica || coalesce(quote_literal(new.codigousuariolog), 'null') || ')';

			sql_rolback = 'DELETE FROM VERBAFOLHAPAGAMENTO WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			campos_new = '';
			campos_new   = campos_new || 'CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null') || ', ';
			campos_new   = campos_new || 'VALORVERBA = ' || coalesce(quote_literal(new.valorverba), 'null') || ', ';
			campos_new   = campos_new || 'REFERENCIAVERBA = ' || coalesce(quote_literal(new.referenciaverba), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null') || ', ';
			campos_new   = campos_new || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(new.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;
		elsif (tg_op = 'UPDATE') then
			sql_replica = 'UPDATE VERBAFOLHAPAGAMENTO SET ';
			sql_rolback = 'UPDATE VERBAFOLHAPAGAMENTO SET ';
			campos_new  = '';
			campos_old  = '';
			first       = true;

			if (new.codigofolhapagamento &lt;&gt; old.codigofolhapagamento) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null');
				sql_rolback = sql_rolback || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null');
				campos_new  = campos_new  || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null');
				campos_old  = campos_old  || ' CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null');
				first = false;
			end if;

			if (new.codigoempresa &lt;&gt; old.codigoempresa) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null');
				first = false;
			end if;

			if (new.codigoloja &lt;&gt; old.codigoloja) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				campos_new  = campos_new  || ' CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null');
				campos_old  = campos_old  || ' CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null');
				first = false;
			end if;

			if (new.codigoempresacontratotrabalho &lt;&gt; old.codigoempresacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigolojacontratotrabalho &lt;&gt; old.codigolojacontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigocontratotrabalho &lt;&gt; old.codigocontratotrabalho) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				sql_rolback = sql_rolback || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				campos_new  = campos_new  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null');
				campos_old  = campos_old  || ' CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null');
				first = false;
			end if;

			if (new.codigoempresaverba &lt;&gt; old.codigoempresaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null');
				first = false;
			end if;

			if (new.codigolojaverba &lt;&gt; old.codigolojaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null');
				first = false;
			end if;

			if (new.codigoverba &lt;&gt; old.codigoverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				sql_rolback = sql_rolback || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				campos_new  = campos_new  || ' CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
				campos_old  = campos_old  || ' CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');
				first = false;
			end if;

			if (new.valorverba &lt;&gt; old.valorverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' VALORVERBA = ' || coalesce(quote_literal(new.valorverba), 'null');
				sql_rolback = sql_rolback || ' VALORVERBA = ' || coalesce(quote_literal(old.valorverba), 'null');
				campos_new  = campos_new  || ' VALORVERBA = ' || coalesce(quote_literal(new.valorverba), 'null');
				campos_old  = campos_old  || ' VALORVERBA = ' || coalesce(quote_literal(old.valorverba), 'null');
				first = false;
			end if;

			if (new.referenciaverba &lt;&gt; old.referenciaverba) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' REFERENCIAVERBA = ' || coalesce(quote_literal(new.referenciaverba), 'null');
				sql_rolback = sql_rolback || ' REFERENCIAVERBA = ' || coalesce(quote_literal(old.referenciaverba), 'null');
				campos_new  = campos_new  || ' REFERENCIAVERBA = ' || coalesce(quote_literal(new.referenciaverba), 'null');
				campos_old  = campos_old  || ' REFERENCIAVERBA = ' || coalesce(quote_literal(old.referenciaverba), 'null');
				first = false;
			end if;

			if (new.codigoempresausuariolog &lt;&gt; old.codigoempresausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(new.codigoempresausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null');
				first = false;
			end if;

			if (new.codigolojausuariolog &lt;&gt; old.codigolojausuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(new.codigolojausuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null');
				first = false;
			end if;

			if (new.codigousuariolog &lt;&gt; old.codigousuariolog) then
				if not first then
					sql_replica = sql_replica || ', ';
					sql_rolback = sql_rolback || ', ';
					campos_new  = campos_new  || ', ';
					campos_old  = campos_old  || ', ';
				end if;
				sql_replica = sql_replica || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				sql_rolback = sql_rolback || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				campos_new  = campos_new  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(new.codigousuariolog), 'null');
				campos_old  = campos_old  || ' CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null');
				first = false;
			end if;

			sql_replica = sql_replica  || ' WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');
			sql_rolback = sql_rolback  || ' WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(new.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(new.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(new.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(new.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(new.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(new.codigoverba), 'null');

			sql_chave = coalesce(quote_literal(new.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(new.codigoloja), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigolojacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(new.codigoempresaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigolojaverba), 'null')  || ', ' || coalesce(quote_literal(new.codigoverba), 'null') ;

			if first then
				sql_replica = null;
				sql_rolback = null;
			end if;
		elsif (tg_op = 'DELETE') then
			sql_rolback = 'INSERT INTO VERBAFOLHAPAGAMENTO (CODIGOFOLHAPAGAMENTO, CODIGOEMPRESA, CODIGOLOJA, CODIGOEMPRESACONTRATOTRABALHO, CODIGOLOJACONTRATOTRABALHO, CODIGOCONTRATOTRABALHO, CODIGOEMPRESAVERBA, CODIGOLOJAVERBA, CODIGOVERBA, VALORVERBA, REFERENCIAVERBA, CODIGOEMPRESAUSUARIOLOG, CODIGOLOJAUSUARIOLOG, CODIGOUSUARIOLOG) VALUES (';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.valorverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.referenciaverba), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			sql_rolback = sql_rolback || coalesce(quote_literal(old.codigousuariolog), 'null') || ')';

			sql_replica = 'DELETE FROM VERBAFOLHAPAGAMENTO WHERE CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ' AND CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ' AND CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ' AND CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ' AND CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ' AND CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ' AND CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null') || ' AND CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null') || ' AND CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null');

			campos_old  = '';
			campos_old  = campos_old || 'CODIGOFOLHAPAGAMENTO = ' || coalesce(quote_literal(old.codigofolhapagamento), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESA = ' || coalesce(quote_literal(old.codigoempresa), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJA = ' || coalesce(quote_literal(old.codigoloja), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJACONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOCONTRATOTRABALHO = ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAVERBA = ' || coalesce(quote_literal(old.codigoempresaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAVERBA = ' || coalesce(quote_literal(old.codigolojaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOVERBA = ' || coalesce(quote_literal(old.codigoverba), 'null') || ', ';
			campos_old  = campos_old || 'VALORVERBA = ' || coalesce(quote_literal(old.valorverba), 'null') || ', ';
			campos_old  = campos_old || 'REFERENCIAVERBA = ' || coalesce(quote_literal(old.referenciaverba), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOEMPRESAUSUARIOLOG = ' || coalesce(quote_literal(old.codigoempresausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOLOJAUSUARIOLOG = ' || coalesce(quote_literal(old.codigolojausuariolog), 'null') || ', ';
			campos_old  = campos_old || 'CODIGOUSUARIOLOG = ' || coalesce(quote_literal(old.codigousuariolog), 'null') || '';

			sql_chave = coalesce(quote_literal(old.codigofolhapagamento), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresa), 'null')  || ', ' || coalesce(quote_literal(old.codigoloja), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.codigolojacontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.codigocontratotrabalho), 'null')  || ', ' || coalesce(quote_literal(old.codigoempresaverba), 'null')  || ', ' || coalesce(quote_literal(old.codigolojaverba), 'null')  || ', ' || coalesce(quote_literal(old.codigoverba), 'null') ;
		end if;

		if not sql_replica is null then
			insert into personalerp.replicacaocomandos (operacaoreplicacao, tabelareplicacao, dadosreplicacao, dadosrollback) values (tg_op, 'verbafolhapagamento', sql_replica, sql_rolback);
			if (tg_op = 'DELETE') then
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('verbafolhapagamento', sql_chave, tg_op, old.codigoempresausuariolog, old.codigolojausuariolog, old.codigousuariolog, campos_old, campos_new);
			else
				insert into personalerp.log (tabela, chave, operacao, codigoempresausuario, codigolojausuario, codigousuario, camposoriginal, camposnovos) values ('verbafolhapagamento', sql_chave, tg_op, new.codigoempresausuariolog, new.codigolojausuariolog, new.codigousuariolog, campos_old, campos_new);
			end if;
		end if;

		if (tg_op = 'DELETE') then
			return old;
		else
			return new;
		end if;
end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <Proc nm="personalerp.unknown2text(unknown)">
      <src>CREATE OR REPLACE FUNCTION personalerp.unknown2text(unknown) 
  RETURNS text AS 
$$ begin return text($1::char); end $$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</src>
    </Proc>
    <View nm="graficoprodutidadeview">
      <Sql>SELECT
    d.dataromaneio AS datamovimentacao,
    sum(a.alturaproduto * a.larguraproduto * a.comprimentoproduto * b.quantidadefisicomovimentacaoestoque / 10000::numeric) AS volumem3movimentacao
FROM personalerp.produto a
    JOIN personalerp.movimentacaoestoque b ON a.codigoempresa = b.codigoempresa
        AND a.codigoloja = b.codigoloja
        AND a.codigoproduto = b.codigoproduto
    JOIN personalerp.itemromaneiomadeiraserrada c ON c.codigomovimentacaoestoque = b.codigomovimentacaoestoque
        AND c.codigoempresaestoque = b.codigoempresaestoque
        AND c.codigolojaestoque = b.codigolojaestoque
        AND c.codigolojaproduto = b.codigoloja
        AND c.codigoempresaproduto = b.codigoempresa
        AND c.codigoproduto = b.codigoproduto
    JOIN personalerp.romaneiomadeiraserrada d ON d.codigoempresa = c.codigoempresa
        AND d.codigoloja = c.codigoloja
        AND d.codigoromaneio = c.codigoromaneio
WHERE 1 = 1
GROUP BY d.dataromaneio
ORDER BY d.dataromaneio</Sql>
    </View>
    <View nm="graficoprodutividadeview">
      <Sql>SELECT
    d.dataromaneio AS datamovimentacao,
    sum(a.alturaproduto * a.larguraproduto * a.comprimentoproduto * b.quantidadefisicomovimentacaoestoque / 10000::numeric) AS volumem3movimentacao
FROM personalerp.produto a
    JOIN personalerp.movimentacaoestoque b ON a.codigoempresa = b.codigoempresa
        AND a.codigoloja = b.codigoloja
        AND a.codigoproduto = b.codigoproduto
    JOIN personalerp.itemromaneiomadeiraserrada c ON c.codigomovimentacaoestoque = b.codigomovimentacaoestoque
        AND c.codigoempresaestoque = b.codigoempresaestoque
        AND c.codigolojaestoque = b.codigolojaestoque
        AND c.codigolojaproduto = b.codigoloja
        AND c.codigoempresaproduto = b.codigoempresa
        AND c.codigoproduto = b.codigoproduto
    JOIN personalerp.romaneiomadeiraserrada d ON d.codigoempresa = c.codigoempresa
        AND d.codigoloja = c.codigoloja
        AND d.codigoromaneio = c.codigoromaneio
WHERE 1 = 1
GROUP BY d.dataromaneio
ORDER BY d.dataromaneio</Sql>
    </View>
    <View nm="previsaofluxocaixa">
      <Sql>SELECT
    contapagar.codigoempresa,
    contapagar.codigoloja,
    'D'::character(1) AS operacaofluxocaixa,
    contapagar.codigocentrocusto,
    contapagar.situacaocontapagar AS situacaofluxocaixa,
    contapagar.datavencimentocontapagar AS datafluxocaixa,
    contapagar.valorcontapagar AS valorfluxocaixa
FROM personalerp.contapagar UNION ALL SELECT contareceber.codigoempresa,
    contareceber.codigoloja,
    'C'::character(1) AS operacaofluxocaixa,
    contareceber.codigocentrocusto,
    contareceber.situacaocontareceber AS situacaofluxocaixa,
    contareceber.datavencimentocontareceber AS datafluxocaixa,
    contareceber.valorcontareceber AS valorfluxocaixa
FROM personalerp.contareceber
ORDER BY 6</Sql>
    </View>
    <View nm="relatorioprodutividademadeiraserrada">
      <Sql>SELECT
    b.codigogerente,
    b.codigoempresagerente,
    b.codigolojagerente,
    b.tiporomaneio,
    b.statusromaneio,
    date_part('month'::text,
    b.dataromaneio)::integer AS mesdataromaneio,
    date_part('year'::text,
    b.dataromaneio)::integer AS anodataromaneio,
    f.nomefuncionario,
    ct.codigoempresa AS codigoempresacontratotrabalho,
    ct.codigoloja AS codigolojacontratotrabalho,
    ct.codigocontratotrabalho,
    sum(p.alturaproduto * p.larguraproduto * p.comprimentoproduto * a.quantidadeitemromaneio::numeric / 10000::numeric) AS volumetotalm3
FROM personalerp.itemromaneiomadeiraserrada a
    JOIN personalerp.romaneiomadeiraserrada b ON a.codigoromaneio = b.codigoromaneio
        AND a.codigoempresa = b.codigoempresa
        AND a.codigoloja = b.codigoloja
    JOIN personalerp.produto p ON p.codigoproduto = a.codigoproduto
        AND p.codigoempresa = a.codigoempresaproduto
        AND p.codigoloja = a.codigolojaproduto
    JOIN personalerp.movimentacaoestoque d ON d.codigoempresa = a.codigoempresaproduto
        AND d.codigoloja = a.codigolojaproduto
        AND d.codigoproduto = a.codigoproduto
        AND d.codigoempresaestoque = a.codigoempresaestoque
        AND d.codigolojaestoque = a.codigolojaestoque
        AND d.codigomovimentacaoestoque = a.codigomovimentacaoestoque LEFT
    JOIN personalerp.gerentemadeireira g ON g.codigogerente = b.codigogerente
        AND g.codigoempresa = b.codigoempresagerente
        AND g.codigoloja = b.codigolojagerente LEFT
    JOIN personalerp.contratotrabalho ct ON ct.codigocontratotrabalho = g.codigocontratotrabalho
        AND ct.codigoempresa = g.codigoempresacontratotrabalho
        AND ct.codigoloja = g.codigolojacontratotrabalho LEFT
    JOIN personalerp.funcionario f ON f.codigofuncionario = ct.codigofuncionario
        AND f.codigoempresa = ct.codigoempresafuncionario
        AND f.codigoloja = ct.codigolojafuncionario
WHERE 1 = 1
GROUP BY b.codigogerente,
    b.codigoempresagerente,
    b.codigolojagerente,
    b.tiporomaneio,
    b.statusromaneio,
    date_part('month'::text,
    b.dataromaneio)::integer,
    date_part('year'::text,
    b.dataromaneio)::integer,
    f.nomefuncionario,
    ct.codigoempresa,
    ct.codigoloja,
    ct.codigocontratotrabalho</Sql>
    </View>
    <View nm="vendasdia">
      <Sql>WITH vendas AS ( SELECT
    pedido.codigoempresa,
    pedido.codigoloja,
    pedido.valortotalpedido AS valor,
    pedido.datapedido AS data
FROM personalerp.pedido UNION ALL SELECT a.codigoempresa,
    a.codigoloja,
    (( SELECT sum(e.valortrocasaida) AS sum
FROM personalerp.trocamercadoriasaida e
WHERE e.codigoempresa = a.codigoempresa
        AND e.codigoloja = a.codigoloja
        AND e.codigotroca = a.codigotroca)) - (( SELECT sum(e.valortrocaentrada) AS sum
FROM personalerp.trocamercadoriaentrada e
WHERE e.codigoempresa = a.codigoempresa
        AND e.codigoloja = a.codigoloja
        AND e.codigotroca = a.codigotroca)) AS valor,
    date_trunc('day'::text,
    a.datahoratroca)::date AS data
FROM personalerp.trocamercadoria a ) SELECT vendas.codigoempresa,
    vendas.codigoloja,
    vendas.data,
    sum(vendas.valor) AS valortotal
FROM vendas
GROUP BY vendas.codigoempresa,
    vendas.codigoloja,
    vendas.data</Sql>
    </View>
    <View nm="vendasgrupo">
      <Sql>WITH vendas AS ( ( SELECT
    a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datapedido AS datavenda,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    g.codigogrupo,
    g.nomegrupo,
    sum( CASE WHEN i.flagcomissaovendedorpedido = 'S'::bpchar THEN i.quantidadeitempedido ELSE 0::numeric END)::numeric(4,
    0) AS totalpecas,
    sum(i.valortotalitempedido) AS valortotal
FROM personalerp.pedido a
    JOIN personalerp.itempedido i ON a.codigoempresa = i.codigoempresa
        AND a.codigoloja = i.codigoloja
        AND a.codigopedido = i.codigopedido
        AND a.codigopdv = i.codigopdv LEFT
    JOIN personalerp.vendedor v ON v.codigoempresa = a.codigoempresavendedor
        AND v.codigoloja = a.codigolojavendedor
        AND v.codigovendedor = a.codigovendedor
    JOIN personalerp.produto p ON p.codigoempresa = i.codigoempresaproduto
        AND p.codigoloja = i.codigolojaproduto
        AND p.codigoproduto = i.codigoproduto
    JOIN personalerp.grupo g ON g.codigogrupo = p.codigogrupo
    JOIN personalerp.empresa e ON e.codigoempresa = a.codigoempresa
    JOIN personalerp.loja l ON l.codigoempresa = a.codigoempresa
        AND l.codigoloja = a.codigoloja
WHERE 1 = 1
        AND a.statuspedido = 'P'::bpchar
GROUP BY a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datapedido,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    g.codigogrupo,
    g.nomegrupo UNION ALL ( WITH trocas AS ( SELECT a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    date_trunc('day'::text,
    a.datahoratroca)::date AS datatroca,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    g.codigogrupo,
    g.nomegrupo,
    sum( CASE WHEN s1.flagcomissaovendedortrocasaida = 'S'::bpchar THEN s1.quantidadetrocasaida ELSE 0.00 END)::numeric(4,
    0) AS totalpecas,
    0 AS valortotal
FROM personalerp.trocamercadoria a
    JOIN personalerp.trocamercadoriasaida s1 ON s1.codigoempresa = a.codigoempresa
        AND s1.codigoloja = a.codigoloja
        AND s1.codigotroca = a.codigotroca
    JOIN personalerp.produto p ON p.codigoempresa = s1.codigoempresaproduto
        AND p.codigoloja = s1.codigolojaproduto
        AND p.codigoproduto = s1.codigoproduto
    JOIN personalerp.grupo g ON g.codigogrupo = p.codigogrupo LEFT
    JOIN personalerp.vendedor v ON v.codigoempresa = a.codigoempresavendedor
        AND v.codigoloja = a.codigolojavendedor
        AND v.codigovendedor = a.codigovendedor
    JOIN personalerp.empresa e ON e.codigoempresa = a.codigoempresa
    JOIN personalerp.loja l ON l.codigoempresa = a.codigoempresa
        AND l.codigoloja = a.codigoloja
WHERE 1 = 1
        AND a.statustroca = 'P'::bpchar
GROUP BY a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datahoratroca,
    a.codigotroca,
    g.codigogrupo,
    g.nomegrupo,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor ) SELECT trocas.codigoempresa,
    trocas.codigoloja,
    trocas.nomeloja,
    trocas.razaosocialempresa,
    trocas.datatroca,
    trocas.codigoempresavendedor,
    trocas.codigolojavendedor,
    trocas.codigovendedor,
    trocas.nomevendedor,
    trocas.codigogrupo,
    trocas.nomegrupo,
    trocas.totalpecas,
    trocas.valortotal
FROM trocas)) UNION ALL ( WITH trocas2 AS ( SELECT a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    date_trunc('day'::text,
    a.datahoratroca)::date AS datatroca,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    0 AS codigogrupo,
    'X'::character varying(50) AS nomegrupo,
    0 AS totalpecas,
    (( SELECT sum(sai1.valortrocasaida) AS sum
FROM personalerp.trocamercadoriasaida sai1
WHERE sai1.codigoempresa = a.codigoempresa
        AND sai1.codigoloja = a.codigoloja
        AND sai1.codigotroca = a.codigotroca)) - (( SELECT sum(ent1.valortrocaentrada) AS sum
FROM personalerp.trocamercadoriaentrada ent1
WHERE ent1.codigoempresa = a.codigoempresa
        AND ent1.codigoloja = a.codigoloja
        AND ent1.codigotroca = a.codigotroca)) AS valortotal
FROM personalerp.trocamercadoria a LEFT
    JOIN personalerp.vendedor v ON v.codigoempresa = a.codigoempresavendedor
        AND v.codigoloja = a.codigolojavendedor
        AND v.codigovendedor = a.codigovendedor
    JOIN personalerp.empresa e ON e.codigoempresa = a.codigoempresa
    JOIN personalerp.loja l ON l.codigoempresa = a.codigoempresa
        AND l.codigoloja = a.codigoloja
WHERE 1 = 1
        AND a.statustroca = 'P'::bpchar
GROUP BY a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datahoratroca,
    a.codigotroca,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor ) SELECT trocas2.codigoempresa,
    trocas2.codigoloja,
    trocas2.nomeloja,
    trocas2.razaosocialempresa,
    trocas2.datatroca,
    trocas2.codigoempresavendedor,
    trocas2.codigolojavendedor,
    trocas2.codigovendedor,
    trocas2.nomevendedor,
    trocas2.codigogrupo,
    trocas2.nomegrupo,
    trocas2.totalpecas,
    trocas2.valortotal
FROM trocas2) ) SELECT a.codigoempresa,
    a.codigoloja,
    a.nomeloja,
    a.razaosocialempresa,
    a.datavenda,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    a.nomevendedor,
    a.codigogrupo,
    a.nomegrupo,
    sum(COALESCE(a.totalpecas,
    0::numeric)) AS totalpecas,
    sum(COALESCE(a.valortotal,
    0::numeric)) AS valortotal
FROM vendas a
GROUP BY a.codigoempresa,
    a.codigoloja,
    a.nomeloja,
    a.razaosocialempresa,
    a.datavenda,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    a.nomevendedor,
    a.codigogrupo,
    a.nomegrupo
ORDER BY a.nomevendedor,
    a.nomegrupo</Sql>
    </View>
    <View nm="vendaslojagrupo">
      <Sql>SELECT
    a.codigoempresa,
    a.codigoloja,
    g.codigogrupo,
    g.nomegrupo,
    COALESCE(sum(a.valortotalpedido),
    0::numeric) AS valortotalpedido,
    COALESCE(sum(b.quantidadeitempedido),
    0::numeric) AS totalquantidadepedido
FROM personalerp.pedido a
    JOIN personalerp.itempedido b ON a.codigoempresa = b.codigoempresa
        AND a.codigoloja = b.codigoloja
        AND a.codigopedido = b.codigopedido
        AND a.codigopdv = b.codigopdv
    JOIN personalerp.produto p ON p.codigoempresa = b.codigoempresaproduto
        AND p.codigoloja = b.codigolojaproduto
        AND p.codigoproduto = b.codigoproduto FULL
    JOIN personalerp.grupo g ON g.codigogrupo = p.codigogrupo
GROUP BY a.codigoempresa,
    a.codigoloja,
    g.codigogrupo,
    g.nomegrupo
ORDER BY a.codigoempresa,
    a.codigoloja,
    g.codigogrupo</Sql>
    </View>
    <View nm="vendasproduto">
      <Sql>WITH vendas AS ( ( SELECT
    a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datapedido AS datavenda,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    p.codigoempresa AS codigoempresaproduto,
    p.codigoloja AS codigolojaproduto,
    p.codigoproduto,
    p.descricaoproduto,
    sum( CASE WHEN i.flagcomissaovendedorpedido = 'S'::bpchar THEN i.quantidadeitempedido ELSE 0::numeric END)::numeric(4,
    0) AS totalpecas,
    sum(i.valortotalitempedido) AS valortotal
FROM personalerp.pedido a
    JOIN personalerp.itempedido i ON a.codigoempresa = i.codigoempresa
        AND a.codigoloja = i.codigoloja
        AND a.codigopedido = i.codigopedido
        AND a.codigopdv = i.codigopdv LEFT
    JOIN personalerp.vendedor v ON v.codigoempresa = a.codigoempresavendedor
        AND v.codigoloja = a.codigolojavendedor
        AND v.codigovendedor = a.codigovendedor
    JOIN personalerp.produto p ON p.codigoempresa = i.codigoempresaproduto
        AND p.codigoloja = i.codigolojaproduto
        AND p.codigoproduto = i.codigoproduto
    JOIN personalerp.empresa e ON e.codigoempresa = a.codigoempresa
    JOIN personalerp.loja l ON l.codigoempresa = a.codigoempresa
        AND l.codigoloja = a.codigoloja
WHERE 1 = 1
        AND a.statuspedido = 'P'::bpchar
GROUP BY a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datapedido,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    p.descricaoproduto,
    p.codigoempresa,
    p.codigoloja,
    p.codigoproduto UNION ALL ( WITH trocas AS ( SELECT a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    date_trunc('day'::text,
    a.datahoratroca)::date AS datatroca,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    p.codigoempresa AS codigoempresaproduto,
    p.codigoloja AS codigolojaproduto,
    p.codigoproduto,
    p.descricaoproduto,
    sum( CASE WHEN s1.flagcomissaovendedortrocasaida = 'S'::bpchar THEN s1.quantidadetrocasaida ELSE 0.00 END)::numeric(4,
    0) AS totalpecas,
    0 AS valortotal
FROM personalerp.trocamercadoria a
    JOIN personalerp.trocamercadoriasaida s1 ON s1.codigoempresa = a.codigoempresa
        AND s1.codigoloja = a.codigoloja
        AND s1.codigotroca = a.codigotroca
    JOIN personalerp.produto p ON p.codigoempresa = s1.codigoempresaproduto
        AND p.codigoloja = s1.codigolojaproduto
        AND p.codigoproduto = s1.codigoproduto LEFT
    JOIN personalerp.vendedor v ON v.codigoempresa = a.codigoempresavendedor
        AND v.codigoloja = a.codigolojavendedor
        AND v.codigovendedor = a.codigovendedor
    JOIN personalerp.empresa e ON e.codigoempresa = a.codigoempresa
    JOIN personalerp.loja l ON l.codigoempresa = a.codigoempresa
        AND l.codigoloja = a.codigoloja
WHERE 1 = 1
        AND a.statustroca = 'P'::bpchar
GROUP BY a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datahoratroca,
    a.codigotroca,
    p.codigoempresa,
    p.codigoloja,
    p.codigoproduto,
    p.descricaoproduto,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor ) SELECT trocas.codigoempresa,
    trocas.codigoloja,
    trocas.nomeloja,
    trocas.razaosocialempresa,
    trocas.datatroca,
    trocas.codigoempresavendedor,
    trocas.codigolojavendedor,
    trocas.codigovendedor,
    trocas.nomevendedor,
    trocas.codigoempresaproduto,
    trocas.codigolojaproduto,
    trocas.codigoproduto,
    trocas.descricaoproduto,
    trocas.totalpecas,
    trocas.valortotal
FROM trocas)) UNION ALL ( WITH trocas2 AS ( SELECT a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    date_trunc('day'::text,
    a.datahoratroca)::date AS datatroca,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor,
    0 AS codigoempresaproduto,
    0 AS codigolojaproduto,
    0 AS codigoproduto,
    'X'::character varying(50) AS descricaoproduto,
    0 AS totalpecas,
    (( SELECT sum(sai1.valortrocasaida) AS sum
FROM personalerp.trocamercadoriasaida sai1
WHERE sai1.codigoempresa = a.codigoempresa
        AND sai1.codigoloja = a.codigoloja
        AND sai1.codigotroca = a.codigotroca)) - (( SELECT sum(ent1.valortrocaentrada) AS sum
FROM personalerp.trocamercadoriaentrada ent1
WHERE ent1.codigoempresa = a.codigoempresa
        AND ent1.codigoloja = a.codigoloja
        AND ent1.codigotroca = a.codigotroca)) AS valortotal
FROM personalerp.trocamercadoria a LEFT
    JOIN personalerp.vendedor v ON v.codigoempresa = a.codigoempresavendedor
        AND v.codigoloja = a.codigolojavendedor
        AND v.codigovendedor = a.codigovendedor
    JOIN personalerp.empresa e ON e.codigoempresa = a.codigoempresa
    JOIN personalerp.loja l ON l.codigoempresa = a.codigoempresa
        AND l.codigoloja = a.codigoloja
WHERE 1 = 1
        AND a.statustroca = 'P'::bpchar
GROUP BY a.codigoempresa,
    a.codigoloja,
    l.nomeloja,
    e.razaosocialempresa,
    a.datahoratroca,
    a.codigotroca,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    v.nomevendedor ) SELECT trocas2.codigoempresa,
    trocas2.codigoloja,
    trocas2.nomeloja,
    trocas2.razaosocialempresa,
    trocas2.datatroca,
    trocas2.codigoempresavendedor,
    trocas2.codigolojavendedor,
    trocas2.codigovendedor,
    trocas2.nomevendedor,
    trocas2.codigoempresaproduto,
    trocas2.codigolojaproduto,
    trocas2.codigoproduto,
    trocas2.descricaoproduto,
    trocas2.totalpecas,
    trocas2.valortotal
FROM trocas2) ) SELECT a.codigoempresa,
    a.codigoloja,
    a.nomeloja,
    a.razaosocialempresa,
    a.datavenda,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    a.nomevendedor,
    a.codigoempresaproduto,
    a.codigolojaproduto,
    a.codigoproduto,
    a.descricaoproduto,
    sum(COALESCE(a.totalpecas,
    0::numeric)) AS totalpecas,
    sum(COALESCE(a.valortotal,
    0::numeric)) AS valortotal
FROM vendas a
GROUP BY a.codigoempresa,
    a.codigoloja,
    a.nomeloja,
    a.razaosocialempresa,
    a.datavenda,
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    a.nomevendedor,
    a.descricaoproduto,
    a.codigoempresaproduto,
    a.codigolojaproduto,
    a.codigoproduto
ORDER BY a.nomevendedor,
    a.descricaoproduto</Sql>
    </View>
    <View nm="vendasvendedorgrupo">
      <Sql>SELECT
    a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    g.codigogrupo,
    g.nomegrupo,
    COALESCE(sum(a.valortotalpedido),
    0::numeric) AS valortotalpedido,
    COALESCE(sum(b.quantidadeitempedido),
    0::numeric) AS totalquantidadepedido
FROM personalerp.pedido a
    JOIN personalerp.itempedido b ON a.codigoempresa = b.codigoempresa
        AND a.codigoloja = b.codigoloja
        AND a.codigopedido = b.codigopedido
        AND a.codigopdv = b.codigopdv
    JOIN personalerp.produto p ON p.codigoempresa = b.codigoempresaproduto
        AND p.codigoloja = b.codigolojaproduto
        AND p.codigoproduto = b.codigoproduto FULL
    JOIN personalerp.grupo g ON g.codigogrupo = p.codigogrupo
GROUP BY a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    g.codigogrupo,
    g.nomegrupo
ORDER BY a.codigoempresavendedor,
    a.codigolojavendedor,
    a.codigovendedor,
    g.codigogrupo</Sql>
    </View>
    <Seq incr="1" nm="aberturacaixaloja_codigoaberturacaixa_seq"/>
    <Seq incr="1" nm="acaoobjeto_codigoacaoobjeto_seq"/>
    <Seq incr="1" nm="bandeiracartao_codigobandeira_seq"/>
    <Seq incr="1" nm="caixaloja_codigocaixa_seq"/>
    <Seq incr="1" nm="cargo_codigocargo_seq"/>
    <Seq incr="1" nm="centrocusto_codigocentrocusto_seq"/>
    <Seq incr="1" nm="chequeemitido_tmp_codigochequeemitido_seq"/>
    <Seq incr="1" nm="chequerecebido_codigochequerecebido_seq"/>
    <Seq incr="1" nm="cidade_codigocidade_seq"/>
    <Seq incr="1" nm="contabancaria_codigocontabancaria_seq"/>
    <Seq incr="1" nm="contapagar_codigocontapagar_seq"/>
    <Seq incr="1" nm="contareceber_codigocontareceber_seq"/>
    <Seq incr="1" nm="contaresumo_codigocontaresumo_seq"/>
    <Seq incr="1" nm="contratotrabalho_codigocontratotrabalho_seq"/>
    <Seq incr="1" nm="curral_codigocurral_seq"/>
    <Seq incr="1" nm="dependente_codigodependente_seq"/>
    <Seq incr="1" nm="distribuicaocusto_codigodistribuicaocusto_seq"/>
    <Seq incr="1" nm="empresa_codigoempresa_seq"/>
    <Seq incr="1" nm="enderecopessoa_codigoenderecopessoa_seq"/>
    <Seq incr="1" nm="entradaestoque_codigoentradaestoque_seq"/>
    <Seq incr="1" nm="esplanada_codigoesplanada_seq"/>
    <Seq incr="1" nm="essencia_codigoessencia_seq"/>
    <Seq incr="1" nm="estado_codigoestado_seq"/>
    <Seq incr="1" nm="fabricante_codigofabricante_seq"/>
    <Seq incr="1" nm="faltafuncionario_sequencialfaltafuncionario_seq"/>
    <Seq incr="1" nm="feriado_codigoferiado_seq"/>
    <Seq incr="1" nm="folhapagamento_codigofolhapagamento_seq"/>
    <Seq incr="1" nm="formapagamento_codigoformapagamento_seq"/>
    <Seq incr="1" nm="formarecebimento_codigoformarecebimento_seq"/>
    <Seq incr="1" nm="funcionario_codigofuncionario_seq"/>
    <Seq incr="1" nm="gerentemadeireira_codigogerente_seq"/>
    <Seq incr="1" nm="grupo_codigogrupo_seq"/>
    <Seq incr="1" nm="historicotrocamanutencao_codigohistoricotrocamanutencao_seq"/>
    <Seq incr="1" nm="horariotrabalho_codigohorariotrabalho_seq"/>
    <Seq incr="1" nm="iddestino_replicacao"/>
    <Seq incr="1" nm="itemcurral_codigoitemcurral_seq"/>
    <Seq incr="1" nm="itementradaestoque_codigoitementradaestoque_seq"/>
    <Seq incr="1" nm="itemmetavenda_codigoitemmetavenda_seq"/>
    <Seq incr="1" nm="itempedido_codigoitempedido_seq"/>
    <Seq incr="1" nm="itempedido_tmp_codigoitempedido_seq"/>
    <Seq incr="1" nm="itemromaneioabate_codigoitemromaneio_seq"/>
    <Seq incr="1" nm="itemromaneiobeneficiada_codigoitemromaneio_seq"/>
    <Seq incr="1" nm="itemromaneiobeneficiadaserrada_codigoitemromaneio_seq"/>
    <Seq incr="1" nm="itemromaneiogado_codigoitemromaneio_seq"/>
    <Seq incr="1" nm="itemromaneiomadeiraserrada_codigoitemromaneio_seq"/>
    <Seq incr="1" nm="itemromaneiomanejotora_codigoitemromaneio_seq"/>
    <Seq incr="1" nm="itemtransferenciaestoque_codigoitemtransferenciaestoque_seq"/>
    <Seq incr="1" nm="levantamentoestoque_codigolevantamentoestoque_seq"/>
    <Seq incr="1" nm="levantamentoestoqueitem_codigoitemlevantamentoestoque_seq"/>
    <Seq incr="1" nm="linhaproduto_codigolinhaproduto_seq"/>
    <Seq incr="1" nm="log_codigolog_seq"/>
    <Seq incr="1" nm="lognfeletronica_sequenciallognfe_seq"/>
    <Seq incr="1" nm="loja_codigoloja_seq"/>
    <Seq incr="1" nm="manejotora_codigomanejo_seq"/>
    <Seq incr="1" nm="mensageminterna_codigomensageminterna_seq"/>
    <Seq incr="1" nm="menu_codigomenu_seq"/>
    <Seq incr="1" nm="metavenda_codigometavenda_seq"/>
    <Seq incr="1" nm="modeloetiqueta_codigomodeloetiqueta_seq"/>
    <Seq incr="1" nm="modeloimpressoraetiqueta_codigomodeloimpressoraetiqueta_seq"/>
    <Seq incr="1" nm="motivodesligamento_codigomotivodesligamento_seq"/>
    <Seq incr="1" nm="motivofaltafuncionario_codigomotivofaltafuncionario_seq"/>
    <Seq incr="1" nm="motorista_codigomotorista_seq"/>
    <Seq incr="1" nm="movimentacaocaixaloja_sequencialmovimentacaocaixaloja_seq"/>
    <Seq incr="1" nm="movimentacaocontabancaria_sequencialmovimentacaocontabancari163"/>
    <Seq incr="1" nm="movimentacaoestoque_codigomovimentacaoestoque_seq"/>
    <Seq incr="1" nm="objeto_codigoobjeto_seq"/>
    <Seq incr="1" nm="operadoracartao_codigooperadoracartao_seq"/>
    <Seq incr="1" nm="pagamento_codigopagamento_seq"/>
    <Seq incr="1" nm="pais_codigopais_seq"/>
    <Seq incr="1" nm="parcelaplanopagamentovenda_codigoparcelaplanopagamento_seq"/>
    <Seq incr="1" nm="pedido_codigopedido_seq"/>
    <Seq incr="1" nm="pedido_tmp_codigopedido_seq"/>
    <Seq incr="1" nm="perfil_codigoperfil_seq"/>
    <Seq incr="1" nm="pessoa_codigopessoa_seq"/>
    <Seq incr="1" nm="planoconta_codigoplanoconta_seq"/>
    <Seq incr="1" nm="planopagamentovenda_codigoplanopagamento_seq"/>
    <Seq incr="1" nm="portador_codigoportador_seq"/>
    <Seq incr="1" nm="produto_codigoproduto_seq"/>
    <Seq incr="1" nm="recebimento_codigorecebimento_seq"/>
    <Seq incr="1" nm="recebimentocartao_codigorecebimentocartao_seq"/>
    <Seq incr="1" nm="referenciabancaria_codigoreferenciabancaria_seq"/>
    <Seq incr="1" nm="referenciacomercial_codigoreferenciacomercial_seq"/>
    <Seq incr="1" nm="replicacao_idreplicacao"/>
    <Seq incr="1" nm="replicacao_idreplicacao_execucao"/>
    <Seq incr="1" nm="romaneioabate_codigoromaneio_seq"/>
    <Seq incr="1" nm="romaneiogado_codigoromaneio_seq"/>
    <Seq incr="1" nm="romaneiomadeirabeneficiada_codigoromaneio_seq"/>
    <Seq incr="1" nm="romaneiomadeiraserrada_codigoromaneio_seq"/>
    <Seq incr="1" nm="romaneiomanejotora_codigoromaneio_seq"/>
    <Seq incr="1" nm="romaneiosaidatora_codigoromaneio_seq"/>
    <Seq incr="1" nm="romaneiotora_codigoromaneio_seq"/>
    <Seq incr="1" nm="situacaotrocamanutencao_codigosituacaotrocamanutencao_seq"/>
    <Seq incr="1" nm="subgrupo_codigosubgrupo_seq"/>
    <Seq incr="1" nm="tabelainss_codigotabelainss_seq"/>
    <Seq incr="1" nm="tabelairrf_codigotabelairrf_seq"/>
    <Seq incr="1" nm="tabelairrf_codigotabelasalariofamilia_seq"/>
    <Seq incr="1" nm="tabelairrfdeducaodependente_codigotabelairrfdependente_seq"/>
    <Seq incr="1" nm="tabelapreco_codigotabelapreco_seq"/>
    <Seq incr="1" nm="tabelasalariominimo_codigosalariominimo_seq"/>
    <Seq incr="1" nm="tipocontaresumo_codigotipocontaresumo_seq"/>
    <Seq incr="1" nm="tipodocumento_codigotipodocumento_seq"/>
    <Seq incr="1" nm="tipoflagtrocamanutencao_codigotipoflagtrocamanutencao_seq"/>
    <Seq incr="1" nm="tipomadeirabeneficiada_codigotipomadeirabeneficiada_seq"/>
    <Seq incr="1" nm="tipoplanoconta_codigotipoplanoconta_seq"/>
    <Seq incr="1" nm="tipotributacao_codigotipotributacao_seq"/>
    <Seq incr="1" nm="tipoveiculo_codigotipoveiculo_seq"/>
    <Seq incr="1" nm="transferenciaestoque_codigotransferenciaestoque_seq"/>
    <Seq incr="1" nm="trocamanutencao_codigotrocamanutencao_seq"/>
    <Seq incr="1" nm="trocamercadoria_codigotroca_seq"/>
    <Seq incr="1" nm="trocamercadoriaentrada_codigotrocaentrada_seq"/>
    <Seq incr="1" nm="trocamercadoriasaida_codigotrocasaida_seq"/>
    <Seq incr="1" nm="unidade_codigounidade_seq"/>
    <Seq incr="1" nm="usuario_codigousuario_seq"/>
    <Seq incr="1" nm="valefuncionario_codigovalefuncionario_seq"/>
    <Seq incr="1" nm="veiculo_codigoveiculo_seq"/>
    <Seq incr="1" nm="vendedor_codigovendedor_seq"/>
    <Seq incr="1" nm="verba_codigoverba_seq"/>
    <CustomTypes/>
  </Sch>
  <Sch Cm="standard public schema" nm="public">
    <Proc nm="public.connectby(text, text, text, text, integer)">
      <src>CREATE OR REPLACE FUNCTION public.connectby(text, text, text, text, integer) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'connectby_text'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.connectby(text, text, text, text, integer, text)">
      <src>CREATE OR REPLACE FUNCTION public.connectby(text, text, text, text, integer, text) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'connectby_text'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.connectby(text, text, text, text, text, integer)">
      <src>CREATE OR REPLACE FUNCTION public.connectby(text, text, text, text, text, integer) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'connectby_text_serial'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.connectby(text, text, text, text, text, integer, text)">
      <src>CREATE OR REPLACE FUNCTION public.connectby(text, text, text, text, text, integer, text) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'connectby_text_serial'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.crosstab(text)">
      <src>CREATE OR REPLACE FUNCTION public.crosstab(text) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'crosstab'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.crosstab(text, integer)">
      <src>CREATE OR REPLACE FUNCTION public.crosstab(text, integer) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'crosstab'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.crosstab(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.crosstab(text, text) 
  RETURNS SETOF record AS 
$$'$libdir/tablefunc', 'crosstab_hash'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.crosstab2(text)">
      <src>CREATE OR REPLACE FUNCTION public.crosstab2(text) 
  RETURNS SETOF tablefunc_crosstab_2 AS 
$$'$libdir/tablefunc', 'crosstab'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.crosstab3(text)">
      <src>CREATE OR REPLACE FUNCTION public.crosstab3(text) 
  RETURNS SETOF tablefunc_crosstab_3 AS 
$$'$libdir/tablefunc', 'crosstab'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.crosstab4(text)">
      <src>CREATE OR REPLACE FUNCTION public.crosstab4(text) 
  RETURNS SETOF tablefunc_crosstab_4 AS 
$$'$libdir/tablefunc', 'crosstab'$$
  LANGUAGE c STABLE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink(text) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_record'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink(text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink(text, boolean) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_record'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink(text, text) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_record'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink(text, text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink(text, text, boolean) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_record'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_build_sql_delete(text, int2vector, integer, text[])">
      <src>CREATE OR REPLACE FUNCTION public.dblink_build_sql_delete(text, int2vector, integer, text[]) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_build_sql_delete'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_build_sql_insert(text, int2vector, integer, text[], text[])">
      <src>CREATE OR REPLACE FUNCTION public.dblink_build_sql_insert(text, int2vector, integer, text[], text[]) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_build_sql_insert'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_build_sql_update(text, int2vector, integer, text[], text[])">
      <src>CREATE OR REPLACE FUNCTION public.dblink_build_sql_update(text, int2vector, integer, text[], text[]) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_build_sql_update'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_cancel_query(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_cancel_query(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_cancel_query'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_close(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_close(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_close'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_close(text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_close(text, boolean) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_close'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_close(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_close(text, text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_close'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_close(text, text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_close(text, text, boolean) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_close'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_connect(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_connect(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_connect'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_connect(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_connect(text, text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_connect'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_connect_u(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_connect_u(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_connect'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_connect_u(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_connect_u(text, text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_connect'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_current_query()">
      <src>CREATE OR REPLACE FUNCTION public.dblink_current_query() 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_current_query'$$
  LANGUAGE c VOLATILE 
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_disconnect()">
      <src>CREATE OR REPLACE FUNCTION public.dblink_disconnect() 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_disconnect'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_disconnect(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_disconnect(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_disconnect'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_error_message(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_error_message(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_error_message'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_exec(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_exec(text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_exec'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_exec(text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_exec(text, boolean) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_exec'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_exec(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_exec(text, text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_exec'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_exec(text, text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_exec(text, text, boolean) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_exec'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_fetch(text, integer)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_fetch(text, integer) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_fetch'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_fetch(text, integer, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_fetch(text, integer, boolean) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_fetch'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_fetch(text, text, integer)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_fetch(text, text, integer) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_fetch'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_fetch(text, text, integer, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_fetch(text, text, integer, boolean) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_fetch'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_get_connections()">
      <src>CREATE OR REPLACE FUNCTION public.dblink_get_connections() 
  RETURNS text[] AS 
$$'$libdir/dblink', 'dblink_get_connections'$$
  LANGUAGE c VOLATILE 
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_get_pkey(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_get_pkey(text) 
  RETURNS SETOF dblink_pkey_results AS 
$$'$libdir/dblink', 'dblink_get_pkey'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_get_result(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_get_result(text) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_get_result'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_get_result(text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_get_result(text, boolean) 
  RETURNS SETOF record AS 
$$'$libdir/dblink', 'dblink_get_result'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <Proc nm="public.dblink_is_busy(text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_is_busy(text) 
  RETURNS integer AS 
$$'$libdir/dblink', 'dblink_is_busy'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_open(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_open(text, text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_open'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_open(text, text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_open(text, text, boolean) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_open'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_open(text, text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_open(text, text, text) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_open'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_open(text, text, text, boolean)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_open(text, text, text, boolean) 
  RETURNS text AS 
$$'$libdir/dblink', 'dblink_open'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.dblink_send_query(text, text)">
      <src>CREATE OR REPLACE FUNCTION public.dblink_send_query(text, text) 
  RETURNS integer AS 
$$'$libdir/dblink', 'dblink_send_query'$$
  LANGUAGE c VOLATILE STRICT
  COST 1;</src>
    </Proc>
    <Proc nm="public.normal_rand(integer, double precision, double precision)">
      <src>CREATE OR REPLACE FUNCTION public.normal_rand(integer, double precision, double precision) 
  RETURNS SETOF double precision AS 
$$'$libdir/tablefunc', 'normal_rand'$$
  LANGUAGE c VOLATILE STRICT
  COST 1
  ROWS 1000;</src>
    </Proc>
    <CustomTypes/>
  </Sch>
  <Dgm nm="Acesso">
    <RnCf ClkAct="true" FtSz="9" lkStgy="OffsetDirect" zm="1.25">
      <VbCfg>
        <Fg ky="Auto Number" vl="0"/>
        <Fg ky="Check" vl="0"/>
        <Fg ky="Comment" vl="0"/>
        <Fg ky="Data Type" vl="1"/>
        <Fg ky="Default" vl="0"/>
        <Fg ky="ENUM Values" vl="0"/>
        <Fg ky="Length" vl="1"/>
        <Fg ky="Name" vl="1"/>
        <Fg ky="Nullable" vl="0"/>
        <Fg ky="Schema Name" vl="0"/>
        <Fg ky="Signed" vl="0"/>
      </VbCfg>
    </RnCf>
    <DiaProps>
      <Show AllCols="1" FkCols="1" FkNms="1" PkCols="1"/>
      <ErNotation>DbwErNotation</ErNotation>
      <svg path=""/>
    </DiaProps>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="usuario" x="172" y="120"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="usuarioloja" x="106" y="487"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="perfil" x="884" y="98"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="perfilusuario" x="574" y="497"/>
    <FkGl bkCl="ff000000" nm="personalerp.perfilusuario.perfil_perfilusuario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.perfilusuario.usuario_perfilusuario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.usuarioloja.usuario_usuarioloja_fk"/>
    <Notes/>
    <Zones/>
  </Dgm>
  <Dgm nm="personalerp">
    <RnCf ClkAct="true" FtSz="9" lkStgy="OffsetDirect" zm="1.0">
      <VbCfg>
        <Fg ky="Auto Number" vl="0"/>
        <Fg ky="Check" vl="0"/>
        <Fg ky="Comment" vl="0"/>
        <Fg ky="Data Type" vl="1"/>
        <Fg ky="Default" vl="0"/>
        <Fg ky="ENUM Values" vl="0"/>
        <Fg ky="Length" vl="1"/>
        <Fg ky="Name" vl="1"/>
        <Fg ky="Nullable" vl="0"/>
        <Fg ky="Schema Name" vl="0"/>
        <Fg ky="Signed" vl="0"/>
      </VbCfg>
    </RnCf>
    <DiaProps>
      <Show AllCols="1" FkCols="1" FkNms="1" PkCols="1"/>
      <ErNotation>DbwErNotation</ErNotation>
      <svg path=""/>
    </DiaProps>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="aberturacaixaloja" x="1247" y="1267"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="acaoobjeto" x="3893" y="8552"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="baixacontapagar" x="1144" y="243"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="baixacontareceber" x="3809" y="6381"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="banco" x="4874" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="bandeiracartao" x="4023" y="306"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="caixaloja" x="1681" y="1267"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="cargo" x="3477" y="4454"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="cbo" x="3854" y="4454"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="centrocusto" x="1163" y="652"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="cfop" x="5226" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="chequeemitido" x="1732" y="3116"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="chequerecebido" x="3557" y="619"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="cidade" x="3674" y="7529"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="comissaovenda" x="1506" y="4557"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contabancaria" x="3377" y="6188"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contapagar" x="1534" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contareceber" x="3367" y="6381"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contaresumo" x="431" y="396"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contaresumoplanoconta" x="808" y="396"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contratotrabalho" x="3467" y="4597"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="contratotrabalhofolhapagamento" x="3914" y="4597"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="curral" x="1831" y="3492"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="dependente" x="3674" y="7356"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="dimensaotempo" x="5543" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="distribuicaocusto" x="3347" y="6754"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="empresa" x="3587" y="193"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="enderecopessoa" x="4003" y="619"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="entradaestoque" x="3547" y="1132"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="esplanada" x="3337" y="6927"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="essencia" x="3942" y="4160"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="estado" x="4051" y="7777"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="estoque" x="3537" y="1518"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="fabricante" x="3942" y="3974"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="faltafuncionario" x="3904" y="4810"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="feriado" x="1887" y="4404"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="flagtrocamanutencao" x="1722" y="7612"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="folhapagamento" x="3297" y="7173"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="formapagamento" x="976" y="3339"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="formarecebimento" x="1236" y="961"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="funcionario" x="3287" y="7356"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="gerentemadeireira" x="3457" y="5146"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="grupo" x="3942" y="3758"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="grupoempresa" x="1582" y="4943"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="grupoempresaloja" x="1959" y="4943"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="historicotrocamanutencao" x="4874" y="308"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="horariotrabalho" x="1945" y="5056"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemcurral" x="1482" y="3492"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itementradaestoque" x="3990" y="1325"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemmetavenda" x="1563" y="4770"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemnfentrada" x="3972" y="2646"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemnfsaida" x="1498" y="5798"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itempedido" x="3604" y="7920"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneioabate" x="1444" y="3685"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiobeneficiada" x="3962" y="3149"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiobeneficiadaserrada" x="3952" y="3362"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiogado" x="1446" y="3898"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiomadeiraserrada" x="3942" y="2270"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiomanejotora" x="1452" y="4091"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiosaidatora" x="3533" y="8971"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemromaneiotora" x="3857" y="5146"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="itemtransferenciaestoque" x="3982" y="2483"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="levantamentoestoque" x="1859" y="5259"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="levantamentoestoqueitem" x="1369" y="5259"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="linhaproduto" x="3227" y="7920"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="log" x="5226" y="308"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="lognfeletronica" x="1636" y="5645"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="loja" x="2568" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="manejotora" x="3317" y="7050"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="mensageminterna" x="1958" y="5492"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="mensageminternadestinatario" x="1361" y="2159"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="menu" x="3544" y="8828"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="metavenda" x="1948" y="4770"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="modeloetiqueta" x="461" y="10215"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="modeloimpressoraetiqueta" x="50" y="10215"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="motivodesligamento" x="3207" y="8173"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="motivofaltafuncionario" x="3197" y="8296"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="motorista" x="3417" y="5772"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="movimentacaocaixaloja" x="1237" y="1500"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="movimentacaocontabancaria" x="1286" y="3116"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="movimentacaoestoque" x="3927" y="1518"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="movimentacaoitemromaneioabate" x="1079" y="3685"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="nfeletronica" x="2007" y="5645"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="nfentrada" x="4420" y="619"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="nfentradacontapagar" x="1082" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="nfentradaentradaestoque" x="3990" y="1132"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="nfsaida" x="1916" y="5798"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="nivelmetavenda" x="1186" y="4770"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="objeto" x="3903" y="8429"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="operacaotributacao" x="1525" y="6261"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="operadoracartao" x="3782" y="6188"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pagamento" x="1347" y="3339"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pais" x="4422" y="7777"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="parametro" x="50" y="10348"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="parametroloja" x="427" y="10348"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="parcelaplanopagamentovenda" x="869" y="1713"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pdv" x="1701" y="1903"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pedido" x="1657" y="1500"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pedidocontareceber" x="3809" y="6534"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="perfil" x="3167" y="8429"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="perfilusuario" x="3544" y="8685"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="permissaoespecial" x="977" y="2026"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="permissaoespecialusuario" x="1363" y="2026"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="permissaoperfilacaoobjeto" x="3544" y="8552"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="permissaoperfilobjeto" x="3554" y="8429"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pessoa" x="1791" y="2655"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="pessoafisica" x="1395" y="2655"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="planoconta" x="1157" y="396"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="planopagamentovenda" x="1240" y="1713"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="portador" x="1163" y="858"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="produto" x="3527" y="1761"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="produtovendadiaria" x="3942" y="3575"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="rateiocontapagar" x="3607" y="50"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="recebimento" x="1613" y="961"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="recebimentocartao" x="3577" y="306"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="referenciabancaria" x="4051" y="7529"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="referenciacomercial" x="1352" y="2853"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="replicacaocomandos" x="764" y="10082"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="replicacaodestino" x="50" y="10082"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="replicacaoexecucao" x="414" y="10082"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneioabate" x="1996" y="6544"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneiogado" x="1998" y="6787"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneiomadeirabeneficiada" x="3447" y="5399"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneiomadeiraserrada" x="1664" y="2282"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneiomanejotora" x="1837" y="4091"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneiosaidatora" x="3137" y="8971"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="romaneiotora" x="3407" y="5975"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="situacaotrocamanutencao" x="5543" y="308"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="subgrupo" x="3942" y="3886"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="subproduto" x="3952" y="1944"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelainss" x="3127" y="9154"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelairrf" x="3117" y="9327"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelairrfdeducaodependente" x="3107" y="9500"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelapreco" x="1286" y="1114"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelaprecoproduto" x="1663" y="1114"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelasalariofamilia" x="2061" y="6980"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tabelasalariominimo" x="2066" y="7143"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipocontaresumo" x="50" y="396"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipodocumento" x="1163" y="755"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipoflagtrocamanutencao" x="1318" y="7612"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipomadeirabeneficiada" x="3942" y="4263"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipoplanoconta" x="786" y="549"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tiporegistronfeletronica" x="1259" y="5645"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipotributacao" x="3942" y="4351"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tipoveiculo" x="3077" y="9643"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="transferenciaestoque" x="2085" y="7439"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="tributacao" x="1091" y="6261"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="trocamanutencao" x="2099" y="7612"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="trocamercadoria" x="3037" y="9766"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="trocamercadoriaentrada" x="3942" y="2097"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="trocamercadoriasaida" x="3962" y="1761"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="uftipotributacao" x="4323" y="4351"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="unidade" x="3942" y="4062"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="usuario" x="1751" y="2026"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="usuarioloja" x="2189" y="7945"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="valefuncionario" x="2123" y="8078"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="veiculo" x="2120" y="7286"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="vendadiaria" x="2997" y="9949"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="vendedor" x="1891" y="4557"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="verba" x="2181" y="8301"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="verbacontratotrabalho" x="3894" y="4993"/>
    <TbGl bkCl="ffccccff" sch="personalerp" tbl="verbafolhapagamento" x="1767" y="8301"/>
    <FkGl bkCl="ff000000" nm="personalerp.aberturacaixaloja.caixaloja_aberturacaixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.aberturacaixaloja.vendedor_abertura_aberturacaixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.aberturacaixaloja.vendedor_fechamento_aberturacaixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.acaoobjeto.objeto_acaoobjeto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.baixacontapagar.contapagar_baixacontapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.baixacontapagar.pagamento_baixacontapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.baixacontareceber.contareceber_baixacontareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.baixacontareceber.recebimento_baixacontareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.caixaloja.empresa_caixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.caixaloja.loja_caixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.cargo.cbo_cargo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.cargo.empresa_cargo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.cargo.loja_cargo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequeemitido.baixacontapagar_chequeemitido_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequeemitido.contabancaria_chequeemitido_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequeemitido.empresa_chequeemitido_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequeemitido.loja_chequeemitido_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequeemitido.movimentacaocontabancaria_chequeemitido"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequeemitido.pessoa_chequeemitido_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequerecebido.empresa_chequerecebido"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequerecebido.enderecopessoa_chequerecebido"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequerecebido.loja_chequerecebido"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequerecebido.movimentacaocontabancaria_chequerecebido"/>
    <FkGl bkCl="ff000000" nm="personalerp.chequerecebido.recebimento_chequerecebido"/>
    <FkGl bkCl="ff000000" nm="personalerp.cidade.estado_cidade_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.comissaovenda.itemmetavenda_comissaovenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.comissaovenda.vendedor_comissaovenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.contabancaria.empresa_contabancaria_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contabancaria.loja_contabancaria_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.centrocusto_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.empresa_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.loja_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.pessoa_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.planoconta_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.portador_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contapagar.tipodocumento_contapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.centrocusto_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.empresa_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.enderecopessoa_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.loja_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.planoconta_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.portador_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contareceber.tipodocumento_contareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.contaresumo.contaresumo_contaresumo_2"/>
    <FkGl bkCl="ff000000" nm="personalerp.contaresumo.contaresumo_contaresumo_3"/>
    <FkGl bkCl="ff000000" nm="personalerp.contaresumo.tipocontaresumo_contaresumo"/>
    <FkGl bkCl="ff000000" nm="personalerp.contaresumoplanoconta.contaresumo_contaresumoplanoconta"/>
    <FkGl bkCl="ff000000" nm="personalerp.contaresumoplanoconta.planoconta_contaresumoplanoconta"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.cargo_contratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.empresa_contratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.funcionario_contratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.horariotrabalho_contratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.loja_contratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.loja_contratotrabalho_lotacao"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalho.motivodesligamento_contratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalhofolhapagamento.contratotrabalho_contratotrabalhofolhapagamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.contratotrabalhofolhapagamento.folhapagamento_contratotrabalhofolhapagamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.curral.loja_curral_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.dependente.funcionario_dependente_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.dependente.verba_dependente_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.distribuicaocusto.loja_distribuicaocusto"/>
    <FkGl bkCl="ff000000" nm="personalerp.distribuicaocusto.loja_referencia_distribuicaocusto"/>
    <FkGl bkCl="ff000000" nm="personalerp.distribuicaocusto.planoconta_distribuicaocusto"/>
    <FkGl bkCl="ff000000" nm="personalerp.enderecopessoa.cidade_enderecopessoa_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.enderecopessoa.pessoa_enderecopessoa_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.entradaestoque.enderecopessoa_entradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.entradaestoque.loja_entradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.esplanada.loja_esplanada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.estado.pais_estado_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.estoque.fk_estoque_loja"/>
    <FkGl bkCl="ff000000" nm="personalerp.estoque.fk_estoque_produto"/>
    <FkGl bkCl="ff000000" nm="personalerp.faltafuncionario.contratotrabalho_faltafuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.faltafuncionario.motivofaltafuncionario_faltafuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.feriado.empresa_feriado_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.feriado.loja_feriado_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.flagtrocamanutencao.tipoflagtrocamanutencao_flagtrocamanutencao"/>
    <FkGl bkCl="ff000000" nm="personalerp.flagtrocamanutencao.trocamanutencao_flagtrocamanutencao"/>
    <FkGl bkCl="ff000000" nm="personalerp.folhapagamento.empresa_folhapagamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.folhapagamento.loja_folhapagamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.folhapagamento.loja_folhapagamento_lotacao"/>
    <FkGl bkCl="ff000000" nm="personalerp.funcionario.cidade_funcionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.funcionario.cidade_funcionario_naturalidade_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.funcionario.empresa_funcionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.funcionario.loja_funcionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.gerentemadeireira.contratotrabalho_gerentemadeireira_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.gerentemadeireira.empresa_gerentemadeireira_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.gerentemadeireira.loja_gerentemadeireira_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.grupoempresaloja.grupoempresa_grupoempresaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.grupoempresaloja.loja_grupoempresaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.horariotrabalho.empresa_horariotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.horariotrabalho.loja_horariotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemcurral.curral_itemcurral"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemcurral.pessoa_itemcurral"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemcurral.produto_itemcurral"/>
    <FkGl bkCl="ff000000" nm="personalerp.itementradaestoque.entradaestoque_itementradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.itementradaestoque.movimentacaoestoque_itementradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.itementradaestoque.produto_itementradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemmetavenda.metavenda_itemmetavenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemmetavenda.nivelmetavenda_itemmetavenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemnfentrada.nfentrada_itemnfsentrada"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemnfentrada.produto_itemnfsentrada"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemnfsaida.nfsaida_itemnfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemnfsaida.produto_itemnfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itempedido.linhaproduto_itempedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.itempedido.pedido_itempedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.itempedido.produto_itempedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneioabate.curral_itemromaneioabate_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneioabate.produto_itemromaneiofrigorifico_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneioabate.romaneioabate_itemromaneioabate_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiobeneficiada.movimentacaoestoque_itemromaneiobeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiobeneficiada.produto_itemromaneiobeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiobeneficiada.romaneiomadeirabeneficiada_itemromaneiobeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiobeneficiadaserrada.movimentacaoestoque_itemromaneiobeneficiadaserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiobeneficiadaserrada.produto_itemromaneiobeneficiadaserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiobeneficiadaserrada.romaneiomadeirabeneficiada_itemromaneiobeneficiadaserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiogado.curral_itemromaneiogado"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiogado.produto_itemromaneiogado"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiogado.romaneiogado_itemromaneiogado"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiomadeiraserrada.movimentacaoestoque_itemromaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiomadeiraserrada.produto_itemromaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiomadeiraserrada.romaneiomadeiraserrada_itemromaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiomanejotora.essencia_itemromaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiomanejotora.romaneiomanejotora_itemromaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiosaidatora.itemromaneiotora_itemromaneiosaidatora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiosaidatora.romaneiosaidatora_itemromaneiosaidatora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiotora.essencia_itemromaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiotora.gerentemadeireira_itemromaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiotora.romaneiotora_itemromaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemromaneiotora.usuario_itemromaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemtransferenciaestoque.produto_itemtransferenciaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.itemtransferenciaestoque.transferenciaestoque_itemtransferenciaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.levantamentoestoque.empresa_levantamentoestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.levantamentoestoque.loja_levantamentoestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.levantamentoestoqueitem.levantamentoestoque_levantamentoestoqueitem"/>
    <FkGl bkCl="ff000000" nm="personalerp.levantamentoestoqueitem.movimentacaoestoque_levantamentoestoqueitem"/>
    <FkGl bkCl="ff000000" nm="personalerp.levantamentoestoqueitem.produto_levantamentoestoqueitem"/>
    <FkGl bkCl="ff000000" nm="personalerp.linhaproduto.loja_linhaproduto"/>
    <FkGl bkCl="ff000000" nm="personalerp.linhaproduto.produto_linhaproduto"/>
    <FkGl bkCl="ff000000" nm="personalerp.lognfeletronica.nfeletronica_lognfeletronica_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.lognfeletronica.tiporegistronfeletronica_lognfeletronica_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.loja.fk_lojas_empresas"/>
    <FkGl bkCl="ff000000" nm="personalerp.loja.funcionario_loja_gerente"/>
    <FkGl bkCl="ff000000" nm="personalerp.loja.funcionario_loja_supervisor"/>
    <FkGl bkCl="ff000000" nm="personalerp.manejotora.loja_manejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.mensageminterna.fk_mensageminterna_loja"/>
    <FkGl bkCl="ff000000" nm="personalerp.mensageminterna.fk_mensageminterna_usuario"/>
    <FkGl bkCl="ff000000" nm="personalerp.mensageminternadestinatario.fk_mensageminternadestinatario_usuariodestinatario"/>
    <FkGl bkCl="ff000000" nm="personalerp.menu.menu_menupai_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.menu.objeto_menu_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.metavenda.loja_metavenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.metavenda.vendedor_metavenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.modeloetiqueta.modeloimpressoraetiqueta_modeloetiqueta"/>
    <FkGl bkCl="ff000000" nm="personalerp.motivodesligamento.empresa_motivodesligamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.motivodesligamento.loja_motivodesligamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.motivofaltafuncionario.empresa_motivofaltafuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.motivofaltafuncionario.loja_motivofaltafuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.motorista.cidade_motorista_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.motorista.empresa_motorista_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.motorista.loja_motorista_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaocaixaloja.aberturacaixaloja_movimentacaocaixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaocaixaloja.pedido_movimentacaocaixaloja"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaocontabancaria.contabancaria_movimentacaocontabancaria_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaocontabancaria.pagamento_movimentacaocontabancaria_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaocontabancaria.recebimento_movimentacaocontabancaria"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaoestoque.fk_movimentacaoestoque_estoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaoitemromaneioabate.itemromaneioabate_movimentacaoitemromaneioabate"/>
    <FkGl bkCl="ff000000" nm="personalerp.movimentacaoitemromaneioabate.movimentacaoestoque_movimentacaoitemromaneioabate"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfeletronica.empresa_nfeletronica_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfeletronica.loja_nfeletronica_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfentrada.enderecopessoa_emitente_nfentrada"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfentrada.enderecopessoa_transportadora_nfentrada"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfentradacontapagar.contapagar_nfentradacontapagar"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfentradacontapagar.nfentrada_nfentradacontapagar"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfentradaentradaestoque.entradaestoque_nfentradaentradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfentradaentradaestoque.nfentrada_nfentradaentradaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfsaida.destinatario_enderecopessoa_nfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfsaida.empresa_nfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfsaida.loja_nfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfsaida.nfeletronica_nfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfsaida.operacaotributacao_nfsaida"/>
    <FkGl bkCl="ff000000" nm="personalerp.nfsaida.transportadora_enderecopessoa_nfsaida_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.operadoracartao.contabancaria_operadoracartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.pagamento.tipobaixa_baixacontapagar_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.parametroloja.parametro_parametroloja_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.parcelaplanopagamentovenda.planopagamentovenda_parcelaplanopagamentovenda"/>
    <FkGl bkCl="ff000000" nm="personalerp.pdv.loja_pdv"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.empresa_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.enderecopessoa_entrega_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.enderecopessoa_frete_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.enderecopessoa_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.loja_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.nfsaida_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.pdv_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.planopagamentovenda_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedido.vendedor_pedido"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedidocontareceber.contareceber_pedidocontareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.pedidocontareceber.pedido_pedidocontareceber"/>
    <FkGl bkCl="ff000000" nm="personalerp.perfil.loja_perfil_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.perfil.menu_perfil_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.perfilusuario.perfil_perfilusuario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.perfilusuario.usuario_perfilusuario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.permissaoespecialusuario.permissaoespecialusuario_codigoempresa_fkey"/>
    <FkGl bkCl="ff000000" nm="personalerp.permissaoespecialusuario.permissaoespecialusuario_codigoopermissaoespecial_fkey"/>
    <FkGl bkCl="ff000000" nm="personalerp.permissaoperfilacaoobjeto.acaoobjeto_permissaoperfilacaoobjeto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.permissaoperfilacaoobjeto.perfil_permissaoperfilacaoobjeto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.permissaoperfilobjeto.objeto_permissaoperfilobjeto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.permissaoperfilobjeto.perfil_permissaoperfilobjeto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.pessoa.loja_pessoa_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.pessoafisica.pessoa_pessoafisica_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.planoconta.planoconta_planoconta_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.planoconta.tipoplanoconta_planoconta_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.essencia_produto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.fk_produto_fabricante"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.fk_produto_fornecedor"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.fk_produto_grupo"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.fk_produto_loja"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.fk_produto_subgrupo"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.fk_produto_unidade"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.tipomadeirabeneficiada_produto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.produto.tipotributacao_produto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.produtovendadiaria.produto_produtovendadiaria"/>
    <FkGl bkCl="ff000000" nm="personalerp.produtovendadiaria.vendadiaria_produtovendadiaria"/>
    <FkGl bkCl="ff000000" nm="personalerp.rateiocontapagar.contapagar_rateiocontapagar"/>
    <FkGl bkCl="ff000000" nm="personalerp.rateiocontapagar.loja_rateiocontapagar"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimento.empresa_recebimento"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimento.formarecebimento_recebimento"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimento.loja_recebimento"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.bandeiracartao_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.empresa_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.enderecopessoa_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.loja_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.movimentacaocontabancaria_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.operadoracartao_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.recebimentocartao.recebimento_recebimentocartao"/>
    <FkGl bkCl="ff000000" nm="personalerp.referenciabancaria.fk_referenciabancaria_cidade"/>
    <FkGl bkCl="ff000000" nm="personalerp.referenciacomercial.fk_referenciacomercial_pessoa"/>
    <FkGl bkCl="ff000000" nm="personalerp.replicacaoexecucao.fk_replicacao_execucao_replicacao"/>
    <FkGl bkCl="ff000000" nm="personalerp.replicacaoexecucao.fk_replicacao_execucao_replicacao_destino"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneioabate.contapagar_romaneioabate"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneioabate.empresa_romaneiofrigorifico_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneioabate.enderecopessoa_fornecedor_romaneiofrigorifico_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneioabate.loja_romaneiofrigorifico_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiogado.enderecopessoa_romaneiogado"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiogado.loja_romaneiogado"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.empresa_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.enderecopessoa_cliente_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.enderecopessoa_transportadora_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.gerentemadeireira_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.loja_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.motorista_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeirabeneficiada.usuario_romaneiomadeirabeneficiada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.empresa_romaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.enderecopessoa_romaneiomadeiraserrada_cliente_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.enderecopessoa_romaneiomadeiraserrada_transportadora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.gerentemadeireira_romaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.loja_romaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.motorista_romaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomadeiraserrada.usuario_romaneiomadeiraserrada_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomanejotora.esplanada_romaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomanejotora.loja_romaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomanejotora.manejotora_romaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomanejotora.motorista_romaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiomanejotora.veiculo_romaneiomanejotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiosaidatora.empresa_romaneiosaidatora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiosaidatora.enderecopessoa_romaneiosaidatora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiosaidatora.loja_romaneiosaidatora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiotora.empresa_romaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiotora.loja_romaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiotora.motorista_romaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.romaneiotora.pessoa_romaneiotora_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.subproduto.produto_subproduto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.subproduto.produto_subproduto_subproduto_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelainss.empresa_tabelainss_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelainss.loja_tabelainss_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelairrf.empresa_tabelairrf_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelairrf.loja_tabelairrf_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelairrfdeducaodependente.empresa_tabelairrfdeducaodependente_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelairrfdeducaodependente.loja_tabelairrfdeducaodependente_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelaprecoproduto.empresa_tabelaprecoproduto"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelaprecoproduto.loja_tabelaprecoproduto"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelaprecoproduto.produto_tabelaprecoproduto"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelaprecoproduto.tabelapreco_tabelaprecoproduto"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelasalariofamilia.empresa_tabelasalariofamilia_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelasalariofamilia.loja_tabelasalariofamilia_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelasalariominimo.empresa_tabelasalariominimo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tabelasalariominimo.loja_tabelasalariominimo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tipoveiculo.loja_tipoveiculo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.transferenciaestoque.loja_destino_transferenciaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.transferenciaestoque.loja_transferenciaestoque"/>
    <FkGl bkCl="ff000000" nm="personalerp.tributacao.operacaotributacao_tributacao_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.tributacao.uftipotributacao_tributacao_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamanutencao.empresa_trocamanutencao"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamanutencao.loja_trocamanutencao"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamanutencao.produto_trocamanutencao"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamanutencao.vendedor_trocamanutencao"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamercadoria.loja_trocamercadoria"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamercadoria.vendedor_trocamercadoria"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamercadoriaentrada.produto_trocamercadoriaentrada"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamercadoriaentrada.trocamercadoria_trocamercadoriaentrada"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamercadoriasaida.produto_trocamercadoriasaida"/>
    <FkGl bkCl="ff000000" nm="personalerp.trocamercadoriasaida.trocamercadoria_trocamercadoriasaida"/>
    <FkGl bkCl="ff000000" nm="personalerp.uftipotributacao.tipotributacao_uftipotributacao_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.usuario.loja_usuario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.usuarioloja.loja_usuarioloja_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.usuarioloja.usuario_usuarioloja_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.valefuncionario.contratotrabalho_valefuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.valefuncionario.empresa_valefuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.valefuncionario.loja_valefuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.valefuncionario.verba_valefuncionario_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.veiculo.loja_veiculo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.veiculo.tipoveiculo_veiculo_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.vendadiaria.loja_vendadiaria"/>
    <FkGl bkCl="ff000000" nm="personalerp.vendedor.fk_vendedor_loja"/>
    <FkGl bkCl="ff000000" nm="personalerp.vendedor.funcionario_vendedor"/>
    <FkGl bkCl="ff000000" nm="personalerp.verba.empresa_verba_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.verba.loja_verba_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.verbacontratotrabalho.contratotrabalho_verbacontratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.verbacontratotrabalho.verba_verbacontratotrabalho_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.verbafolhapagamento.contratotrabalhofolhapagamento_verbafolhapagamento_fk"/>
    <FkGl bkCl="ff000000" nm="personalerp.verbafolhapagamento.verba_verbafolhapagamento_fk"/>
    <Notes/>
    <Zones/>
  </Dgm>
  <RnmMgr NxRnmId="1"/>
  <DbDocOptionMgr>
    <BasicOptionMgr>
      <Name>db.doc.option.mgr</Name>
      <BoolOpt lbl="Diagrams" nm="doc.diagrams" on="1" spl="0"/>
      <BoolOpt lbl="Foreign Keys" nm="doc.fks" on="1" spl="0"/>
      <BoolOpt lbl="Indexes" nm="doc.indexes" on="1" spl="0"/>
      <BoolOpt lbl="Overwrite CSS File" nm="doc.overwrite.css" on="1" spl="0"/>
      <BoolOpt lbl="Procedures" nm="doc.procs" on="1" spl="0"/>
      <BoolOpt lbl="Schemas" nm="doc.schemas" on="1" spl="0"/>
      <BoolOpt lbl="Sequences" nm="doc.sequences" on="1" spl="0"/>
      <BoolOpt lbl="Tables" nm="doc.tables" on="1" spl="0"/>
      <BoolOpt lbl="Triggers" nm="doc.triggers" on="1" spl="0"/>
      <BoolOpt lbl="Views" nm="doc.views" on="1" spl="0"/>
    </BasicOptionMgr>
  </DbDocOptionMgr>
  <OpenEditors>
    <OpenEditor ClsNm="Diagram" fqn="null.Acesso" selected="1"/>
  </OpenEditors>
  <TreePaths>
    <TreePath/>
    <TreePath>/Schemas (2)</TreePath>
    <TreePath>/Schemas (2)/personalerp</TreePath>
    <TreePath>/Schemas (2)/personalerp/Tables (162)</TreePath>
    <TreePath>/Diagrams (2)</TreePath>
    <TreePath>/Diagrams (2)/personalerp</TreePath>
  </TreePaths>
</Db>
